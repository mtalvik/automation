---
# Test playbook for nginx-webserver role
- name: "Test nginx role"
  hosts: localhost
  connection: local
  become: yes

  vars:
    # Test configuration
    nginx_ssl_enabled: true
    nginx_vhosts:
    - name: "test.local"
      root: "/var/www/test"
      ssl: true
    - name: "demo.local"
      root: "/var/www/demo"
      ssl: false

    # Custom settings
    nginx_worker_processes: 4
    nginx_gzip_enabled: true

  roles:
  - nginx-webserver

  post_tasks:
  - name: "Final verification"
    debug:
      msg: |
        ðŸŽ“ ITS-24 Nginx Role Test Complete!

        âœ… Nginx installed and configured
        âœ… SSL certificates generated
        âœ… Virtual hosts: {{ nginx_vhosts | length }}
        âœ… Test URLs:
           - http://localhost (should redirect to HTTPS)
           - https://localhost (SSL test site)

        Role is ready for production! ðŸš€
