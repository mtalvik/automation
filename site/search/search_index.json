{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Automatiseerimine","text":"<p>Tere tulemast infrastruktuuri automatiseerimise kursusele! See kursus \u00f5petab kaasaegseid DevOps t\u00f6\u00f6riistu ja praktikaid.</p>"},{"location":"#mida-opime","title":"Mida \u00f5pime?","text":"<ul> <li>Git &amp; Versioonihaldus - Koost\u00f6\u00f6 ja koodihalduse alused</li> <li>Docker - Konteineriseerimine ja mikroteenused</li> <li>Ansible - Konfiguratsioonihaldus ja automatiseerimine</li> <li>CI/CD - Pidev integratsioon ja tarnimine</li> <li>Kubernetes - Konteinerite orkestreerimine</li> <li>Terraform - Infrastructure as Code</li> </ul>"},{"location":"#kiirlingid","title":"Kiirlingid","text":""},{"location":"#praktikumid","title":"Praktikumid","text":"<ul> <li>Git alused</li> <li>Docker praktikum</li> <li>Ansible praktikum</li> </ul>"},{"location":"#kodutood","title":"Kodut\u00f6\u00f6d","text":"<ul> <li>Git kodut\u00f6\u00f6</li> <li>Docker kodut\u00f6\u00f6</li> <li>Ansible kodut\u00f6\u00f6</li> </ul>"},{"location":"#abi-ja-tugi","title":"Abi ja tugi","text":"<ul> <li>GitHub Discussions</li> <li>\u00d5ppematerjalid</li> </ul>"},{"location":"#ajakava","title":"Ajakava","text":"N\u00e4dal Teema Praktikum Kodut\u00f6\u00f6 9 Git &amp; Versioonihaldus Jah Jah 10-12 Docker Jah Jah 13-15 Ansible Jah Jah 16-19 CI/CD Jah Jah 20-21 Kubernetes Jah Jah 22-23 Terraform Jah Jah <p>\u00d5ppej\u00f5ud: Maria Talvik</p>"},{"location":"curriculum/","title":"Automatiseerimise Kursuse \u00d5ppekava","text":"<p>ITS-24 - T\u00e4iskasvanute klass (8 moodulit)</p>"},{"location":"curriculum/#kursuse-ulevaade","title":"Kursuse \u00dclevaade","text":"<p>See kursus katab olulisi automatiseerimise t\u00f6\u00f6riistu ja praktikaid kaasaegsetes DevOps t\u00f6\u00f6voogudes. Iga moodul sisaldab  kontakt\u00f5pet ning struktureeritud kodut\u00f6id.</p>"},{"location":"curriculum/#kursuse-struktuur","title":"Kursuse Struktuur","text":"Moodul Teema Kontaktaeg Kodut\u00f6\u00f6 \u00dclesanne 1 Kodut\u00f6\u00f6 \u00dclesanne 2 1 Git Versioonihaldus 4h Git projekti portfoolio n\u00e4idetega Lugemine: Git ajalugu, sisemused, edasij\u00f5udnud kontseptsioonid 2 Ansible Alused 4h Kohalik LAMP stack (VirtualBox/Vagrant) Lugemine: Ansible arhitektuur, YAML, moodulid 3 Docker Alused 4h Mitme-rakendusega konteineriseerimise projekt Lugemine: Docker arhitektuur, turvalisus 4 Docker Orkestratsioon 4h T\u00e4ispinu kohalik paigaldus Lugemine: Konteinerite orkestreerimise mustrid 5 Ansible Edasij\u00f5udnud Iseseisvad Labored Edasij\u00f5udnud funktsioonide laboriharjutused Lugemine: Jinja2, muutujad, Ansible Vault 6 Ansible Rollid Iseseisvad Labored Rolli loomise labor + Puppet v\u00f5rdlus Lugemine: Rollide parimad praktikad, Galaxy 7 Terraform Alused 2h Kohalik infrastruktuur (failid, konfiguratsioon) Lugemine: IaC p\u00f5him\u00f5tted, Terraform mustrid 8 CI/CD + Kubernetes 2h T\u00e4ielik pipeline + K8s \u00fclevaade (kohalikikube) Lugemine: GitOps, Kubernetes, produktsioon"},{"location":"curriculum/#moodulite-detailid","title":"Moodulite Detailid","text":""},{"location":"curriculum/#moodul-1-git-versioonihaldus-4h","title":"Moodul 1: Git Versioonihaldus (4h)","text":"<p>Kontaktaja Struktuur: - Git kontseptsioonid ja t\u00f6\u00f6voog (1h) - P\u00f5hilised k\u00e4sud praktikas (1h) - GitHub koost\u00f6\u00f6 (1h) - Harude loomine ja \u00fchendamine praktikas (1h) - Boonus: Edasij\u00f5udnud Git funktsioonid (hooks, submodules, kohandatud k\u00e4sud)</p> <p>K\u00e4sitletud Teemad: - Git alused ja versioonihalduse p\u00f5him\u00f5tted - Kohalik Git kasutamine ja p\u00f5hilised k\u00e4sud - GitHub ja kaugrepositooriumid - Meeskonnat\u00f6\u00f6 ja Pull Request'id</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: T\u00e4ielik Git projekti portfoolio harude t\u00f6\u00f6vooga - \u00dclesanne 2: Loe Git ajalugu, sisemusi ja edasij\u00f5udnud kontseptsioone (2-)</p>"},{"location":"curriculum/#moodul-2-ansible-alused-4h","title":"Moodul 2: Ansible Alused (4h)","text":"<p>Kontaktaja Struktuur: - Ansible arhitektuuri \u00fclevaade - Kohalik VM seadistus Vagrant'iga - SSH seadistus ja inventory (1h) - Ad-hoc k\u00e4skude praktika (1h) - Esimese playbook'i loomine (1h) - Boonus: Edasij\u00f5udnud playbook'id, veakk\u00e4sitlemine, kohandatud moodulid</p> <p>K\u00e4sitletud Teemad: - Ansible arhitektuur ja SSH konfiguratsioon - Kohalik testimine Vagrant/VirtualBox'iga - Inventory haldamine ja ad-hoc k\u00e4sud - YAML s\u00fcntaks ja p\u00f5hilised playbook'id - Esimesed automatiseerimise t\u00f6\u00f6vood</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: Paigalda LAMP stack kohalikult Vagrant VM'idega + palju n\u00e4iteid - \u00dclesanne 2: Loe Ansible arhitektuur, YAML ja moodulite \u00f6kos\u00fcsteem (2-)</p>"},{"location":"curriculum/#moodul-3-docker-alused-4h","title":"Moodul 3: Docker Alused (4h)","text":"<p>Kontaktaja Struktuur: - Konteinerite kontseptsioonid vs VM'id - Docker'i installimine ja esimene konteiner (1h) - Dockerfile'i loomise t\u00f6\u00f6tuba (1.5h) - P\u00f5hiline v\u00f5rgustik ja helitugevused (1h) - Boonus: Mitme-etapiline ehitus, turvalisus, edasij\u00f5udnud v\u00f5rgustik</p> <p>K\u00e4sitletud Teemad: - Konteineritehnoloogia \u00fclevaade - Docker'i installimine ja p\u00f5hilised k\u00e4sud - Dockerfile'i loomine ja parimad praktikad - Docker'i v\u00f5rgustik ja helitugevused</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: Konteineriseeri mitu rakendust paljude n\u00e4idetega - \u00dclesanne 2: Loe Docker'i arhitektuur, turvalisus ja parimad praktikad (2-)</p>"},{"location":"curriculum/#moodul-4-docker-orkestratsioon-4h","title":"Moodul 4: Docker Orkestratsioon (4h)","text":"<p>Kontaktaja Struktuur: - Mitme-konteineriga kontseptsioonid - Compose faili loomine (1.5h) - Mitme-teenusega rakenduse seadistus (1.5h) - Kohalik orkestratsioon n\u00e4idetega</p> <p>K\u00e4sitletud Teemad: - Docker Compose s\u00fcntaks ja kasutamine - Mitme-konteineriga rakendused - Keskkonna-spetsiifilised konfiguratsioonid - Kohalikud arenduse t\u00f6\u00f6vood</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: Paigalda full-stack rakendus kohalikult paljude teenuste n\u00e4idetega - \u00dclesanne 2: Loe konteinerite orkestreerimise mustreid ja strateegiaid (2-)</p>"},{"location":"curriculum/#moodul-5-ansible-edasijoudnud-iseseisvad-labored","title":"Moodul 5: Ansible Edasij\u00f5udnud (Iseseisvad Labored)","text":"<p>Iseseisva Labori Struktuur: - Juhendatud harjutused samm-sammuliste juhistega - Muutujate ja Jinja2 mallide labor - K\u00e4sitlejate ja veak\u00e4sitlemise labor - Ansible Vault turvalisuse labor - Mitmesugused praktilised n\u00e4ited</p> <p>K\u00e4sitletud Teemad: - Muutujad ja Jinja2 mallid - K\u00e4sitlejad ja veak\u00e4sitlemise strateegiad - Ansible Vault saladuste haldamiseks - Parimad praktikad ja optimeerimine</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: L\u00f5peta k\u00f5ik iseseisva labori harjutused n\u00e4idetega - \u00dclesanne 2: Loe Jinja2 mallid, muutujad ja Vault turvalisus (2-)</p>"},{"location":"curriculum/#moodul-6-ansible-rollid-iseseisvad-labored","title":"Moodul 6: Ansible Rollid (Iseseisvad Labored)","text":"<p>Iseseisva Labori Struktuur: - Rolli loomise samm-sammuline juhend - Rolli muutujate ja s\u00f5ltuvuste labor - Ansible Galaxy uurimine - Puppet vs Ansible v\u00f5rdlusharjutus</p> <p>K\u00e4sitletud Teemad: - Ansible rollide struktuur ja parimad praktikad - Rolli muutujad ja s\u00f5ltuvused - Ansible Galaxy kogukond - Konfiguratsiooni haldamise v\u00f5rdlus</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: Loo roll + Puppet v\u00f5rdlus paljude n\u00e4idetega - \u00dclesanne 2: Loe rolli parimaid praktikaid ja Galaxy \u00f6kos\u00fcsteemi (2-)</p>"},{"location":"curriculum/#moodul-7-terraform-alused-2h-kontaktope","title":"Moodul 7: Terraform Alused (2h Kontakt\u00f5pe)","text":"<p>Kontaktaja Struktuur: - Infrastructure as Code \u00fclevaade - Kohalik Terraform demo (failis\u00fcsteemi haldamine) (1h) - Praktiline: Loo kohalik infrastruktuur - Boonus: Moodulid, t\u00f6\u00f6ruumid, edasij\u00f5udnud mallid</p> <p>K\u00e4sitletud Teemad: - Terraform alused ja HCL keel - Kohalikud providerid (failis\u00fcsteemi haldamine) - State'i haldamise kontseptsioonid - Infrastructure as Code p\u00f5him\u00f5tted</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: Kohalik infrastruktuuriprojekt (failid, konfiguratsioon, skriptid) paljude n\u00e4idetega - \u00dclesanne 2: Loe IaC p\u00f5him\u00f5tteid ja Terraform mustreid (2-)</p>"},{"location":"curriculum/#moodul-8-cicd-kubernetes-2h-kontaktope","title":"Moodul 8: CI/CD + Kubernetes (2h Kontakt\u00f5pe)","text":"<p>Kontaktaja Struktuur: - T\u00e4ieliku automatiseerimise pipeline demo (1h) - Kubernetes \u00fclevaade kohalikuikube'iga - K\u00f5igi t\u00f6\u00f6riistade integratsioon</p> <p>K\u00e4sitletud Teemad: - GitHub Actions eelnevate t\u00f6\u00f6riistadega - T\u00e4ielik automatiseerimise t\u00f6\u00f6voog - Kubernetes tutvustus (kohalik) - DevOps pipeline integratsioon</p> <p>Kodut\u00f6\u00f6d: - \u00dclesanne 1: T\u00e4ielik automatiseerimise projekt k\u00f5igi t\u00f6\u00f6riistade integratsiooniga + n\u00e4ited - \u00dclesanne 2: Loe GitOps, Kubernetes ja produktsiooni mustreid (2-)</p>"},{"location":"curriculum/#failide-struktuur","title":"Failide Struktuur","text":""},{"location":"curriculum/#iga-moodul-sisaldab","title":"Iga Moodul Sisaldab:","text":"<pre><code>modul_nimi/\n\u251c\u2500\u2500 lecture.md              # Peamine loengumaterjal\n\u251c\u2500\u2500 lab.md                  # Praktilised harjutused\n\u251c\u2500\u2500 homework.md             # Praktiline \u00fclesanne (\u00dclesanne 1)\n\u2514\u2500\u2500 reading_materials.md    # Teooria ja taust (\u00dclesanne 2)\n</code></pre>"},{"location":"curriculum/#vordlusmaterjal-kui-rakendatav","title":"V\u00f5rdlusmaterjal (kui rakendatav):","text":"<pre><code>modul_nimi/\n\u251c\u2500\u2500 reference/              # Kiired viited ja juhendid\n\u2514\u2500\u2500 examples/               # Koodin\u00e4ited ja mallid\n</code></pre>"},{"location":"curriculum/#opieesmargid","title":"\u00d5pieesm\u00e4rgid","text":"<ul> <li>Praktiline kogemus k\u00f5igi automatiseerimise t\u00f6\u00f6riistadega</li> <li>Projektip\u00f5hise \u00f5ppimise l\u00e4henemine</li> <li>Meeskonnat\u00f6\u00f6 oskused</li> <li>T\u00f6\u00f6stuse standardid ja parimad praktikad</li> <li>Iseseisev \u00f5ppimine lugemi\u00fclesannete kaudu</li> </ul>"},{"location":"curriculum/#hindamisstrateegia","title":"Hindamisstrateegia","text":"<ul> <li>\u00dclesanne 1: Praktiline t\u00f6\u00f6 (hinnatakse funktsionaalsuse j\u00e4rgi)</li> <li>\u00dclesanne 2: Lugemise refleksioon (hinnatakse m\u00f5istmise j\u00e4rgi)</li> <li>Portfoolio: GitHub repositoorium kogu t\u00f6\u00f6ga</li> <li>L\u00f5puprojekt: K\u00f5igi t\u00f6\u00f6riistade integratsioon</li> </ul>"},{"location":"curriculum/#seadistamise-juhendid","title":"Seadistamise Juhendid","text":""},{"location":"curriculum/#enne-kursuse-alustamist","title":"Enne kursuse alustamist:","text":"<ul> <li>Windows kasutajad: Windows Seadistamise Juhend</li> <li>Linux/macOS kasutajad: Kodu Masina Ehitus Juhend</li> </ul>"},{"location":"curriculum/#vajalikud-tooriistad","title":"Vajalikud t\u00f6\u00f6riistad:","text":"<ul> <li>Git (versioonihaldus)</li> <li>Docker Desktop (konteinerid)</li> <li>Ansible (konfiguratsiooni haldamine)</li> <li>Terraform (infrastruktuuri kood)</li> <li>kubectl + Minikube (Kubernetes)</li> </ul>"},{"location":"ansible_advanced/homework/","title":"Deploy Web Server with Vault &amp; Templates","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Apache serveri juurutamine Ansible Vault salajaste andmete ja Jinja2 mallide abil Aeg: 1.5-2h praktilist juurutamist</p> <p>Te saate valmis starter failid - fookus on Vault'i ja template'ide \u00f5ppimisel!</p>"},{"location":"ansible_advanced/homework/#1-projekt-secure-web-server-deployment","title":"1. Projekt: Secure Web Server Deployment","text":""},{"location":"ansible_advanced/homework/#mida-te-ehitate","title":"Mida te ehitate:","text":"<ul> <li>\ud83c\udf10 Apache web server d\u00fcnaamilise sisuga</li> <li>\ud83d\udd10 Vault-kr\u00fcptitud salajased andmed (paroolid, API v\u00f5tmed)</li> <li>\ud83d\udcc4 Jinja2 mallid d\u00fcnaamilise HTML genereerimiseks</li> <li>\ud83d\udd27 Teenuse k\u00e4sitlejad automaatsete taask\u00e4ivituste jaoks</li> <li>\ud83d\udcca S\u00fcsteemi teabe kuvamine serveri statistikaga</li> </ul>"},{"location":"ansible_advanced/homework/#mida-te-opite","title":"Mida te \u00f5pite:","text":"<ul> <li>Ansible Vault salajaste andmete haldamine</li> <li>Mallip\u00f5hine konfiguratsioon</li> <li>Teenuse haldamine k\u00e4sitlejate abil</li> <li>Turvaline identimisteabe haldamine</li> </ul>"},{"location":"ansible_advanced/homework/#2-setup-project","title":"2. Setup Project","text":""},{"location":"ansible_advanced/homework/#21-veebi-varade-hankimine-ja-automatiseerimisfailide-loomine","title":"2.1 Veebi varade hankimine ja automatiseerimisfailide loomine","text":"<pre><code># Kodut\u00f6\u00f6 kataloogi loomine\nmkdir ~/ansible-advanced-homework\ncd ~/ansible-advanced-homework\n\n# Ainult veebi varade kloonimine (HTML mallid, CSS)\ngit clone https://github.com/[teacher-repo]/ansible-web-assets.git assets\ncp -r assets/templates assets/static .\nrm -rf assets/\n\n# Sinu git hoidla initsialiseerimine automatiseerimisfailide jaoks\ngit init\ngit remote add origin https://github.com/[your-username]/ansible-advanced-homework.git\n\n# Ansible struktuuri loomine\nmkdir group_vars\ntouch ansible.cfg inventory.yml site.yml README.md\n</code></pre>"},{"location":"ansible_advanced/homework/#22-automatiseerimise-konfiguratsiooni-loomine","title":"2.2 Automatiseerimise konfiguratsiooni loomine","text":"<p>Fail: <code>ansible.cfg</code>: <pre><code>[defaults]\ninventory = inventory.yml\nhost_key_checking = False\n</code></pre></p> <p>Fail: <code>inventory.yml</code>: <pre><code>all:\n  hosts:\n    webserver:\n      ansible_host: localhost\n      ansible_connection: local\n  vars:\n    server_name: \"my-web-server\"\n    admin_email: \"admin@example.com\"\n</code></pre></p>"},{"location":"ansible_advanced/homework/#23-esimene-commit-ainult-automatiseerimisfailid","title":"2.3 Esimene commit (ainult automatiseerimisfailid)","text":"<pre><code># Lisa loodud automatiseerimisfailid\ngit add ansible.cfg inventory.yml templates/ static/\ngit commit -m \"Loodud Ansible konfiguratsioon + lisatud veebi varad\"\n</code></pre>"},{"location":"ansible_advanced/homework/#3-create-vault-file","title":"3. Create Vault File","text":""},{"location":"ansible_advanced/homework/#31-vaulti-loomise-oppimine","title":"3.1 Vault'i loomise \u00f5ppimine","text":"<pre><code># Kr\u00fcptitud vault faili loomine\nansible-vault create group_vars/vault.yml\n# Parooli k\u00fcsimisel kasuta: vault123\n</code></pre>"},{"location":"ansible_advanced/homework/#32-salajaste-andmete-lisamine-vaulti-kirjuta-need","title":"3.2 Salajaste andmete lisamine vault'i (KIRJUTA NEED!)","text":"<pre><code># Lisa need salajased andmed oma vault faili:\nvault_mysql_password: \"mysql_secret_123\"\nvault_admin_password: \"admin_secret_456\"\nvault_website_title: \"Minu Turvaline Veebiserver\"\nvault_api_key: \"api-key-12345-secret\"\nvault_student_name: \"Sinu Nimi Siin\"\n</code></pre>"},{"location":"ansible_advanced/homework/#33-vaulti-operatsioonide-testimine","title":"3.3 Vault'i operatsioonide testimine","text":"<pre><code># Vaata oma kr\u00fcptitud vault faili\ncat group_vars/vault.yml\n# Peaks n\u00e4itama kr\u00fcptitud sisu\n\n# Vaata vault'i sisu (dekr\u00fcpteeri kontrollimiseks)\nansible-vault view group_vars/vault.yml\n# Parool: vault123\n\n# Redigeeri vault faili vajadusel\nansible-vault edit group_vars/vault.yml\n</code></pre>"},{"location":"ansible_advanced/homework/#34-vaulti-loomise-commit","title":"3.4 Vault'i loomise commit","text":"<pre><code>git add group_vars/vault.yml\ngit commit -m \"Loodud kr\u00fcptitud vault salajaste andmetega\"\n</code></pre>"},{"location":"ansible_advanced/homework/#4-create-playbook","title":"4. Create Playbook","text":""},{"location":"ansible_advanced/homework/#41-peamise-playbooki-kirjutamine","title":"4.1 Peamise playbook'i kirjutamine","text":"<p>Fail: <code>site.yml</code>: <pre><code>---\n- name: \"Web server with Vault and Templates\"\n  hosts: all\n  become: yes\n  vars:\n    web_root: \"/var/www/html\"\n    service_name: \"apache2\"\n\n  tasks:\n    - name: \"Install Apache web server\"\n      package:\n        name: \"{{ service_name }}\"\n        state: present\n      notify: \"start apache\"\n\n    - name: \"Create web directory\"\n      file:\n        path: \"{{ web_root }}\"\n        state: directory\n        mode: '0755'\n\n    - name: \"Generate HTML page from template\"\n      template:\n        src: index.html.j2\n        dest: \"{{ web_root }}/index.html\"\n        mode: '0644'\n      notify: \"restart apache\"\n\n    - name: \"Create server info file\"\n      copy:\n        content: |\n          Server: {{ ansible_hostname }}\n          Student: {{ vault_student_name }}\n          MySQL Password Length: {{ vault_mysql_password | length }}\n          Generated: {{ ansible_date_time.iso8601 }}\n        dest: \"{{ web_root }}/server-info.txt\"\n        mode: '0644'\n\n    - name: \"Ensure Apache is running\"\n      service:\n        name: \"{{ service_name }}\"\n        state: started\n        enabled: yes\n\n  handlers:\n    - name: \"start apache\"\n      service:\n        name: \"{{ service_name }}\"\n        state: started\n\n    - name: \"restart apache\"\n      service:\n        name: \"{{ service_name }}\"\n        state: restarted\n</code></pre></p>"},{"location":"ansible_advanced/homework/#42-playbooki-testimine","title":"4.2 Playbook'i testimine","text":"<pre><code># Kontrolli s\u00fcntaksit (oluline!)\nansible-playbook --syntax-check site.yml\n\n# Kuiv jooks esmalt\nansible-playbook --check site.yml --ask-vault-pass\n# Parool: vault123\n\n# Juurutamine p\u00e4riselt\nansible-playbook site.yml --ask-vault-pass\n</code></pre>"},{"location":"ansible_advanced/homework/#43-juurutamise-kontrollimine","title":"4.3 Juurutamise kontrollimine","text":"<pre><code># Kontrolli, kas Apache t\u00f6\u00f6tab\nsudo systemctl status apache2\n\n# Testi veebiserverit\ncurl http://localhost\n\n# Kontrolli genereeritud faile\ncat /var/www/html/index.html | head -10\ncat /var/www/html/server-info.txt\n\n# Ava brauseris\necho \"Ava brauser: http://localhost\"\n</code></pre>"},{"location":"ansible_advanced/homework/#44-playbooki-loomise-commit","title":"4.4 Playbook'i loomise commit","text":"<pre><code>git add site.yml\ngit commit -m \"Loodud t\u00e4ielik playbook vault'i ja mallidega\"\n</code></pre>"},{"location":"ansible_advanced/homework/#5-test-vault-and-handler-operations","title":"5. Test Vault and Handler Operations","text":""},{"location":"ansible_advanced/homework/#51-vaulti-operatsioonide-testimine","title":"5.1 Vault'i operatsioonide testimine","text":"<pre><code># Kontrolli praegust vault'i sisu\nansible-vault view group_vars/vault.yml\n\n# Muuda vault'i salajast andmet\nansible-vault edit group_vars/vault.yml\n# Muuda vault_website_title v\u00e4\u00e4rtuseks \"Minu Uuendatud Sait - [Sinu Nimi]\"\n\n# Juuruta uue salajase andmega\nansible-playbook site.yml --ask-vault-pass\n\n# Kontrolli muudatust brauseris\ncurl http://localhost | grep \"Minu Uuendatud Sait\"\n</code></pre>"},{"location":"ansible_advanced/homework/#52-kasitleja-funktsionaalsuse-testimine","title":"5.2 K\u00e4sitleja funktsionaalsuse testimine","text":"<pre><code># Tee mallis muudatus (k\u00e4ivitab k\u00e4sitleja)\necho \"&lt;!-- Muudetud $(date) --&gt;\" &gt;&gt; templates/index.html.j2\n\n# Juuruta ja j\u00e4lgi k\u00e4sitleja k\u00e4ivitamist\nansible-playbook site.yml --ask-vault-pass -v\n# Peaks n\u00e4gema \"restart apache\" k\u00e4sitleja k\u00e4ivitamist\n\n# Kontrolli Apache taask\u00e4ivitumist\nsudo systemctl status apache2 | grep \"Active since\"\n</code></pre>"},{"location":"ansible_advanced/homework/#53-playbooki-funktsioonide-testimine","title":"5.3 Playbook'i funktsioonide testimine","text":"<pre><code># K\u00e4ivita ainult kindlad \u00fclesanded siltidega (kui saadaval)\nansible-playbook site.yml --ask-vault-pass --list-tasks\n\n# K\u00e4ivita kontrollire\u017eiimis (kuiv jooks)\nansible-playbook site.yml --ask-vault-pass --check\n\n# K\u00e4ivita t\u00e4iendava \u00fcksikasjalikkusega\nansible-playbook site.yml --ask-vault-pass -vv\n</code></pre>"},{"location":"ansible_advanced/homework/#54-operatsionaalse-testimise-commit","title":"5.4 Operatsionaalse testimise commit","text":"<pre><code>git add .\ngit commit -m \"Testitud vault'i operatsioone ja k\u00e4sitleja funktsionaalsust\"\ngit push origin main\n</code></pre>"},{"location":"ansible_advanced/homework/#6-final-documentation-and-evidence","title":"6. Final Documentation and Evidence","text":""},{"location":"ansible_advanced/homework/#61-readmemd-uuendamine","title":"6.1 README.md uuendamine","text":"<p>T\u00e4ida <code>README.md</code> mall: <pre><code># Ansible Kodut\u00f6\u00f6 - Vault ja Mallid\n\n## Mida ma ehitasin\n- Apache veebiserver d\u00fcnaamilise sisuga\n- Kr\u00fcptitud vault salajased andmed turvalise identimisteabe salvestamiseks\n- Jinja2 mallid d\u00fcnaamilise HTML genereerimiseks\n- Teenuse k\u00e4sitlejad automaatsete taask\u00e4ivituste jaoks\n\n## Juurutamise k\u00e4sud\n```bash\n# Klooni ja juuruta\ngit clone [repository-url]\ncd ansible-advanced-homework\nansible-playbook site.yml --ask-vault-pass\n# Vault parool: vault123\n</code></pre></p>"},{"location":"ansible_advanced/homework/#tootavad-tulemused","title":"T\u00f6\u00f6tavad tulemused","text":"<ul> <li>Veebiserver: http://localhost</li> <li>N\u00e4itab kr\u00fcptitud vault andmeid turvaliselt</li> <li>Mall genereerib d\u00fcnaamilist sisu</li> <li>K\u00e4sitlejad taask\u00e4ivitavad teenused muudatuste korral</li> </ul>"},{"location":"ansible_advanced/homework/#mida-ma-oppisin","title":"Mida ma \u00f5ppisin","text":"<ul> <li>Ansible Vault kr\u00fcptib tundlikke andmeid</li> <li>Jinja2 mallid loovad d\u00fcnaamilisi konfiguratsioone</li> <li>K\u00e4sitlejad k\u00e4ivituvad ainult muudatuste korral</li> <li>Vault paroolid kaitsevad salajasi andmeid git hoidlates</li> </ul>"},{"location":"ansible_advanced/homework/#toendid","title":"T\u00f5endid","text":"<ul> <li>Ekraanipildid <code>screenshots/</code> kaustas</li> <li>T\u00f6\u00f6tav veebiserver demonstreeritav</li> <li>Git ajalugu n\u00e4itab arengut <pre><code>### 6.2 Tee ekraanipildid\n\n**Vajalikud ekraanipildid:**\n1. **Vault'i sisu**: `ansible-vault view group_vars/vault.yml`\n2. **Juurutatud veebisait**: Brauser n\u00e4itab http://localhost\n3. **Apache olek**: `sudo systemctl status apache2`\n4. **Mall tegevuses**: N\u00e4ita d\u00fcnaamilist sisu sinu kohandustega\n\n### 6.3 L\u00f5plik commit ja push\n\n```bash\n# L\u00f5plik dokumentatsiooni commit\ngit add README.md screenshots/\ngit commit -m \"L\u00f5plik dokumentatsioon - N\u00e4dal 13 kodut\u00f6\u00f6 valmis\"\n\n# Push GitHub'i\ngit push origin main\n\n# Loo puhas hoidla struktuur\nmkdir -p docs/evidence docs/automation\nmv ansible.cfg inventory.yml site.yml group_vars/ docs/automation/\nmv templates/ static/ docs/automation/\nmv screenshots/ docs/evidence/\n\n# L\u00f5plik organiseeritud commit\ngit add docs/\ngit commit -m \"Kodut\u00f6\u00f6 organiseeritud \u00f5igesse struktuuri\"\ngit push origin main\n</code></pre></li> </ul>"},{"location":"ansible_advanced/homework/#7-repository-submission-requirements","title":"7. Repository Submission Requirements","text":""},{"location":"ansible_advanced/homework/#hoidla-struktuur-peab-sisaldama","title":"Hoidla struktuur peab sisaldama:","text":"<pre><code>ansible-advanced-homework/\n\u251c\u2500\u2500 README.md                          # T\u00e4ielik dokumentatsioon\n\u251c\u2500\u2500 docs/\n\u2502   \u251c\u2500\u2500 automation/                    # SINU automatiseerimisfailid\n\u2502   \u2502   \u251c\u2500\u2500 ansible.cfg\n\u2502   \u2502   \u251c\u2500\u2500 inventory.yml  \n\u2502   \u2502   \u251c\u2500\u2500 site.yml\n\u2502   \u2502   \u251c\u2500\u2500 group_vars/vault.yml\n\u2502   \u2502   \u2514\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 evidence/                      # T\u00f6\u00f6 t\u00f5endid\n\u2502       \u251c\u2500\u2500 screenshots/\n\u2502       \u2502   \u251c\u2500\u2500 vault-contents.png\n\u2502       \u2502   \u251c\u2500\u2500 website-working.png\n\u2502       \u2502   \u2514\u2500\u2500 apache-status.png\n\u2502       \u2514\u2500\u2500 deployment-log.txt\n\u2514\u2500\u2500 .gitignore\n</code></pre>"},{"location":"ansible_advanced/homework/#esitamise-meetod","title":"Esitamise meetod:","text":"<ol> <li>GitHub hoidla link esitatud kursuse s\u00fcsteemis</li> <li>Hoidla peab olema avalik \u00fclevaatamiseks</li> <li>Selge esitlus - puhas, organiseeritud, dokumenteeritud</li> <li>T\u00f6\u00f6tav demonstreerimine - \u00f5petaja saab kloonida ja juurutada</li> </ol>"},{"location":"ansible_advanced/homework/#8-edu-nouanded","title":"8. Edu n\u00f5uanded","text":"<ol> <li>Klooni esmalt, koodi hiljem - Alusta t\u00f6\u00f6tava hoidlaga</li> <li>Testi iga muudatust - Juuruta p\u00e4rast iga muudatust</li> <li>Dokumenteeri k\u00f5ike - Tee ekraanipildid edenedes</li> <li>M\u00f5ista vault'i turvalisust - \u00c4ra kunagi commita dekr\u00fcptitud salajasi andmeid</li> <li>Harjuta k\u00e4sitlejaid - Tee muudatusi ja n\u00e4e teenuse taask\u00e4ivitumisi</li> <li>Kasuta git'i korrektselt - Commit p\u00e4rast iga t\u00f6\u00f6tavat sammu</li> </ol>"},{"location":"ansible_advanced/homework/#9-ajakava","title":"9. Ajakava","text":"<pre><code>15 min: Veebi varade hankimine + automatiseerimisfailide loomine\n20 min: Vault faili loomine ja testimine\n25 min: Playbook'i kirjutamine ja juurutamine\n20 min: Vault'i/k\u00e4sitleja operatsioonide testimine\n10 min: L\u00f5plik dokumentatsioon ja ekraanipildid\n\nKokku: 1h 30min (t\u00e4iuslik 2h labori jaoks piisava varuga!)\n</code></pre>"},{"location":"ansible_advanced/homework/#10-pohilised-opiteemad","title":"10. P\u00f5hilised \u00f5piteemad","text":""},{"location":"ansible_advanced/homework/#opilased-omandavad","title":"\u00d5pilased omandavad:","text":"<ul> <li>\ud83d\udd10 Ansible Vault - kr\u00fcpti ja halda salajasi andmeid turvaliselt</li> <li>\ud83d\udcc4 Jinja2 Mallid - loo d\u00fcnaamilisi konfiguratsioone</li> <li>\ud83d\udd27 Teenuse K\u00e4sitlejad - automatiseeri teenuse haldamine</li> <li>\ud83d\udcc1 Git T\u00f6\u00f6voog - hoidla haldamine</li> </ul>"},{"location":"ansible_advanced/homework/#praktilised-oskused","title":"Praktilised Oskused:","text":"<ul> <li>Turvaline identimisteabe haldamine infrastruktuuri koodis</li> <li>D\u00fcnaamiline konfiguratsiooni genereerimine erinevate keskkondade jaoks</li> <li>Teenuse taask\u00e4ivituse automatiseerimine konfiguratsiooni muudatuste korral</li> <li>Versioonikontrolli parimad tavad infrastruktuuri jaoks</li> </ul>"},{"location":"ansible_advanced/lab/","title":"Ansible Advanced Lab: Template-based Configuration","text":"<p>Kestus: 2 tundi Eesm\u00e4rk: \u00d5ppida Ansible'i t\u00e4psemaid funktsioone ja luua d\u00fcnaamilisi konfiguratsioone</p>"},{"location":"ansible_advanced/lab/#opivaljundid","title":"\u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast laborit oskate: - D\u00fcnaamilised konfiguratsioonid Jinja2 template'itega - Muutujate hierarhia m\u00f5istmine ja kasutamine - Handler'ite kasutamise oskus - Ansible Vault kr\u00fcpteerimise oskus - T\u00f6\u00f6korras LAMP stack vault'iga</p>"},{"location":"ansible_advanced/lab/#1-advanced-variables-setup","title":"1. Advanced Variables Setup","text":""},{"location":"ansible_advanced/lab/#11-projekti-struktuuri-loomine-organiseeritud-struktuur","title":"1.1 Projekti struktuuri loomine - Organiseeritud struktuur","text":"<p>Miks struktureeritud projekt: - Suuremad projektid vajavad selget organisatsiooni - Erinevad keskkonnad (dev, staging, prod) vajavad erinevaid seadistusi - Team collaboration on lihtsam struktuuriga</p> <p>Loome professionaalse struktuuri sammhaaval:</p>"},{"location":"ansible_advanced/lab/#111-looge-peakaust","title":"1.1.1 Looge peakaust","text":"<pre><code>mkdir -p ~/ansible-advanced\ncd ~/ansible-advanced\n</code></pre>"},{"location":"ansible_advanced/lab/#112-looge-koik-vajalikud-kaustad","title":"1.1.2 Looge k\u00f5ik vajalikud kaustad","text":"<pre><code># P\u00f5histruktuur\nmkdir -p {inventory,group_vars,host_vars,roles,playbooks,templates,files}\n\n# Group variables struktuuri\nmkdir -p group_vars/{all,webservers,dbservers}\n\n# Host-spetsiifilised muutujad\nmkdir -p host_vars/{web1,web2,db1}\n</code></pre>"},{"location":"ansible_advanced/lab/#113-kontrollige-struktuuri","title":"1.1.3 Kontrollige struktuuri","text":"<pre><code>tree .  # v\u00f5i ls -la kui tree ei ole installitud\n</code></pre> <p>Peaks n\u00e4itama: <pre><code>.\n\u251c\u2500\u2500 files/\n\u251c\u2500\u2500 group_vars/\n\u2502   \u251c\u2500\u2500 all/\n\u2502   \u251c\u2500\u2500 dbservers/\n\u2502   \u2514\u2500\u2500 webservers/\n\u251c\u2500\u2500 host_vars/\n\u2502   \u251c\u2500\u2500 db1/\n\u2502   \u251c\u2500\u2500 web1/\n\u2502   \u2514\u2500\u2500 web2/\n\u251c\u2500\u2500 inventory/\n\u251c\u2500\u2500 playbooks/\n\u251c\u2500\u2500 roles/\n\u2514\u2500\u2500 templates/\n</code></pre></p>"},{"location":"ansible_advanced/lab/#12-inventory-seadistamine-serverite-hierarhia","title":"1.2 Inventory seadistamine - Serverite hierarhia","text":"<p>M\u00f5istame inventory struktuuri: - Groups - serverite grupid (webservers, dbservers) - Children - gruppide hierarhia - Vars - grupi-spetsiifilised muutujad</p> <p>Loome inventory faili sammhaaval:</p>"},{"location":"ansible_advanced/lab/#121-looge-pohi-inventory-fail","title":"1.2.1 Looge p\u00f5hi inventory fail","text":"<pre><code>touch inventory/hosts.yml\nnano inventory/hosts.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#122-lisage-server-gruppid","title":"1.2.2 Lisage server gruppid","text":"<pre><code>all:\n  children:\n    webservers:\n      hosts:\n        web1:\n          ansible_host: localhost\n          ansible_connection: local\n          server_id: 1\n          server_role: primary\n        web2:\n          ansible_host: localhost\n          ansible_connection: local\n          server_id: 2\n          server_role: secondary\n</code></pre>"},{"location":"ansible_advanced/lab/#123-lisage-group-variables","title":"1.2.3 Lisage group variables","text":"<pre><code>      vars:\n        http_port: 80\n        https_port: 443\n        web_root: \"/var/www/html\"\n</code></pre>"},{"location":"ansible_advanced/lab/#124-lisage-database-serverid","title":"1.2.4 Lisage database serverid","text":"<pre><code>    dbservers:\n      hosts:\n        db1:\n          ansible_host: localhost\n          ansible_connection: local\n          mysql_server_id: 1\n          mysql_role: master\n      vars:\n        mysql_port: 3306\n        mysql_data_dir: \"/var/lib/mysql\"\n</code></pre>"},{"location":"ansible_advanced/lab/#125-lisage-keskkonna-grupid","title":"1.2.5 Lisage keskkonna grupid","text":"<pre><code>    development:\n      children:\n        webservers:\n        dbservers:\n      vars:\n        app_env: \"development\"\n        debug_mode: true\n        ssl_enabled: false\n\n    production:\n      children:\n        webservers:\n        dbservers:\n      vars:\n        app_env: \"production\"\n        debug_mode: false\n        ssl_enabled: true\n</code></pre> <p>\ud83d\udca1 M\u00f5elge: Miks on kasulik grupeerida servereid nii rolli kui keskkonna j\u00e4rgi?</p>"},{"location":"ansible_advanced/lab/#13-variables-hierarchy-loomine","title":"1.3 Variables hierarchy loomine","text":"<p>Loome muutujate hierarhia sammhaaval:</p>"},{"location":"ansible_advanced/lab/#131-globaalsed-muutujad-group_varsallvarsyml","title":"1.3.1 Globaalsed muutujad (group_vars/all/vars.yml)","text":"<pre><code>touch group_vars/all/vars.yml\nnano group_vars/all/vars.yml\n</code></pre> <pre><code># K\u00f5ikidele serveritele \u00fchised seadistused\napp_name: \"advanced-lamp\"\napp_version: \"1.0.0\"\nadmin_email: \"admin@company.com\"\n\n# OS-spetsiifilised paketid (d\u00fcnaamilised)\napache_package: \"{% if ansible_os_family == 'Debian' %}apache2{% else %}httpd{% endif %}\"\nmysql_package: \"{% if ansible_os_family == 'Debian' %}mysql-server{% else %}mariadb-server{% endif %}\"\n\n# Keskkonna s\u00f5ltuvad seadistused\nbackup_enabled: \"{{ app_env == 'production' }}\"\nmonitoring_enabled: \"{{ app_env == 'production' }}\"\nlog_level: \"{% if debug_mode %}DEBUG{% else %}INFO{% endif %}\"\n</code></pre>"},{"location":"ansible_advanced/lab/#132-webserverite-muutujad-group_varswebserversvarsyml","title":"1.3.2 Webserverite muutujad (group_vars/webservers/vars.yml)","text":"<pre><code>touch group_vars/webservers/vars.yml\nnano group_vars/webservers/vars.yml\n</code></pre> <pre><code># Apache/Nginx seadistused\nmax_workers: \"{{ ansible_processor_vcpus * 2 }}\"\nmax_connections: 1000\nkeepalive_timeout: 65\n\n# PHP seadistused\nphp_version: \"7.4\"\nphp_memory_limit: \"{% if ansible_memtotal_mb &gt; 4096 %}512M{% else %}256M{% endif %}\"\nphp_max_execution_time: 30\n\n# Virtual hosts\nvirtual_hosts:\n  - name: \"{{ app_name }}.local\"\n    document_root: \"{{ web_root }}/{{ app_name }}\"\n    ssl_enabled: \"{{ ssl_enabled }}\"\n  - name: \"api.{{ app_name }}.local\"\n    document_root: \"{{ web_root }}/api\"\n    ssl_enabled: \"{{ ssl_enabled }}\"\n</code></pre>"},{"location":"ansible_advanced/lab/#133-database-serverite-muutujad-group_varsdbserversvarsyml","title":"1.3.3 Database serverite muutujad (group_vars/dbservers/vars.yml)","text":"<pre><code>touch group_vars/dbservers/vars.yml\nnano group_vars/dbservers/vars.yml\n</code></pre> <pre><code># MySQL konfigureerimine\nmysql_root_user: \"root\"\nmysql_bind_address: \"127.0.0.1\"\nmysql_max_connections: 100\n\n# D\u00fcnaamiline buffer pool arvutamine\nmysql_innodb_buffer_pool_size: \"{{ (ansible_memtotal_mb * 0.7) | int }}M\"\n\n# Andmebaasid\nmysql_databases:\n  - name: \"{{ app_name }}_{{ app_env }}\"\n    encoding: \"utf8mb4\"\n    collation: \"utf8mb4_unicode_ci\"\n\nmysql_users:\n  - name: \"{{ app_name }}_user\"\n    host: \"localhost\"\n    priv: \"{{ app_name }}_{{ app_env }}.*:ALL\"\n    # Parool tuleb vault'ist\n</code></pre> <p>\ud83d\udcdd M\u00e4rkused: - Kasutame Jinja2 loogikat d\u00fcnaamilisteks v\u00e4\u00e4rtusteks - Serverite v\u00f5imsus m\u00f5jutab konfiguratsiooni - Keskkond m\u00e4\u00e4rab turvalisuse taseme</p>"},{"location":"ansible_advanced/lab/#2-jinja2-templateite-loomine","title":"2. Jinja2 Template'ite loomine","text":""},{"location":"ansible_advanced/lab/#21-apache-virtual-host-template-dunaamiline-konfiguratsioon","title":"2.1 Apache virtual host template - D\u00fcnaamiline konfiguratsioon","text":"<p>Miks template'id on olulised: - \u00dcks template, mitu erinevat konfiguratsiooni - Automaatne kohandamine serverite j\u00e4rgi - V\u00e4hendab konfiguratsioonivigu</p> <p>Loome Apache virtual host template'i sammhaaval:</p>"},{"location":"ansible_advanced/lab/#211-looge-template-fail","title":"2.1.1 Looge template fail","text":"<pre><code>touch templates/apache_vhost.conf.j2\nnano templates/apache_vhost.conf.j2\n</code></pre>"},{"location":"ansible_advanced/lab/#212-alustage-pohistruktuuriga","title":"2.1.2 Alustage p\u00f5histruktuuriga","text":"<pre><code># {{ ansible_managed }}\n# Virtual Host for {{ item.name }}\n# Generated on {{ ansible_date_time.iso8601 }}\n\n&lt;VirtualHost *:{{ http_port }}&gt;\n    ServerName {{ item.name }}\n    DocumentRoot {{ item.document_root }}\n</code></pre>"},{"location":"ansible_advanced/lab/#213-lisage-conditionals","title":"2.1.3 Lisage conditionals","text":"<pre><code>    # Logging configuration\n    {% if debug_mode %}\n    LogLevel debug\n    {% else %}\n    LogLevel warn\n    {% endif %}\n\n    ErrorLog ${APACHE_LOG_DIR}/{{ item.name }}_error.log\n    CustomLog ${APACHE_LOG_DIR}/{{ item.name }}_access.log combined\n</code></pre>"},{"location":"ansible_advanced/lab/#214-lisage-keskkonna-spetsiifilised-seadistused","title":"2.1.4 Lisage keskkonna-spetsiifilised seadistused","text":"<pre><code>    &lt;Directory {{ item.document_root }}&gt;\n        Options Indexes FollowSymLinks\n        AllowOverride All\n        Require all granted\n\n        {% if app_env == 'production' %}\n        # Production security headers\n        Header always set X-Frame-Options DENY\n        Header always set X-Content-Type-Options nosniff\n        Header always set X-XSS-Protection \"1; mode=block\"\n        {% endif %}\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>"},{"location":"ansible_advanced/lab/#215-lisage-ssl-support-conditional","title":"2.1.5 Lisage SSL support (conditional)","text":"<pre><code>{% if item.ssl_enabled and ssl_enabled %}\n# SSL Virtual Host\n&lt;VirtualHost *:{{ https_port }}&gt;\n    ServerName {{ item.name }}\n    DocumentRoot {{ item.document_root }}\n\n    # SSL Configuration\n    SSLEngine on\n    SSLProtocol TLSv1.2 TLSv1.3\n\n    # SSL Certificates (will come from vault)\n    SSLCertificateFile {{ ssl_cert_path | default('/etc/ssl/certs/server.crt') }}\n    SSLCertificateKeyFile {{ ssl_key_path | default('/etc/ssl/private/server.key') }}\n&lt;/VirtualHost&gt;\n{% endif %}\n</code></pre> <p>\ud83e\udd14 Anal\u00fc\u00fcs: Kuidas template aitab hallata erinevaid keskkondi (dev vs prod)?</p>"},{"location":"ansible_advanced/lab/#22-mysql-konfiguratsioon-template","title":"2.2 MySQL konfiguratsioon template","text":"<p>Loome MySQL template'i sammhaaval:</p>"},{"location":"ansible_advanced/lab/#221-looge-mysql-template","title":"2.2.1 Looge MySQL template","text":"<pre><code>touch templates/mysql.cnf.j2\nnano templates/mysql.cnf.j2\n</code></pre>"},{"location":"ansible_advanced/lab/#222-lisage-dunaamiline-konfiguratsioon","title":"2.2.2 Lisage d\u00fcnaamiline konfiguratsioon","text":"<pre><code># {{ ansible_managed }}\n# MySQL Configuration for {{ inventory_hostname }}\n# Environment: {{ app_env }}\n\n[mysqld]\n# Basic settings\nport = {{ mysql_port }}\nbind-address = {{ mysql_bind_address }}\n\n# Performance tuning based on available memory\ninnodb_buffer_pool_size = {{ mysql_innodb_buffer_pool_size }}\nmax_connections = {{ mysql_max_connections }}\n\n# Environment-specific settings\n{% if app_env == 'production' %}\n# Production optimizations\ninnodb_flush_log_at_trx_commit = 1\nsync_binlog = 1\n{% else %}\n# Development settings (faster but less safe)\ninnodb_flush_log_at_trx_commit = 2\nsync_binlog = 0\n{% endif %}\n\n# Logging\n{% if debug_mode %}\ngeneral_log = 1\ngeneral_log_file = /var/log/mysql/general.log\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql/slow.log\nlong_query_time = 1\n{% endif %}\n</code></pre>"},{"location":"ansible_advanced/lab/#23-php-konfiguratsioon-template","title":"2.3 PHP konfiguratsioon template","text":"<p>Looge PHP-FPM template:</p>"},{"location":"ansible_advanced/lab/#231-looge-php-template","title":"2.3.1 Looge PHP template","text":"<pre><code>touch templates/php-fpm.conf.j2\nnano templates/php-fpm.conf.j2\n</code></pre>"},{"location":"ansible_advanced/lab/#232-lisage-dunaamilised-seadistused","title":"2.3.2 Lisage d\u00fcnaamilised seadistused","text":"<pre><code># {{ ansible_managed }}\n# PHP-FPM pool configuration\n\n[{{ app_name }}]\nuser = www-data\ngroup = www-data\n\nlisten = /var/run/php/php{{ php_version }}-fpm-{{ app_name }}.sock\nlisten.owner = www-data\nlisten.group = www-data\nlisten.mode = 0660\n\n# Process management\npm = dynamic\npm.max_children = {{ ansible_processor_vcpus * 4 }}\npm.start_servers = {{ ansible_processor_vcpus }}\npm.min_spare_servers = {{ ansible_processor_vcpus }}\npm.max_spare_servers = {{ ansible_processor_vcpus * 2 }}\n\n# PHP settings\nphp_admin_value[memory_limit] = {{ php_memory_limit }}\nphp_admin_value[max_execution_time] = {{ php_max_execution_time }}\nphp_admin_value[upload_max_filesize] = 32M\nphp_admin_value[post_max_size] = 32M\n\n{% if app_env == 'development' %}\n# Development settings\nphp_admin_flag[display_errors] = on\nphp_admin_value[error_reporting] = E_ALL\n{% else %}\n# Production settings\nphp_admin_flag[display_errors] = off\nphp_admin_value[error_reporting] = E_ERROR\n{% endif %}\n</code></pre>"},{"location":"ansible_advanced/lab/#3-handlers-ja-advanced-playbook","title":"3. Handlers ja Advanced Playbook","text":""},{"location":"ansible_advanced/lab/#31-playbook-handlersitega","title":"3.1 Playbook handlers'itega","text":"<p>Loome t\u00e4iustatud playbook'i sammhaaval:</p>"},{"location":"ansible_advanced/lab/#311-looge-pohi-playbook","title":"3.1.1 Looge p\u00f5hi playbook","text":"<pre><code>touch playbooks/site.yml\nnano playbooks/site.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#312-lisage-playbook-struktuur","title":"3.1.2 Lisage playbook struktuur","text":"<pre><code>---\n- name: \"LAMP Stack Deployment with Advanced Configuration\"\n  hosts: all\n  become: yes\n  gather_facts: yes\n\n  tasks:\n    - name: \"Update package cache\"\n      package:\n        update_cache: yes\n      when: ansible_os_family == \"Debian\"\n</code></pre>"},{"location":"ansible_advanced/lab/#313-lisage-apache-seadistamine-handlersitega","title":"3.1.3 Lisage Apache seadistamine handlers'itega","text":"<pre><code>    - name: \"Install Apache\"\n      package:\n        name: \"{{ apache_package }}\"\n        state: present\n      notify:\n        - \"start apache\"\n        - \"enable apache\"\n\n    - name: \"Create virtual host directories\"\n      file:\n        path: \"{{ item.document_root }}\"\n        state: directory\n        owner: www-data\n        group: www-data\n        mode: '0755'\n      loop: \"{{ virtual_hosts }}\"\n      when: virtual_hosts is defined\n\n    - name: \"Generate virtual host configurations\"\n      template:\n        src: apache_vhost.conf.j2\n        dest: \"/etc/apache2/sites-available/{{ item.name }}.conf\"\n        backup: yes\n      loop: \"{{ virtual_hosts }}\"\n      notify: \"reload apache\"\n      when: virtual_hosts is defined\n\n    - name: \"Enable virtual hosts\"\n      command: \"a2ensite {{ item.name }}\"\n      args:\n        creates: \"/etc/apache2/sites-enabled/{{ item.name }}.conf\"\n      loop: \"{{ virtual_hosts }}\"\n      notify: \"reload apache\"\n      when: virtual_hosts is defined\n</code></pre>"},{"location":"ansible_advanced/lab/#314-lisage-handlers-sektsioon","title":"3.1.4 Lisage handlers sektsioon","text":"<pre><code>  handlers:\n    - name: \"start apache\"\n      service:\n        name: \"{{ apache_package }}\"\n        state: started\n\n    - name: \"enable apache\"\n      service:\n        name: \"{{ apache_package }}\"\n        enabled: yes\n\n    - name: \"reload apache\"\n      service:\n        name: \"{{ apache_package }}\"\n        state: reloaded\n\n    - name: \"restart apache\"\n      service:\n        name: \"{{ apache_package }}\"\n        state: restarted\n</code></pre> <p>\ud83d\udcad M\u00f5elge: Miks kasutame <code>reload</code> mitte <code>restart</code>? Mis vahe on?</p>"},{"location":"ansible_advanced/lab/#32-testimine","title":"3.2 Testimine","text":"<p>Testida konfiguratsiooni:</p>"},{"location":"ansible_advanced/lab/#321-syntax-check","title":"3.2.1 Syntax check","text":"<pre><code>ansible-playbook --syntax-check playbooks/site.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#322-kuiv-kaivitus","title":"3.2.2 Kuiv k\u00e4ivitus","text":"<pre><code>ansible-playbook --check -i inventory/hosts.yml playbooks/site.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#323-templatei-testimine","title":"3.2.3 Template'i testimine","text":"<pre><code>ansible-playbook -i inventory/hosts.yml playbooks/site.yml --tags \"config\" -v\n</code></pre>"},{"location":"ansible_advanced/lab/#4-ansible-vault-rakendamine","title":"4. Ansible Vault rakendamine","text":""},{"location":"ansible_advanced/lab/#41-vault-failide-loomine","title":"4.1 Vault failide loomine","text":"<p>Loome turvalist vault struktuuri:</p>"},{"location":"ansible_advanced/lab/#411-looge-vault-fail-group_vars-jaoks","title":"4.1.1 Looge vault fail group_vars jaoks","text":"<pre><code>ansible-vault create group_vars/all/vault.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#412-lisage-tundlikud-andmed","title":"4.1.2 Lisage tundlikud andmed","text":"<pre><code># Database credentials\nvault_mysql_root_password: \"SecureRootPassword123!\"\nvault_mysql_app_password: \"AppPassword456!\"\n\n# SSL certificates paths\nvault_ssl_cert_path: \"/etc/ssl/certs/company.crt\"\nvault_ssl_key_path: \"/etc/ssl/private/company.key\"\n\n# API keys\nvault_backup_api_key: \"backup_api_key_here\"\nvault_monitoring_token: \"monitoring_token_here\"\n\n# Admin passwords\nvault_admin_password: \"AdminSecurePass789!\"\n</code></pre>"},{"location":"ansible_advanced/lab/#413-looge-production-spetsiifiline-vault","title":"4.1.3 Looge production-spetsiifiline vault","text":"<pre><code>ansible-vault create group_vars/production/vault.yml\n</code></pre> <pre><code># Production SSL certificates\nvault_ssl_cert_content: |\n  -----BEGIN CERTIFICATE-----\n  [certificate content here]\n  -----END CERTIFICATE-----\n\nvault_ssl_key_content: |\n  -----BEGIN PRIVATE KEY-----\n  [private key content here]\n  -----END PRIVATE KEY-----\n\n# Production database settings\nvault_production_db_host: \"prod-db.company.com\"\nvault_production_db_password: \"ProdDbPass123!\"\n</code></pre>"},{"location":"ansible_advanced/lab/#42-vault-muutujate-kasutamine","title":"4.2 Vault muutujate kasutamine","text":"<p>\u00dchendame vault muutujad tavaliste muutujatega:</p>"},{"location":"ansible_advanced/lab/#421-uuendage-group_varsallvarsyml","title":"4.2.1 Uuendage group_vars/all/vars.yml","text":"<pre><code>nano group_vars/all/vars.yml\n</code></pre> <pre><code># Lisage vault viited\nmysql_root_password: \"{{ vault_mysql_root_password }}\"\nmysql_app_password: \"{{ vault_mysql_app_password }}\"\nssl_cert_path: \"{{ vault_ssl_cert_path }}\"\nssl_key_path: \"{{ vault_ssl_key_path }}\"\nadmin_password: \"{{ vault_admin_password }}\"\n</code></pre>"},{"location":"ansible_advanced/lab/#422-uuendage-mysql-templatei","title":"4.2.2 Uuendage MySQL template'i","text":"<pre><code>nano templates/mysql.cnf.j2\n</code></pre> <pre><code># Lisage vault-p\u00f5hised seadistused\n{% if app_env == 'production' %}\n# Production SSL settings\nssl-ca={{ vault_ssl_cert_path }}\nssl-cert={{ vault_ssl_cert_path }}\nssl-key={{ vault_ssl_key_path }}\n{% endif %}\n</code></pre>"},{"location":"ansible_advanced/lab/#43-vault-kasitsikasutatavus","title":"4.3 Vault k\u00e4sitsikasutatavus","text":"<p>Vault operatsioonid:</p>"},{"location":"ansible_advanced/lab/#431-vaata-vault-faili","title":"4.3.1 Vaata vault faili","text":"<pre><code>ansible-vault view group_vars/all/vault.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#432-muuda-vault-faili","title":"4.3.2 Muuda vault faili","text":"<pre><code>ansible-vault edit group_vars/production/vault.yml\n</code></pre>"},{"location":"ansible_advanced/lab/#433-kaivita-playbook-vaultiga","title":"4.3.3 K\u00e4ivita playbook vault'iga","text":"<pre><code>ansible-playbook -i inventory/hosts.yml playbooks/site.yml --ask-vault-pass\n</code></pre>"},{"location":"ansible_advanced/lab/#434-voi-kasuta-vault-password-faili","title":"4.3.4 V\u00f5i kasuta vault password faili","text":"<pre><code>echo \"your_vault_password\" &gt; .vault_pass\nchmod 600 .vault_pass\nansible-playbook -i inventory/hosts.yml playbooks/site.yml --vault-password-file .vault_pass\n</code></pre> <p>\ud83d\udd10 Turvalisus: \u00c4ra iial commiti <code>.vault_pass</code> faili Git'i!</p>"},{"location":"ansible_advanced/lab/#5-labi-kontrollnimekiri","title":"5. Labi kontrollnimekiri","text":"<p>Veenduge, et olete l\u00f5petanud:</p>"},{"location":"ansible_advanced/lab/#51-struktuur-ja-organisatsioon","title":"5.1 Struktuur ja organisatsioon","text":"<ul> <li> Organiseeritud projektistruktuur - kaustad organiseeritud</li> <li> Inventory hierarhia - serverid grupeeritud ja konfigureeritud</li> <li> Muutujate hierarhia - group_vars ja host_vars seadistatud</li> </ul>"},{"location":"ansible_advanced/lab/#52-templateid-ja-konfiguratsioon","title":"5.2 Template'id ja konfiguratsioon","text":"<ul> <li> Apache virtual host template - d\u00fcnaamiline ja keskkonna-p\u00f5hine</li> <li> MySQL konfiguratsioon template - tulemuste optimeeritud</li> <li> PHP-FPM template - performance tuned</li> </ul>"},{"location":"ansible_advanced/lab/#53-playbookid-ja-handlers","title":"5.3 Playbook'id ja handlers","text":"<ul> <li> Advanced playbook - template'id, loops, conditionals</li> <li> Proper handlers - efficient service management</li> <li> Error handling - backup ja validation</li> </ul>"},{"location":"ansible_advanced/lab/#54-vault-ja-turvalisus","title":"5.4 Vault ja turvalisus","text":"<ul> <li> Vault failid loodud - tundlikud andmed kr\u00fcpteeritud</li> <li> Vault integratsioon - muutujad \u00fchendatud</li> <li> Turvaline workflow - .vault_pass ei committita</li> </ul>"},{"location":"ansible_advanced/lab/#55-testing-ja-validation","title":"5.5 Testing ja validation","text":"<ul> <li> Syntax check - playbook'id valid</li> <li> Dry run - --check mode t\u00f6\u00f6tab</li> <li> Template testing - konfiguratsioonid genereeruvad \u00f5igesti</li> </ul>"},{"location":"ansible_advanced/lab/#6-jargmised-sammud","title":"6. J\u00e4rgmised sammud","text":""},{"location":"ansible_advanced/lab/#61-valmis-kodutooks","title":"6.1 Valmis kodut\u00f6\u00f6ks","text":"<ul> <li>Kasutage siin \u00f5pitud advanced pattern'e</li> <li>Rakendage vault'i k\u00f5ikides tootmise playbook'ides</li> <li>Organiseerige projektide struktuuri professionaalselt</li> </ul>"},{"location":"ansible_advanced/lab/#62-jargmine-nadal","title":"6.2 J\u00e4rgmine n\u00e4dal","text":"<ul> <li>Ansible Roles ja Galaxy</li> <li>Automated testing strategies</li> <li>Enterprise deployment patterns</li> </ul> <p>\ud83c\udf89 H\u00e4sti tehtud! Te oskate n\u00fc\u00fcd luua production-ready Ansible projekte!</p>"},{"location":"ansible_advanced/lecture/","title":"Ansible Advanced: Edasij\u00f5udnud Funktsioonid","text":"<p>Kestus: 2 tundi Teemad: Variables, Templates, Handlers, Vault</p>"},{"location":"ansible_advanced/lecture/#opivaljundid","title":"\u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast seda n\u00e4dalat oskate: - Hallata keerukamaid muutujaid ja nende hierarhiat - Luua d\u00fcnaamilisi konfiguratsioone Jinja2 template'itega - Kasutada handler'eid efektiivseks teenuste haldamiseks - Rakendada Ansible Vault'i tundlike andmete kaitsmiseks - J\u00e4rgida Ansible best practice'sid</p>"},{"location":"ansible_advanced/lecture/#1-variables-ja-variable-precedence","title":"1. Variables ja Variable Precedence","text":""},{"location":"ansible_advanced/lecture/#11-muutujate-hierarhia","title":"1.1 Muutujate hierarhia","text":"<p>Ansible'is on muutujatel kindel prioriteedi j\u00e4rjekord:</p> <pre><code>graph TD\n    A[1. Command line&lt;br/&gt;-e, --extra-vars] --&gt; B[2. Task variables&lt;br/&gt;task sees]\n    B --&gt; C[3. Block variables&lt;br/&gt;block sees]\n    C --&gt; D[4. Role variables&lt;br/&gt;role/vars/main.yml]\n    D --&gt; E[5. Play variables&lt;br/&gt;playbook sees]\n    E --&gt; F[6. Host variables&lt;br/&gt;host_vars/]\n    F --&gt; G[7. Group variables&lt;br/&gt;group_vars/]\n    G --&gt; H[8. Role defaults&lt;br/&gt;role/defaults/main.yml]\n\n    style A fill:#ff9999\n    style B fill:#ffcc99\n    style C fill:#ffff99\n    style D fill:#99ff99\n    style E fill:#99ccff\n    style F fill:#cc99ff\n    style G fill:#ff99cc\n    style H fill:#99ffcc</code></pre> <p>Prioriteedi j\u00e4rjekord (k\u00f5rgeim esimesena): 1. Command line (<code>-e</code>, <code>--extra-vars</code>) 2. Task variables (task sees) 3. Block variables (block sees) 4. Role variables (role/vars/main.yml) 5. Play variables (playbook sees) 6. Host variables (host_vars/) 7. Group variables (group_vars/) 8. Role defaults (role/defaults/main.yml)</p> <p>N\u00e4ide muutujate konfliktist:</p> <pre><code># group_vars/all.yml\nserver_port: 80\n\n# host_vars/webserver1.yml  \nserver_port: 8080\n\n# playbook.yml\n- name: \"Server setup\"\n  vars:\n    server_port: 3000\n  tasks:\n    - debug:\n        msg: \"Port will be: {{ server_port }}\"  # Tulemus: 3000\n</code></pre> <p>\ud83e\udd14 Realiteedikontroll: Kui teil on 100 serverit ja igal on erinev konfiguratsioon, kuidas te seda ilma muutujate hierarhiata hallaksite?</p>"},{"location":"ansible_advanced/lecture/#12-faktide-kasutamine","title":"1.2 Faktide kasutamine","text":"<p>Ansible kogub automaatselt s\u00fcsteemi infot:</p> <pre><code>- name: \"N\u00e4ita s\u00fcsteemi faktid\"\n  debug:\n    msg:\n      - \"OS: {{ ansible_os_family }}\"\n      - \"Memory: {{ ansible_memtotal_mb }}MB\"\n      - \"CPU cores: {{ ansible_processor_vcpus }}\"\n      - \"IP: {{ ansible_default_ipv4.address }}\"\n</code></pre>"},{"location":"ansible_advanced/lecture/#13-registered-variables","title":"1.3 Registered variables","text":"<p>Salvestage k\u00e4su tulemusi:</p> <pre><code>- name: \"Kontrolli Apache staatust\"\n  shell: \"systemctl is-active apache2\"\n  register: apache_status\n  failed_when: false\n\n- name: \"Tegevus Apache staatuse p\u00f5hjal\"\n  debug:\n    msg: \"Apache on {{ apache_status.stdout }}\"\n  when: apache_status.rc == 0\n</code></pre>"},{"location":"ansible_advanced/lecture/#2-jinja2-templates","title":"2. Jinja2 Templates","text":""},{"location":"ansible_advanced/lecture/#21-templateite-pohitoed","title":"2.1 Template'ite p\u00f5hit\u00f5ed","text":"<p>Jinja2 v\u00f5imaldab luua d\u00fcnaamilisi faile:</p> <pre><code># Playbook task\n- name: \"Genereeri konfiguratsioon\"\n  template:\n    src: app.conf.j2\n    dest: /etc/app/config.conf\n</code></pre> <p>Template fail (<code>templates/app.conf.j2</code>): <pre><code># {{ ansible_managed }}\nserver_name = {{ inventory_hostname }}\nport = {{ server_port | default(80) }}\ndebug = {{ debug_mode | default(false) | lower }}\n\n# Environment specific\n{% if environment == 'production' %}\nlog_level = ERROR\ncache_enabled = true\n{% else %}\nlog_level = DEBUG\ncache_enabled = false\n{% endif %}\n</code></pre></p> <p>\ud83d\udca1 K\u00fcsimus: Miks on kasulik kasutada <code>{{ ansible_managed }}</code> kommentaari template'i alguses?</p>"},{"location":"ansible_advanced/lecture/#22-conditionals-templateites","title":"2.2 Conditionals template'ites","text":"<pre><code>{% if ansible_os_family == \"Debian\" %}\npackage_manager = apt\n{% elif ansible_os_family == \"RedHat\" %}\npackage_manager = yum\n{% else %}\npackage_manager = unknown\n{% endif %}\n\n# Inline conditionals\nservice_port = {{ 443 if ssl_enabled else 80 }}\n</code></pre> <p>\ud83e\udd14 M\u00f5elge: Kuidas aitavad conditionals hallata erinevaid operatsioonis\u00fcsteeme \u00fches template'is?</p>"},{"location":"ansible_advanced/lecture/#23-loops-templateites","title":"2.3 Loops template'ites","text":"<pre><code># Virtual hosts\n{% for host in virtual_hosts %}\n&lt;VirtualHost *:{{ host.port }}&gt;\n    ServerName {{ host.name }}\n    DocumentRoot {{ host.document_root }}\n    {% if host.ssl_enabled | default(false) %}\n    SSLEngine on\n    SSLCertificateFile {{ host.ssl_cert }}\n    {% endif %}\n&lt;/VirtualHost&gt;\n{% endfor %}\n\n# Database users\n{% for user in database_users %}\nCREATE USER '{{ user.name }}'@'{{ user.host }}' IDENTIFIED BY '{{ user.password }}';\nGRANT {{ user.privileges | join(', ') }} ON {{ user.database }}.* TO '{{ user.name }}'@'{{ user.host }}';\n{% endfor %}\n</code></pre> <p>\ud83d\udcca V\u00f5rdlus: V\u00f5rrelge template'i kasutamist staatilise konfiguratsiooniga. Millised on eelised ja puudused?</p>"},{"location":"ansible_advanced/lecture/#24-filters","title":"2.4 Filters","text":"<pre><code># String manipulation\nserver_name = {{ inventory_hostname | upper }}\nconfig_file = {{ app_name | lower }}.conf\n\n# Number operations\nmemory_limit = {{ (ansible_memtotal_mb * 0.8) | int }}M\nworker_processes = {{ ansible_processor_vcpus | default(1) }}\n\n# List operations\npackages = {{ required_packages | join(' ') }}\nfirst_server = {{ groups['webservers'] | first }}\n\n# JSON/YAML\nconfig = {{ app_config | to_nice_json }}\n</code></pre> <p>\u2705 Praktiline nipp: Kasutage <code>| default()</code> filter'it vaikev\u00e4\u00e4rtuste m\u00e4\u00e4ramiseks template'ites.</p>"},{"location":"ansible_advanced/lecture/#3-handlers-ja-notifications","title":"3. Handlers ja Notifications","text":""},{"location":"ansible_advanced/lecture/#31-handlerite-pohitoed","title":"3.1 Handler'ite p\u00f5hit\u00f5ed","text":"<p>Handler'id k\u00e4ivituvad ainult siis, kui task teeb muudatusi:</p> <pre><code>tasks:\n  - name: \"Uuenda Apache konfiguratsioon\"\n    template:\n      src: apache.conf.j2\n      dest: /etc/apache2/apache2.conf\n    notify: \"restart apache\"\n\n  - name: \"Lisa virtual host\"\n    template:\n      src: vhost.conf.j2\n      dest: \"/etc/apache2/sites-available/{{ site_name }}.conf\"\n    notify:\n      - \"enable site\"\n      - \"reload apache\"\n\nhandlers:\n  - name: \"restart apache\"\n    service:\n      name: apache2\n      state: restarted\n\n  - name: \"reload apache\"\n    service:\n      name: apache2\n      state: reloaded\n\n  - name: \"enable site\"\n    command: \"a2ensite {{ site_name }}\"\n</code></pre> <p>\ud83e\udd14 M\u00f5elge: Miks kasutada <code>reload</code> mitte <code>restart</code>? Millal on vahe oluline?</p>"},{"location":"ansible_advanced/lecture/#32-handlerite-taiustatud-kasutamine","title":"3.2 Handler'ite t\u00e4iustatud kasutamine","text":"<p>Listen groups: <pre><code>tasks:\n  - name: \"Uuenda PHP konfiguratsioon\"\n    template:\n      src: php.ini.j2\n      dest: /etc/php/7.4/fpm/php.ini\n    notify: \"restart web services\"\n\n  - name: \"Uuenda Apache konfiguratsioon\"\n    template:\n      src: apache.conf.j2\n      dest: /etc/apache2/apache2.conf\n    notify: \"restart web services\"\n\nhandlers:\n  - name: \"restart php-fpm\"\n    service:\n      name: php7.4-fpm\n      state: restarted\n    listen: \"restart web services\"\n\n  - name: \"restart apache\"\n    service:\n      name: apache2\n      state: restarted\n    listen: \"restart web services\"\n</code></pre></p> <p>\ud83d\udca1 K\u00fcsimus: Mis j\u00e4rjekorras k\u00e4ivituvad handler'id ja miks see on oluline?</p> <p>\ud83c\udfaf Praktikasoovitus: Kasutage <code>meta: flush_handlers</code> kriitiliste kontrollidel, kui peate veenduma, et teenus on taask\u00e4ivitatud enne j\u00e4rgmisi task'e.</p>"},{"location":"ansible_advanced/lecture/#4-ansible-vault-secrets","title":"4. Ansible Vault Secrets","text":""},{"location":"ansible_advanced/lecture/#41-vaulti-pohitoed","title":"4.1 Vault'i p\u00f5hit\u00f5ed","text":"<p>Ansible Vault kr\u00fcpteerib tundlikud andmed:</p> <pre><code># Loo kr\u00fcpteeritud fail\nansible-vault create secrets.yml\n\n# Muuda kr\u00fcpteeritud faili\nansible-vault edit secrets.yml\n\n# Vaata kr\u00fcpteeritud faili\nansible-vault view secrets.yml\n\n# Kr\u00fcpteeri olemasolev fail\nansible-vault encrypt plaintext.yml\n\n# Dekr\u00fcpteeri fail\nansible-vault decrypt secrets.yml\n</code></pre> <p>N\u00e4ide vault failis: <pre><code># secrets.yml (kr\u00fcpteeritud)\nvault_db_password: \"supersecretpassword123\"\nvault_api_key: \"abc123def456ghi789\"\nvault_ssl_private_key: |\n  -----BEGIN PRIVATE KEY-----\n  [private key content]\n  -----END PRIVATE KEY-----\n</code></pre></p> <p>\ud83d\udd10 Turvanipp: Vault'i parool peaks olema v\u00e4hemalt 12 t\u00e4hem\u00e4rki ja sisaldama erinevaid s\u00fcmboleid.</p>"},{"location":"ansible_advanced/lecture/#42-vaulti-kasutamine-playbookides","title":"4.2 Vault'i kasutamine playbook'ides","text":"<pre><code># group_vars/production/vault.yml (kr\u00fcpteeritud)\nvault_mysql_root_password: \"production_mysql_secret\"\nvault_app_secret_key: \"prod_app_key_123456\"\n\n# group_vars/production/vars.yml (avatud)\nmysql_root_password: \"{{ vault_mysql_root_password }}\"\napp_secret_key: \"{{ vault_app_secret_key }}\"\nenvironment: \"production\"\n</code></pre> <p>Playbook k\u00e4ivitamine: <pre><code># K\u00fcsi parooli\nansible-playbook site.yml --ask-vault-pass\n\n# Kasuta parool faili\necho \"mypassword\" &gt; .vault_pass\nansible-playbook site.yml --vault-password-file .vault_pass\n</code></pre></p> <p>\ud83e\udd14 M\u00f5elge: Kuidas saaksite organisatsioonis turvaliselt jagada vault paroole?</p>"},{"location":"ansible_advanced/lecture/#43-multiple-vault-passwords","title":"4.3 Multiple vault passwords","text":"<pre><code># Erinev vault erinevale keskkonnale\nansible-vault create --vault-id prod@prompt production-secrets.yml\nansible-vault create --vault-id dev@prompt development-secrets.yml\n\n# K\u00e4ivitamine\nansible-playbook site.yml --vault-id prod@prompt --vault-id dev@prompt\n</code></pre>"},{"location":"ansible_advanced/lecture/#44-vault-parooli-haldamine","title":"4.4 Vault parooli haldamine","text":"<p>Environment variable: <pre><code>export ANSIBLE_VAULT_PASSWORD=mypassword\nansible-playbook site.yml\n</code></pre></p> <p>Script'iga: <pre><code>#!/bin/bash\n# vault_pass.sh\necho \"my_secret_password\"\n\nchmod +x vault_pass.sh\nansible-playbook site.yml --vault-password-file vault_pass.sh\n</code></pre></p> <p>\ud83d\udcad K\u00fcsimus: Mis probleeme v\u00f5ib tekkida vault paroolide haldamisel meeskonnat\u00f6\u00f6s?</p>"},{"location":"ansible_advanced/lecture/#45-vaulti-rekey","title":"4.5 Vault'i rekey","text":"<pre><code># Muuda vault parooli\nansible-vault rekey secrets.yml\n\n# Muuda spetsiifilise vault'i parooli\nansible-vault rekey --vault-id old@prompt --new-vault-id new@prompt secrets.yml\n</code></pre> <p>\u2705 Praktiline nipp: Regulaarselt muutke vault paroole ja dokumenteerige rotatsiooni protseduuri.</p>"},{"location":"ansible_advanced/lecture/#46-best-practices","title":"4.6 Best practices","text":""},{"location":"ansible_advanced/lecture/#461-vault-failide-organisatsioon","title":"4.6.1 Vault failide organisatsioon","text":"<pre><code>group_vars/\n\u251c\u2500\u2500 all/\n\u2502   \u251c\u2500\u2500 vars.yml          # Avalikud muutujad\n\u2502   \u2514\u2500\u2500 vault.yml         # Kr\u00fcpteeritud saladused\n\u251c\u2500\u2500 production/\n\u2502   \u251c\u2500\u2500 vars.yml\n\u2502   \u2514\u2500\u2500 vault.yml\n\u2514\u2500\u2500 development/\n    \u251c\u2500\u2500 vars.yml\n    \u2514\u2500\u2500 vault.yml\n</code></pre> <p>\ud83e\udd14 M\u00f5elge: Kuidas organiseerida vault faile nii, et oleks selge, millised andmed on kr\u00fcpteeritud ja millised mitte?</p>"},{"location":"ansible_advanced/lecture/#462-vault-rotatsiooni-strateegi","title":"4.6.2 Vault rotatsiooni strateegi","text":"<pre><code># Regulaarne parooli vahetamine (n\u00e4iteks kvartaalselt)\n# 1. Loo uus vault parool\nansible-vault rekey --new-vault-password-file new_password production-secrets.yml\n\n# 2. Uuenda CI/CD s\u00fcsteemid uue parooliga\n# 3. Teavita meeskonda muudatusest\n# 4. Eemalda vana parool k\u00f5igist s\u00fcsteemidest\n</code></pre>"},{"location":"ansible_advanced/lecture/#5-lab-template-based-configuration","title":"5. Lab: Template-based Configuration","text":"<p>K\u00e4ed-k\u00fcljes praktikum Ansible'i t\u00e4psemate funktsioonidega tutvumiseks.</p> <p>\ud83d\udcc1 Vaata: lab.md</p> <p>Sisaldab: - Advanced variables setup - Jinja2 template'ite loomine - Handlers ja advanced playbook'id - Ansible Vault rakendamine</p>"},{"location":"ansible_advanced/lecture/#6-kokkuvote","title":"6. Kokkuv\u00f5te","text":""},{"location":"ansible_advanced/lecture/#61-peamised-teemad","title":"6.1 Peamised teemad","text":"<ol> <li>Variables ja Precedence</li> <li>Muutujate hierarhia ja prioriteedid</li> <li>Group_vars ja host_vars</li> <li>Runtime muutujad ja extra_vars</li> <li> <p>Facts ja registered variables</p> </li> <li> <p>Jinja2 Templates</p> </li> <li>D\u00fcnaamiliste konfiguratsioonide loomine</li> <li>Conditional logic template'ites</li> <li>Loops ja filters</li> <li> <p>Environment-specific configurations</p> </li> <li> <p>Handlers ja Notifications</p> </li> <li>Smart service management</li> <li>Handler precedence ja timing</li> <li>Listen groups ja meta tasks</li> <li> <p>Error handling ja recovery</p> </li> <li> <p>Ansible Vault</p> </li> <li>Secrets encryption ja decryption</li> <li>Vault files vs inline vault</li> <li>Multiple vault passwords</li> <li>CI/CD integration strategies</li> </ol>"},{"location":"ansible_advanced/lecture/#62-praktilised-oskused","title":"6.2 Praktilised oskused","text":"<ul> <li>Advanced playbook architecture</li> <li>Production-ready template'ite loomine</li> <li>Secure password management</li> <li>Multi-environment deployments</li> <li>Professional project structure</li> </ul>"},{"location":"ansible_advanced/lecture/#63-jargmiseks-nadalaks","title":"6.3 J\u00e4rgmiseks n\u00e4dalaks","text":"<p>Enne j\u00e4rgmist loengut (Ansible Roles ja Puppet): 1. L\u00f5petage kodut\u00f6\u00f6 - lihtne vault ja template'id projekt 2. Lugege Ansible Galaxy documentation 3. Tutvuge Puppet vs Ansible comparison'iga 4. M\u00f5elge, kuidas teete oma infrastruktuuri korduvkasutatavaks</p> <p>\ud83c\udfaf V\u00e4ljakutse: Proovige rakendada siin \u00f5pitud template'e ja vault'i oma kodut\u00f6\u00f6s!</p> <p>K\u00fcsimused? K\u00fcsige julgelt j\u00e4rgmisel loengul v\u00f5i kursuse chat'is!</p>"},{"location":"ansible_basics/homework/","title":"LAMP Stack Playbook","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: \u00d5ppida Ansible playbook'i loomist praktiliselt ja iseseisvalt lahendamist ja uurimist</p>"},{"location":"ansible_basics/homework/#ulesande-kirjeldus","title":"\u00dclesande kirjeldus","text":"<p>See kodut\u00f6\u00f6 ei anna valmis koodi - see annab probleemid lahendamiseks! Kasutage lab'is \u00f5pitud oskusi ja Ansible dokumentatsiooni, et ehitada LAMP stack samm-sammult.</p> <p>P\u00f5him\u00f5te: Igal sammul antakse \u00fclesanne, kontrollviis ja n\u00f5uanded. Kood peate ise kirjutama!</p>"},{"location":"ansible_basics/homework/#1-projekti-seadistamine","title":"1. Projekti seadistamine","text":""},{"location":"ansible_basics/homework/#11-looge-projekti-struktuur","title":"1.1 Looge projekti struktuur","text":"<p>Mida vaja teha: Looge j\u00e4rgmine kataloogide ja failide struktuur (kasutage <code>mkdir</code> ja <code>touch</code> k\u00e4ske):</p> <pre><code>ansible-lamp/\n\u251c\u2500\u2500 inventory/\n\u2502   \u2514\u2500\u2500 hosts.yml\n\u251c\u2500\u2500 group_vars/\n\u2502   \u2514\u2500\u2500 webservers.yml  \n\u251c\u2500\u2500 templates/\n\u2502   \u251c\u2500\u2500 (failid lisate hiljem)\n\u251c\u2500\u2500 lamp-stack.yml\n\u251c\u2500\u2500 ansible.cfg\n\u2514\u2500\u2500 README.md\n</code></pre> <p>Kontroll: <code>tree ansible-lamp</code> peaks n\u00e4itama \u00f5iget struktuuri</p> <p>\ud83d\udca1 K\u00fcsimus: Miks kasutame group_vars/ kausta? (Vastake README.md'sse)</p>"},{"location":"ansible_basics/homework/#2-inventory-seadistamine","title":"2. Inventory seadistamine","text":""},{"location":"ansible_basics/homework/#21-inventory-fail","title":"2.1 Inventory fail","text":"<p>Probleem: Vajate inventory faili, mis t\u00f6\u00f6tab nii localhost'iga kui ka teise serveriga.</p> <p>N\u00f5uded: - Looge YAML formaat inventory (kasutage lab'is \u00f5pitut) - Gruppi nimi: <code>webservers</code> - Localhost peab kasutama <code>ansible_connection: local</code> - J\u00e4tke kommentaaridesse n\u00e4ide teise serveri lisamiseks</p> <p>Fail: <code>inventory/hosts.yml</code></p> <p>Kontroll: <code>ansible-inventory --list</code> peaks n\u00e4itama teie servereid</p> <p>\ud83d\udd0d Uurige: K\u00e4ivitage <code>ansible webservers -m ping</code> - kas t\u00f6\u00f6tab?</p>"},{"location":"ansible_basics/homework/#22-muutujate-defineerimine","title":"2.2 Muutujate defineerimine","text":"<p>Probleem: LAMP stack vajab palju konfiguratsiooni. Kus muutujaid hoida?</p> <p>N\u00f5uded: Looge <code>group_vars/webservers.yml</code> ja defineerige: - MySQL root parool - Rakenduse andmebaasi nimi - Rakenduse kasutaja nimi ja parool - PHP pakettide loend - Document root tee - Rakenduse nimi ja versioon</p> <p>\ud83d\udca1 N\u00e4pun\u00e4ide: Vaadake lab'i n\u00e4iteid muutujate kohta</p> <p>\ud83e\udd14 M\u00f5elge: Millised muutujad peaksid olema \"salajased\"? Kuidas neid hiljem kaitsta?</p> <p>Kontroll: <code>ansible webservers -m debug -a \"var=hostvars[inventory_hostname]\"</code> - kas n\u00e4ete oma muutujaid?</p>"},{"location":"ansible_basics/homework/#3-vigane-playbook-parandamine","title":"3. Vigane playbook parandamine","text":""},{"location":"ansible_basics/homework/#31-parandage-see-vigane-playbook","title":"3.1 Parandage see vigane playbook","text":"<p>Antud on vigane playbook algus. Leidke ja parandage vead:</p> <pre><code>---\n- name: LAMP Stack Setup\n  hosts: all                    # &lt;- VIGA 1: vale grupp\n  become: true\n\n  tasks:\n    - name: Update cache\n      package:\n        update_cache: true      # &lt;- VIGA 2: vale moodul\n\n    - name: Install Apache\n      apt:\n        name: apache            # &lt;- VIGA 3: vale paketi nimi\n        state: present\n      notify: restart apache\n\n    - name: Start Apache\n      systemd:                  # &lt;- VIGA 4: miks mitte service?\n        name: apache2\n        state: started\n\n  handlers:                     # &lt;- VIGA 5: handlers vale kohas?\n    - name: restart apache\n      service:\n        name: apache2\n        state: restarted\n</code></pre> <p>\u00dclesanne:  1. Kopeerige see kood faili <code>lamp-stack.yml</code> 2. Leidke k\u00f5ik 5+ viga 3. Parandage need 4. Lisage proper YAML vormistus (<code>---</code> alguses)</p> <p>Kontroll: <code>ansible-playbook --syntax-check lamp-stack.yml</code></p> <p>\ud83d\udd0d Uurige: Mis vahe on <code>package</code> ja <code>apt</code> moodulil? Kumb on parem?</p>"},{"location":"ansible_basics/homework/#4-mysql-seadistamine","title":"4. MySQL seadistamine","text":""},{"location":"ansible_basics/homework/#41-mysql-installimine-ja-turvamine","title":"4.1 MySQL installimine ja turvamine","text":"<p>Probleem: MySQL vajab spetsiaalset seadistamist. Lab'is n\u00e4gite lihtsaid n\u00e4iteid.</p> <p>Teie \u00fclesanne: 1. Installige <code>mysql-server</code> ja <code>python3-pymysql</code> 2. K\u00e4ivitage MySQL teenus 3. Seadke MySQL root kasutajale parool (kasutage group_vars muutujat) 4. Looge rakenduse andmebaas 5. Looge rakenduse kasutaja \u00f5igustega ainult sellele andmebaasile</p> <p>Moodulid, mida vajate: - <code>package</code> v\u00f5i <code>apt</code> - <code>service</code>  - <code>mysql_user</code> - <code>mysql_db</code></p> <p>\ud83d\udca1 N\u00f5uanded: - MySQL root parooli seadistamine on keeruline - uurige <code>login_unix_socket</code> parameetrit - <code>mysql_user</code> moodul vajab <code>login_user</code> ja <code>login_password</code> parameetrit - Kasutage <code>priv: \"database_name.*:ALL\"</code> \u00f5igusteks</p> <p>\ud83d\udcda Uurige dokumentatsiooni: <code>ansible-doc mysql_user</code></p> <p>Kontroll: <pre><code>mysql -u [teie_kasutaja] -p [teie_andmebaas] -e \"SELECT 'Success!' as test;\"\n</code></pre></p> <p>\ud83d\udd0d Debugimise k\u00fcsimus: Kui MySQL \u00fchendus ei t\u00f6\u00f6ta, kuidas te viga otsite?</p>"},{"location":"ansible_basics/homework/#5-templateide-loomine","title":"5. Template'ide loomine","text":""},{"location":"ansible_basics/homework/#51-puudulik-php-template","title":"5.1 Puudulik PHP template","text":"<p>Antud on template algus. L\u00f5petage see:</p> <p>Fail: <code>templates/info.php.j2</code></p> <pre><code>&lt;?php\n// {{ app_name }} - Info leht\n// TODO: lisage kuup\u00e4ev kasutades ansible muutujat\n\necho \"&lt;h1&gt;{{ ??? }}&lt;/h1&gt;\";  // TODO: kasutage app_name muutujat\n\necho \"&lt;h2&gt;Serveri info&lt;/h2&gt;\";\n// TODO: lisage hostname, IP, OS info\n\necho \"&lt;h2&gt;MySQL test&lt;/h2&gt;\";\n$host = 'localhost';\n$database = '{{ ??? }}';  // TODO: kasutage \u00f5iget muutujat\n$username = '{{ ??? }}';  // TODO: kasutage \u00f5iget muutujat  \n$password = '{{ ??? }}';  // TODO: kasutage \u00f5iget muutujat\n\ntry {\n    // TODO: kirjutage PDO \u00fchenduse test\n    // Kui \u00f5nnestub, n\u00e4idake \"\u00dchendus t\u00f6\u00f6tab!\"\n    // Kui eba\u00f5nnestub, n\u00e4idake error'it\n} catch(PDOException $e) {\n    // TODO: error handling\n}\n\n// TODO: lisage phpinfo() kutse\n?&gt;\n</code></pre> <p>\u00dclesanne: 1. Asendage k\u00f5ik <code>{{ ??? }}</code> \u00f5igete muutujatega 2. Implementeerige MySQL PDO \u00fchenduse test 3. Lisage proper error handling 4. Lisage phpinfo() v\u00e4ljund</p> <p>\ud83d\udca1 N\u00f5uanded: - Vaadake lab'i template n\u00e4iteid - Ansible faktid: <code>{{ ansible_hostname }}</code>, <code>{{ ansible_default_ipv4.address }}</code> - PHP PDO: <code>new PDO(\"mysql:host=$host;dbname=$database\", $username, $password)</code></p> <p>Kontroll: PHP ei tohi sisaldada <code>{{ ??? }}</code> m\u00e4rke</p>"},{"location":"ansible_basics/homework/#52-html-pohileht-loomine","title":"5.2 HTML p\u00f5hileht loomine","text":"<p>Probleem: Vajate ilusat HTML lehte, mis n\u00e4itab LAMP stack'i infot.</p> <p>N\u00f5uded: - Kasutage template'i <code>templates/index.html.j2</code> - N\u00e4idake serveri infot (hostname, OS, kuup\u00e4ev) - Lisage link <code>/info.php</code> lehele - Kasutage CSS'i, et see oleks ilus - K\u00f5ik info peab tulema Ansible muutujatest/faktidest</p> <p>\ud83d\udca1 Inspiratsioon: Vaadake lab'i HTML n\u00e4idet, aga \u00e4rge kopeerige!</p> <p>\ud83c\udfc6 V\u00e4ljakutse: Kas oskate lisada JavaScripti, mis n\u00e4itab praegust kellaaega?</p> <p>Kontroll: HTML peab valideeruma (saate kontrollida https://validator.w3.org/)</p>"},{"location":"ansible_basics/homework/#6-playbook-lopetamine","title":"6. Playbook l\u00f5petamine","text":""},{"location":"ansible_basics/homework/#61-taskside-implementeerimine","title":"6.1 Tasks'ide implementeerimine","text":"<p>N\u00fc\u00fcd implementeerige playbook tasks'id:</p> <p>Vajalikud sammud (kirjutage ise task'id): 1. S\u00fcsteemi ettevalmistus - pakettide cache uuendamine 2. Apache seadistamine - installimine, k\u00e4ivitamine, document root loomine 3. MySQL seadistamine - (juba tegite sektsioonis 4) 4. PHP seadistamine - installimine koos moodulikega 5. Template'ide deployment - kopeerige template'id \u00f5igetesse kohtadesse 6. Firewall - lubage HTTP trafik 7. Valideerimised - kontrollige, et k\u00f5ik t\u00f6\u00f6tab</p> <p>\ud83d\udca1 N\u00f5uanne: Iga task vajab: - Selget <code>name</code> v\u00e4lja - \u00d5iget moodulit - Proper parameetreid - Vajadusel <code>notify</code> handler'eid</p> <p>T\u00fc\u00fcpilised moodulid: - <code>package</code>/<code>apt</code> - pakettide installimine - <code>service</code> - teenuste haldamine - <code>file</code> - kaustade loomine - <code>template</code> - template'ide kopeerimine - <code>uri</code> - HTTP testid - <code>ufw</code> - firewall reeglid</p> <p>\ud83e\udd14 K\u00fcsimus: Millises j\u00e4rjekorras task'id k\u00e4ivitada? Miks?</p>"},{"location":"ansible_basics/homework/#62-handlers-ja-error-handling","title":"6.2 Handlers ja error handling","text":"<p>Probleem: Playbook peab olema robust ja k\u00e4sitlema vigu.</p> <p>N\u00f5uded: 1. Handlers - Apache ja MySQL taask\u00e4ivitamise jaoks 2. Error handling - kasutage <code>failed_when</code>, <code>ignore_errors</code>, <code>retries</code> 3. Valideerimised - kontrollige teenuste olekut ja HTTP vastuseid 4. Conditional tasks - n\u00e4iteks ainult Debian/Ubuntu s\u00fcsteemides</p> <p>N\u00e4ited error handling'ust: <pre><code>- name: Test HTTP\n  uri:\n    url: http://localhost\n  retries: 3\n  delay: 10\n  register: http_test\n  failed_when: http_test.status != 200\n</code></pre></p> <p>\ud83e\udd14 M\u00f5elge: Millal kasutada <code>ignore_errors: yes</code> ja millal mitte?</p>"},{"location":"ansible_basics/homework/#7-testimine-ja-debugimine","title":"7. Testimine ja debugimine","text":""},{"location":"ansible_basics/homework/#71-systematic-testimine","title":"7.1 Systematic testimine","text":"<p>Probleem: Kuidas te veendute, et teie playbook t\u00f6\u00f6tab?</p> <p>Teie testiplaan: 1. Syntax check - ? 2. Dry run - ? 3. Tegelik k\u00e4ivitamine - ? 4. Manuaalne testimine - ? 5. Idempotency test - ?</p> <p>T\u00e4itke k\u00fcsim\u00e4rgid ja tehke iga test!</p> <p>\ud83d\udca1 N\u00f5uanne: Iga testi j\u00e4rel dokumenteerige tulemused</p> <p>Debugimise k\u00fcsimused: - Kui Apache ei k\u00e4ivitu, kuidas te viga otsite? - Kui MySQL \u00fchendus ei t\u00f6\u00f6ta, millised logid vaatate? - Kui template ei genereeru, kuidas te seda debugite?</p>"},{"location":"ansible_basics/homework/#72-vigade-parandamine","title":"7.2 Vigade parandamine","text":"<p>Antud on levinud vead. Kas tunnete neid \u00e4ra?</p> <p>Viga 1: <pre><code>TASK [Install PHP] ****\nfatal: [localhost]: FAILED! =&gt; {\"msg\": \"No package matching 'php' found\"}\n</code></pre> K\u00fcsimus: Mis probleem? Kuidas parandada?</p> <p>Viga 2: <pre><code>TASK [Test MySQL connection] ****\nfatal: [localhost]: FAILED! =&gt; {\"msg\": \"unable to connect to database\"}\n</code></pre> K\u00fcsimus: V\u00f5imalikud p\u00f5hjused? Kuidas debugida?</p> <p>Viga 3: <pre><code>TASK [Generate index.html] ****\nfatal: [localhost]: FAILED! =&gt; {\"msg\": \"template not found\"}\n</code></pre> K\u00fcsimus: Mida kontrollida?</p> <p>\u00dclesanne: Kirjutage README.md'sse troubleshooting sektsioon nende vigade jaoks!</p>"},{"location":"ansible_basics/homework/#8-dokumenteerimine","title":"8. Dokumenteerimine","text":""},{"location":"ansible_basics/homework/#81-readmemd-loomine","title":"8.1 README.md loomine","text":"<p>Probleem: Keegi teine peab teie projekti kasutama. Mis infot ta vajab?</p> <p>N\u00f5utavad sektsioonid: 1. Projekt kirjeldus - mis see teeb? 2. Eeltingimused - mida vaja installimisel? 3. Kasutamise juhend - sammhaaval k\u00e4ivitamine 4. Konfiguratsioon - kuidas muutujaid muuta? 5. Testimine - kuidas kontrollida, et t\u00f6\u00f6tab? 6. Troubleshooting - levinud probleemid ja lahendused 7. Projekti struktuur - failide selgitus</p> <p>\u2705 Test: Andke README.md kolleegile - kas ta saab projekti k\u00e4ivitada?</p>"},{"location":"ansible_basics/homework/#82-koodikommentaarid","title":"8.2 Koodikommentaarid","text":"<p>Probleem: Teie playbook peab olema loetav ja m\u00f5istetav.</p> <p>N\u00f5uded: - Iga task vajab selget <code>name</code> v\u00e4lja - Keerulised osad vajavad kommentaare - Muutujad vajavad selgitusi - Template'id vajavad dokumenteerimist</p> <p>N\u00e4ide heast kommentaarist: <pre><code># MySQL root parooli seadistamine on keeruline, sest:\n# 1. P\u00e4rast installimist pole parool seatud\n# 2. Kasutame unix_socket autentimist\n# 3. Seej\u00e4rel m\u00e4\u00e4rame parooli ja l\u00fclitume password auth'ile\n- name: \"Seadista MySQL root parool (esimene kord)\"\n  mysql_user:\n    # ... resto kood\n</code></pre></p>"},{"location":"ansible_basics/homework/#9-esitamine","title":"9. Esitamine","text":""},{"location":"ansible_basics/homework/#91-repository-link","title":"9.1 Repository link","text":"<p>Esitage GitHub repository link kursuse s\u00fcsteemi j\u00e4rgmiste n\u00f5uetega:</p> <p>Repository peab sisaldama: - T\u00e4ielikku funktsionaalset Ansible projekti - README.md t\u00e4ieliku dokumentatsiooniga - Screenshot'e v\u00f5i video t\u00f5endusmaterjali - Deployment logisid</p> <p>Repository peab olema: - Public (et \u00f5ppej\u00f5ud saaks \u00fcle vaadata) - Korrektselt nimetatud (<code>ansible-lamp-practice</code> v\u00f5i sarnane) - Professionaalselt organiseeritud</p> <p>Peab olema v\u00f5imalik: - Repository kloonida - Juhendite j\u00e4rgi setup teha - Playbook edukalt k\u00e4ivitada - Tulemust valideerida</p> <p>\ud83d\udcc5 T\u00e4htaeg: N\u00e4dal 13 esimese loengu alguseks</p>"},{"location":"ansible_basics/homework/#10-onnestumise-nipid","title":"10. \u00d5nnestumise nipid","text":""},{"location":"ansible_basics/homework/#101-alustamise-strateegia","title":"10.1 Alustamise strateegia","text":"<ol> <li>Alustage v\u00e4ikselt - tehke esmalt Apache t\u00f6\u00f6tama</li> <li>Testige sageli - iga komponendi j\u00e4rel kontrollige</li> <li>Kasutage lab'i materjale - sealtsed n\u00e4ited aitavad</li> <li>Uurige dokumentatsiooni - <code>ansible-doc &lt;module_name&gt;</code></li> <li>Debugige s\u00fcstemaatiliselt - <code>-v</code> flag ja logide kontroll</li> </ol>"},{"location":"ansible_basics/homework/#102-kui-midagi-ei-toota","title":"10.2 Kui midagi ei t\u00f6\u00f6ta","text":"<ol> <li>Kontrollige s\u00fcntaksit - <code>--syntax-check</code></li> <li>Kasutage verbose mode'i - <code>-v</code>, <code>-vv</code>, <code>-vvv</code></li> <li>Vaadake teenuste logisid - <code>journalctl -u apache2</code></li> <li>Kontrollige failide \u00f5iguseid - <code>ls -la</code></li> <li>Testige k\u00e4sitsi - tehke samme k\u00e4sitsi l\u00e4bi</li> </ol>"},{"location":"ansible_basics/homework/#103-ajakasutus","title":"10.3 Ajakasutus","text":"<ul> <li>1. p\u00e4ev: Projekti setup ja Apache</li> <li>2. p\u00e4ev: MySQL ja PHP</li> <li>3. p\u00e4ev: Template'id ja testimine</li> <li>4. p\u00e4ev: Dokumenteerimine ja viimistlus</li> </ul> <p>\ud83c\udfaf Edu! Alustage kohe ja k\u00fcsige abi, kui j\u00e4\u00e4te kinni!</p>"},{"location":"ansible_basics/lab/","title":"Ansible Basics Lab: Setup ja Esimene Playbook","text":"<p>Kestus: 2 tundi Eesm\u00e4rk: \u00d5ppida Ansible'i alused ja luua esimesed automatiseerimise skriptid</p>"},{"location":"ansible_basics/lab/#opivaljundid","title":"\u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast laborit oskate: - Installida ja konfigureerida Ansible'i - Seadistada SSH v\u00f5tmeid turvaliseks \u00fchenduseks - Luua ja hallata inventory faile - Kasutada ad-hoc k\u00e4ske kiireks automatiseerimiseks - Kirjutada YAML s\u00fcntaksit - Luua ja k\u00e4ivitada playbook'e - Automatiseeritult seadistada veebiserveri</p>"},{"location":"ansible_basics/lab/#1-ansiblei-installimine-ja-seadistamine","title":"1. Ansible'i installimine ja seadistamine","text":""},{"location":"ansible_basics/lab/#11-ansiblei-installimine","title":"1.1 Ansible'i installimine","text":"<p>Ubuntu/Debian: <pre><code># Uuenda pakettide nimekirja\nsudo apt update\n\n# Installi Ansible\nsudo apt install ansible -y\n\n# Kontrolli installatsiooni\nansible --version\n</code></pre></p> <p>macOS (Homebrew): <pre><code># Installi Homebrew (kui ei ole)\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n\n# Installi Ansible\nbrew install ansible\n\n# Kontrolli\nansible --version\n</code></pre></p> <p>Windows (WSL): <pre><code># Windows'is kasutage Windows Subsystem for Linux\n# Seej\u00e4rel j\u00e4rgige Ubuntu juhendeid\n</code></pre></p>"},{"location":"ansible_basics/lab/#12-ssh-votmete-seadistamine","title":"1.2 SSH v\u00f5tmete seadistamine","text":"<p>Miks SSH v\u00f5tmed on vajalikud: - Ansible kasutab SSH'd serveritega \u00fchendumiseks - V\u00f5tmed on turvalisemad kui paroolid - Automatiseerimine toimib ilma parooli k\u00fcsimata</p> <p>SSH v\u00f5tme loomine: <pre><code># Looge SSH v\u00f5ti (kui teil ei ole)\nssh-keygen -t rsa -b 4096 -C \"teie.email@example.com\"\n\n# Vajutage Enter k\u00f5ikidele k\u00fcsimustele (kasutab default asukohti)\n# V\u00f5ite lisada parooli v\u00f5i j\u00e4tta t\u00fchjaks\n</code></pre></p> <p>SSH v\u00f5tme kopeerimine test serverisse: <pre><code># Kopeerige avalik v\u00f5ti serverisse\nssh-copy-id kasutaja@test-server.local\n\n# V\u00f5i k\u00e4sitsi\ncat ~/.ssh/id_rsa.pub | ssh kasutaja@test-server.local \"mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys\"\n</code></pre></p> <p>Testide \u00fchendust: <pre><code># Peaks \u00fchenduma ilma parooli k\u00fcsimata\nssh kasutaja@test-server.local\n</code></pre></p>"},{"location":"ansible_basics/lab/#13-esimene-inventory-fail-serverite-telefoniraamat","title":"1.3 Esimene inventory fail - Serverite \"telefoniraamat\"","text":"<p>Esmalt m\u00f5istame, mis on inventory: - Inventory on fail, kus kirjas k\u00f5ik serverid, mida Ansible haldab - See on nagu telefoniraamat - Ansible vaatab sealt, milliseid servereid kontakteeruda - Saame servereid grupeerida (nt webserverid, andmebaasiserveid)</p> <p>Looge t\u00f6\u00f6kaust: <pre><code>mkdir ~/ansible-praktikum\ncd ~/ansible-praktikum\n</code></pre></p> <p>N\u00fc\u00fcd loome inventory faili sammhaaval:</p>"},{"location":"ansible_basics/lab/#131-looge-tuhi-fail","title":"1.3.1 Looge t\u00fchi fail","text":"<pre><code>touch inventory.ini\n</code></pre>"},{"location":"ansible_basics/lab/#132-avage-fail-tekstiredaktoris","title":"1.3.2 Avage fail tekstiredaktoris","text":"<pre><code>nano inventory.ini\n# v\u00f5i\ncode inventory.ini\n</code></pre>"},{"location":"ansible_basics/lab/#133-lisage-esimene-server-localhost-testimiseks","title":"1.3.3 Lisage esimene server (localhost testimiseks)","text":"<pre><code>[test]\nlocalhost ansible_connection=local\n</code></pre> <p>Selgitus: - <code>[test]</code> = grupi nimi (sulgudes) - <code>localhost</code> = serveri nimi - <code>ansible_connection=local</code> = \u00fctleb Ansible'ile, et kasuta lokaalseid k\u00e4ske (SSH pole vaja)</p>"},{"location":"ansible_basics/lab/#134-lisage-teine-grupp-tuleviku-serveritele","title":"1.3.4 Lisage teine grupp (tuleviku serveritele)","text":"<pre><code>[practice]\n# Kommentaar: Siia saate hiljem lisada tegelikke servereid\n# N\u00e4ide: server1.example.com ansible_user=ubuntu\n</code></pre>"},{"location":"ansible_basics/lab/#135-salvestage-fail-ctrlx-siis-y-siis-enter-nanos","title":"1.3.5 Salvestage fail (Ctrl+X, siis Y, siis Enter nano's)","text":"<p>N\u00fc\u00fcd testima inventory: <pre><code># Vaatame, kas Ansible n\u00e4eb meie servereid\nansible -i inventory.ini --list-hosts all\n\n# Peaks n\u00e4itama: localhost\n</code></pre></p> <p>Testide \u00fchendust: <pre><code>ansible -i inventory.ini test -m ping\n</code></pre></p> <p>\ud83d\udca1 M\u00f5telge: Miks kasutame <code>test</code> mitte <code>localhost</code>? (Vastus: test on grupi nimi!)</p>"},{"location":"ansible_basics/lab/#2-esimesed-ad-hoc-kasud","title":"2. Esimesed Ad-hoc k\u00e4sud","text":""},{"location":"ansible_basics/lab/#21-ad-hoc-kaskude-harjutused","title":"2.1 Ad-hoc k\u00e4skude harjutused","text":"<p>Ping test: <pre><code># Kontrollige k\u00f5iki servereid\nansible -i inventory.ini all -m ping\n</code></pre></p> <p>S\u00fcsteemi info: <pre><code># Vaata operatsioonis\u00fcsteemi\nansible -i inventory.ini all -m setup -a \"filter=ansible_distribution*\"\n\n# Vaata m\u00e4lu ja CPU\nansible -i inventory.ini all -m setup -a \"filter=ansible_memtotal_mb,ansible_processor_count\"\n</code></pre></p> <p>Failide haldamine: <pre><code># Loo test kaust\nansible -i inventory.ini all -m file -a \"path=/tmp/ansible-test state=directory\"\n\n# Loo test fail\nansible -i inventory.ini all -m copy -a \"content='Ansible test' dest=/tmp/ansible-test/hello.txt\"\n\n# Kontrolli faili olemasolu\nansible -i inventory.ini all -m command -a \"ls -la /tmp/ansible-test/\"\n</code></pre></p> <p>Pakettide haldamine: <pre><code># Installi htop (vajalik sudo)\nansible -i inventory.ini all -m package -a \"name=htop state=present\" --become\n\n# Kontrolli installatsiooni\nansible -i inventory.ini all -m command -a \"which htop\"\n</code></pre></p>"},{"location":"ansible_basics/lab/#3-yaml-ja-esimene-playbook","title":"3. YAML ja esimene playbook","text":""},{"location":"ansible_basics/lab/#31-yaml-suntaksi-harjutus-opime-inimese-keelt","title":"3.1 YAML s\u00fcntaksi harjutus - \u00d5pime \"inimese keelt\"","text":"<p>Miks YAML on oluline: - Ansible playbook'id on kirjutatud YAML keeles - YAML on disainitud inimesele loetavaks - Taandrimine (indentation) on V\u00c4GA oluline!</p> <p>Loome YAML faili sammhaaval:</p>"},{"location":"ansible_basics/lab/#311-looge-uus-fail","title":"3.1.1 Looge uus fail","text":"<pre><code>touch test.yml\nnano test.yml  # v\u00f5i code test.yml\n</code></pre>"},{"location":"ansible_basics/lab/#312-alustage-yaml-dokumendiga","title":"3.1.2 Alustage YAML dokumendiga","text":"<pre><code>---\n# YAML alustab alati kolme kriipsuga\n# Hashtag (#) on kommentaar\n</code></pre>"},{"location":"ansible_basics/lab/#313-lisage-lihtne-vaartus","title":"3.1.3 Lisage lihtne v\u00e4\u00e4rtus","text":"<p><pre><code>nimi: \"Minu Ansible Test\"\nversioon: 1.0\n</code></pre> M\u00e4rkus: Jutum\u00e4rgid on vabatahtlikud, aga hea praktika tekstile</p>"},{"location":"ansible_basics/lab/#314-lisage-loend-list","title":"3.1.4 Lisage loend (list)","text":"<p><pre><code>serverid:\n  - nimi: \"test1\"\n    ip: \"192.168.1.10\"\n    roll: \"veebiserver\"\n  - nimi: \"test2\"\n    ip: \"192.168.1.11\"\n    roll: \"andmebaas\"\n</code></pre> T\u00e4helepanu:  - Kriips (-) t\u00e4histab loendi elementi - Taandrimine peab olema t\u00e4pne (kasutage 2 t\u00fchikut) - \u00c4RA kasutage Tab klahvi!</p>"},{"location":"ansible_basics/lab/#315-lisage-seadistused","title":"3.1.5 Lisage seadistused","text":"<pre><code>seadistused:\n  http_port: 80\n  https_port: 443\n  debug: true\n</code></pre>"},{"location":"ansible_basics/lab/#316-salvestage-fail","title":"3.1.6 Salvestage fail","text":"<p>Kontrollige s\u00fcntaksi: <pre><code># Python abil (kui on installitud)\npython3 -c \"import yaml; print(yaml.safe_load(open('test.yml')))\"\n\n# Ansible abil\nansible-playbook --syntax-check test.yml\n</code></pre></p> <p>\ud83d\udca1 Harjutus: Muutke <code>debug: true</code> v\u00e4\u00e4rtuseks <code>false</code> ja kontrollige uuesti!</p>"},{"location":"ansible_basics/lab/#32-esimene-lihtne-playbook-sammhaaval-ehitamine","title":"3.2 Esimene lihtne playbook - Sammhaaval ehitamine","text":"<p>M\u00f5istame playbook struktuuri: - Play = \u00fcks stsenaarium \u00fche grupi serveritele - Tasks = konkreetsed sammud, mida teha - Modules = Ansible'i ehitatud funktsioonid (debug, file, copy jne)</p> <p>Loome playbook samm-sammult:</p>"},{"location":"ansible_basics/lab/#321-looge-uus-fail","title":"3.2.1 Looge uus fail","text":"<pre><code>touch mu-esimene-playbook.yml\nnano mu-esimene-playbook.yml\n</code></pre>"},{"location":"ansible_basics/lab/#322-alustage-yaml-ja-play-definitsiooniga","title":"3.2.2 Alustage YAML ja Play definitsiooniga","text":"<p><pre><code>---\n- name: \"Minu esimene Ansible playbook\"\n  hosts: all\n  gather_facts: yes\n</code></pre> Selgitus: - <code>name:</code> = playbook'i kirjeldus - <code>hosts: all</code> = k\u00e4ivita k\u00f5ikidele serveritele inventory's - <code>gather_facts: yes</code> = kogu serveri infot (OS, IP, jne)</p>"},{"location":"ansible_basics/lab/#323-lisage-tasks-sektsioon","title":"3.2.3 Lisage tasks sektsioon","text":"<pre><code>  tasks:\n</code></pre>"},{"location":"ansible_basics/lab/#324-esimene-task-lihtne-tervitus","title":"3.2.4 Esimene task - lihtne tervitus","text":"<p><pre><code>    - name: \"Tervita maailma\"\n      debug:\n        msg: \"Tere! Ansible t\u00f6\u00f6tab {{ inventory_hostname }} serveris!\"\n</code></pre> M\u00e4rkuseid: - <code>debug</code> = moodul s\u00f5numite v\u00e4ljastamiseks - <code>{{ inventory_hostname }}</code> = muutuja (server nimi)</p>"},{"location":"ansible_basics/lab/#325-teine-task-naita-susteemi-infot","title":"3.2.5 Teine task - n\u00e4ita s\u00fcsteemi infot","text":"<pre><code>    - name: \"N\u00e4ita s\u00fcsteemi infot\"\n      debug:\n        msg: \"Server t\u00f6\u00f6tab {{ ansible_distribution }} {{ ansible_distribution_version }}\"\n</code></pre>"},{"location":"ansible_basics/lab/#326-kolmas-task-loo-kaust","title":"3.2.6 Kolmas task - loo kaust","text":"<p><pre><code>    - name: \"Loo test kataloog\"\n      file:\n        path: /tmp/ansible-praktikum\n        state: directory\n        mode: '0755'\n</code></pre> Selgitus: - <code>file</code> = moodul failide/kaustade haldamiseks - <code>state: directory</code> = veendu, et see on kaust - <code>mode: '0755'</code> = m\u00e4\u00e4ra \u00f5igused (rwx r-x r-x)</p>"},{"location":"ansible_basics/lab/#327-neljas-task-kirjuta-fail","title":"3.2.7 Neljas task - kirjuta fail","text":"<p><pre><code>    - name: \"Kirjuta info fail\"\n      copy:\n        dest: /tmp/ansible-praktikum/info.txt\n        mode: '0644'\n        content: |\n          Ansible playbook k\u00e4ivitatud: {{ ansible_date_time.iso8601 }}\n          Serveri nimi: {{ inventory_hostname }}\n          IP aadress: {{ ansible_default_ipv4.address | default('ei tuvastatud') }}\n</code></pre> M\u00e4rkuseid: - <code>content: |</code> = mitme-realine tekst - <code>{{ ansible_date_time.iso8601 }}</code> = praegune kuup\u00e4ev</p>"},{"location":"ansible_basics/lab/#328-viies-task-loe-fail","title":"3.2.8 Viies task - loe fail","text":"<p><pre><code>    - name: \"Kuva faili sisu\"\n      command: cat /tmp/ansible-praktikum/info.txt\n      register: faili_sisu\n</code></pre> Selgitus: - <code>command</code> = k\u00e4ivita shell k\u00e4sk - <code>register</code> = salvesta v\u00e4ljund muutujasse</p>"},{"location":"ansible_basics/lab/#329-kuues-task-naita-tulemust","title":"3.2.9 Kuues task - n\u00e4ita tulemust","text":"<pre><code>    - name: \"N\u00e4ita, mis failis on\"\n      debug:\n        msg: \"{{ faili_sisu.stdout_lines }}\"\n</code></pre>"},{"location":"ansible_basics/lab/#3210-salvestage-fail","title":"3.2.10 Salvestage fail","text":"<p>N\u00fc\u00fcd testima meie playbook'i:</p> <ol> <li> <p>Esmalt kuiv k\u00e4ivitus (dry run): <pre><code>ansible-playbook -i inventory.ini --check mu-esimene-playbook.yml\n</code></pre> Mis juhtub: Ansible n\u00e4itab, mida ta teeks, aga ei muuda midagi</p> </li> <li> <p>Kui kuiv k\u00e4ivitus \u00f5nnestus, siis tegelik k\u00e4ivitus: <pre><code>ansible-playbook -i inventory.ini mu-esimene-playbook.yml\n</code></pre></p> </li> <li> <p>Vaadake tulemust:</p> </li> <li>Kas k\u00f5ik taskid \u00f5nnestusid (roheline)?</li> <li>Kontrollige, kas fail tekkis: <code>ls -la /tmp/ansible-praktikum/</code></li> </ol> <p>\ud83d\udca1 Debugimise k\u00fcsimused: - Mida t\u00e4hendab \"changed\" vs \"ok\"? - Miks m\u00f5ned taskid on \"changed\" ja teised \"ok\"? - K\u00e4ivitage playbook uuesti - mis muutub?</p>"},{"location":"ansible_basics/lab/#33-playbook-muutujatega-opime-dunaamilisust","title":"3.3 Playbook muutujatega - \u00d5pime d\u00fcnaamilisust","text":"<p>Miks muutujad on olulised: - Teevad playbook'i korduvkasutatavaks - V\u00f5imaldavad erinevaid konfiguratsioone - Lihtsustavad muudatuste tegemist</p> <p>Loome muutujatega playbook sammhaaval:</p>"},{"location":"ansible_basics/lab/#331-uus-fail","title":"3.3.1 Uus fail","text":"<pre><code>touch playbook-muutujatega.yml\nnano playbook-muutujatega.yml\n</code></pre>"},{"location":"ansible_basics/lab/#332-play-definitsioon-muutujatega","title":"3.3.2 Play definitsioon muutujatega","text":"<pre><code>---\n- name: \"Playbook muutujatega\"\n  hosts: all\n  vars:\n    rakenduse_nimi: \"Minu Veebirakendus\"\n    versioon: \"1.2.3\"\n    portnumber: 8080\n\n  tasks:\n</code></pre>"},{"location":"ansible_basics/lab/#333-task-1-dunaamiline-kausta-nimi","title":"3.3.3 Task 1 - D\u00fcnaamiline kausta nimi","text":"<p><pre><code>    - name: \"Loo rakenduse kaust\"\n      file:\n        path: \"/opt/{{ rakenduse_nimi | lower | replace(' ', '-') }}\"\n        state: directory\n        mode: '0755'\n      become: yes\n</code></pre> Selgitused: - <code>{{ rakenduse_nimi }}</code> = kasuta muutujat - <code>| lower</code> = muuda v\u00e4ikesteks t\u00e4htedeks - <code>| replace(' ', '-')</code> = asenda t\u00fchikud kriipsudega</p>"},{"location":"ansible_basics/lab/#334-task-2-dunaamiline-konfiguratsioon","title":"3.3.4 Task 2 - D\u00fcnaamiline konfiguratsioon","text":"<pre><code>    - name: \"Kirjuta konfiguratsioon\"\n      copy:\n        dest: \"/opt/{{ rakenduse_nimi | lower | replace(' ', '-') }}/config.env\"\n        mode: '0644'\n        content: |\n          # {{ rakenduse_nimi }} konfiguratsioon\n          APP_NAME={{ rakenduse_nimi }}\n          VERSION={{ versioon }}\n          PORT={{ portnumber }}\n          INSTALLED_ON={{ ansible_date_time.iso8601 }}\n      become: yes\n</code></pre>"},{"location":"ansible_basics/lab/#335-task-3-kuva-tulemus","title":"3.3.5 Task 3 - Kuva tulemus","text":"<pre><code>    - name: \"Kuva konfiguratsioon\"\n      command: \"cat /opt/{{ rakenduse_nimi | lower | replace(' ', '-') }}/config.env\"\n      register: config_sisu\n      become: yes\n\n    - name: \"N\u00e4ita konfiguratsiooni\"\n      debug:\n        msg: \"{{ config_sisu.stdout_lines }}\"\n</code></pre>"},{"location":"ansible_basics/lab/#336-kaivita-ja-eksperimenteerige","title":"3.3.6 K\u00e4ivita ja eksperimenteerige","text":"<pre><code>ansible-playbook -i inventory.ini playbook-muutujatega.yml\n</code></pre> <p>\ud83d\udca1 Harjutus: 1. Muutke <code>rakenduse_nimi</code> muutujat 2. K\u00e4ivitage playbook uuesti 3. Vaadake, kuidas tulemus muutub</p> <p>Lisaharjutus: Lisage uus muutuja <code>kirjeldus</code> ja kasutage seda config failis!</p>"},{"location":"ansible_basics/lab/#4-veebiserveri-seadistamine","title":"4. Veebiserveri seadistamine","text":""},{"location":"ansible_basics/lab/#41-nginx-playbook-automatiseeritud-veebiserver","title":"4.1 Nginx playbook - Automatiseeritud veebiserver","text":"<p>Miks Nginx: - Populaarne veebiserver - Lihtne seadistada - Hea n\u00e4ide produktsiooni-l\u00e4hedase automatiseerimise kohta</p> <p>Loome Nginx playbook etappide kaupa:</p>"},{"location":"ansible_basics/lab/#411-alustage-uue-failiga","title":"4.1.1 Alustage uue failiga","text":"<pre><code>touch nginx-setup.yml\nnano nginx-setup.yml\n</code></pre>"},{"location":"ansible_basics/lab/#412-play-definitsioon-muutujatega","title":"4.1.2 Play definitsioon muutujatega","text":"<p><pre><code>---\n- name: \"Nginx veebiserveri seadistamine\"\n  hosts: all\n  become: yes\n  vars:\n    web_root: \"/var/www/html\"\n    site_name: \"Minu Test Sait\"\n\n  tasks:\n</code></pre> M\u00e4rkuseid: - <code>become: yes</code> = kasuta sudo \u00f5iguseid k\u00f5ikides tasks'ides - <code>vars:</code> = playbook'i muutujad</p>"},{"location":"ansible_basics/lab/#413-task-1-susteemi-ettevalmistus","title":"4.1.3 Task 1 - S\u00fcsteemi ettevalmistus","text":"<p><pre><code>    - name: \"Uuenda pakettide nimekirja\"\n      package:\n        update_cache: yes\n      when: ansible_os_family == \"Debian\"\n</code></pre> Selgitus: <code>when:</code> = conditional - k\u00e4ivita ainult Debian/Ubuntu's</p>"},{"location":"ansible_basics/lab/#414-task-2-nginx-installimine","title":"4.1.4 Task 2 - Nginx installimine","text":"<pre><code>    - name: \"Installi Nginx\"\n      package:\n        name: nginx\n        state: present\n</code></pre>"},{"location":"ansible_basics/lab/#415-task-3-veebi-kausta-loomine","title":"4.1.5 Task 3 - Veebi kausta loomine","text":"<p><pre><code>    - name: \"Loo veebi kaust\"\n      file:\n        path: \"{{ web_root }}\"\n        state: directory\n        owner: www-data\n        group: www-data\n        mode: '0755'\n      when: ansible_os_family == \"Debian\"\n</code></pre> M\u00e4rkuseid: - <code>{{ web_root }}</code> = kasutab muutujat - <code>owner/group: www-data</code> = nginx kasutaja</p>"},{"location":"ansible_basics/lab/#416-task-4-lihtsa-html-lehe-loomine","title":"4.1.6 Task 4 - Lihtsa HTML lehe loomine","text":"<pre><code>    - name: \"Kopeeri HTML lehek\u00fclg\"\n      copy:\n        dest: \"{{ web_root }}/index.html\"\n        owner: www-data\n        group: www-data\n        mode: '0644'\n        content: |\n          &lt;!DOCTYPE html&gt;\n          &lt;html lang=\"et\"&gt;\n          &lt;head&gt;\n              &lt;meta charset=\"UTF-8\"&gt;\n              &lt;title&gt;{{ site_name }}&lt;/title&gt;\n              &lt;style&gt;\n                  body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }\n                  .container { max-width: 600px; margin: 0 auto; }\n                  .success { color: green; }\n                  .info { background: #f0f0f0; padding: 20px; border-radius: 5px; }\n              &lt;/style&gt;\n          &lt;/head&gt;\n          &lt;body&gt;\n              &lt;div class=\"container\"&gt;\n                  &lt;h1 class=\"success\"&gt;{{ site_name }}&lt;/h1&gt;\n                  &lt;p&gt;Nginx on edukalt paigaldatud Ansible'iga!&lt;/p&gt;\n                  &lt;div class=\"info\"&gt;\n                      &lt;h3&gt;Serveri info:&lt;/h3&gt;\n                      &lt;p&gt;&lt;strong&gt;Hostname:&lt;/strong&gt; {{ inventory_hostname }}&lt;/p&gt;\n                      &lt;p&gt;&lt;strong&gt;S\u00fcsteem:&lt;/strong&gt; {{ ansible_distribution }} {{ ansible_distribution_version }}&lt;/p&gt;\n                      &lt;p&gt;&lt;strong&gt;Paigaldatud:&lt;/strong&gt; {{ ansible_date_time.iso8601 }}&lt;/p&gt;\n                  &lt;/div&gt;\n              &lt;/div&gt;\n          &lt;/body&gt;\n          &lt;/html&gt;\n      when: ansible_os_family == \"Debian\"\n</code></pre>"},{"location":"ansible_basics/lab/#417-task-5-nginx-kaivitamine","title":"4.1.7 Task 5 - Nginx k\u00e4ivitamine","text":"<p><pre><code>    - name: \"K\u00e4ivita ja luba Nginx\"\n      service:\n        name: nginx\n        state: started\n        enabled: yes\n</code></pre> Selgitus: - <code>state: started</code> = veendu, et teenus t\u00f6\u00f6tab - <code>enabled: yes</code> = k\u00e4ivita automaatselt boot'imisel</p>"},{"location":"ansible_basics/lab/#418-task-6-valideerimised","title":"4.1.8 Task 6 - Valideerimised","text":"<p><pre><code>    - name: \"Kontrolli Nginx olekut\"\n      command: systemctl is-active nginx\n      register: nginx_status\n      failed_when: false\n\n    - name: \"N\u00e4ita Nginx olekut\"\n      debug:\n        msg: \"Nginx olek: {{ nginx_status.stdout }}\"\n\n    - name: \"Testi veebiserveri \u00fchendust\"\n      uri:\n        url: \"http://localhost\"\n        return_content: yes\n      register: web_test\n      failed_when: false\n\n    - name: \"N\u00e4ita veebiserveri vastust\"\n      debug:\n        msg: \"Veebiserver t\u00f6\u00f6tab! HTTP kood: {{ web_test.status | default('Ei saanud \u00fchendust') }}\"\n</code></pre> M\u00e4rkuseid: - <code>uri</code> moodul = HTTP p\u00e4ringute tegemiseks - <code>failed_when: false</code> = \u00e4ra l\u00f5peta vea korral</p>"},{"location":"ansible_basics/lab/#419-salvestage-fail","title":"4.1.9 Salvestage fail","text":"<p>N\u00fc\u00fcd testima Nginx playbook'i:</p> <ol> <li> <p>S\u00fcntaksi kontroll: <pre><code>ansible-playbook -i inventory.ini --syntax-check nginx-setup.yml\n</code></pre></p> </li> <li> <p>Kuiv k\u00e4ivitus: <pre><code>ansible-playbook -i inventory.ini --check nginx-setup.yml\n</code></pre> Vaadake: Millised taskid n\u00e4itavad \"changed\"?</p> </li> <li> <p>Tegelik k\u00e4ivitus: <pre><code>ansible-playbook -i inventory.ini nginx-setup.yml\n</code></pre></p> </li> <li> <p>Tulemuse testimine: <pre><code># Kontrolli Nginx protsessi\nsudo systemctl status nginx\n\n# Kontrolli, kas port 80 on avatud\nsudo netstat -tlnp | grep :80\n\n# Testi HTTP p\u00e4ringuga\ncurl http://localhost\n</code></pre></p> </li> <li> <p>Brauseris (kui GUI on):</p> </li> <li>Avage http://localhost</li> <li>Peaks n\u00e4itama ilusat HTML lehte</li> </ol> <p>\ud83d\udca1 Anal\u00fc\u00fcsige: - Mitu \"changed\" oli esimesel k\u00e4ivitusel? - K\u00e4ivitage playbook uuesti - mitu \"changed\" n\u00fc\u00fcd? - Miks see nii on? (Hint: idempotency!)</p> <p>\ud83d\udd27 Troubleshooting: - Kui Nginx ei k\u00e4ivitu, kontrollige: <code>sudo journalctl -u nginx</code> - Kui port kinni, vaadake: <code>sudo ss -tlnp | grep :80</code></p>"},{"location":"ansible_basics/lab/#5-ansible-konfiguratsiooni-optimeerimine","title":"5. Ansible konfiguratsiooni optimeerimine","text":""},{"location":"ansible_basics/lab/#51-ansiblecfg-seadistamine-mugavuse-suurendamine","title":"5.1 ansible.cfg seadistamine - Mugavuse suurendamine","text":"<p>Miks ansible.cfg on kasulik: - Ei pea iga kord <code>-i inventory.ini</code> kirjutama - Paremad vaikimisi seadistused - SSH optimeeringud</p> <p>Loome konfiguratsiooni sammhaaval:</p>"},{"location":"ansible_basics/lab/#511-loo-fail","title":"5.1.1 Loo fail","text":"<pre><code>touch ansible.cfg\nnano ansible.cfg\n</code></pre>"},{"location":"ansible_basics/lab/#512-lisage-pohiseadistused","title":"5.1.2 Lisage p\u00f5hiseadistused","text":"<pre><code>[defaults]\n# Inventory faili asukoht (n\u00fc\u00fcd ei pea -i iga kord kirjutama)\ninventory = inventory.ini\n</code></pre>"},{"location":"ansible_basics/lab/#513-ssh-seadistused-et-valtida-vigu","title":"5.1.3 SSH seadistused (et v\u00e4ltida vigu)","text":"<p><pre><code># SSH seadistused\nhost_key_checking = False\nremote_user = kasutaja\nprivate_key_file = ~/.ssh/id_rsa\n</code></pre> Selgitus: - <code>host_key_checking = False</code> = ei k\u00fcsi SSH fingerprinte - <code>remote_user</code> = default kasutajanimi serverites</p>"},{"location":"ansible_basics/lab/#514-valjundi-parandused","title":"5.1.4 V\u00e4ljundi parandused","text":"<p><pre><code># V\u00e4ljundi seadistused\nstdout_callback = yaml\npipelining = True\n</code></pre> Miks: YAML v\u00e4ljund on inimesele loetavam</p>"},{"location":"ansible_basics/lab/#515-performance-seadistused","title":"5.1.5 Performance seadistused","text":"<pre><code># Paralleelsus (kui palju serveritega korraga t\u00f6\u00f6tab)\nforks = 10\n\n# Logimise seadistused  \nlog_path = ./ansible.log\n</code></pre>"},{"location":"ansible_basics/lab/#516-ssh-optimeeringud-taiendav-sektsioon","title":"5.1.6 SSH optimeeringud (t\u00e4iendav sektsioon)","text":"<pre><code>[ssh_connection]\n# SSH optimeeringud\nssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null\ntimeout = 30\nretries = 3\n</code></pre>"},{"location":"ansible_basics/lab/#517-salvestage-ja-testiga","title":"5.1.7 Salvestage ja testiga","text":"<pre><code># N\u00fc\u00fcd saate k\u00e4ivitada ilma -i liputa!\nansible all -m ping\n</code></pre> <p>Teste konfiguratsiooni: <pre><code># N\u00fc\u00fcd ei pea -i inventory.ini m\u00e4\u00e4rama\nansible all -m ping\n\n# Logi kontrollimise\ntail -f ansible.log\n</code></pre></p>"},{"location":"ansible_basics/lab/#6-veatuvastus-ja-probleemide-lahendamine","title":"6. Veatuvastus ja probleemide lahendamine","text":""},{"location":"ansible_basics/lab/#61-levinud-probleemid-ja-lahendused","title":"6.1 Levinud probleemid ja lahendused","text":"<p>SSH \u00fchenduse probleemid: <pre><code># Kontrolli SSH \u00fchendust k\u00e4sitsi\nssh -v kasutaja@target-host\n\n# SSH v\u00f5tme probleemid\nssh-add ~/.ssh/id_rsa\nchmod 600 ~/.ssh/id_rsa\nchmod 644 ~/.ssh/id_rsa.pub\n</code></pre></p> <p>Sudo \u00f5iguste probleemid: <pre><code># Testide sudo \u00f5iguseid\nansible all -m command -a \"whoami\" --become\n\n# Sudo parooli k\u00fcsimine\nansible all -m command -a \"whoami\" --become --ask-become-pass\n</code></pre></p> <p>Python teegi probleemid: <pre><code># Kontrolli Python'i\nansible all -m setup -a \"filter=ansible_python*\"\n\n# M\u00e4\u00e4ra Python'i asukoht\nansible all -m ping -e ansible_python_interpreter=/usr/bin/python3\n</code></pre></p>"},{"location":"ansible_basics/lab/#62-debugimise-playbook-opime-torkeid-leidma","title":"6.2 Debugimise playbook - \u00d5pime t\u00f5rkeid leidma","text":"<p>Miks debug playbook on vajalik: - Aitab m\u00f5ista, millised muutujad on saadaval - Kontrollib SSH ja sudo seadistusi - N\u00e4itab Python'i konfiguratsiooni</p> <p>Loome debug playbook etappide kaupa:</p>"},{"location":"ansible_basics/lab/#621-alustage-uue-failiga","title":"6.2.1 Alustage uue failiga","text":"<pre><code>touch debug-playbook.yml\nnano debug-playbook.yml\n</code></pre>"},{"location":"ansible_basics/lab/#622-play-definitsioon","title":"6.2.2 Play definitsioon","text":"<pre><code>---\n- name: \"Debug ja veatuvastus\"\n  hosts: all\n  gather_facts: yes\n\n  tasks:\n</code></pre>"},{"location":"ansible_basics/lab/#623-task-1-naita-susteemi-muutujaid","title":"6.2.3 Task 1 - N\u00e4ita s\u00fcsteemi muutujaid","text":"<pre><code>    - name: \"N\u00e4ita operatsioonis\u00fcsteemi\"\n      debug:\n        msg: \"OS: {{ ansible_distribution }} {{ ansible_distribution_version }}\"\n</code></pre>"},{"location":"ansible_basics/lab/#624-task-2-kontrolli-kasutajat","title":"6.2.4 Task 2 - Kontrolli kasutajat","text":"<p><pre><code>    - name: \"Kontrolli SSH kasutaja\"\n      command: whoami\n      register: current_user\n\n    - name: \"N\u00e4ita kasutaja infot\"\n      debug:\n        msg: \"SSH kasutaja: {{ current_user.stdout }}, Ansible kasutaja: {{ ansible_user_id }}\"\n</code></pre> Selgitus: <code>register</code> salvestab k\u00e4su v\u00e4ljundi muutujasse</p>"},{"location":"ansible_basics/lab/#625-task-3-kontrolli-sudo","title":"6.2.5 Task 3 - Kontrolli sudo","text":"<p><pre><code>    - name: \"Kontrolli sudo \u00f5iguseid\"\n      command: whoami\n      become: yes\n      register: sudo_user\n      failed_when: false\n</code></pre> M\u00e4rkus: <code>failed_when: false</code> = \u00e4ra l\u00f5peta vea korral</p>"},{"location":"ansible_basics/lab/#626-task-4-naita-sudo-tulemust","title":"6.2.6 Task 4 - N\u00e4ita sudo tulemust","text":"<pre><code>    - name: \"N\u00e4ita sudo tulemust\"\n      debug:\n        msg: \"Sudo kasutaja: {{ sudo_user.stdout | default('Sudo ei toimi') }}\"\n</code></pre>"},{"location":"ansible_basics/lab/#627-task-5-kontrolli-pythoni","title":"6.2.7 Task 5 - Kontrolli Python'i","text":"<pre><code>    - name: \"Kontrolli Python'i\"\n      debug:\n        msg: \"Python: {{ ansible_python_interpreter | default(ansible_python.executable) }}\"\n</code></pre>"},{"location":"ansible_basics/lab/#628-kaivita-ja-analuusi","title":"6.2.8 K\u00e4ivita ja anal\u00fc\u00fcsi","text":"<p><pre><code>ansible-playbook -i inventory.ini debug-playbook.yml -v\n</code></pre> M\u00e4rkus: <code>-v</code> flag annab rohkem detaile</p>"},{"location":"ansible_basics/lab/#7-labi-hindamine-ja-reflektsioon","title":"7. Labi hindamine ja reflektsioon","text":""},{"location":"ansible_basics/lab/#71-tehnilised-saavutused","title":"7.1 Tehnilised saavutused","text":"<p>Kontrollige, et j\u00e4rgmised asjad toimivad:</p> <ul> <li> Ansible t\u00f6\u00f6tab - <code>ansible --version</code> n\u00e4itab versiooni</li> <li> SSH \u00fchendus toimib - saate serveritesse \u00fchenduda ilma paroolita</li> <li> Inventory on funktsionaalne - <code>ansible all -m ping</code> tagastab \"pong\"</li> <li> Ad-hoc k\u00e4sud t\u00f6\u00f6tavad - saate hallata faile ja pakette</li> <li> YAML s\u00fcntaks on selge - m\u00f5istate taandrimist ja struktuuri</li> <li> Esimene playbook toimib - k\u00f5ik taskid \u00f5nnestuvad (roheline v\u00e4ljund)</li> <li> Muutujad t\u00f6\u00f6tavad - saate muuta konfiguratsiooni muutujate kaudu</li> <li> Nginx on k\u00e4igus - <code>curl http://localhost</code> tagastab HTML</li> <li> Konfiguratsioon optimeeritud - <code>ansible.cfg</code> on seadistatud</li> </ul>"},{"location":"ansible_basics/lab/#72-kontseptuaalne-moistmine","title":"7.2 Kontseptuaalne m\u00f5istmine","text":"<p>Kontrollige oma m\u00f5istmist:</p> <ol> <li>Ansible arhitektuur:</li> <li>Selgitage oma s\u00f5nadega, miks Ansible on \"agentless\"</li> <li> <p>Mis vahe on \"control node\" ja \"managed node\" vahel?</p> </li> <li> <p>Idempotency:</p> </li> <li>Miks saab playbook'e turvaliselt korduvalt k\u00e4ivitada?</li> <li> <p>Mis vahe on \"changed\" ja \"ok\" state'il?</p> </li> <li> <p>YAML ja muutujad:</p> </li> <li>Miks on taandrimine YAML's nii oluline?</li> <li> <p>Kuidas muutujad teevad playbook'i korduvkasutatavaks?</p> </li> <li> <p>SSH ja turvalisus:</p> </li> <li>Miks on SSH v\u00f5tmed paremad kui paroolid?</li> <li>Kuidas Ansible tagab turvalise kommunikatsiooni?</li> </ol>"},{"location":"ansible_basics/lab/#73-praktilised-oskused","title":"7.3 Praktilised oskused","text":"<p>\ud83d\udd27 Proovige ise:</p> <ol> <li>Muutke Nginx playbook'i:</li> <li>Lisage uus muutuja <code>server_admin_email</code></li> <li> <p>Muutke HTML template'i seda kasutama</p> </li> <li> <p>Looge uus playbook:</p> </li> <li>Installige htop ja tree paketid</li> <li>Looge <code>/opt/tools/</code> kaust</li> <li> <p>Kirjutage info fail installitud t\u00f6\u00f6riistade kohta</p> </li> <li> <p>Eksperimenteerige ad-hoc k\u00e4skudega:</p> </li> <li>Kontrollige k\u00f5igi serverite disk space'i</li> <li>Looge fail k\u00f5ikides serverites praeguse kuup\u00e4eva ja ajaga</li> </ol>"},{"location":"ansible_basics/lab/#74-valmidus-jargmiseks","title":"7.4 Valmidus j\u00e4rgmiseks","text":"<p>Te olete valmis kodut\u00f6\u00f6ks, kui: - M\u00f5istate Ansible'i p\u00f5hikontseptsioone - Saate kirjutada lihtsat YAML s\u00fcntaksit - Oskate kasutada muutujaid ja template'e - M\u00f5istate playbook'ide struktuuri - Saate t\u00f5rkeid diagnoosida ja lahendada</p>"},{"location":"ansible_basics/lab/#8-jargmised-sammud","title":"8. J\u00e4rgmised sammud","text":"<p>Valmis kodut\u00f6\u00f6ks: - Kasutage siin \u00f5pitud oskusi LAMP stack playbook'i loomiseks - Rakendage learned patterns oma serverite automatiseerimiseks - Praktiseerige YAML s\u00fcntaksit ja playbook struktuuri</p> <p>J\u00e4rgmine n\u00e4dal (Ansible Advanced): - Roles ja Galaxy - Templates ja Jinja2 - Conditional logic ja loops - Multi-environment deployments</p>"},{"location":"ansible_basics/lab/#9-boonusulesanded-ansiblei-oskajatele","title":"9. BOONUS\u00dcLESANDED (Ansible'i oskajatele)","text":""},{"location":"ansible_basics/lab/#91-advanced-playbook-patterns","title":"9.1 Advanced Playbook Patterns","text":"<pre><code># Advanced inventory and variables\n---\n- name: Advanced Ansible patterns\n  hosts: webservers\n  vars:\n    nginx_configs:\n      - { name: \"api\", port: 3000, upstream: \"app_servers\" }\n      - { name: \"admin\", port: 4000, upstream: \"admin_servers\" }\n\n  tasks:\n    # Dynamic configuration generation\n    - name: Generate nginx configs\n      template:\n        src: nginx-site.j2\n        dest: \"/etc/nginx/sites-available/{{ item.name }}\"\n      loop: \"{{ nginx_configs }}\"\n      notify: reload nginx\n\n    # Conditional deployments\n    - name: Deploy based on environment\n      git:\n        repo: \"{{ app_repo }}\"\n        dest: \"/var/www/{{ app_name }}\"\n        version: \"{{ 'main' if environment == 'production' else 'develop' }}\"\n      when: deployment_enabled | default(false)\n</code></pre>"},{"location":"ansible_basics/lab/#92-error-handling-ja-performance","title":"9.2 Error Handling ja Performance","text":"<pre><code>---\n- name: Advanced error handling\n  hosts: all\n  tasks:\n    # Retry with exponential backoff\n    - name: Download with retries\n      get_url:\n        url: \"{{ app_url }}\"\n        dest: \"/tmp/app.tar.gz\"\n      register: download\n      retries: 5\n      delay: \"{{ 2 ** (ansible_loop.index0) }}\"\n      until: download is succeeded\n\n    # Block/rescue/always pattern\n    - name: Safe deployment\n      block:\n        - name: Deploy application\n          unarchive:\n            src: \"/tmp/app.tar.gz\"\n            dest: \"/var/www/\"\n      rescue:\n        - name: Rollback on failure\n          debug:\n            msg: \"Deployment failed, rolling back...\"\n      always:\n        - name: Cleanup\n          file:\n            path: \"/tmp/app.tar.gz\"\n            state: absent\n</code></pre>"},{"location":"ansible_basics/lab/#93-custom-modules-ja-advanced-features","title":"9.3 Custom Modules ja Advanced Features","text":"<pre><code># Custom filter plugin\nmkdir -p filter_plugins\ncat &gt; filter_plugins/custom.py &lt;&lt; 'EOF'\nclass FilterModule(object):\n    def filters(self):\n        return {'custom_hash': self.custom_hash}\n\n    def custom_hash(self, data):\n        import hashlib\n        return hashlib.md5(str(data).encode()).hexdigest()[:8]\nEOF\n\n# Use in playbook\nansible-playbook -i inventory advanced.yml\n</code></pre>"},{"location":"ansible_basics/lab/#94-ansible-vault-ja-security","title":"9.4 Ansible Vault ja Security","text":"<pre><code># Create encrypted variables\nansible-vault create secrets.yml\nansible-vault edit secrets.yml\n\n# Use in playbook\nansible-playbook site.yml --ask-vault-pass\n\n# Vault in CI/CD\necho \"vault_password\" &gt; .vault_pass\nansible-playbook site.yml --vault-password-file .vault_pass\n</code></pre> <p>\ud83c\udf89 H\u00e4sti tehtud! Te olete n\u00fc\u00fcd v\u00f5imelised automatiseerima nii p\u00f5hilisi kui ka keerukamaid serverihalduse \u00fclesandeid Ansible'iga!</p>"},{"location":"ansible_basics/lecture/","title":"Ansible Alused","text":""},{"location":"ansible_basics/lecture/#1-ansible-arhitektuur-ja-pohimotted","title":"1. Ansible Arhitektuur ja P\u00f5him\u00f5tted","text":""},{"location":"ansible_basics/lecture/#11-sissejuhatus-automatiseerimisse","title":"1.1 Sissejuhatus automatiseerimisse","text":"<p>S\u00fcsteemiadministreerimine traditsioonilistel meetoditel tekitab skaleerumisel m\u00e4rkimisv\u00e4\u00e4rseid v\u00e4ljakutseid. Suurtes infrastruktuurides, kus hallatakse k\u00fcmneid v\u00f5i sadu servereid, muutub k\u00e4sitsi konfiguratsioonide haldamine aegan\u00f5udvaks ja vigadele vastuv\u00f5tlikuks.</p> <p>Ansible on open-source automatiseerimisplatvorm, mis lahendab s\u00fcsteemihalduse, rakenduste juurutamise ja konfiguratsioonide haldamise \u00fclesandeid. Ansible'i peamised eelised on agentless arhitektuur, deklaratiivne s\u00fcntaks ja idempotentsed operatsioonid.</p>"},{"location":"ansible_basics/lecture/#12-ansible-arhitektuur","title":"1.2 Ansible arhitektuur","text":""},{"location":"ansible_basics/lecture/#121-agentless-lahenemine","title":"1.2.1 Agentless l\u00e4henemine","text":"<p>Ansible kasutab agentless arhitektuuri, mis eristab seda paljudest konkureerivtest lahendustest. See t\u00e4hendab, et hallatavates s\u00fcsteemides ei ole vaja installida ja hooldada t\u00e4iendavat tarkvara.</p> <pre><code>graph TB\n    subgraph \"Control Node\"\n        Ansible[Ansible Engine]\n        Inventory[Inventory]\n        Playbooks[Playbooks]\n    end\n\n    subgraph \"Managed Nodes\"\n        Web1[Web Server 1]\n        Web2[Web Server 2]\n        DB1[Database 1]\n        DB2[Database 2]\n    end\n\n    Ansible --&gt;|SSH| Web1\n    Ansible --&gt;|SSH| Web2\n    Ansible --&gt;|SSH| DB1\n    Ansible --&gt;|SSH| DB2\n\n    Inventory --&gt; Ansible\n    Playbooks --&gt; Ansible\n\n    style Ansible fill:#ff9999\n    style Inventory fill:#99ccff\n    style Playbooks fill:#99ff99\n    style Web1 fill:#ffcc99\n    style Web2 fill:#ffcc99\n    style DB1 fill:#cc99ff\n    style DB2 fill:#cc99ff</code></pre> <p>N\u00f5uded hallatavates s\u00fcsteemides: - SSH server aktiivsena - Python interpreter (versioon 2.7 v\u00f5i 3.5+) - Vajalikud s\u00fcsteemi \u00f5igused operatsioonide sooritamiseks</p>"},{"location":"ansible_basics/lecture/#122-pohikomponendid","title":"1.2.2 P\u00f5hikomponendid","text":"<p>Control Node Control node on s\u00fcsteem, kus Ansible on installitud ja kust k\u00e4ivitatakse automatiseerimise k\u00e4sud. Control node n\u00f5uded: - Unix-laadne operatsioonis\u00fcsteem (Linux, macOS) - Python 3.8 v\u00f5i uuem versioon - SSH klient</p> <p>Managed Nodes Managed nodes on sihtm\u00e4rgid, mida Ansible haldab. Need v\u00f5ivad olla f\u00fc\u00fcsilised serverid, virtuaalmasinad v\u00f5i pilveressursid.</p> <p>Inventory Inventory on struktureeritud fail v\u00f5i andmebaas, mis m\u00e4\u00e4ratleb hallatavate s\u00fcsteemide nimekirja ja nende grupeerimise loogika.</p> <pre><code>[webservers]\nweb1.example.com\nweb2.example.com\n\n[databases] \ndb1.example.com\ndb2.example.com\n\n[production:children]\nwebservers\ndatabases\n</code></pre> <p>Modules Moodulid on abstraktsed \u00fchikud, mis kapseldavad konkreetseid funktsionaalsusi. Ansible sisaldab \u00fcle 3000 mooduli, mis katavad s\u00fcsteemihalduse, v\u00f5rgukonfiguratsiooni, pilveplatformide ja rakenduste haldamise vajadused.</p>"},{"location":"ansible_basics/lecture/#13-toovoog","title":"1.3 T\u00f6\u00f6voog","text":"<p>Ansible'i t\u00e4itmists\u00fckkel koosneb j\u00e4rgmistest sammudest:</p> <pre><code>flowchart TD\n    A[Inventory lugemine] --&gt; B[SSH \u00fchendused]\n    B --&gt; C[Mooduli koodi edastamine]\n    C --&gt; D[Operatsioonide t\u00e4itmine]\n    D --&gt; E[Tulemuste kogumine]\n    E --&gt; F[Ajutiste failide eemaldamine]\n\n    style A fill:#99ccff\n    style B fill:#ffcc99\n    style C fill:#99ff99\n    style D fill:#ff9999\n    style E fill:#cc99ff\n    style F fill:#ffff99</code></pre> <ol> <li>Inventory lugemine - s\u00fcsteemide nimekirja laadimine</li> <li>SSH \u00fchenduste loomine - paralleelsed \u00fchendused sihtm\u00e4rkidega</li> <li>Mooduli koodi edastamine - vajalike Python skriptide ajutine kopeerimine</li> <li>Operatsioonide t\u00e4itmine - k\u00e4skude paralleelne k\u00e4ivitamine</li> <li>Tulemuste kogumine - v\u00e4ljundi ja staatuse tagastamine</li> <li>Ajutiste failide eemaldamine - puhastusoperatsioonid</li> </ol>"},{"location":"ansible_basics/lecture/#2-idempotency-printsiip","title":"2. Idempotency printsiip","text":"<p>Idempotency on Ansible'i p\u00f5hiprintsiip, mis tagab, et sama operatsiooni korduvk\u00e4ivitamine ei muuda s\u00fcsteemi olekut, kui soovitud olek on juba saavutatud.</p> <pre><code># Esimene k\u00e4ivitamine - nginx installitakse\nansible all -m package -a \"name=nginx state=present\"\n\n# Teine k\u00e4ivitamine - nginx on juba olemas, muudatusi ei tehta\nansible all -m package -a \"name=nginx state=present\"\n</code></pre> <p>Idempotency eelised: - Turvalisus - operatsioonide korduvk\u00e4ivitamine ei tekita kahjulikke k\u00f5rvalm\u00f5jusid - Etteennustatavus - s\u00fcsteemi l\u00f5ppolek on alati sama - Usaldusv\u00e4\u00e4rsus - automatiseerimise skriptid on stabiilsed</p>"},{"location":"ansible_basics/lecture/#3-vordlus-konkurentidega","title":"3. V\u00f5rdlus konkurentidega","text":""},{"location":"ansible_basics/lecture/#31-ansible-vs-puppet","title":"3.1 Ansible vs Puppet","text":"Aspekt Ansible Puppet Arhitektuur Agentless Agent-p\u00f5hine Konfiguratsioon YAML Ruby DSL Mudel Push Pull \u00d5ppimisk\u00f5ver Madal K\u00f5rge"},{"location":"ansible_basics/lecture/#32-ansible-vs-chef","title":"3.2 Ansible vs Chef","text":"Aspekt Ansible Chef Keel YAML Ruby Seadistamine Lihtne Keeruline Skaleeritavus Hea V\u00e4ga hea \u00d6kos\u00fcsteem Lai Lai"},{"location":"ansible_basics/lecture/#4-praktiline-naide","title":"4. Praktiline n\u00e4ide","text":"<p>Lihtne \u00fchenduvuse testimine:</p> <pre><code># SSH v\u00f5tmete seadistamine\nssh-keygen -t ed25519 -f ~/.ssh/ansible_key\nssh-copy-id -i ~/.ssh/ansible_key.pub user@target_host\n\n# Inventory loomine\necho \"target_host ansible_user=user\" &gt; inventory\n\n# \u00dchenduvuse testimine\nansible -i inventory target_host -m ping\n</code></pre> <p>Oodatav v\u00e4ljund: <pre><code>target_host | SUCCESS =&gt; {\n    \"ansible_facts\": {\n        \"discovered_interpreter_python\": \"/usr/bin/python3\"\n    },\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n</code></pre></p>"},{"location":"ansible_basics/lecture/#5-ssh-ja-inventory-konfigureerimine","title":"5. SSH ja Inventory konfigureerimine","text":""},{"location":"ansible_basics/lecture/#51-ssh-autentimise-alused","title":"5.1 SSH autentimise alused","text":"<p>Ansible tugineb SSH protokollile kommunikatsiooniks hallatavate s\u00fcsteemidega. T\u00f5husa automatiseerimise saavutamiseks on vajalik seadistada v\u00f5tme-p\u00f5hine autentimine, mis elimineerib interaktiivse parooli sisestamise vajaduse.</p>"},{"location":"ansible_basics/lecture/#511-ssh-votmete-genereerimine","title":"5.1.1 SSH v\u00f5tmete genereerimine","text":"<p>SSH v\u00f5tmepaaride loomine toimub <code>ssh-keygen</code> utiliidiga. Soovitatav on kasutada Ed25519 algoritmi turvalisuse ja j\u00f5udluse optimaalse tasakaalu saavutamiseks.</p> <pre><code># Ed25519 v\u00f5tme genereerimine\nssh-keygen -t ed25519 -C \"ansible-automation\" -f ~/.ssh/ansible_ed25519\n\n# RSA v\u00f5tme genereerimine (vajadusel)\nssh-keygen -t rsa -b 4096 -C \"ansible-automation\" -f ~/.ssh/ansible_rsa\n</code></pre> <p>Parameetrite selgitus: - <code>-t</code> - kr\u00fcptograafilise algoritmi m\u00e4\u00e4ramine - <code>-b</code> - v\u00f5tme pikkus bittides (RSA jaoks) - <code>-C</code> - kommentaar v\u00f5tme identifitseerimiseks - <code>-f</code> - v\u00e4ljundfaili asukoha m\u00e4\u00e4ramine</p>"},{"location":"ansible_basics/lecture/#512-ssh-agendi-konfigureerimine","title":"5.1.2 SSH agendi konfigureerimine","text":"<p>SSH agent h\u00f5lbustab privaatv\u00f5tmete haldamist, lubades autentimist ilma korduvate paroolide sisestamiseta.</p> <pre><code># SSH agendi k\u00e4ivitamine\neval \"$(ssh-agent -s)\"\n\n# Privaatv\u00f5tme lisamine agenti\nssh-add ~/.ssh/ansible_ed25519\n\n# Agendis olevate v\u00f5tmete kontroll\nssh-add -l\n</code></pre> <p>Automaatse agendi k\u00e4ivitamise seadistamine shell'i konfiguratsioonis:</p> <pre><code># ~/.bashrc v\u00f5i ~/.zshrc\nif [ -z \"$SSH_AUTH_SOCK\" ]; then\n    eval \"$(ssh-agent -s)\"\n    ssh-add ~/.ssh/ansible_ed25519 2&gt;/dev/null\nfi\n</code></pre>"},{"location":"ansible_basics/lecture/#513-avalike-votmete-levitamine","title":"5.1.3 Avalike v\u00f5tmete levitamine","text":"<p>Avalike v\u00f5tmete autoriseeritud v\u00f5tmete nimekirja lisamine:</p> <pre><code># ssh-copy-id kasutamine (lihtsaim)\nssh-copy-id -i ~/.ssh/ansible_ed25519.pub kasutaja@sihtserver\n\n# K\u00e4sitsi kopeerimine\ncat ~/.ssh/ansible_ed25519.pub | ssh kasutaja@sihtserver \\\n  \"mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys\"\n\n# Batch levitamine\nfor server in server1 server2 server3; do\n    ssh-copy-id -i ~/.ssh/ansible_ed25519.pub kasutaja@$server\ndone\n</code></pre>"},{"location":"ansible_basics/lecture/#52-inventory-struktuur-ja-formaat","title":"5.2 Inventory struktuur ja formaat","text":""},{"location":"ansible_basics/lecture/#521-ini-formaat","title":"5.2.1 INI formaat","text":"<p>Traditsiooniline inventory formaat, sobiv lihtsamatele konfiguratsioonidele:</p> <pre><code># \u00dcksikud hostid\nmail.example.com\nweb1.example.com\nweb2.example.com\n\n# Hostide grupid\n[webservers]\nweb1.example.com\nweb2.example.com\nweb3.example.com\n\n[dbservers]\ndb1.example.com ansible_port=5432\ndb2.example.com ansible_port=5432\n\n# Grupihierarhia\n[production:children]\nwebservers\ndbservers\n\n# Grupi muutujad\n[webservers:vars]\nhttp_port=80\nhttps_port=443\nnginx_user=www-data\n\n[dbservers:vars]\ndb_port=3306\ndb_user=admin\n</code></pre>"},{"location":"ansible_basics/lecture/#522-yaml-formaat","title":"5.2.2 YAML formaat","text":"<p>Kaasaegne formaat, mis v\u00f5imaldab keerulisemat struktureerimist:</p> <pre><code>all:\n  children:\n    webservers:\n      hosts:\n        web1.example.com:\n          ansible_user: ubuntu\n        web2.example.com:\n          ansible_user: ubuntu\n          ansible_port: 2222\n        web3.example.com:\n          ansible_user: centos\n      vars:\n        http_port: 80\n        https_port: 443\n        nginx_user: www-data\n\n    dbservers:\n      hosts:\n        db1.example.com:\n          ansible_port: 5432\n        db2.example.com:\n          ansible_port: 5432\n      vars:\n        db_port: 3306\n        db_user: admin\n\n    production:\n      children:\n        webservers:\n        dbservers:\n</code></pre>"},{"location":"ansible_basics/lecture/#523-dunaamiline-inventory","title":"5.2.3 D\u00fcnaamiline inventory","text":"<p>Suurte v\u00f5i muutuvate infrastruktuuride jaoks v\u00f5ib implementeerida d\u00fcnaamilise inventory genereerimise:</p> <pre><code>#!/usr/bin/env python3\nimport json\nimport requests\n\ndef get_inventory():\n    \"\"\"Genereeri inventory v\u00e4listest allikatest\"\"\"\n    inventory = {\n        'webservers': {\n            'hosts': [],\n            'vars': {'http_port': 80}\n        },\n        'dbservers': {\n            'hosts': [],\n            'vars': {'db_port': 3306}\n        },\n        '_meta': {\n            'hostvars': {}\n        }\n    }\n\n    # N\u00e4ide: loe serverid API-st\n    # servers = requests.get('https://api.company.com/servers').json()\n    # for server in servers:\n    #     inventory[server['group']]['hosts'].append(server['hostname'])\n\n    return inventory\n\nif __name__ == '__main__':\n    print(json.dumps(get_inventory(), indent=2))\n</code></pre>"},{"location":"ansible_basics/lecture/#6-ansible-konfigureerimine","title":"6. Ansible konfigureerimine","text":""},{"location":"ansible_basics/lecture/#61-ansiblecfg-faili-struktuur","title":"6.1 ansible.cfg faili struktuur","text":"<p>Ansible'i k\u00e4itumist saab kohandada konfiguratsiooni faili abil. Soovitatav on hoida <code>ansible.cfg</code> faili projekti juurkaustas.</p> <pre><code>[defaults]\n# Inventory asukoht\ninventory = inventory/\n\n# SSH seadistused\nhost_key_checking = False\nremote_user = ansible\nprivate_key_file = ~/.ssh/ansible_ed25519\n\n# Paralleelsuse seadistused\nforks = 10\ntimeout = 30\n\n# Logimise seadistused\nlog_path = ./ansible.log\ndisplay_skipped_hosts = False\n\n# Callback pluginide konfigureerimine\nstdout_callback = yaml\nbin_ansible_callbacks = True\n\n[ssh_connection]\n# SSH \u00fchenduste optimeerimine\nssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null\ncontrol_path_dir = ~/.ansible/cp\npipelining = True\nretries = 3\n\n[privilege_escalation]\nbecome = True\nbecome_method = sudo\nbecome_user = root\nbecome_ask_pass = False\n</code></pre>"},{"location":"ansible_basics/lecture/#62-konfiguratsiooni-prioriteet","title":"6.2 Konfiguratsiooni prioriteet","text":"<p>Ansible otsib konfiguratsiooni j\u00e4rgmises j\u00e4rjekorras:</p> <ol> <li>ANSIBLE_CONFIG keskkonna muutuja</li> <li>ansible.cfg praeguses t\u00f6\u00f6kaustas</li> <li>~/.ansible.cfg kasutaja kodukaustas</li> <li>/etc/ansible/ansible.cfg s\u00fcsteemi tasemel</li> </ol> <p>Kehtiva konfiguratsiooni kontroll:</p> <pre><code># Konfiguratsiooni vaatamine\nansible-config view\n\n# K\u00f5ikide parameetrite dump\nansible-config dump\n</code></pre>"},{"location":"ansible_basics/lecture/#63-host-patterns-ja-sihtmarkide-valimine","title":"6.3 Host patterns ja sihtm\u00e4rkide valimine","text":"<p>Ansible v\u00f5imaldab paindlikku serverite valimist erinevate mustrite abil:</p> <pre><code># K\u00f5ik hostid\nansible all -m ping\n\n# Konkreetne grupp\nansible webservers -m ping\n\n# Mitu gruppi\nansible webservers:dbservers -m ping\n\n# V\u00e4listamine\nansible all:!dbservers -m ping\n\n# L\u00f5ikumine\nansible webservers:&amp;production -m ping\n\n# Regulaaravaldised\nansible ~web.* -m ping\n\n# Vahemiku m\u00e4\u00e4ramine\nansible web[1:3] -m ping\n</code></pre>"},{"location":"ansible_basics/lecture/#7-uhenduse-diagnostika","title":"7. \u00dchenduse diagnostika","text":""},{"location":"ansible_basics/lecture/#71-pohilised-testid","title":"7.1 P\u00f5hilised testid","text":"<pre><code># \u00dchenduvuse test\nansible all -m ping\n\n# SSH \u00fchenduse detailne test\nansible all -m command -a \"whoami\" -vvv\n\n# S\u00fcsteemi faktide kogumine\nansible all -m setup --tree /tmp/facts\n</code></pre>"},{"location":"ansible_basics/lecture/#72-tuupilised-probleemid-ja-lahendused","title":"7.2 T\u00fc\u00fcpilised probleemid ja lahendused","text":"<p>SSH v\u00f5tme probleemid: <pre><code># V\u00f5tme \u00f5iguste kontroll\nchmod 600 ~/.ssh/ansible_ed25519\nchmod 644 ~/.ssh/ansible_ed25519.pub\n\n# SSH agendi kontroll\nssh-add -l\n</code></pre></p> <p>Host key verification: <pre><code># Ajutine keelamine\nexport ANSIBLE_HOST_KEY_CHECKING=False\n\n# T\u00e4ielik keelamine\necho \"host_key_checking = False\" &gt;&gt; ansible.cfg\n</code></pre></p> <p>\u00d5iguste probleemid: <pre><code># Sudo konfiguratsiooni test\nansible all -m command -a \"sudo whoami\"\n\n# Sudoers faili kontroll\nansible all -m shell -a \"sudo -l\"\n</code></pre></p>"},{"location":"ansible_basics/lecture/#8-inventory-best-practices","title":"8. Inventory best practices","text":""},{"location":"ansible_basics/lecture/#81-suurte-projektide-struktuur","title":"8.1 Suurte projektide struktuur","text":"<pre><code>inventory/\n\u251c\u2500\u2500 production/\n\u2502   \u251c\u2500\u2500 hosts.yml\n\u2502   \u251c\u2500\u2500 group_vars/\n\u2502   \u2502   \u251c\u2500\u2500 all/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 common.yml\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 vault.yml\n\u2502   \u2502   \u251c\u2500\u2500 webservers.yml\n\u2502   \u2502   \u2514\u2500\u2500 dbservers.yml\n\u2502   \u2514\u2500\u2500 host_vars/\n\u2502       \u251c\u2500\u2500 web1.example.com.yml\n\u2502       \u2514\u2500\u2500 db1.example.com.yml\n\u251c\u2500\u2500 staging/\n\u2514\u2500\u2500 development/\n</code></pre>"},{"location":"ansible_basics/lecture/#82-muutujate-hierarhia","title":"8.2 Muutujate hierarhia","text":"<p>Ansible muutujate prioriteet (k\u00f5rgem alistab madalam):</p> <ol> <li>Extra vars (<code>ansible-playbook -e</code>)</li> <li>Task vars</li> <li>Block vars</li> <li>Role ja include vars</li> <li>Play vars</li> <li>Host facts</li> <li>Host vars (inventory)</li> <li>Group vars (inventory)</li> <li>Group vars (all)</li> <li>Role defaults</li> </ol>"},{"location":"ansible_basics/lecture/#83-turvalisuse-aspektid","title":"8.3 Turvalisuse aspektid","text":"<p>Tundliku informatsiooni kaitsmine Ansible Vault'iga:</p> <pre><code># Vault faili loomine\nansible-vault create group_vars/all/vault.yml\n\n# Vault faili redigeerimine\nansible-vault edit group_vars/all/vault.yml\n\n# Vault parooliga k\u00e4ivitamine\nansible-playbook --ask-vault-pass site.yml\n</code></pre>"},{"location":"ansible_basics/lecture/#9-ad-hoc-kaskude-kasutamine","title":"9. Ad-hoc k\u00e4skude kasutamine","text":""},{"location":"ansible_basics/lecture/#91-ad-hoc-kaskude-olemus-ja-rakendusala","title":"9.1 Ad-hoc k\u00e4skude olemus ja rakendusala","text":"<p>Ad-hoc k\u00e4sud on Ansible'i funktsioon, mis v\u00f5imaldab k\u00e4ivitada \u00fchekordse operatsioone otse k\u00e4surealt, ilma playbook'ide loomise vajaduseta. Need sobivad kiireteks uuringulisteks v\u00f5i diagnostilisteks toiminguteks.</p> <p>Kasutamise stsenaariumid:</p> <p>Sobivad rakendused: - S\u00fcsteemi oleku kiire kontroll - Diagnostiliste andmete kogumine - Incident response operatsioonid - Eksploratiivsed uuringud - Monitoring ja alerting</p> <p>Ebasobivad rakendused: - Keerulised mitme sammuga konfiguratsioonid - Regulaarsed hooldusoperatsioonid - Dokumenteerimist n\u00f5udvad protseduurid - Produktsiooni deployment'id</p> <p>S\u00fcntaksi struktuur:</p> <p>Ad-hoc k\u00e4skude p\u00f5hiline formaat:</p> <pre><code>ansible &lt;target&gt; -m &lt;module&gt; -a \"&lt;arguments&gt;\" [options]\n</code></pre> <p>Komponendid: - <code>&lt;target&gt;</code> - inventory pattern v\u00f5i grupi nimi - <code>&lt;module&gt;</code> - kasutatav Ansible moodul - <code>&lt;arguments&gt;</code> - mooduli parameetrid - <code>[options]</code> - t\u00e4iendavad k\u00e4sulipud</p>"},{"location":"ansible_basics/lecture/#92-pohilised-moodulid","title":"9.2 P\u00f5hilised moodulid","text":""},{"location":"ansible_basics/lecture/#921-ping-uhenduvuse-testimine","title":"9.2.1 ping - \u00dchenduvuse testimine","text":"<p>Ping moodul kontrollib SSH \u00fchenduvust ja Python interpreteri olemasolu:</p> <pre><code># K\u00f5ikide hostide test\nansible all -m ping\n\n# Konkreetse grupi test\nansible webservers -m ping\n\n# Pattern matching\nansible 'web*' -m ping\n\n# V\u00e4ljund t\u00fc\u00fcpilise eduka vastuse korral\nansible web1.example.com -m ping\n# web1.example.com | SUCCESS =&gt; {\n#     \"ansible_facts\": {\n#         \"discovered_interpreter_python\": \"/usr/bin/python3\"\n#     },\n#     \"changed\": false,\n#     \"ping\": \"pong\"\n# }\n</code></pre>"},{"location":"ansible_basics/lecture/#922-command-vs-shell-moodulid","title":"9.2.2 command vs shell moodulid","text":"<p>command moodul - turvalisem variant, mis ei luba shell'i funktsionaalsust:</p> <pre><code># S\u00fcsteemi aja kuvamine\nansible all -m command -a \"date\"\n\n# Protsesside loetelu\nansible all -m command -a \"ps aux\"\n\n# Failis\u00fcsteemi statistika\nansible all -m command -a \"df -h\"\n\n# Shell operaatorid EI t\u00f6\u00f6ta\nansible all -m command -a \"ps aux | grep nginx\"  # EBA\u00d5NNESTUB\n</code></pre> <p>shell moodul - v\u00f5imaldab shell'i funktsionaalsust, kuid suurema turvariski hinnaga:</p> <pre><code># Torudega k\u00e4sud\nansible all -m shell -a \"ps aux | grep nginx\"\n\n# Keskkonna muutujad\nansible all -m shell -a \"echo $HOME\"\n\n# K\u00e4su asendamine\nansible all -m shell -a \"kill $(pgrep -f nginx)\"\n\n# Failide \u00fcmbersuunamine\nansible all -m shell -a \"dmesg | tail -20 &gt; /tmp/kernel.log\"\n</code></pre>"},{"location":"ansible_basics/lecture/#923-package-tarkvarahaldus","title":"9.2.3 package - Tarkvarahaldus","text":"<p>Universaalne pakettide haldamise moodul:</p> <pre><code># \u00dche paketi installimine\nansible all -m package -a \"name=htop state=present\" --become\n\n# Mitme paketi installimine\nansible all -m package -a \"name=curl,wget,git state=present\" --become\n\n# Paketi eemaldamine\nansible webservers -m package -a \"name=apache2 state=absent\" --become\n\n# Pakettide cache uuendamine (Debian/Ubuntu)\nansible ubuntu_hosts -m package -a \"update_cache=yes\" --become\n</code></pre> <p>Spetsiifilised pakettide haldurid:</p> <pre><code># APT (Debian/Ubuntu)\nansible ubuntu_hosts -m apt -a \"name=nginx state=present update_cache=yes\" --become\n\n# YUM (RHEL/CentOS 7)\nansible centos_hosts -m yum -a \"name=nginx state=present\" --become\n\n# DNF (Fedora, RHEL 8+)\nansible fedora_hosts -m dnf -a \"name=nginx state=present\" --become\n</code></pre>"},{"location":"ansible_basics/lecture/#924-service-teenuste-haldamine","title":"9.2.4 service - Teenuste haldamine","text":"<p>S\u00fcsteemi teenuste kontroll:</p> <pre><code># Teenuse k\u00e4ivitamine\nansible webservers -m service -a \"name=nginx state=started\" --become\n\n# Teenuse peatamine\nansible webservers -m service -a \"name=apache2 state=stopped\" --become\n\n# Teenuse taask\u00e4ivitamine\nansible webservers -m service -a \"name=nginx state=restarted\" --become\n\n# Autostart'i lubamine\nansible webservers -m service -a \"name=nginx enabled=yes\" --become\n\n# Kombineeritud operatsioon\nansible webservers -m service -a \"name=nginx state=started enabled=yes\" --become\n</code></pre>"},{"location":"ansible_basics/lecture/#925-file-failisusteemi-operatsioonid","title":"9.2.5 file - Failis\u00fcsteemi operatsioonid","text":"<p>Failide ja kataloogide haldamine:</p> <pre><code># Kataloogi loomine\nansible all -m file -a \"path=/opt/application state=directory mode=0755\" --become\n\n# Faili loomine (touch)\nansible all -m file -a \"path=/tmp/marker state=touch\"\n\n# \u00d5iguste muutmine\nansible all -m file -a \"path=/etc/app.conf owner=app group=app mode=0640\" --become\n\n# Simbolilise lingi loomine\nansible all -m file -a \"src=/usr/bin/python3 dest=/usr/bin/python state=link\" --become\n\n# Failide kustutamine\nansible all -m file -a \"path=/tmp/tempfile state=absent\"\n\n# Rekursiivne \u00f5iguste m\u00e4\u00e4ramine\nansible all -m file -a \"path=/var/www state=directory owner=www-data group=www-data recurse=yes\" --become\n</code></pre>"},{"location":"ansible_basics/lecture/#926-copy-failide-edastamine","title":"9.2.6 copy - Failide edastamine","text":"<p>Sisu kopeerimine control node'st managed node'idesse:</p> <pre><code># Faili kopeerimine\nansible webservers -m copy -a \"src=/local/config.conf dest=/etc/app/config.conf\" --become\n\n# Backup'iga kopeerimine\nansible webservers -m copy -a \"src=nginx.conf dest=/etc/nginx/nginx.conf backup=yes\" --become\n\n# Inline sisu loomine\nansible all -m copy -a \"content='server_tokens off;' dest=/etc/nginx/conf.d/security.conf\" --become\n\n# \u00d5igustega kopeerimine\nansible all -m copy -a \"src=script.sh dest=/usr/local/bin/script.sh mode=0755 owner=root\" --become\n</code></pre>"},{"location":"ansible_basics/lecture/#93-susteemi-diagnostika","title":"9.3 S\u00fcsteemi diagnostika","text":""},{"location":"ansible_basics/lecture/#931-riistvara-ja-susteemi-informatsioon","title":"9.3.1 Riistvara ja s\u00fcsteemi informatsioon","text":"<p>Setup moodul kogub p\u00f5hjalikku informatsiooni hallatavate s\u00fcsteemide kohta:</p> <pre><code># Operatsioonis\u00fcsteemi informatsioon\nansible all -m setup -a \"filter=ansible_distribution*\"\n\n# M\u00e4lu informatsioon\nansible all -m setup -a \"filter=ansible_memory_mb\"\n\n# V\u00f5rgu konfiguratsioon\nansible all -m setup -a \"filter=ansible_default_ipv4\"\n\n# CPU informatsioon\nansible all -m setup -a \"filter=ansible_processor*\"\n\n# Kettaruumi informatsioon\nansible all -m setup -a \"filter=ansible_mounts\"\n\n# K\u00f5ik faktid (mahukad andmed)\nansible all -m setup --tree /tmp/facts/\n</code></pre>"},{"location":"ansible_basics/lecture/#932-performance-monitoring","title":"9.3.2 Performance monitoring","text":"<p>S\u00fcsteemi j\u00f5udluse kontroll:</p> <pre><code># S\u00fcsteemi koormus\nansible all -m command -a \"uptime\"\n\n# M\u00e4lu kasutus\nansible all -m shell -a \"free -h\"\n\n# Kettakasutus\nansible all -m shell -a \"df -h\"\n\n# Top protsessid CPU j\u00e4rgi\nansible all -m shell -a \"ps aux --sort=-%cpu | head -10\"\n\n# Top protsessid m\u00e4lu j\u00e4rgi\nansible all -m shell -a \"ps aux --sort=-%mem | head -10\"\n\n# I/O statistika\nansible all -m shell -a \"iostat -x 1 1\" \n\n# Network statistika\nansible all -m shell -a \"ss -tuln\"\n</code></pre>"},{"location":"ansible_basics/lecture/#933-logide-analuus","title":"9.3.3 Logide anal\u00fc\u00fcs","text":"<p>S\u00fcsteemi logide kiire uurimine:</p> <pre><code># S\u00fcsteemi logide viimaseid ridu\nansible all -m shell -a \"journalctl -n 20 --no-pager\"\n\n# Specific teenuse logid\nansible webservers -m shell -a \"journalctl -u nginx -n 10 --no-pager\"\n\n# Error'ite otsimine\nansible all -m shell -a \"journalctl --since='1 hour ago' -p err --no-pager\"\n\n# Kerneli s\u00f5numid\nansible all -m shell -a \"dmesg | tail -20\"\n\n# Faili-p\u00f5hised logid\nansible webservers -m shell -a \"tail -20 /var/log/nginx/error.log\"\n</code></pre>"},{"location":"ansible_basics/lecture/#94-tapsemad-operatsioonid","title":"9.4 T\u00e4psemad operatsioonid","text":""},{"location":"ansible_basics/lecture/#941-kasutajate-haldamine","title":"9.4.1 Kasutajate haldamine","text":"<pre><code># Kasutaja loomine\nansible all -m user -a \"name=appuser shell=/bin/bash home=/home/appuser\" --become\n\n# Kasutaja grupi muutmine\nansible all -m user -a \"name=appuser groups=sudo,www-data append=yes\" --become\n\n# SSH v\u00f5tme lisamine\nansible all -m authorized_key -a \"user=appuser key='{{ lookup('file', '~/.ssh/id_rsa.pub') }}'\" --become\n</code></pre>"},{"location":"ansible_basics/lecture/#942-vorgu-diagnostika","title":"9.4.2 V\u00f5rgu diagnostika","text":"<pre><code># \u00dchenduvuse test\nansible all -m command -a \"ping -c 3 google.com\"\n\n# DNS lahendamine\nansible all -m command -a \"nslookup example.com\"\n\n# Pordid kuulamas\nansible all -m shell -a \"netstat -tlnp\"\n\n# Aktiivsed \u00fchendused\nansible all -m shell -a \"ss -tupln\"\n</code></pre>"},{"location":"ansible_basics/lecture/#95-kasurea-lipud-ja-optioonid","title":"9.5 K\u00e4surea lipud ja optioonid","text":""},{"location":"ansible_basics/lecture/#951-privilege-escalation","title":"9.5.1 Privilege escalation","text":"<pre><code># Sudo kasutamine\nansible all -m package -a \"name=htop state=present\" --become\n\n# Konkreetse kasutajana k\u00e4ivitamine\nansible all -m command -a \"whoami\" --become-user=postgres --become\n\n# Sudo meetodi m\u00e4\u00e4ramine\nansible all -m command -a \"id\" --become-method=su --become\n</code></pre>"},{"location":"ansible_basics/lecture/#952-paralleelsuse-kontroll","title":"9.5.2 Paralleelsuse kontroll","text":"<pre><code># J\u00e4rjestikune t\u00e4itmine\nansible all -m ping --forks=1\n\n# Suurem paralleelsus\nansible all -m setup --forks=20\n</code></pre>"},{"location":"ansible_basics/lecture/#953-sihtmarkide-piiramine","title":"9.5.3 Sihtm\u00e4rkide piiramine","text":"<pre><code># Pattern'iga piiramine\nansible 'web*' -m ping\n\n# Grupi v\u00e4listamine\nansible all:!databases -m command -a \"uptime\"\n\n# Kombineeritud tingimused\nansible webservers:&amp;production -m service -a \"name=nginx state=restarted\" --become\n\n# Hosti limiteerimine\nansible all --limit web1.example.com,web2.example.com -m ping\n</code></pre>"},{"location":"ansible_basics/lecture/#954-kuiva-kaivitamise-reziim","title":"9.5.4 Kuiva k\u00e4ivitamise re\u017eiim","text":"<pre><code># Kontroll ilma muudatusteta\nansible all -m package -a \"name=nginx state=present\" --check\n\n# Muudatuste kuvamine\nansible all -m copy -a \"src=test.conf dest=/etc/test.conf\" --check --diff\n</code></pre>"},{"location":"ansible_basics/lecture/#96-batch-operatsioonid","title":"9.6 Batch operatsioonid","text":""},{"location":"ansible_basics/lecture/#961-mitme-kasu-jarjestus","title":"9.6.1 Mitme k\u00e4su j\u00e4rjestus","text":"<p>Keerulisemate \u00fclesannete jaoks v\u00f5ib kombineerida mitu ad-hoc k\u00e4sku:</p> <pre><code>#!/bin/bash\n# Veebiserveri kiire restart\nansible webservers -m service -a \"name=nginx state=stopped\" --become\nansible webservers -m command -a \"sleep 5\"\nansible webservers -m service -a \"name=nginx state=started\" --become\nansible webservers -m shell -a \"curl -I http://localhost\" \n</code></pre>"},{"location":"ansible_basics/lecture/#962-informatsioon-kogumise-skript","title":"9.6.2 Informatsioon kogumise skript","text":"<pre><code>#!/bin/bash\n# S\u00fcsteemi auditi skript\necho \"=== System Information ===\" &gt; audit.log\nansible all -m setup -a \"filter=ansible_distribution*\" &gt;&gt; audit.log\necho \"=== Disk Usage ===\" &gt;&gt; audit.log  \nansible all -m shell -a \"df -h\" &gt;&gt; audit.log\necho \"=== Memory Usage ===\" &gt;&gt; audit.log\nansible all -m shell -a \"free -h\" &gt;&gt; audit.log\necho \"=== Running Services ===\" &gt;&gt; audit.log\nansible all -m shell -a \"systemctl list-units --type=service --state=running --no-pager\" &gt;&gt; audit.log\n</code></pre>"},{"location":"ansible_basics/lecture/#10-yaml-suntaks-ja-playbookide-alused","title":"10. YAML s\u00fcntaks ja Playbook'ide alused","text":""},{"location":"ansible_basics/lecture/#101-yaml-konfiguratsioonikeel","title":"10.1 YAML konfiguratsioonikeel","text":"<p>YAML (YAML Ain't Markup Language) on inimloetav andmete serialiseerimise standard, mida Ansible kasutab konfiguratsioonifailide ja playbook'ide kirjutamiseks. YAML-i eesm\u00e4rk on pakkuda lihtsat ja intuitiivset s\u00fcntaksit keeruliste andmestruktuuride kirjeldamiseks.</p> <p>YAML vs alternatiivsed formaadid:</p> <p>YAML: <pre><code>application:\n  name: \"web-service\"\n  version: \"1.2.3\"\n  ports:\n    - 80\n    - 443\n  configuration:\n    debug: false\n    max_connections: 1000\n</code></pre></p> <p>JSON ekvivalent: <pre><code>{\n  \"application\": {\n    \"name\": \"web-service\",\n    \"version\": \"1.2.3\",\n    \"ports\": [80, 443],\n    \"configuration\": {\n      \"debug\": false,\n      \"max_connections\": 1000\n    }\n  }\n}\n</code></pre></p> <p>XML ekvivalent: <pre><code>&lt;application&gt;\n  &lt;name&gt;web-service&lt;/name&gt;\n  &lt;version&gt;1.2.3&lt;/version&gt;\n  &lt;ports&gt;\n    &lt;port&gt;80&lt;/port&gt;\n    &lt;port&gt;443&lt;/port&gt;\n  &lt;/ports&gt;\n  &lt;configuration&gt;\n    &lt;debug&gt;false&lt;/debug&gt;\n    &lt;max_connections&gt;1000&lt;/max_connections&gt;\n  &lt;/configuration&gt;\n&lt;/application&gt;\n</code></pre></p>"},{"location":"ansible_basics/lecture/#102-yaml-suntaksi-reeglid","title":"10.2 YAML s\u00fcntaksi reeglid","text":""},{"location":"ansible_basics/lecture/#1021-taandrimise-nouded","title":"10.2.1 Taandrimise n\u00f5uded","text":"<p>YAML kasutab taandrimist hierarhia m\u00e4\u00e4ramiseks. Taandrimine peab olema j\u00e4rjekindel ja kasutama t\u00fchikuid:</p> <pre><code># \u00d5ige struktuur\nparent:\n  child1: value1\n  child2: value2\n  nested_parent:\n    nested_child: nested_value\n\n# Vale struktuur\nparent:\nchild1: value1          # Vale tase\n  child2: value2\n    nested_parent:      # Inconsistent indentation\n  nested_child: value   # Vale tase\n</code></pre>"},{"location":"ansible_basics/lecture/#1022-andmetuubid","title":"10.2.2 Andmet\u00fc\u00fcbid","text":"<p>Skalaarid: <pre><code>string_value: \"Hello World\"\ninteger_value: 42\nfloat_value: 3.14159\nboolean_true: true\nboolean_false: false\nnull_value: null\n</code></pre></p> <p>Loendid (Arrays): <pre><code># Kompaktne formaat\nfruits: [apple, banana, orange]\n\n# Laiendatud formaat\nfruits:\n  - apple\n  - banana\n  - orange\n\n# Objektide loend\nservers:\n  - name: web1\n    ip: 192.168.1.10\n  - name: web2\n    ip: 192.168.1.11\n</code></pre></p> <p>V\u00f5tme-v\u00e4\u00e4rtuse paarid (Dictionaries): <pre><code>server_config:\n  hostname: web1.example.com\n  port: 80\n  ssl_enabled: true\n  allowed_ips:\n    - 192.168.1.0/24\n    - 10.0.0.0/8\n</code></pre></p>"},{"location":"ansible_basics/lecture/#1023-mitme-rea-stringid","title":"10.2.3 Mitme rea stringid","text":"<p>Literal style (|) - s\u00e4ilitab reavahetused: <pre><code>description: |\n  See on pikk kirjeldus,\n  mis sisaldab mitut rida\n  ja s\u00e4ilitab k\u00f5ik reavahetused.\n</code></pre></p> <p>Folded style (&gt;) - \u00fchendab ridadeks: <pre><code>summary: &gt;\n  See tekst kirjutatakse\n  mitmel real, aga tulemuseks\n  on \u00fcks pikk rida.\n</code></pre></p>"},{"location":"ansible_basics/lecture/#103-playbookide-struktuur","title":"10.3 Playbook'ide struktuur","text":""},{"location":"ansible_basics/lecture/#1031-playbooki-anatoomia","title":"10.3.1 Playbook'i anatoomia","text":"<p>Playbook koosneb \u00fchest v\u00f5i mitmest \"play'st\", mis on suunatud konkreetsetele hostidele:</p> <pre><code>---\n- name: \"Esimene play - veebiserveri seadistamine\"\n  hosts: webservers\n  become: yes\n  vars:\n    http_port: 80\n    server_name: example.com\n\n  tasks:\n    - name: \"Nginx'i installimine\"\n      package:\n        name: nginx\n        state: present\n\n- name: \"Teine play - andmebaasi seadistamine\"  \n  hosts: dbservers\n  become: yes\n\n  tasks:\n    - name: \"MySQL installimine\"\n      package:\n        name: mysql-server\n        state: present\n</code></pre>"},{"location":"ansible_basics/lecture/#1032-play-komponendid","title":"10.3.2 Play komponendid","text":"<p>Hosts directive - m\u00e4\u00e4rab sihtm\u00e4rgid, kus play k\u00e4ivitatakse:</p> <pre><code>hosts: all                    # K\u00f5ik inventory hostid\nhosts: webservers            # Konkreetne grupp\nhosts: web*.example.com      # Pattern matching\nhosts: webservers:dbservers  # Mitme grupi kombinatsioon\nhosts: all:!production       # V\u00e4listamisega\n</code></pre> <p>Variables - muutujate defineerimine play tasemel:</p> <pre><code>vars:\n  app_name: \"myapp\"\n  app_version: \"2.1.0\"\n  app_port: 8080\n  app_users:\n    - admin\n    - operator\n  app_config:\n    debug: false\n    timeout: 30\n</code></pre> <p>Tasks - \u00fclesannete loend, mis t\u00e4idetakse j\u00e4rjekorras:</p> <pre><code>tasks:\n  - name: \"L\u00fchike, kirjeldav \u00fclesande nimi\"\n    module_name:\n      parameter1: value1\n      parameter2: value2\n    when: condition\n    tags: [tag1, tag2]\n</code></pre>"},{"location":"ansible_basics/lecture/#104-muutujate-kasutamine","title":"10.4 Muutujate kasutamine","text":""},{"location":"ansible_basics/lecture/#1041-muutujate-interpoleerimine","title":"10.4.1 Muutujate interpoleerimine","text":"<p>YAML-is kasutatakse Jinja2 template s\u00fcntaksit muutujate asendamiseks:</p> <pre><code>- name: \"Rakenduse seadistamine\"\n  hosts: webservers\n  vars:\n    app_name: \"webstore\"\n    app_port: 8080\n    config_path: \"/etc/{{ app_name }}\"\n\n  tasks:\n    - name: \"Loo konfiguratsioonikaust {{ config_path }}\"\n      file:\n        path: \"{{ config_path }}\"\n        state: directory\n        mode: '0755'\n\n    - name: \"Genereeri konfiguratsioonifail\"\n      copy:\n        content: |\n          [application]\n          name={{ app_name }}\n          port={{ app_port }}\n          debug=false\n        dest: \"{{ config_path }}/app.conf\"\n</code></pre>"},{"location":"ansible_basics/lecture/#1042-muutujate-allikad","title":"10.4.2 Muutujate allikad","text":"<p>Ansible v\u00f5tab muutujaid mitmest allikast hierarhilises j\u00e4rjekorras:</p> <ol> <li>Extra vars (<code>-e</code> k\u00e4sureal)</li> <li>Task variables</li> <li>Block variables  </li> <li>Role variables</li> <li>Play variables</li> <li>Host facts</li> <li>Host variables</li> <li>Group variables</li> <li>Default variables</li> </ol> <pre><code># group_vars/webservers.yml\nnginx_port: 80\nnginx_user: www-data\nssl_certificate: \"/etc/ssl/certs/{{ ansible_fqdn }}.crt\"\n\n# host_vars/web1.example.com.yml  \nnginx_port: 8080\ncustom_config: true\n</code></pre>"},{"location":"ansible_basics/lecture/#105-handlers-susteem","title":"10.5 Handlers s\u00fcsteem","text":"<p>Handlers on erik\u00fclesanded, mis k\u00e4ivitatakse ainult notification'i peale ja alles play l\u00f5pus:</p> <pre><code>- name: \"Nginx'i konfigureerimine\"\n  hosts: webservers\n  become: yes\n\n  tasks:\n    - name: \"Nginx p\u00f5hikonfiguratsiooni uuendamine\"\n      template:\n        src: nginx.conf.j2\n        dest: /etc/nginx/nginx.conf\n      notify:\n        - restart nginx\n        - reload systemd\n\n    - name: \"SSL sertifikaadi paigaldamine\"\n      copy:\n        src: \"{{ ssl_cert_file }}\"\n        dest: /etc/ssl/certs/nginx.crt\n      notify: restart nginx\n\n  handlers:\n    - name: restart nginx\n      service:\n        name: nginx\n        state: restarted\n\n    - name: reload systemd\n      systemd:\n        daemon_reload: yes\n</code></pre> <p>Handler'i k\u00e4itumise reeglid: - K\u00e4ivitatakse ainult notification'i korral - K\u00e4ivitatakse play l\u00f5pus isegi siis, kui mitu task'i sama handler'it notify'ib - Ei k\u00e4ivitata, kui task eba\u00f5nnestub (v.a force_handlers: yes)</p>"},{"location":"ansible_basics/lecture/#11-praktiline-naide-lamp-stack","title":"11. Praktiline n\u00e4ide: LAMP stack","text":"<p>Kompleksne playbook veebiserveri infrastruktuuri seadistamiseks:</p> <pre><code>---\n- name: \"LAMP stack'i paigaldamine ja konfigureerimine\"\n  hosts: webservers\n  become: yes\n  vars:\n    mysql_root_password: \"{{ vault_mysql_root_password }}\"\n    app_database: \"webapp_db\"\n    app_user: \"webapp_user\"\n    app_password: \"{{ vault_app_password }}\"\n    web_root: \"/var/www/html\"\n    php_packages:\n      - php\n      - php-mysql\n      - php-curl\n      - php-gd\n      - libapache2-mod-php\n\n  pre_tasks:\n    - name: \"S\u00fcsteemi uuendamine\"\n      package:\n        update_cache: yes\n        upgrade: dist\n\n  tasks:\n    - name: \"Apache veebiserveri installimine\"\n      package:\n        name: apache2\n        state: present\n      notify: enable apache\n\n    - name: \"MySQL serveri installimine\"\n      package:\n        name:\n          - mysql-server\n          - python3-pymysql\n        state: present\n      notify: \n        - start mysql\n        - secure mysql\n\n    - name: \"PHP ja moodulite installimine\"\n      package:\n        name: \"{{ php_packages }}\"\n        state: present\n      notify: restart apache\n\n    - name: \"Apache moodulite lubamine\"\n      apache2_module:\n        name: \"{{ item }}\"\n        state: present\n      loop:\n        - rewrite\n        - ssl\n      notify: restart apache\n\n    - name: \"Rakenduse kataloogi loomine\"\n      file:\n        path: \"{{ web_root }}/{{ app_database }}\"\n        state: directory\n        owner: www-data\n        group: www-data\n        mode: '0755'\n\n    - name: \"PHP test lehe loomine\"\n      template:\n        src: index.php.j2\n        dest: \"{{ web_root }}/index.php\"\n        owner: www-data\n        group: www-data\n        mode: '0644'\n\n    - name: \"MySQL root parooli seadistamine\"\n      mysql_user:\n        name: root\n        password: \"{{ mysql_root_password }}\"\n        login_unix_socket: /var/run/mysqld/mysqld.sock\n        state: present\n\n    - name: \"Rakenduse andmebaasi loomine\"\n      mysql_db:\n        name: \"{{ app_database }}\"\n        login_user: root\n        login_password: \"{{ mysql_root_password }}\"\n        state: present\n\n    - name: \"Rakenduse kasutaja loomine\"\n      mysql_user:\n        name: \"{{ app_user }}\"\n        password: \"{{ app_password }}\"\n        priv: \"{{ app_database }}.*:ALL\"\n        login_user: root\n        login_password: \"{{ mysql_root_password }}\"\n        state: present\n\n  handlers:\n    - name: enable apache\n      service:\n        name: apache2\n        enabled: yes\n        state: started\n\n    - name: restart apache\n      service:\n        name: apache2\n        state: restarted\n\n    - name: start mysql\n      service:\n        name: mysql\n        state: started\n        enabled: yes\n\n    - name: secure mysql\n      mysql_user:\n        name: \"\"\n        host_all: yes\n        state: absent\n        login_user: root\n        login_password: \"{{ mysql_root_password }}\"\n\n  post_tasks:\n    - name: \"Teenuste oleku kontroll\"\n      service_facts:\n\n    - name: \"Kinnitada Apache'i t\u00f6\u00f6tamine\"\n      uri:\n        url: \"http://{{ ansible_default_ipv4.address }}\"\n        method: GET\n        status_code: 200\n</code></pre>"},{"location":"ansible_basics/lecture/#12-playbooki-kaivitamine-ja-debugimine","title":"12. Playbook'i k\u00e4ivitamine ja debugimine","text":""},{"location":"ansible_basics/lecture/#121-pohilised-kaivitamise-voimalused","title":"12.1 P\u00f5hilised k\u00e4ivitamise v\u00f5imalused","text":"<pre><code># Tavap\u00e4rane k\u00e4ivitamine\nansible-playbook site.yml\n\n# Inventory m\u00e4\u00e4ramine\nansible-playbook -i inventory/production site.yml\n\n# Muutujate edastamine\nansible-playbook -e \"app_version=2.1.0\" site.yml\n\n# Kuiv k\u00e4ivitamine\nansible-playbook --check site.yml\n\n# Muudatuste kuvamine\nansible-playbook --check --diff site.yml\n</code></pre>"},{"location":"ansible_basics/lecture/#122-selektiivne-kaivitamine","title":"12.2 Selektiivne k\u00e4ivitamine","text":"<pre><code># Ainult konkreetsed hostid\nansible-playbook --limit webservers site.yml\n\n# Konkreetse task'iga alustamine\nansible-playbook --start-at-task \"MySQL installimine\" site.yml\n\n# Tagide kasutamine\nansible-playbook --tags \"database\" site.yml\n\n# Tagide v\u00e4listamine\nansible-playbook --skip-tags \"testing\" site.yml\n</code></pre>"},{"location":"ansible_basics/lecture/#123-debugimine-ja-verbose-valjund","title":"12.3 Debugimine ja verbose v\u00e4ljund","text":"<pre><code># P\u00f5hiline verbose\nansible-playbook -v site.yml\n\n# Detailsem v\u00e4ljund\nansible-playbook -vv site.yml\n\n# Connection debugging\nansible-playbook -vvv site.yml\n\n# SSH debugging\nansible-playbook -vvvv site.yml\n</code></pre>"},{"location":"ansible_basics/lecture/#13-best-practices","title":"13. Best practices","text":""},{"location":"ansible_basics/lecture/#131-playbooki-struktuur","title":"13.1 Playbook'i struktuur","text":"<pre><code>---\n# Dokumentatsioon playbook'i alguses\n# Autor: IT meeskond\n# Eesm\u00e4rk: Veebiserveri t\u00e4ielik seadistamine\n# Versioon: 1.2.0\n\n- name: \"Selge ja kirjeldav play nimi\"\n  hosts: webservers\n  become: yes\n  gather_facts: yes\n\n  vars:\n    # Muutujate gruppeerimine ja kommentaarid\n    # Rakenduse konfiguratsioon\n    app_name: \"webstore\"\n    app_version: \"2.1.0\"\n\n    # Andmebaasi seadistused  \n    db_name: \"{{ app_name }}_production\"\n    db_user: \"{{ app_name }}_user\"\n\n  pre_tasks:\n    - name: \"Eeltingimuste kontroll\"\n      assert:\n        that:\n          - app_name is defined\n          - app_version is defined\n        fail_msg: \"N\u00f5utavad muutujad ei ole m\u00e4\u00e4ratud\"\n\n  tasks:\n    - name: \"Konkreetne ja arusaadav task'i nimi\"\n      module_name:\n        parameter: value\n      tags: [installation, webserver]\n      when: ansible_os_family == \"Debian\"\n\n  post_tasks:\n    - name: \"L\u00f5pukontrollid ja validateerimised\"\n      uri:\n        url: \"http://localhost\"\n        status_code: 200\n</code></pre>"},{"location":"ansible_basics/lecture/#132-vigade-kasitlemise-strateegiad","title":"13.2 Vigade k\u00e4sitlemise strateegiad","text":"<pre><code>tasks:\n  - name: \"Kriitilise teenuse k\u00e4ivitamine\"\n    service:\n      name: critical-service\n      state: started\n    register: service_result\n    failed_when: service_result.rc != 0\n\n  - name: \"Mittekriitilise operatsiooni katse\"\n    command: /opt/scripts/optional-task.sh\n    ignore_errors: yes\n\n  - name: \"Retry loogikaga operatsioon\"\n    uri:\n      url: \"http://api.external.com/status\"\n      method: GET\n    retries: 3\n    delay: 10\n    until: result.status == 200\n</code></pre>"},{"location":"ansible_basics/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>Ansible Basics peat\u00fckk andis p\u00f5hjaliku \u00fclevaate Ansible'i arhitektuurist, SSH konfiguratsioonist, inventory haldamisest, ad-hoc k\u00e4skudest ja playbook'ide kirjutamisest. Need teadmised on aluseks keerulisemate automatiseerimislahenduste loomisele ja infrastruktuuri kui koodi p\u00f5him\u00f5tete rakendamisele.</p> <p>J\u00e4rgnevates peat\u00fckkides k\u00e4sitletakse Ansible'i t\u00e4psemaid funktsioone, sealhulgas rolle, template'e, vault'i ja multi-environment deployment'e.</p>"},{"location":"ansible_basics/reading_materials/","title":"Ansible lugemismaterjalid (Kodut\u00f6\u00f6 \u00fclesanne 2)","text":"<p>Eeldatav lugemisaeg: 2-3 tundi T\u00e4htaeg: Enne j\u00e4rgmist tundi</p>"},{"location":"ansible_basics/reading_materials/#kohustuslik-lugemine-15-tundi","title":"Kohustuslik lugemine (1,5 tundi)","text":""},{"location":"ansible_basics/reading_materials/#ansible-arhitektuuri-suvaanaluus","title":"Ansible arhitektuuri s\u00fcvaanal\u00fc\u00fcs","text":"<p>Allikas: Ansible dokumentatsioon ja arhitektuuri juhend</p> <p>P\u00f5hiteemad: - Agentless arhitektuur ja selle eelised - Control node vs hallatavad s\u00f5lmed - SSH-p\u00f5hine kommunikatsioon - Ansible'i t\u00e4itmismudel - Inventory haldamise kontseptsioonid</p> <p>Lugemisk\u00fcsimused: - Miks kasutab Ansible agentless arhitektuuri? - Millised on agentless vs agent-p\u00f5histe s\u00fcsteemide eelised ja puudused? - Kuidas k\u00e4sitleb Ansible autentimist ja autoriseerimist? - Mis juhtub Ansible playbook'i t\u00e4itmise ajal?</p>"},{"location":"ansible_basics/reading_materials/#yaml-suntaks-ja-parimad-praktikad","title":"YAML s\u00fcntaks ja parimad praktikad","text":"<p>Allikas: YAML dokumentatsioon ja Ansible stiili juhend</p> <p>P\u00f5hiteemad: - YAML andmet\u00fc\u00fcbid ja struktuurid - Taandrimise ja vormindamise reeglid - Ansible-spetsiifilised YAML konventsioonid - Levinud YAML l\u00f5ksud ja kuidas neid v\u00e4ltida - YAML valideerimise t\u00f6\u00f6riistad</p> <p>Lugemisk\u00fcsimused: - Millised on peamised erinevused YAML'i ja JSON'i vahel? - Miks on taandrimine YAML'is nii oluline? - Millised on levinud YAML s\u00fcntaksivead? - Kuidas saab YAML s\u00fcntaksit valideerida?</p>"},{"location":"ansible_basics/reading_materials/#ansible-moodulite-okosusteem","title":"Ansible moodulite \u00f6kos\u00fcsteem","text":"<p>Allikas: Ansible moodulite dokumentatsioon</p> <p>P\u00f5hiteemad: - P\u00f5himoodulid vs kogukonna moodulid - Moodulite kategooriad (s\u00fcsteem, v\u00f5rk, pilv jne) - Mooduli parameetrid ja tagastusv\u00e4\u00e4rtused - Idempotentsus Ansible moodulites - Kohandatud moodulite arendamise alused</p> <p>Lugemisk\u00fcsimused: - Mis teeb moodulist \"idempotentse\"? - Kuidas leida \u00fclesandele \u00f5ige moodul? - Mis vahe on p\u00f5hi- ja kogukonna moodulitel? - Millal v\u00f5ib vaja minna kohandatud moodulit?</p>"},{"location":"ansible_basics/reading_materials/#valikuline-lugemine-1-tund","title":"Valikuline lugemine (1 tund)","text":""},{"location":"ansible_basics/reading_materials/#ansible-parimad-praktikad","title":"Ansible parimad praktikad","text":"<p>Allikas: Ansible parimate praktikate juhend</p> <p>P\u00f5hiteemad: - Playbook'i organisatsioon ja struktuur - Muutujate nimetamise konventsioonid - Vigade k\u00e4sitlemise strateegiad - J\u00f5udluse optimeerimise tehnikad - Turvalisuse kaalutlused</p>"},{"location":"ansible_basics/reading_materials/#ansible-vs-muud-konfiguratsioonihalduse-tooriistad","title":"Ansible vs muud konfiguratsioonihalduse t\u00f6\u00f6riistad","text":"<p>Allikas: T\u00f6\u00f6stuse v\u00f5rdlused ja dokumentatsioon</p> <p>P\u00f5hiteemad: - Ansible vs Puppet vs Chef vs Salt - Iga t\u00f6\u00f6riista kasutusjuhud - \u00d5ppimisk\u00f5vera v\u00f5rdlused - Kogukonna ja \u00f6kos\u00fcsteemi erinevused - Millal valida Ansible alternatiivide asemel</p>"},{"location":"ansible_basics/reading_materials/#viitematerjalid-hoidke-kaeparast","title":"Viitematerjalid (hoidke k\u00e4ep\u00e4rast)","text":""},{"location":"ansible_basics/reading_materials/#ansible-kaskude-kiirulevaade","title":"Ansible k\u00e4skude kiir\u00fclevaade","text":"<pre><code># P\u00f5hik\u00e4sud\nansible --version              # Kontrolli Ansible versiooni\nansible all -m ping            # Testi \u00fchenduvust k\u00f5igi hostidega\nansible all -m setup           # Kogu fakte k\u00f5igist hostidest\nansible-playbook playbook.yml  # K\u00e4ivita playbook\n\n# Inventory haldamine\nansible-inventory --list       # N\u00e4ita inventory struktuuri\nansible-inventory --graph      # N\u00e4ita inventory graafiliselt\n\n# Ad-hoc k\u00e4sud\nansible webservers -m copy -a \"src=/local/file dest=/remote/file\"\nansible dbservers -m service -a \"name=mysql state=started\"\nansible all -m shell -a \"uptime\"\n</code></pre>"},{"location":"ansible_basics/reading_materials/#levinud-yaml-mustrid-ansibleis","title":"Levinud YAML mustrid Ansible'is","text":"<pre><code># P\u00f5hiline playbook'i struktuur\n---\n- name: N\u00e4idis playbook\n  hosts: webservers\n  become: yes\n  vars:\n    app_name: myapp\n    app_port: 8080\n\n  tasks:\n    - name: Installi paketid\n      apt:\n        name: \"{{ item }}\"\n        state: present\n      loop:\n        - nginx\n        - python3\n        - git\n\n    - name: K\u00e4ivita teenus\n      service:\n        name: nginx\n        state: started\n        enabled: yes\n</code></pre>"},{"location":"ansible_basics/reading_materials/#ansible-faktid-ja-muutujad","title":"Ansible faktid ja muutujad","text":"<pre><code># Faktide kasutamine\n- name: Kuva s\u00fcsteemi info\n  debug:\n    msg: \"{{ ansible_distribution }} {{ ansible_distribution_version }}\"\n\n# Kohandatud muutujad\n- name: Seadista kohandatud muutuja\n  set_fact:\n    app_path: \"/opt/{{ app_name }}\"\n\n# Muutujate prioriteedid\n## extra vars (k\u00e4surida)\n## task vars\n## block vars\n## role ja include vars\n## play vars\n## host faktid\n## host vars\n## group vars\n## inventory vars\n## role defaults\n</code></pre>"},{"location":"ansible_basics/reading_materials/#lugemise-refleksioon-ulesanne","title":"Lugemise refleksioon \u00fclesanne","text":"<p>P\u00e4rast lugemise l\u00f5petamist esitage l\u00fchike refleksioon (200-300 s\u00f5na), mis katab:</p> <ol> <li>Peamised avastused: Mis oli Ansible'i kohta k\u00f5ige \u00fcllatavam v\u00f5i olulisem, mida \u00f5ppisite?</li> <li>K\u00fcsimused: Millised Ansible kontseptsioonid on veel ebaselged v\u00f5i vajavad rohkem selgitust?</li> <li>Rakendamine: Kuidas arvate, et Ansible'i agentless arhitektuur aitab teie automatiseerimist\u00f6\u00f6d?</li> <li>Edasine \u00f5ppimine: Milliseid Ansible teemasid sooviksite rohkem uurida?</li> </ol> <p>Esitamise formaat: Lisage oma GitHub repositooriumisse failina <code>ansible_basics_reading_reflection.md</code></p>"},{"location":"ansible_basics/reading_materials/#lisamaterjalid","title":"\ud83d\udd17 Lisamaterjalid","text":"<ul> <li>Ansible dokumentatsioon</li> <li>Ansible parimad praktikad</li> <li>Ansible moodulite indeks</li> <li>YAML dokumentatsioon</li> <li>Ansible Galaxy</li> </ul>"},{"location":"ansible_basics/reading_materials/#markused-jargmiseks-tunniks","title":"M\u00e4rkused j\u00e4rgmiseks tunniks","text":"<p>Tulge valmistatud: - K\u00fcsimustega lugemisest - Mis tahes Ansible stsenaariumidega, mida soovite harjutada - Ideedega oma Ansible automatiseerimisprojektile - YAML s\u00fcntaksi ja struktuuri m\u00f5istmisega</p>"},{"location":"ansible_roles/homework/","title":"Ansible Roles Homework: Ehita sama infrastruktuur nii Ansible kui Puppet'iga","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Deploy sama infrastruktuuri m\u00f5lema t\u00f6\u00f6riistaga ja v\u00f5rdle praktikas Fookus: Praktiline ehitamine</p> <p>Te saate valmis starter kood - fookus on deployment'il ja praktilisel v\u00f5rdlusel!</p>"},{"location":"ansible_roles/homework/#1-projekt-veebserveri-andmebaasi-seadistamine","title":"1. Projekt: Veebserveri + Andmebaasi seadistamine","text":"<p>Mida te ehitate: - \ud83c\udf10 Nginx veebiserver kohandatud konfiguratsiooniga - \ud83d\uddc4 PostgreSQL andmebaas algse skeemiga - \ud83d\udd10 SSL sertifikaadid (ise-allkirjastatud testimiseks) - \ud83d\udcca S\u00fcsteemi monitooring p\u00f5hiliste tervise kontrollidega - \ud83d\udd27 Logide p\u00f6\u00f6ramise konfiguratsioon</p> <p>Mida te \u00f5pite: - Ansible vs Puppet praktilised erinevused - Konfiguratsioonihalduse t\u00f6\u00f6vood - Infrastruktuuri deployment strateegiad - T\u00f6\u00f6riistaspetsiifilised debug ja probleemilahendus</p>"},{"location":"ansible_roles/homework/#2-ansible-vs-puppet-miks-vordleme","title":"2. Ansible vs Puppet - Miks v\u00f5rdleme?","text":"<p>Miks on oluline m\u00f5ista erinevaid t\u00f6\u00f6riistu?</p>"},{"location":"ansible_roles/homework/#21-ansible-push-based-lahenemine","title":"2.1 Ansible - Push-based l\u00e4henemine","text":"<ul> <li>Kuidas t\u00f6\u00f6tab: Kontrollserver saadab k\u00e4sud sihtmasinatele</li> <li>Eelised: Lihtne alustada, YAML s\u00fcntaks, agentless</li> <li>Puudused: Vajab SSH \u00fchendust, v\u00e4hem keerukaid funktsioone</li> <li>Kus kasutada: V\u00e4iksemad meeskonnad, lihtsad automatiseerimised</li> </ul>"},{"location":"ansible_roles/homework/#22-puppet-pull-based-lahenemine","title":"2.2 Puppet - Pull-based l\u00e4henemine","text":"<ul> <li>Kuidas t\u00f6\u00f6tab: Sihtmasinad ise k\u00fcsivad konfiguratsiooni serverilt</li> <li>Eelised: V\u00f5imas, keerukad funktsioonid, agent-based</li> <li>Puudused: Keerulisem seadistada, Ruby s\u00fcntaks</li> <li>Kus kasutada: Suured ettev\u00f5tted, keerukad infrastruktuurid</li> </ul> <p>Miks praktiline v\u00f5rdlus on oluline? - N\u00e4ete erinevusi k\u00e4itumises - M\u00f5istate, millal mida kasutada - \u00d5pite debug'ima m\u00f5lemat t\u00f6\u00f6riista - Saate praktilise kogemuse</p>"},{"location":"ansible_roles/homework/#3-repository-seadistamine-15-min","title":"3. Repository seadistamine (15 min)","text":""},{"location":"ansible_roles/homework/#31-klooni-starter-repository","title":"3.1 Klooni starter repository","text":"<pre><code># Klooni kodut\u00f6\u00f6 starter valmis failidega\ngit clone https://github.com/[teacher-repo]/ansible-puppet-comparison.git\ncd ansible-puppet-comparison\n\n# Loo oma t\u00f6\u00f6 branch\ngit checkout -b homework-[your-name]\n\n# Kontrolli starter struktuuri\nls -la\n# Peaksite n\u00e4gema: ansible/, puppet/, docs/, README.md\n</code></pre>"},{"location":"ansible_roles/homework/#32-kontrolli-starter-faile","title":"3.2 Kontrolli starter faile","text":"<p>Repository sisaldab: - <code>ansible/</code> - Ansible playbook'i baas (vajab SSL ja virtual hosts lisamist) - <code>puppet/</code> - Puppet manifest'i baas (vajab SSL ja monitoring lisamist) - <code>vagrant/</code> - Test VM'ide konfiguratsioon (valmis kasutamiseks) - <code>requirements.md</code> - Mis te peate lisama</p>"},{"location":"ansible_roles/homework/#33-tutvu-starter-koodiga","title":"3.3 Tutvu starter koodiga","text":"<p>Ansible struktuur: <pre><code>cd ansible/\nls -la\n# Peaksite n\u00e4gema:\n# - inventory/ (sihtmachinad)\n# - roles/ (nginx, postgresql)\n# - site.yml (peamine playbook)\n# - requirements.md (mis vaja lisada)\n</code></pre></p> <p>Puppet struktuur: <pre><code>cd ../puppet/\nls -la\n# Peaksite n\u00e4gema:\n# - manifests/ (Puppet kood)\n# - modules/ (nginx, postgresql)\n# - hiera/ (andmed)\n# - requirements.md (mis vaja lisada)\n</code></pre></p> <p>Miks see struktuur on oluline? - Ansible: Playbook \u2192 Roles \u2192 Tasks - Puppet: Manifests \u2192 Classes \u2192 Resources - M\u00f5lemad j\u00e4rgivad modulaarset l\u00e4henemist - Kood on organiseeritud ja taaskasutatav</p>"},{"location":"ansible_roles/homework/#4-ehita-ansible-deployment-45-min","title":"4. Ehita Ansible deployment (45 min)","text":""},{"location":"ansible_roles/homework/#41-kaivita-test-keskkond","title":"4.1 K\u00e4ivita test keskkond","text":"<pre><code># K\u00e4ivita VM testimiseks\ncd ../vagrant/\nvagrant up ansible-vm\n\n# \u00dchenda VM'iga\nvagrant ssh ansible-vm\n</code></pre> <p>Miks kasutame Vagrant'i? - Isolatsioon: Ei m\u00f5juta teie p\u00f5his\u00fcsteemi - Korratavus: Iga\u00fcks saab sama keskkonna - Kiire: V\u00f5imaldab kiiresti testida ja kustutada - Turvaline: V\u00f5ite eksperimenteerida vabalt</p>"},{"location":"ansible_roles/homework/#42-lisa-ssl-konfiguratsioon","title":"4.2 Lisa SSL konfiguratsioon","text":"<p>Starters on ainult basic nginx + postgresql. Peate lisama:</p> <pre><code>cd ../ansible/\n\n# Lisa SSL task'id (roles/nginx/tasks/ssl.yml)\n# Kohandada nginx template'i SSL jaoks  \n# Lisada virtual hosts konfiguratsioon\n\n# Vaata requirements.md faili, mis t\u00e4pselt vaja\ncat requirements.md\n</code></pre> <p>Mida peate lisama SSL jaoks:</p>"},{"location":"ansible_roles/homework/#421-ssl-sertifikaatide-genereerimine","title":"4.2.1 SSL sertifikaatide genereerimine","text":"<pre><code># roles/nginx/tasks/ssl.yml\n- name: \"Create SSL directory\"\n  file:\n    path: /etc/nginx/ssl\n    state: directory\n    mode: '0755'\n\n- name: \"Generate self-signed SSL certificate\"\n  command: openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/nginx/ssl/nginx.key -out /etc/nginx/ssl/nginx.crt -subj \"/C=EE/ST=Tallinn/L=Tallinn/O=Test/CN=localhost\"\n  args:\n    creates: /etc/nginx/ssl/nginx.crt\n</code></pre>"},{"location":"ansible_roles/homework/#422-nginx-ssl-konfiguratsioon","title":"4.2.2 Nginx SSL konfiguratsioon","text":"<pre><code># roles/nginx/templates/nginx.conf.j2\nserver {\n    listen 80;\n    server_name localhost;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl;\n    server_name localhost;\n\n    ssl_certificate /etc/nginx/ssl/nginx.crt;\n    ssl_certificate_key /etc/nginx/ssl/nginx.key;\n\n    location / {\n        root /var/www/html;\n        index index.html;\n    }\n}\n</code></pre> <p>Miks SSL on oluline? - Turvalisus: Kr\u00fcptitud \u00fchendused - Praktika: Enamik p\u00e4ris rakendusi kasutab HTTPS - \u00d5ppimine: SSL konfiguratsioon on oluline oskus - Testimine: N\u00e4ete, kuidas t\u00f6\u00f6tab turvaline \u00fchendus</p>"},{"location":"ansible_roles/homework/#43-lisa-virtual-hosts","title":"4.3 Lisa virtual hosts","text":"<p>Virtual hosts v\u00f5imaldavad \u00fchel serveril mitut veebisaiti:</p> <pre><code># roles/nginx/tasks/vhosts.yml\n- name: \"Create virtual host directories\"\n  file:\n    path: \"{{ item }}\"\n    state: directory\n    mode: '0755'\n  loop:\n    - /var/www/site1\n    - /var/www/site2\n\n- name: \"Create virtual host content\"\n  copy:\n    content: |\n      &lt;h1&gt;Site 1&lt;/h1&gt;\n      &lt;p&gt;This is site 1 content&lt;/p&gt;\n    dest: /var/www/site1/index.html\n    mode: '0644'\n</code></pre> <p>Miks virtual hosts on olulised? - Ressursi s\u00e4\u00e4stmine: \u00dcks server, mitut rakendust - Organiseerimine: Eraldi kontekstid erinevatele projektidele - Praktika: Paljud ettev\u00f5tted kasutavad virtual hoste - Skaleerimine: V\u00f5imaldab kasvada ilma uute serverite lisamata</p>"},{"location":"ansible_roles/homework/#44-kaivita-ja-testi","title":"4.4 K\u00e4ivita ja testi","text":"<pre><code># Proovi oma laiendatud versiooni\nansible-playbook -i inventory/local site.yml --ask-become-pass\n\n# Kontrolli teenuseid\nsudo systemctl status nginx postgresql\ncurl -k https://localhost  # SSL peaks t\u00f6\u00f6tama!\n\n# Testi virtual hoste\ncurl -k https://localhost/site1\ncurl -k https://localhost/site2\n</code></pre> <p>Miks testimine on oluline? - Veakontroll: Veenduge, et k\u00f5ik t\u00f6\u00f6tab - Dokumentatsioon: N\u00e4ete, mis t\u00f6\u00f6tab ja mis mitte - \u00d5ppimine: Testimine on oluline oskus - Usaldus: Saate usaldada oma automatiseerimist</p>"},{"location":"ansible_roles/homework/#45-commit-oma-too","title":"4.5 Commit oma t\u00f6\u00f6","text":"<pre><code># Kui k\u00f5ik t\u00f6\u00f6tab\ngit add .\ngit commit -m \"Lisasin SSL ja virtual hosts Ansible'ile - t\u00f6\u00f6tab\"\n</code></pre>"},{"location":"ansible_roles/homework/#5-ehita-puppet-deployment-45-min","title":"5. Ehita Puppet deployment (45 min)","text":""},{"location":"ansible_roles/homework/#51-lulitu-puppet-vmile","title":"5.1 L\u00fclitu Puppet VM'ile","text":"<pre><code># H\u00e4vita eelmine VM ja k\u00e4ivita puppet VM\nvagrant destroy ansible-vm\nvagrant up puppet-vm\nvagrant ssh puppet-vm\n</code></pre> <p>Miks eraldi VM? - Puhas keskkond: Ei m\u00f5juta eelmist t\u00f6\u00f6d - V\u00f5rdlus: Saate v\u00f5rrelda m\u00f5lemat l\u00e4henemist - Praktika: Reaalses elus kasutate erinevaid masinaid - Debug: Lihtsam lahendada probleeme</p>"},{"location":"ansible_roles/homework/#52-lisa-samad-asjad-puppetiga","title":"5.2 Lisa samad asjad Puppet'iga","text":"<p>Puppet kood on veel poolik - pead lisama:</p> <pre><code>cd ../puppet/\n\n# SSL sertifikaatide genereerimine\n# Nginx SSL konfiguratsioon\n# Virtual hosts setup\n# PostgreSQL initial schema\n\n# Vaata requirements.md - mis pead t\u00e4pselt tegema\ncat ../requirements.md\n</code></pre> <p>Puppet SSL konfiguratsioon:</p>"},{"location":"ansible_roles/homework/#521-ssl-sertifikaatide-genereerimine","title":"5.2.1 SSL sertifikaatide genereerimine","text":"<pre><code># modules/nginx/manifests/ssl.pp\nclass nginx::ssl {\n  file { '/etc/nginx/ssl':\n    ensure =&gt; 'directory',\n    mode   =&gt; '0755',\n  }\n\n  exec { 'generate-ssl-cert':\n    command =&gt; 'openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/nginx/ssl/nginx.key -out /etc/nginx/ssl/nginx.crt -subj \"/C=EE/ST=Tallinn/L=Tallinn/O=Test/CN=localhost\"',\n    creates =&gt; '/etc/nginx/ssl/nginx.crt',\n    path    =&gt; '/usr/bin',\n    require =&gt; File['/etc/nginx/ssl'],\n  }\n}\n</code></pre>"},{"location":"ansible_roles/homework/#522-nginx-ssl-konfiguratsioon","title":"5.2.2 Nginx SSL konfiguratsioon","text":"<pre><code># modules/nginx/templates/nginx.conf.erb\nserver {\n    listen 80;\n    server_name localhost;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl;\n    server_name localhost;\n\n    ssl_certificate /etc/nginx/ssl/nginx.crt;\n    ssl_certificate_key /etc/nginx/ssl/nginx.key;\n\n    location / {\n        root /var/www/html;\n        index index.html;\n    }\n}\n</code></pre> <p>Miks Puppet s\u00fcntaks on erinev? - Ruby p\u00f5hine: Puppet kasutab Ruby s\u00fcntaksit - Deklaratiivne: Kirjeldate, mis peab olema, mitte kuidas - Idempotent: Puppet kontrollib olekut ja teeb ainult vajalikud muudatused - V\u00f5imas: Rohkem keerukaid funktsioone kui Ansible</p>"},{"location":"ansible_roles/homework/#53-lisa-monitoring","title":"5.3 Lisa monitoring","text":"<p>Monitoring v\u00f5imaldab kontrollida teenuste t\u00f6\u00f6d:</p> <pre><code># modules/monitoring/manifests/health.pp\nclass monitoring::health {\n  file { '/usr/local/bin/health-check.sh':\n    content =&gt; '#!/bin/bash\n      if systemctl is-active --quiet nginx; then\n        echo \"Nginx is running\"\n        exit 0\n      else\n        echo \"Nginx is not running\"\n        exit 1\n      fi',\n    mode    =&gt; '0755',\n  }\n\n  cron { 'health-check':\n    command =&gt; '/usr/local/bin/health-check.sh &gt;&gt; /var/log/health.log 2&gt;&amp;1',\n    minute  =&gt; '*/5',\n  }\n}\n</code></pre> <p>Miks monitoring on oluline? - Probleemide avastamine: Varane hoiatamine - T\u00f6\u00f6kindlus: Veenduge, et teenused t\u00f6\u00f6tavad - Praktika: K\u00f5ik p\u00e4ris s\u00fcsteemid vajavad monitooringut - Debug: Aitab leida probleeme</p>"},{"location":"ansible_roles/homework/#54-rakenda-oma-puppet-kood","title":"5.4 Rakenda oma Puppet kood","text":"<pre><code># Proovi oma versiooni\nsudo puppet apply --modulepath=modules manifests/site.pp\n\n# Kontrolli, et sama tulemus mis Ansible'iga\nsudo systemctl status nginx postgresql\ncurl -k https://localhost  # SSL peaks t\u00f6\u00f6tama!\n\n# Testi monitoring\nsudo /usr/local/bin/health-check.sh\n</code></pre>"},{"location":"ansible_roles/homework/#55-commit-puppet-too","title":"5.5 Commit Puppet t\u00f6\u00f6","text":"<pre><code># Kui sama tulemus mis Ansible'iga\ngit add .\ngit commit -m \"Lisasin samad asjad Puppet'iga - sama tulemus\"\n</code></pre>"},{"location":"ansible_roles/homework/#6-vordle-ja-analuusi-15-min","title":"6. V\u00f5rdle ja anal\u00fc\u00fcsi (15 min)","text":""},{"location":"ansible_roles/homework/#61-motle-labi-mis-oli-erinev","title":"6.1 M\u00f5tle l\u00e4bi, mis oli erinev","text":"<p>P\u00e4rast m\u00f5lema t\u00f6\u00f6riista kasutamist:</p> <pre><code># Lihtsalt testi m\u00f5lemad veel kord\ncurl -k https://localhost  # Kas m\u00f5lemad t\u00f6\u00f6tavad?\n\n# Commit kogu oma t\u00f6\u00f6\ngit add .\ngit commit -m \"M\u00f5lemad deploymentid t\u00f6\u00f6tavad - Ansible ja Puppet\"\ngit push origin homework-[your-name]\n</code></pre>"},{"location":"ansible_roles/homework/#62-luhike-vordlus","title":"6.2 L\u00fchike v\u00f5rdlus","text":"<p>Kirjuta 2-3 lauset oma kogemusest:</p> <ul> <li>Mida m\u00e4rkasid Ansible ja Puppet vahel?</li> <li>Mis oli lihtsam/keerulisem?</li> <li>Mida eelistaksid ja miks?</li> </ul>"},{"location":"ansible_roles/homework/#7-lopeta-ja-esita-15-min","title":"7. L\u00f5peta ja esita (15 min)","text":""},{"location":"ansible_roles/homework/#71-kirjuta-pohjalik-readmemd","title":"7.1 Kirjuta p\u00f5hjalik README.md","text":"<pre><code># Kodut\u00f6\u00f6 - Ehitasin sama asja Ansible ja Puppet'iga\n\n## Mida ehitasin\n- Laiensid basic nginx + postgresql starter koodi\n- Lisasin SSL sertifikaadid ja HTTPS konfiguratsioon\n- Lisasin virtual hosts funktsionaalsuse\n- Lisasin p\u00f5hilise monitooringu\n- Tegin seda nii Ansible kui Puppet'iga\n\n## Praktiline v\u00f5rdlus\n\n### Ansible kogemus\n- **Seadistamine:** Lihtne ja kiire\n- **S\u00fcntaks:** YAML oli selge ja loetav\n- **Debug:** Hea veateadete kvaliteet\n- **Dokumentatsioon:** Palju n\u00e4iteid ja \u00f5petusi\n\n### Puppet kogemus\n- **Seadistamine:** Keerulisem, aga v\u00f5imas\n- **S\u00fcntaks:** Ruby vajab harjumist\n- **Debug:** Rohkem keeruline, aga detailne\n- **Dokumentatsioon:** Hea, aga v\u00e4hem algajas\u00f5bralik\n\n## Eelistus ja p\u00f5hjendus\nMa eelistaks **[Ansible/Puppet]** sest [2-3 lauset p\u00f5hjendust].\n\n## \u00d5pitud oskused\n- SSL sertifikaatide konfigureerimine\n- Virtual hosts seadistamine\n- Monitooringu lisamine\n- T\u00f6\u00f6riistade v\u00f5rdlemine praktikas\n- Debug ja probleemilahendus\n\n---\nTehtud [kuup\u00e4ev] - m\u00f5lemad deploymentid t\u00f6\u00f6tavad!\n</code></pre>"},{"location":"ansible_roles/homework/#72-loplik-push-ja-esitamine","title":"7.2 L\u00f5plik push ja esitamine","text":"<pre><code># L\u00f5plik commit\ngit add .\ngit commit -m \"L\u00f5petasin kodut\u00f6\u00f6 - m\u00f5lemad deploymentid t\u00f6\u00f6tavad\"\n\n# Push GitHub'i\ngit push origin homework-[your-name]\n\n# Kontrolli, et k\u00f5ik on GitHub'is\necho \"Kontrolli: https://github.com/[your-username]/ansible-puppet-comparison\"\n</code></pre>"},{"location":"ansible_roles/homework/#8-napunaited","title":"8. N\u00e4pun\u00e4ited","text":""},{"location":"ansible_roles/homework/#81-ansible-napunaited","title":"8.1 Ansible n\u00e4pun\u00e4ited","text":"<ul> <li>Alusta lihtsalt: \u00c4ra proovi k\u00f5ike korraga</li> <li>Kasuta YAML validatorit: V\u00e4ldi s\u00fcntaksi vigu</li> <li>Testi playbook'i: Kasuta <code>--check</code> re\u017eiimi</li> <li>Dokumenteeri muudatused: Selge commit s\u00f5numid</li> </ul>"},{"location":"ansible_roles/homework/#82-puppet-napunaited","title":"8.2 Puppet n\u00e4pun\u00e4ited","text":"<ul> <li>\u00d5pi Ruby p\u00f5hit\u00f5desid: Aitab s\u00fcntaksit m\u00f5ista</li> <li>Kasuta puppet-lint: Kontrolli koodi kvaliteeti</li> <li>Testi modulit: Kasuta <code>puppet apply --noop</code></li> <li>Dokumenteeri klassi: Selge kommentaarid</li> </ul>"},{"location":"ansible_roles/homework/#83-uldised-napunaited","title":"8.3 \u00dcldised n\u00e4pun\u00e4ited","text":"<ul> <li>V\u00f5rdle objektiivselt: \u00c4ra eelista \u00fcht v\u00f5i teist</li> <li>M\u00f5tle praktiliselt: Millal mida kasutada</li> <li>Dokumenteeri kogemused: Aitab hiljem meeles pidada</li> <li>K\u00fcsi abi: Kui midagi ei t\u00f6\u00f6ta, k\u00fcsi \u00f5petajalt</li> </ul>"},{"location":"ansible_roles/homework/#9-kkk","title":"9. KKK","text":"<p>Q: Kas pean m\u00f5lemad deploymentid tegema? A: Jah, see on kodut\u00f6\u00f6 eesm\u00e4rk - v\u00f5rrelda m\u00f5lemat l\u00e4henemist.</p> <p>Q: Mis teha, kui \u00fcks ei t\u00f6\u00f6ta? A: Proovi debug'ida ja k\u00fcsi abi. Kui \u00fcks t\u00f6\u00f6tab, saad selle esitada.</p> <p>Q: Kas pean kirjutama pika v\u00f5rdluse? A: Ei, piisab l\u00fchikest, aga p\u00f5hjalikust anal\u00fc\u00fcsist.</p> <p>Q: Millal on t\u00e4htaeg? A: J\u00e4rgmise n\u00e4dala alguseks. Hilinemine = punktide kaotus.</p>"},{"location":"ansible_roles/homework/#onnitleused","title":"\u00d5nnitleused!","text":"<p>Kui j\u00f5uate siia, olete: - Ehitanud sama infrastruktuuri kahe erineva t\u00f6\u00f6riistaga - M\u00f5istnud praktilisi erinevusi - \u00d5ppinud debug'ima m\u00f5lemat t\u00f6\u00f6riista - Teinud informeeritud valiku</p> <p>Head konfiguratsioonihaldust! \ud83d\ude80</p> <p>Kodut\u00f6\u00f6 koostatud ITS-24 DevOps automatiseerimise kursuse jaoks K\u00fcsimuste korral: [\u00f5petaja kontakt]</p>"},{"location":"ansible_roles/lab/","title":"Ansible Roles Lab: Nginx Role","text":"<p>Aeg: 2 tundi Eeldused: Ansible basics l\u00e4bitud Eesm\u00e4rk: Luua t\u00f6\u00f6tav Ansible role</p>"},{"location":"ansible_roles/lab/#lab-ulesanded","title":"Lab \u00fclesanded","text":""},{"location":"ansible_roles/lab/#ulesanne-1-role-struktuuri-loomine-10-min","title":"\u00dclesanne 1: Role struktuuri loomine (10 min)","text":"<pre><code># Looge t\u00f6\u00f6kataloog\nmkdir ~/ansible-roles-lab &amp;&amp; cd ~/ansible-roles-lab\nmkdir roles &amp;&amp; cd roles\n\n# Genereerige role struktuur\nansible-galaxy init nginx-custom\n\n# Liikuge role kausta\ncd nginx-custom\n</code></pre> <p>\u2705 Checkpoint: <code>ls -la</code> peaks n\u00e4itama 8 kausta/faili</p>"},{"location":"ansible_roles/lab/#ulesanne-2-defaults-seadistamine-15-min","title":"\u00dclesanne 2: Defaults seadistamine (15 min)","text":"<p>Fail: <code>defaults/main.yml</code></p> <p>N\u00f5uded: - Defineerige v\u00e4hemalt 5 muutujat nginx jaoks - \u00dcks muutuja peab kasutama Jinja2 (n\u00e4iteks: <code>{{ ansible_processor_vcpus }}</code>) - Dokumenteerige kommentaaridega</p> <p>Vihje: M\u00f5elge portidele, kasutajatele, SSL-ile</p> <p>\u2705 Test: <pre><code>ansible -m debug -a \"var=nginx_port\" localhost -e \"@defaults/main.yml\"\n</code></pre></p>"},{"location":"ansible_roles/lab/#ulesanne-3-installation-tasks-20-min","title":"\u00dclesanne 3: Installation tasks (20 min)","text":"<p>Fail: <code>tasks/install.yml</code></p> <p>N\u00f5uded: 1. Update package cache (ainult Debian/Ubuntu) 2. Install nginx 3. Create nginx user 4. Create directories: <code>/var/www/html</code>, <code>/etc/nginx/sites-available</code>, <code>/etc/nginx/sites-enabled</code></p> <p>Looge ka: <code>tasks/main.yml</code> <pre><code>---\n- include_tasks: install.yml\n</code></pre></p> <p>\u2705 Test: <pre><code>ansible-playbook --syntax-check tasks/main.yml\n</code></pre></p>"},{"location":"ansible_roles/lab/#ulesanne-4-nginx-template-20-min","title":"\u00dclesanne 4: Nginx template (20 min)","text":"<p>Fail: <code>templates/nginx.conf.j2</code></p> <p>N\u00f5uded: - Kasutage v\u00e4hemalt 3 muutujat defaults'ist - Lisage conditional block ({% if %}) - Worker processes peab s\u00f5ltuma CPU tuumadest</p> <p>N\u00e4ide algus: <pre><code>user {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\n\nevents {\n    worker_connections {{ nginx_worker_connections }};\n}\n\nhttp {\n    # Teie kood siia\n}\n</code></pre></p> <p>Fail: <code>tasks/configure.yml</code> <pre><code>---\n- name: Deploy nginx config\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n    backup: yes\n  notify: restart nginx\n</code></pre></p> <p>\u2705 Test: Template peab genereeruma ilma vigadeta</p>"},{"location":"ansible_roles/lab/#ulesanne-5-handlers-10-min","title":"\u00dclesanne 5: Handlers (10 min)","text":"<p>Fail: <code>handlers/main.yml</code></p> <p>N\u00f5uded: 1. Handler \"restart nginx\" 2. Handler \"reload nginx\"</p> <p>\u2705 Test: Handler peab olema <code>service</code> mooduliga</p>"},{"location":"ansible_roles/lab/#ulesanne-6-virtual-hosts-25-min","title":"\u00dclesanne 6: Virtual hosts (25 min)","text":"<p>Fail: <code>templates/vhost.conf.j2</code></p> <pre><code>server {\n    listen {{ item.port | default(80) }};\n    server_name {{ item.name }};\n    root {{ item.root | default('/var/www/html') }};\n\n    # Lisa SSL kui item.ssl == true\n}\n</code></pre> <p>Fail: <code>tasks/vhosts.yml</code></p> <p>N\u00f5uded: 1. Loop l\u00e4bi <code>nginx_vhosts</code> listi 2. Create vhost config igale saidile 3. Create document root kataloogid 4. Enable sites (symlink)</p> <p>defaults/main.yml lisa: <pre><code>nginx_vhosts: []\n# nginx_vhosts:\n#   - name: example.com\n#     port: 80\n#     root: /var/www/example\n</code></pre></p>"},{"location":"ansible_roles/lab/#ulesanne-7-ssl-sertifikaadid-20-min","title":"\u00dclesanne 7: SSL sertifikaadid (20 min)","text":"<p>Fail: <code>tasks/ssl.yml</code></p> <p>N\u00f5uded: 1. Genereeri self-signed cert kui <code>nginx_ssl_enabled: true</code> 2. Kasuta OpenSSL k\u00e4sku 3. Cert kehtib 365 p\u00e4eva</p> <p>K\u00e4sk vihjeks: <pre><code>openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n  -keyout /etc/ssl/private/nginx.key \\\n  -out /etc/ssl/certs/nginx.crt \\\n  -subj \"/C=EE/ST=Harjumaa/L=Tallinn/O=School/CN=localhost\"\n</code></pre></p>"},{"location":"ansible_roles/lab/#ulesanne-8-idempotency-test-10-min","title":"\u00dclesanne 8: Idempotency test (10 min)","text":"<p>Fail: <code>tasks/main.yml</code></p> <p>\u00dchendage k\u00f5ik taskid: <pre><code>---\n- include_tasks: install.yml\n- include_tasks: configure.yml\n- include_tasks: ssl.yml\n  when: nginx_ssl_enabled | default(false)\n- include_tasks: vhosts.yml\n  when: nginx_vhosts | length &gt; 0\n</code></pre></p> <p>\u2705 Test: K\u00e4ivitage 2x j\u00e4rjest, teine kord ei tohi midagi muuta <pre><code>ansible-playbook test.yml\nansible-playbook test.yml  # K\u00f5ik peab olema \"ok\", mitte \"changed\"\n</code></pre></p>"},{"location":"ansible_roles/lab/#ulesanne-9-test-playbook-10-min","title":"\u00dclesanne 9: Test playbook (10 min)","text":"<p>Fail: <code>~/ansible-roles-lab/test.yml</code></p> <pre><code>---\n- name: Test nginx role\n  hosts: localhost\n  connection: local\n  become: yes\n\n  vars:\n    nginx_ssl_enabled: true\n    nginx_vhosts:\n      - name: test.local\n        port: 8080\n        ssl: true\n\n  roles:\n    - nginx-custom\n\n  post_tasks:\n    - name: Check nginx\n      uri:\n        url: \"http://localhost:8080\"\n      ignore_errors: yes\n</code></pre> <p>\u2705 L\u00f5pptest: <pre><code>ansible-playbook test.yml --ask-become-pass\nsudo systemctl status nginx\ncurl http://localhost:8080\n</code></pre></p>"},{"location":"ansible_roles/lab/#hindamiskriteeriumid","title":"Hindamiskriteeriumid","text":""},{"location":"ansible_roles/lab/#kohustuslik-5p","title":"Kohustuslik (5p)","text":"<ul> <li> Role struktuur \u00f5ige</li> <li> Nginx installeerub</li> <li> Template t\u00f6\u00f6tab</li> <li> Handler t\u00f6\u00f6tab</li> <li> Idempotent</li> </ul>"},{"location":"ansible_roles/lab/#lisapunktid","title":"Lisapunktid","text":"<ul> <li> SSL t\u00f6\u00f6tab (+1p)</li> <li> Virtual hosts t\u00f6\u00f6tab (+1p)</li> <li> Validation tasks (+1p)</li> <li> README.md (+1p)</li> <li> Meta informatsioon (+1p)</li> </ul>"},{"location":"ansible_roles/lab/#vihjed-probleemide-korral","title":"Vihjed probleemide korral","text":"<p>Nginx ei k\u00e4ivitu: <pre><code>sudo nginx -t  # Kontrolli konfiguratsiooni\nsudo journalctl -u nginx  # Vaata logisid\n</code></pre></p> <p>Template ei genereeru: <pre><code>ansible -m template -a \"src=nginx.conf.j2 dest=/tmp/test.conf\" localhost\n</code></pre></p> <p>Handler ei k\u00e4ivitu: - Kontrollige, kas task muutis midagi (changed: true) - Notify nimi peab t\u00e4pselt klappima</p>"},{"location":"ansible_roles/lab/#esitamine","title":"Esitamine","text":"<ol> <li>Push GitHub'i: <code>ansible-roles-lab/</code> kaust</li> <li>README.md peab sisaldama kasutamise n\u00e4idet</li> <li>Role peab t\u00f6\u00f6tama Ubuntu 20.04/22.04</li> </ol> <p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala algus</p>"},{"location":"ansible_roles/lecture/","title":"Ansible Roles: Roles ja Puppet","text":""},{"location":"ansible_roles/lecture/#teemad-vagrant-basics-ansible-roles-structure-role-variables-ja-dependencies-ansible-galaxy-puppet-fundamentals-puppet-vs-ansible-vordlus","title":"Teemad: Vagrant basics, Ansible roles structure, Role variables ja dependencies, Ansible Galaxy, Puppet fundamentals, Puppet vs Ansible v\u00f5rdlus","text":"<p>Tere tulemast tagasi! Eelmisel n\u00e4dalal \u00f5ppisime Ansible'i variables, templates ja vault'i kasutamist. T\u00e4na astume j\u00e4rgmise suure sammu - \u00f5pime kirjutama professionaalset infrastruktuuri koodi ja v\u00f5rdleme erinevaid t\u00f6\u00f6riistu.</p>"},{"location":"ansible_roles/lecture/#vagrant-testing-environment","title":"Vagrant Testing Environment","text":""},{"location":"ansible_roles/lecture/#loeng-1-vagrant-basics-for-testing","title":"Loeng 1: Vagrant Basics for Testing","text":""},{"location":"ansible_roles/lecture/#miks-me-vajame-testikeskkonda","title":"Miks me vajame testikeskkonda?","text":"<p>Kui t\u00f6\u00f6tate Ansible playbook'ide v\u00f5i Puppet manifest'idega, ei saa neid testida toodangu serverites! Vajate turvalist keskkonda, kus:</p> <ul> <li>\u2705 V\u00f5ib katki minna - kui midagi l\u00e4heb valesti</li> <li>\u2705 Kiire reset - uus puhas server sekundites  </li> <li>\u2705 Erinevad OS'id - Ubuntu, CentOS, Debian testimiseks</li> <li>\u2705 Ei maksa raha - cloud VM'ide asemel</li> </ul> <p>Vagrant lahendab t\u00e4pselt selle probleemi!</p>"},{"location":"ansible_roles/lecture/#mis-on-vagrant","title":"Mis on Vagrant?","text":"<p>Vagrant = Virtual Machine management tool:</p> <pre><code># Looge VM sekunditega\nvagrant init ubuntu/jammy64\nvagrant up\n\n# \u00dchendage VM'iga\nvagrant ssh\n\n# H\u00e4vitage ja alustage uuest\nvagrant destroy -f\nvagrant up\n</code></pre>"},{"location":"ansible_roles/lecture/#vagrant-project-setup","title":"Vagrant Project Setup","text":""},{"location":"ansible_roles/lecture/#basic-vagrantfile","title":"Basic Vagrantfile:","text":"<pre><code># Vagrantfile\nVagrant.configure(\"2\") do |config|\n  # Base box (OS image)\n  config.vm.box = \"ubuntu/jammy64\"\n\n  # VM resources\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.memory = \"2048\"\n    vb.cpus = 2\n  end\n\n  # Network settings\n  config.vm.network \"private_network\", ip: \"192.168.56.10\"\n\n  # Shared folders\n  config.vm.synced_folder \".\", \"/vagrant\"\n\n  # Ansible provisioning\n  config.vm.provision \"ansible\" do |ansible|\n    ansible.playbook = \"site.yml\"\n    ansible.inventory_path = \"inventory/vagrant\"\n  end\nend\n</code></pre>"},{"location":"ansible_roles/lecture/#multi-vm-setup","title":"Multi-VM Setup:","text":"<pre><code>Vagrant.configure(\"2\") do |config|\n  # Ansible test VM\n  config.vm.define \"ansible-vm\" do |ansible|\n    ansible.vm.box = \"ubuntu/jammy64\"\n    ansible.vm.network \"private_network\", ip: \"192.168.56.11\"\n    ansible.vm.hostname = \"ansible-test\"\n  end\n\n  # Puppet test VM  \n  config.vm.define \"puppet-vm\" do |puppet|\n    puppet.vm.box = \"ubuntu/jammy64\"\n    puppet.vm.network \"private_network\", ip: \"192.168.56.12\"\n    puppet.vm.hostname = \"puppet-test\"\n  end\nend\n</code></pre>"},{"location":"ansible_roles/lecture/#vagrant-lifecycle","title":"Vagrant Lifecycle","text":"<pre><code>flowchart TD\n    A[\ud83d\udcdd vagrant init&lt;br/&gt;Loo Vagrantfile] --&gt; B[\u2705 vagrant validate&lt;br/&gt;Kontrolli konfiguratsiooni]\n    B --&gt; C[\ud83d\ude80 vagrant up&lt;br/&gt;K\u00e4ivita VM]\n    C --&gt; D[\ud83d\udd17 vagrant ssh&lt;br/&gt;\u00dchenda VM'iga]\n    D --&gt; E[\u23f8 vagrant halt&lt;br/&gt;Peata VM]\n    E --&gt; F[\ud83d\udd04 vagrant reload&lt;br/&gt;Restart VM]\n    F --&gt; G[\ud83d\uddd1 vagrant destroy&lt;br/&gt;Kustuta VM]\n\n    style A fill:#99ccff\n    style B fill:#99ff99\n    style C fill:#ffcc99\n    style D fill:#ff9999\n    style E fill:#cc99ff\n    style F fill:#ffff99\n    style G fill:#ff99cc</code></pre> <pre><code># Projekt setup\nvagrant init                # Loo Vagrantfile\nvagrant validate            # Kontrolli konfiguratsiooni\n\n# VM management\nvagrant up                 # K\u00e4ivita VM\nvagrant ssh                # \u00dchenda VM'iga\nvagrant halt               # Peata VM\nvagrant reload             # Restart VM\nvagrant destroy            # Kustuta VM\n\n# Snapshots ja info\nvagrant snapshot save clean    # Salvesta snapshot\nvagrant snapshot restore clean # Taasta snapshot\nvagrant status                 # Vaata VM olekut\n</code></pre>"},{"location":"ansible_roles/lecture/#vagrant-ansible-integration","title":"Vagrant + Ansible Integration","text":"<p>Automaatne provisioning: <pre><code>config.vm.provision \"ansible\" do |ansible|\n  ansible.playbook = \"site.yml\"\n  ansible.inventory_path = \"inventory\"\n  ansible.limit = \"all\"\n  ansible.verbose = \"v\"\nend\n</code></pre></p> <p>Manual provisioning: <pre><code># VM k\u00e4imas, provisioning k\u00e4sitsi\nvagrant up --no-provision\nvagrant ssh\n# VM sees: install Ansible, run playbooks\n</code></pre></p>"},{"location":"ansible_roles/lecture/#demo-quick-vagrant-test","title":"Demo: Quick Vagrant Test","text":"<pre><code># Loo test projekt\nmkdir vagrant-demo &amp;&amp; cd vagrant-demo\n\n# Initialize Vagrant\nvagrant init ubuntu/jammy64\n\n# Start VM\nvagrant up\n\n# Connect and test\nvagrant ssh\nsudo apt update\nexit\n\n# Cleanup\nvagrant destroy -f\n</code></pre> <p>\ud83d\udca1 Protip: Vagrant'iga saate testida sama playbook'i erinevatel OS'idel!</p>"},{"location":"ansible_roles/lecture/#ansible-roles-tutvustus","title":"Ansible Roles tutvustus","text":""},{"location":"ansible_roles/lecture/#loeng-2-ansible-roles-architecture","title":"Loeng 2: Ansible Roles Architecture","text":""},{"location":"ansible_roles/lecture/#miks-vajame-rolee-spagettikood-probleem","title":"Miks vajame role'e? Spagettikood probleem","text":"<p>Kujutage ette olukorda: teie boss tuleb teie juurde ja \u00fctleb:</p> <p>\"Palun seadista mulle 50 veebiserveri, 20 andmebaasiserveri ja 30 monitoring serveri. K\u00f5ik peavad olema identse konfiguratsiooniga ja ma vajan seda homme valmis.\"</p> <p>Kuidas te seda tegema hakkaksite?</p> <p>Enamik algajaid hakkab kirjutama \u00fcht suurt playbook'i:</p> <pre><code># monster-playbook.yml - 800+ rida \u00f5udust!\n- name: \"K\u00f5ik \u00fches failis - \u00e4ra tehke kunagi nii!\"\n  hosts: all\n  tasks:\n    # 100 task'i nginx jaoks\n    - name: \"Install nginx\"\n    - name: \"Configure nginx main config\"  \n    - name: \"Setup nginx virtual hosts\"\n    - name: \"Generate SSL certificates for nginx\"\n    - name: \"Configure nginx security headers\"\n    # ... veel 95 task'i nginx jaoks\n\n    # 80 task'i mysql jaoks\n    - name: \"Install mysql server\"\n    - name: \"Configure mysql users\"\n    - name: \"Setup mysql databases\"\n    # ... veel 77 task'i mysql jaoks\n\n    # 60 task'i monitoring jaoks\n    - name: \"Install prometheus\"\n    - name: \"Configure grafana\"\n    # ... veel 58 task'i monitoring jaoks\n\n    # 40 task'i backup jaoks\n    # 30 task'i SSL jaoks\n    # 50 task'i security jaoks\n    # ja nii edasi...\n</code></pre> <p>See on kohutav lahendus! Miks?</p> <ol> <li>V\u00f5imatu lugeda - 800+ rida \u00fches failis</li> <li>V\u00f5imatu testida - peate testima kogu faili korraga</li> <li>Ei saa korduvkasutada - kui vajate nginx'i teises projektis?</li> <li>Meeskonnat\u00f6\u00f6 v\u00f5imatu - kuidas jagada kolleegidega?</li> <li>Muudatused riskantne - \u00fche asja muutmine v\u00f5ib midagi muud l\u00f5hkuda</li> </ol> <p>Ma olen n\u00e4inud selliseid 2000+ realisi playbook'e p\u00e4ris firmades. Need on nagu spagettikood - keegi ei tea, mis kuhu kuulub!</p>"},{"location":"ansible_roles/lecture/#mis-on-ansible-role-lego-klotsid-meetod","title":"Mis on Ansible Role? LEGO klotsid meetod","text":"<p>Ansible Role on nagu LEGO klots.</p> <p>M\u00f5elge LEGO peale: - Iga klots teeb \u00fchte asja h\u00e4sti (auto ratas, sein, katus) - Klotsid on standardsed - sobivad alati kokku - Klotsid on korduvkasutatavad - sama ratas sobib auto ja lennuki k\u00fclge - Klotsid on kombineeritavad - saate ehitada maju, autosid, linnu</p> <p>Role'id t\u00f6\u00f6tavad t\u00e4pselt samamoodi:</p> <pre><code># site.yml - selge ja lihtne!\n- name: \"Web servers setup\"\n  hosts: webservers\n  roles:\n    - common      # P\u00f5hiseadistused (SSH, users, firewall)\n    - nginx       # Ainult veebiserver  \n    - php         # Ainult PHP runtime\n    - ssl         # Ainult SSL sertifikaadid\n\n- name: \"Database servers setup\"\n  hosts: dbservers\n  roles:\n    - common      # SAMA common role!\n    - mysql       # Ainult andmebaas\n    - backup      # Ainult varundamine\n\n- name: \"Monitoring servers setup\"\n  hosts: monitoring\n  roles:\n    - common      # SAMA common role taas!\n    - prometheus  # Ainult monitoring\n    - grafana     # Ainult dashboardid\n</code></pre> <p>Vaadake, mis toimus: - <code>common</code> role kasutatakse kolmes erinevas kohas - Iga role teeb ainult \u00fchte asja - Kood on selge ja loetav - Saame osasid eraldi testida</p>"},{"location":"ansible_roles/lecture/#rolei-anatoomia-maja-ehitamise-meetod","title":"Role'i anatoomia: Maja ehitamise meetod","text":"<p>M\u00f5elge role'ile nagu maja ehitamisele. Igal osalisel on oma koht ja eesm\u00e4rk:</p> <pre><code>nginx-role/\n\u251c\u2500\u2500 README.md              # \"Kasutusjuhend\" - kuidas role't kasutada\n\u251c\u2500\u2500 meta/main.yml          # \"Ehitusluba\" - dependencies, n\u00f5uded\n\u251c\u2500\u2500 defaults/main.yml      # \"Standardmaterjalid\" - vaikimisi seaded\n\u251c\u2500\u2500 vars/main.yml          # \"Kindlad materjalid\" - muutumatud seaded\n\u251c\u2500\u2500 tasks/main.yml         # \"Ehitusplaan\" - sammud j\u00e4rjest\n\u251c\u2500\u2500 handlers/main.yml      # \"H\u00e4ires\u00fcsteemid\" - reaktsioonid muudatustele\n\u251c\u2500\u2500 templates/             # \"Kohandatavad osad\" - konfiguratsioonifailid\n\u2502   \u2514\u2500\u2500 nginx.conf.j2\n\u251c\u2500\u2500 files/                 # \"Valmis detailid\" - skriptid, sertifikaadid\n\u2502   \u2514\u2500\u2500 startup.sh\n\u2514\u2500\u2500 tests/                 # \"Kontrollid\" - kas maja p\u00fcsib p\u00fcsti\n    \u2514\u2500\u2500 test.yml\n</code></pre>"},{"location":"ansible_roles/lecture/#iga-kausta-eesmark","title":"Iga kausta eesm\u00e4rk:","text":"<p><code>tasks/</code> = Ehitusplaan - Sisaldab k\u00f5iki samme, mis role teeb - Alati alustage siit role'i lugemisel</p> <p><code>defaults/</code> = Standardmaterjalid - Vaikimisi seaded, mida saab muuta - Madalaim prioriteet - k\u00f5ik muu kirjutab \u00fcle</p> <p><code>vars/</code> = Kindlad materjalid - Seaded, mida role ise m\u00e4\u00e4rab - K\u00f5rge prioriteet - raske \u00fcle kirjutada</p> <p><code>templates/</code> = Kohandatavad osad - Konfiguratsioonifailid, mida saab muutujatega kohandada - Kasutab Jinja2 template engine'i</p> <p><code>files/</code> = Valmis detailid - Staatilised failid, mis kopeeritakse otse - Skriptid, sertifikaadid, etc.</p> <p><code>handlers/</code> = H\u00e4ires\u00fcsteemid - K\u00e4ivitatakse ainult siis, kui midagi muutus - Tavaliselt teenuste restart'imine</p> <p><code>meta/</code> = Ehitusluba - Kirjeldab, mida role vajab t\u00f6\u00f6ks - Dependencies teiste role'idega</p>"},{"location":"ansible_roles/lecture/#lihtne-nginx-role-naide","title":"Lihtne nginx role n\u00e4ide","text":"<p>Vaatame, kuidas lihtsaim nginx role v\u00e4lja n\u00e4eks:</p> <p><code>tasks/main.yml</code> - mis me teeme: <pre><code>---\n- name: \"Install Nginx (alati kirjutage selged nimed!)\"\n  package:\n    name: nginx\n    state: present\n\n- name: \"Configure Nginx (kasutame template'i)\"\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n  notify: restart nginx    # See k\u00e4ivitab handler'i!\n\n- name: \"Start Nginx (enable = autostart boot'imisel)\"\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n</code></pre></p> <p><code>defaults/main.yml</code> - vaikimisi seaded: <pre><code>---\nnginx_port: 80              # Enamik tahab port 80\nnginx_user: www-data        # Ubuntu standard user\nnginx_worker_processes: 2   # M\u00f5istlik algus\nnginx_max_connections: 1024 # Piisav v\u00e4ikesele saidile\n</code></pre></p> <p><code>templates/nginx.conf.j2</code> - konfiguratsioon: <pre><code>user {{ nginx_user }};\nworker_processes {{ nginx_worker_processes }};\n\nevents {\n    worker_connections {{ nginx_max_connections }};\n}\n\nhttp {\n    server {\n        listen {{ nginx_port }};\n        server_name _;\n        root /var/www/html;\n        index index.html;\n    }\n}\n</code></pre></p> <p><code>handlers/main.yml</code> - reaktsioonid: <pre><code>---\n- name: restart nginx\n  service:\n    name: nginx\n    state: restarted\n</code></pre></p> <p>N\u00e4ete, kui lihtne see on? Iga fail teeb \u00fchte asja ja need t\u00f6\u00f6tavad koos!</p>"},{"location":"ansible_roles/lecture/#variable-precedence-muutujate-hierarhia","title":"Variable Precedence: Muutujate hierarhia","text":"<p>Ansible'is on muutujatel t\u00e4htsusj\u00e4rjekord. See on \u00fcks keerulisemaid teemasid, aga v\u00e4ga oluline m\u00f5ista!</p> <p>K\u00f5rgemad kirjutavad \u00fcle madalamad:</p> <pre><code>1. Command line (-e var=value)    \u2190 K\u00d5IGE TUGEVAM (k\u00e4sk)\n2. Task vars                      \n3. Block vars\n4. Role vars                      \u2190 vars/main.yml\n5. Include vars\n6. Set_facts\n7. Registered vars\n8. Host facts\n9. Play vars\n10. Host vars\n11. Group vars  \n12. Role defaults                 \u2190 K\u00d5IGE N\u00d5RGEM (soovitus)\n</code></pre>"},{"location":"ansible_roles/lecture/#praktiline-naide-hierarhiast","title":"Praktiline n\u00e4ide hierarhiast:","text":"<pre><code># defaults/main.yml (k\u00f5ige n\u00f5rgem)\nnginx_port: 80\n\n# vars/main.yml (tugev)\nnginx_port: 8080\n\n# playbook.yml (tugevam)\n- role: nginx\n  vars:\n    nginx_port: 9000\n\n# K\u00e4sureal (k\u00f5ige tugevam)\nansible-playbook site.yml -e nginx_port=3000\n</code></pre> <p>Tulemus: nginx kuulab port 3000!</p>"},{"location":"ansible_roles/lecture/#kuidas-seda-meeles-pidada","title":"Kuidas seda meeles pidada:","text":"<ul> <li>Role defaults = \"Soovitused\" (n\u00f5rgad)</li> <li>Role vars = \"Reeglid\" (tugevad)  </li> <li>Play vars = \"K\u00e4sud\" (tugevamad)</li> <li>Extra vars = \"K\u00e4sklused\" (k\u00f5ige tugevamad)</li> </ul>"},{"location":"ansible_roles/lecture/#roleide-kasutamine-playbookis","title":"Role'ide kasutamine playbook'is","text":""},{"location":"ansible_roles/lecture/#lihtne-kasutamine","title":"Lihtne kasutamine:","text":"<pre><code>- name: \"Deploy web application\"\n  hosts: webservers\n  become: yes\n  roles:\n    - nginx\n    - php\n    - mysql-client\n</code></pre>"},{"location":"ansible_roles/lecture/#muutujatega-kasutamine","title":"Muutujatega kasutamine:","text":"<pre><code>- name: \"Custom web server setup\"\n  hosts: webservers\n  become: yes\n  roles:\n    - role: nginx\n      vars:\n        nginx_port: 8080\n        nginx_ssl_enabled: true\n        nginx_worker_processes: 4\n</code></pre>"},{"location":"ansible_roles/lecture/#conditional-roleid","title":"Conditional role'id:","text":"<pre><code>- name: \"Environment-specific deployment\"\n  hosts: all\n  become: yes\n  roles:\n    - common\n    - role: nginx\n      when: \"'webservers' in group_names\"\n    - role: mysql\n      when: \"'dbservers' in group_names\"\n    - role: monitoring\n      when: app_env == \"production\"\n</code></pre>"},{"location":"ansible_roles/lecture/#role-creation-best-practices","title":"Role Creation Best Practices","text":""},{"location":"ansible_roles/lecture/#loeng-3-professionaalsed-standardid","title":"Loeng 3: Professionaalsed standardid","text":"<p>N\u00fc\u00fcd kui teate, mis on role, \u00f5pime, kuidas teha neid \u00f5igesti. Ma olen n\u00e4inud tuhandeid halbu role'e - aga hea uudis on see, et on lihtsad reeglid, mis muudavad teie role'id professionaalseteks!</p>"},{"location":"ansible_roles/lecture/#reegel-1-single-responsibility-principle","title":"Reegel 1: Single Responsibility Principle","text":"<p>\"\u00dcks role = \u00fcks vastutus\"</p> <p>See on k\u00f5ige olulisem reegel. Iga role peaks tegema t\u00e4pselt \u00fchte asja ja tegema seda h\u00e4sti.</p>"},{"location":"ansible_roles/lecture/#hea-lahenemine","title":"Hea l\u00e4henemine \u2705","text":"<pre><code>roles/\n\u251c\u2500\u2500 nginx/         # AINULT veebiserver\n\u251c\u2500\u2500 mysql/         # AINULT andmebaas\n\u251c\u2500\u2500 php/           # AINULT PHP runtime\n\u251c\u2500\u2500 ssl/           # AINULT SSL sertifikaadid\n\u251c\u2500\u2500 backup/        # AINULT varundamine\n\u2514\u2500\u2500 monitoring/    # AINULT j\u00e4lgimine\n</code></pre>"},{"location":"ansible_roles/lecture/#halb-lahenemine","title":"Halb l\u00e4henemine \u274c","text":"<pre><code>roles/\n\u2514\u2500\u2500 web-stack/     # Teeb K\u00d5IKE korraga:\n                   # nginx + mysql + php + ssl + backup + monitoring\n</code></pre> <p>Miks see halb? - Kui MySQL vajab parandust, peate puutuma nginx'iga - Ei saa nginx'i kasutada ilma MySQL'ita - Raske testida - peate testima k\u00f5ike korraga - Suur ja keeruline - keegi ei saa aru</p> <p>Praktiline n\u00e4ide:</p> <p>Kujutage ette, et teil on <code>web-stack</code> role, mis teeb k\u00f5ike. Siis tuleb uus projekt, kus vaja ainult nginx'i (ilma MySQL'ita). Mida te teete?</p> <ol> <li>Halvad valikud:</li> <li>Kopeerite koodi ja eemaldatae MySQL osad (DRY printsiipi rikkumine)</li> <li>Lisate tuhandeeid <code>when</code> tingimusi (keeruline)</li> <li> <p>Kasutate kogu role'i ja ignoreerite MySQL'i (raisatud ressursid)</p> </li> <li> <p>Hea valik:</p> </li> <li>Kasutate eraldi <code>nginx</code> role'i - t\u00f6\u00f6tab kohe!</li> </ol>"},{"location":"ansible_roles/lecture/#reegel-2-8020-konfigureeritavus","title":"Reegel 2: 80/20 Konfigureeritavus","text":"<p>80% juhtudest peaks role t\u00f6\u00f6tama vaikimisi seadetega!</p> <p>See t\u00e4hendab, et algajad saavad kohe alustada, aga eksperdid saavad k\u00f5ike muuta.</p>"},{"location":"ansible_roles/lecture/#algajasobralik-defaults","title":"Algajas\u00f5bralik defaults","text":"<pre><code># defaults/main.yml - lihtne ja toimib kohe\nwebserver_port: 80                    # K\u00f5ik teavad port 80\nwebserver_ssl_enabled: false          # SSL on optional\nwebserver_user: www-data              # Ubuntu standard\nwebserver_worker_processes: 2         # M\u00f5istlik algus\n\n# Lihtsad moodulid\nwebserver_modules:\n  - rewrite    # URL rewriting\n  - ssl        # HTTPS support\n</code></pre>"},{"location":"ansible_roles/lecture/#eksperdi-voimalused","title":"Eksperdi v\u00f5imalused","text":"<pre><code># playbook.yml - ekspert saab k\u00f5ike muuta\n- role: webserver\n  vars:\n    webserver_port: 443\n    webserver_ssl_enabled: true\n    webserver_ssl_cert: \"/path/to/custom.pem\"\n    webserver_worker_processes: 8\n\n    # Eksperdi moodulid\n    webserver_modules:\n      - rewrite\n      - ssl\n      - headers\n      - deflate\n      - geoip\n      - rate_limit\n\n    # T\u00e4iesti custom konfiguratsioon\n    webserver_custom_config: |\n      # Minu spetsiaalne konfiguratsioon\n      gzip on;\n      gzip_types text/css application/javascript;\n\n      location /api/ {\n          proxy_pass http://backend;\n          proxy_set_header Host $host;\n      }\n</code></pre> <p>V\u00f5tmepunktid: - Defaults peavad olema turvalised ja m\u00f5istlikud - K\u00f5ik peab olema \u00fcle kirjutatav advanced kasutajatele - Dokumentatsioon peab sisaldama n\u00e4iteid m\u00f5lemale tasemele</p>"},{"location":"ansible_roles/lecture/#reegel-3-multi-os-tugi","title":"Reegel 3: Multi-OS tugi","text":"<p>Professionaalne role toetab mitut operatsioonis\u00fcsteemi. See t\u00e4hendab, et sama role t\u00f6\u00f6tab Ubuntu's, Debian'is, CentOS'is, jne.</p>"},{"location":"ansible_roles/lecture/#kuidas-seda-organiseerida","title":"Kuidas seda organiseerida:","text":"<pre><code>webserver-role/\n\u251c\u2500\u2500 vars/\n\u2502   \u251c\u2500\u2500 main.yml           # \u00dchised muutujad\n\u2502   \u251c\u2500\u2500 Debian.yml         # Ubuntu/Debian spetsiifilised\n\u2502   \u251c\u2500\u2500 RedHat.yml         # CentOS/RHEL spetsiifilised\n\u2502   \u2514\u2500\u2500 Ubuntu.yml         # Ubuntu erip\u00e4rad\n\u2514\u2500\u2500 tasks/\n    \u251c\u2500\u2500 main.yml           # Peamine loogika\n    \u251c\u2500\u2500 install-Debian.yml # Debian installeerimise viis\n    \u2514\u2500\u2500 install-RedHat.yml # RedHat installeerimise viis\n</code></pre>"},{"location":"ansible_roles/lecture/#smart-approach-os-detection","title":"Smart approach - OS detection:","text":"<p><code>tasks/main.yml</code>: <pre><code>---\n- name: \"Load OS-specific variables (smart trick!)\"\n  include_vars: \"{{ item }}\"\n  with_first_found:\n    - \"{{ ansible_distribution }}.yml\"        # Ubuntu.yml\n    - \"{{ ansible_os_family }}.yml\"           # Debian.yml\n    - \"main.yml\"                              # fallback\n\n- name: \"Install packages (OS-specific way)\"\n  include_tasks: \"install-{{ ansible_os_family }}.yml\"\n\n- name: \"Configure webserver (universal)\"\n  include_tasks: configure.yml\n</code></pre></p> <p><code>vars/Debian.yml</code> (Ubuntu/Debian): <pre><code>---\nwebserver_package: \"nginx\"\nwebserver_service: \"nginx\"  \nwebserver_config_path: \"/etc/nginx\"\nwebserver_user: \"www-data\"        # Debian kasutab www-data\nwebserver_group: \"www-data\"\nwebserver_log_path: \"/var/log/nginx\"\n</code></pre></p> <p><code>vars/RedHat.yml</code> (CentOS/RHEL): <pre><code>---\nwebserver_package: \"nginx\"\nwebserver_service: \"nginx\"\nwebserver_config_path: \"/etc/nginx\"\nwebserver_user: \"nginx\"           # RedHat kasutab nginx\nwebserver_group: \"nginx\"\nwebserver_log_path: \"/var/log/nginx\"\n</code></pre></p> <p>Miks see on kasulik? - Role t\u00f6\u00f6tab automaatselt erinevates OS'ides - Ei pea meeles pidama OS erinevusi - Saate testida mitmes keskkonnas</p>"},{"location":"ansible_roles/lecture/#reegel-4-alati-valideerige-sisendeid","title":"Reegel 4: Alati valideerige sisendeid!","text":"<p>Ma olen n\u00e4inud tudengeid, kes unustavad valideerimise. Tulemus on segadus ja cryptic error message'id.</p> <p>Iga role peaks kontrollima: 1. Kas kohustuslikud muutujad on m\u00e4\u00e4ratud? 2. Kas muutujate v\u00e4\u00e4rtused on m\u00f5istlikud? 3. Kas s\u00fcsteem vastab n\u00f5uetele?</p>"},{"location":"ansible_roles/lecture/#parameetrite-valideerimine","title":"Parameetrite valideerimine","text":"<p><code>tasks/validate.yml</code>: <pre><code>---\n- name: \"Validate port number (critical check!)\"\n  assert:\n    that:\n      - webserver_port is defined\n      - webserver_port is number\n      - webserver_port &gt; 0\n      - webserver_port &lt; 65536\n    fail_msg: |\n      ERROR: webserver_port must be a valid port number (1-65535)\n      Current value: {{ webserver_port | default('undefined') }}\n\n- name: \"Validate SSL settings when enabled\"\n  assert:\n    that:\n      - webserver_ssl_cert_path is defined\n      - webserver_ssl_key_path is defined\n      - webserver_ssl_cert_path | length &gt; 0\n      - webserver_ssl_key_path | length &gt; 0\n    fail_msg: |\n      ERROR: SSL sertifikaadi teed peavad olema m\u00e4\u00e4ratud kui SSL on lubatud!\n      webserver_ssl_cert_path: {{ webserver_ssl_cert_path | default('undefined') }}\n      webserver_ssl_key_path: {{ webserver_ssl_key_path | default('undefined') }}\n  when: webserver_ssl_enabled | default(false)\n\n- name: \"Check available disk space\"\n  assert:\n    that:\n      - ansible_mounts | selectattr('mount', 'equalto', '/') | list | first | map(attribute='size_available') | first &gt; 1000000000\n    fail_msg: \"ERROR: Vaja v\u00e4hemalt 1GB vaba ruumi root partitsioonil\"\n\n- name: \"Validate worker processes count\"\n  assert:\n    that:\n      - webserver_worker_processes is number\n      - webserver_worker_processes &gt; 0\n      - webserver_worker_processes &lt;= (ansible_processor_vcpus * 2)\n    fail_msg: |\n      ERROR: Worker processes arv peab olema 1 kuni {{ ansible_processor_vcpus * 2 }}\n      (max 2x CPU core'ide arv)\n      Current value: {{ webserver_worker_processes }}\n</code></pre></p>"},{"location":"ansible_roles/lecture/#susteemi-nouete-kontroll","title":"S\u00fcsteemi n\u00f5uete kontroll","text":"<pre><code>- name: \"Check minimum RAM requirement\"\n  assert:\n    that:\n      - ansible_memtotal_mb &gt;= 512\n    fail_msg: \"ERROR: Vaja v\u00e4hemalt 512MB RAM'i. Hetkel: {{ ansible_memtotal_mb }}MB\"\n\n- name: \"Check if required user exists or can be created\"\n  user:\n    name: \"{{ webserver_user }}\"\n    state: present\n  check_mode: yes\n  register: user_check\n  failed_when: false\n\n- name: \"Create webserver user if doesn't exist\"\n  user:\n    name: \"{{ webserver_user }}\"\n    system: yes\n    shell: /bin/false\n    home: \"/var/lib/{{ webserver_user }}\"\n    createhome: no\n  when: user_check is failed\n</code></pre>"},{"location":"ansible_roles/lecture/#reegel-5-taskide-organiseerimine","title":"Reegel 5: Task'ide organiseerimine","text":"<p><code>tasks/main.yml</code> peaks olema nagu sisukord - selge \u00fclevaade, mis toimub.</p>"},{"location":"ansible_roles/lecture/#hea-struktuur","title":"Hea struktuur:","text":"<pre><code>---\n# tasks/main.yml - sisukord\n- name: \"Validate input parameters (safety first!)\"\n  include_tasks: validate.yml\n\n- name: \"Load OS-specific variables\"  \n  include_vars: \"{{ ansible_os_family }}.yml\"\n\n- name: \"Install packages and dependencies\"\n  include_tasks: install.yml\n\n- name: \"Configure webserver\"\n  include_tasks: configure.yml\n\n- name: \"Setup SSL certificates\"\n  include_tasks: ssl.yml\n  when: webserver_ssl_enabled | default(false)\n\n- name: \"Configure virtual hosts\"\n  include_tasks: vhosts.yml\n  when: webserver_vhosts | length &gt; 0\n\n- name: \"Start and enable services\"\n  include_tasks: service.yml\n\n- name: \"Run post-installation tests\"\n  include_tasks: test.yml\n  when: webserver_run_tests | default(true)\n</code></pre>"},{"location":"ansible_roles/lecture/#miks-see-on-hea","title":"Miks see on hea?","text":"<ol> <li>Selge \u00fclevaade - n\u00e4ete kohe, mis toimub</li> <li>Modulaarne - iga osa eraldi failis</li> <li>Conditional - mittevajalikud osad j\u00e4etakse vahele</li> <li>Testitav - saate osi eraldi k\u00e4ivitada</li> </ol>"},{"location":"ansible_roles/lecture/#taskide-nimetamine","title":"Task'ide nimetamine","text":"<p>Head nimed: <pre><code>- name: \"Install Nginx and required dependencies\"\n- name: \"Generate SSL certificate for {{ webserver_domain }}\"\n- name: \"Configure Nginx virtual host for {{ item.domain }}\"\n- name: \"Restart Nginx service if configuration changed\"\n</code></pre></p> <p>Halvad nimed: <pre><code>- name: \"install\"\n- name: \"config\"\n- name: \"setup stuff\"\n- name: \"do things\"\n</code></pre></p>"},{"location":"ansible_roles/lecture/#dependency-management","title":"Dependency Management","text":"<p>M\u00f5nikord teie role vajab teisi role'e. N\u00e4iteks <code>wordpress</code> role vajab <code>nginx</code>, <code>php</code> ja <code>mysql</code> role'e.</p>"},{"location":"ansible_roles/lecture/#meta-dependencies","title":"Meta dependencies:","text":"<pre><code># meta/main.yml\ndependencies:\n  - role: common\n    vars:\n      common_packages:\n        - curl\n        - wget\n        - unzip\n\n  - role: nginx\n    vars:\n      nginx_modules:\n        - rewrite\n        - ssl\n\n  - role: php\n    vars:\n      php_version: \"8.1\"\n      php_extensions:\n        - mysql\n        - gd\n        - curl\n    when: wordpress_install_php | default(true)\n\n  - role: mysql\n    vars:\n      mysql_databases:\n        - name: \"{{ wordpress_db_name }}\"\n      mysql_users:\n        - name: \"{{ wordpress_db_user }}\"\n          password: \"{{ wordpress_db_password }}\"\n          priv: \"{{ wordpress_db_name }}.*:ALL\"\n    when: wordpress_manage_database | default(true)\n</code></pre> <p>Mis toimub: 1. Kui kutsute <code>wordpress</code> role'i, k\u00e4ivitatakse automaatselt k\u00f5ik dependencies 2. Igale dependency'le saate anda eraldi muutujad 3. Saate dependency'sid v\u00e4lja l\u00fclitada <code>when</code> tingimustega</p>"},{"location":"ansible_roles/lecture/#ansible-galaxy","title":"Ansible Galaxy","text":""},{"location":"ansible_roles/lecture/#loeng-4-galaxy-ecosystem","title":"Loeng 4: Galaxy ecosystem","text":"<p>N\u00fc\u00fcd kui oskate role'e luua, \u00f5pime, kuidas kasutada maailma suurimat Ansible role'ide repositooriumi. Miks teha k\u00f5ike ise, kui saate kasutada teiste head t\u00f6\u00f6d?</p>"},{"location":"ansible_roles/lecture/#mis-on-ansible-galaxy","title":"Mis on Ansible Galaxy?","text":"<p>Ansible Galaxy on nagu App Store programmeerijatele:</p> <p>\ud83d\udce6 20,000+ valmis role'i \ud83d\udd0d Kiire otsing ja filtreerimine \u2b50 Reitingud ja arvustused \ud83c\udf0d Jagamine kogukonnaga </p>"},{"location":"ansible_roles/lecture/#praktiline-naide","title":"Praktiline n\u00e4ide","text":"<p>Probleem: Boss tahab Jenkins + MySQL + SSL serveri homme valmis.</p> <p>Ilma Galaxy'ta: 3-5 p\u00e4eva role'ide kirjutamist Galaxy'ga: 1 tund role'ide allalaadimist ja konfigureerimist</p>"},{"location":"ansible_roles/lecture/#roleide-allalaadimine","title":"Role'ide allalaadimine","text":""},{"location":"ansible_roles/lecture/#otsimine","title":"Otsimine","text":"<pre><code># Veebi kaudu (algajatele)\nfirefox https://galaxy.ansible.com/\n\n# K\u00e4surealt (kiire)\nansible-galaxy search nginx\nansible-galaxy search --author geerlingguy\n</code></pre>"},{"location":"ansible_roles/lecture/#installimine","title":"Installimine","text":"<pre><code># \u00dcks role\nansible-galaxy install geerlingguy.nginx\n\n# Konkreetne versioon (production!)\nansible-galaxy install geerlingguy.nginx,2.8.0\n\n# GitHubist otse\nansible-galaxy install git+https://github.com/geerlingguy/ansible-role-nginx.git\n</code></pre>"},{"location":"ansible_roles/lecture/#requirements-fail-professional-way","title":"Requirements fail (professional way)","text":"<pre><code># requirements.yml\n---\n- name: geerlingguy.nginx\n  version: \"2.8.0\"        # Lukusta versioon!\n\n- name: geerlingguy.mysql\n  version: \"4.3.0\"\n\n- name: geerlingguy.php\n  version: \"4.9.0\"\n\n# Custom GitHubi role\n- src: https://github.com/mycompany/custom-role.git\n  scm: git\n  version: main\n  name: mycompany.custom\n</code></pre> <pre><code># Installige k\u00f5ik korraga\nansible-galaxy install -r requirements.yml\n</code></pre>"},{"location":"ansible_roles/lecture/#parimad-galaxy-roleid","title":"Parimad Galaxy role'id","text":"<p>Jeff Geerling on Ansible kogukonna kuningas - tema role'id on alati head:</p> <pre><code># Top soovitused\n- name: geerlingguy.apache     # Apache veebiserver\n- name: geerlingguy.nginx      # Nginx veebiserver\n- name: geerlingguy.mysql      # MySQL database\n- name: geerlingguy.php        # PHP runtime  \n- name: geerlingguy.docker     # Docker engine\n- name: geerlingguy.certbot    # Let's Encrypt SSL\n- name: geerlingguy.firewall   # UFW firewall\n- name: geerlingguy.jenkins    # Jenkins CI/CD\n</code></pre>"},{"location":"ansible_roles/lecture/#taielik-lamp-stack-naide","title":"T\u00e4ielik LAMP stack n\u00e4ide","text":"<pre><code># site.yml - 10 minutiga valmis!\n- name: \"LAMP stack Galaxy role'idega\"\n  hosts: webservers\n  become: yes\n\n  vars:\n    # Apache konfiguratsioon\n    apache_vhosts:\n      - servername: \"mysite.com\"\n        documentroot: \"/var/www/mysite\"\n\n    # MySQL andmebaas\n    mysql_databases:\n      - name: \"mysite_db\"\n    mysql_users:\n      - name: \"mysite_user\"\n        password: \"{{ vault_mysql_password }}\"\n        priv: \"mysite_db.*:ALL\"\n\n    # PHP seaded\n    php_packages:\n      - php8.1\n      - php8.1-mysql\n      - php8.1-curl\n\n  roles:\n    - geerlingguy.apache\n    - geerlingguy.mysql\n    - geerlingguy.php\n    - geerlingguy.certbot    # Automaatne HTTPS!\n</code></pre>"},{"location":"ansible_roles/lecture/#galaxy-best-practices","title":"Galaxy best practices","text":""},{"location":"ansible_roles/lecture/#versioonide-lukustamine","title":"Versioonide lukustamine","text":"<pre><code># Production'is ALATI fikseeritud versioonid\n- name: geerlingguy.nginx\n  version: \"3.1.4\"          # T\u00e4pne versioon\n- name: geerlingguy.mysql  \n  version: \"&gt;=4.0.0,&lt;5.0.0\" # Versioonivahemik\n</code></pre>"},{"location":"ansible_roles/lecture/#roleide-uuendamine","title":"Role'ide uuendamine","text":"<pre><code># Kontrollige, mis on installitud\nansible-galaxy list\n\n# Uuendage k\u00f5iki\nansible-galaxy install -r requirements.yml --force\n\n# Uuendage ainult \u00fchte\nansible-galaxy install geerlingguy.nginx --force\n</code></pre>"},{"location":"ansible_roles/lecture/#roleide-kasutamine-koos","title":"Role'ide kasutamine koos","text":"<pre><code># Kombineerige Galaxy ja oma role'e\n- name: \"Hybrid deployment\"\n  hosts: webservers\n  roles:\n    - geerlingguy.nginx      # Galaxy'st\n    - geerlingguy.certbot    # Galaxy'st  \n    - my-custom-app          # Oma role\n    - company.monitoring     # Firma role\n</code></pre>"},{"location":"ansible_roles/lecture/#oma-roleide-publitseerimine","title":"Oma role'ide publitseerimine","text":"<p>Kui teie role on valmis, saate selle Galaxy'sse panna:</p> <ol> <li>GitHub'i repo loomine</li> <li>Galaxy metadata lisamine (<code>meta/main.yml</code>)</li> <li>Role'i importimine Galaxy'sse</li> <li>Automaatne s\u00fcnkroniseerimine seadistamine</li> </ol>"},{"location":"ansible_roles/lecture/#puppet-vs-ansible","title":"Puppet vs Ansible","text":""},{"location":"ansible_roles/lecture/#loeng-5-configuration-management-vordlus","title":"Loeng 5: Configuration Management v\u00f5rdlus","text":"<p>Configuration Management t\u00f6\u00f6riistade maailmas on kaks suurt m\u00e4ngijat. Peate teadma m\u00f5lemat, et osata valida \u00f5iget t\u00f6\u00f6riista \u00f5igeks t\u00f6\u00f6ks.</p>"},{"location":"ansible_roles/lecture/#miks-vorrelda-puppetiga","title":"Miks v\u00f5rrelda Puppet'iga?","text":"<p>Ansible - mida me \u00f5pime, populaarne DevOps meeskondades Puppet - enterprise'i standard, suur ettev\u00f5tetes</p> <p>Analoogia: Ansible on nagu Tesla (uus, innovaatiline), Puppet on nagu Mercedes (traditsiooniliselt usaldusv\u00e4\u00e4re, enterprise fookus).</p>"},{"location":"ansible_roles/lecture/#fundamentaalsed-erinevused","title":"Fundamentaalsed erinevused","text":""},{"location":"ansible_roles/lecture/#arhitektuur","title":"Arhitektuur","text":"<p>Ansible (Agentless - SSH p\u00f5hine): <pre><code>Teie arvuti \u2192 SSH \u2192 Serverid\n     \u2193\n   Te kontrollite\n   Push mudel\n</code></pre></p> <p>Puppet (Agent-based - Pull mudel): <pre><code>Puppet Master \u2190 Agents k\u00fcsivad ise (iga 30 min)\n     \u2193              \u2193\n  Manifest'id    Puppet Agent'id\n</code></pre></p> <p>Praktiline erinevus: - Ansible: Te k\u00e4ivitate k\u00e4su \u2192 asjad juhtuvad kohe - Puppet: Te muudate konfiguratsiooni \u2192 serverid k\u00fcsivad hiljem muudatusi</p>"},{"location":"ansible_roles/lecture/#keele-erinevus","title":"Keele erinevus","text":"<p>Ansible - YAML (tutav): <pre><code>- name: \"Install and start Apache\"\n  package:\n    name: apache2\n    state: present\n\n- name: \"Start Apache service\"\n  service:\n    name: apache2\n    state: started\n    enabled: yes\n</code></pre></p> <p>Puppet - DSL (uus keel): <pre><code>package { 'apache2':\n  ensure =&gt; installed,\n}\n\nservice { 'apache2':\n  ensure  =&gt; running,\n  enable  =&gt; true,\n  require =&gt; Package['apache2'],\n}\n</code></pre></p> <p>\u00d5ppimisk\u00f5ver: - Ansible: Kui oskate YAML'i, oskate Ansible'i (1-2 n\u00e4dalat) - Puppet: Peate \u00f5ppima uut keelt (1-2 kuud)</p>"},{"location":"ansible_roles/lecture/#praktiline-vordlus-sama-ulesanne-molemas","title":"Praktiline v\u00f5rdlus: Sama \u00fclesanne m\u00f5lemas","text":"<p>\u00dclesanne: Nginx + SSL + automaatne k\u00e4ivitamine</p>"},{"location":"ansible_roles/lecture/#ansible-lahendus","title":"Ansible lahendus:","text":"<pre><code>- name: \"Nginx with SSL setup\"\n  hosts: webservers\n  become: yes\n  tasks:\n    - name: \"Install packages\"\n      package:\n        name: ['nginx', 'ssl-cert']\n        state: present\n\n    - name: \"Generate SSL certificate\"\n      command: &gt;\n        openssl req -new -x509 -days 365 -nodes\n        -out /etc/ssl/certs/server.crt\n        -keyout /etc/ssl/private/server.key\n        -subj \"/C=EE/ST=Harju/L=Tallinn/O=Company/CN={{ ansible_fqdn }}\"\n      args:\n        creates: /etc/ssl/certs/server.crt\n\n    - name: \"Configure Nginx\"\n      template:\n        src: nginx.conf.j2\n        dest: /etc/nginx/nginx.conf\n      notify: reload nginx\n\n    - name: \"Start Nginx\"\n      service:\n        name: nginx\n        state: started\n        enabled: yes\n</code></pre>"},{"location":"ansible_roles/lecture/#puppet-lahendus","title":"Puppet lahendus:","text":"<pre><code>class webserver (\n  String $ssl_cert_path = '/etc/ssl/certs/server.crt',\n  String $ssl_key_path = '/etc/ssl/private/server.key',\n) {\n\n  package { ['nginx', 'ssl-cert']:\n    ensure =&gt; installed,\n  }\n\n  exec { 'generate-ssl-cert':\n    command =&gt; \"openssl req -new -x509 -days 365 -nodes \\\n                -out ${ssl_cert_path} \\\n                -keyout ${ssl_key_path} \\\n                -subj '/C=EE/ST=Harju/L=Tallinn/O=Company/CN=${facts['fqdn']}'\",\n    creates =&gt; $ssl_cert_path,\n    path    =&gt; ['/usr/bin', '/bin'],\n    require =&gt; Package['nginx'],\n  }\n\n  file { '/etc/nginx/nginx.conf':\n    ensure  =&gt; present,\n    content =&gt; template('webserver/nginx.conf.erb'),\n    require =&gt; Package['nginx'],\n    notify  =&gt; Service['nginx'],\n  }\n\n  service { 'nginx':\n    ensure  =&gt; running,\n    enable  =&gt; true,\n    require =&gt; File['/etc/nginx/nginx.conf'],\n  }\n}\n</code></pre> <p>Puppet templates (ERB): <pre><code># nginx.conf.erb\nserver {\n    listen 443 ssl;\n    server_name &lt;%= @fqdn %&gt;;\n\n    ssl_certificate &lt;%= @ssl_cert_path %&gt;;\n    ssl_certificate_key &lt;%= @ssl_key_path %&gt;;\n\n    &lt;% if @enable_gzip -%&gt;\n    gzip on;\n    gzip_types text/plain application/json;\n    &lt;% end -%&gt;\n}\n</code></pre></p> <p>Mis erinevust m\u00e4rkate? - Ansible: k\u00e4sk-k\u00e4sult, loogiline j\u00e4rjekord - Puppet: declarative, Puppet otsustab j\u00e4rjekorra</p>"},{"location":"ansible_roles/lecture/#millal-kasutada-mida","title":"Millal kasutada mida?","text":""},{"location":"ansible_roles/lecture/#ansible-on-parem-kui","title":"Ansible on parem kui:","text":"<p>\u2705 V\u00e4iksemad keskkonnad (&lt; 500 serverit)</p> <p>SSH connection'id ei skaleeeru h\u00e4sti suurte arvudega</p> <p>\u2705 DevOps meeskonnad </p> <p>YAML on tuttav, hea CI/CD integratsioon</p> <p>\u2705 Kiire arendus ja deployment</p> <p>Ei vaja agent'ide seadistamist, kohe valmis</p> <p>\u2705 Multi-cloud keskkonnad</p> <p>SSH t\u00f6\u00f6tab k\u00f5ikjal, erinevates keskkondades</p> <p>\u2705 Container orchestration</p> <p>Hea integratsioon Docker/Kubernetes'iga</p> <p>N\u00e4ited: - Startup'i web application deployment - Development environmentide seadistamine - CI/CD pipeline automation - Cloud infrastructure provisioning</p>"},{"location":"ansible_roles/lecture/#puppet-on-parem-kui","title":"Puppet on parem kui:","text":"<p>\u2705 Suuremad keskkonnad (1000+ serverit)</p> <p>Agent'id t\u00f6\u00f6tavad paralleelselt, Master koordineerib</p> <p>\u2705 Enterprise compliance n\u00f5uded</p> <p>24/7 monitoring, automatic configuration drift detection</p> <p>\u2705 Traditional IT meeskonnad</p> <p>Rohkem infrastructure-focused, v\u00e4hem development</p> <p>\u2705 Long-term infrastructure management</p> <p>Agent'id j\u00e4lgivad ja parandavad konfiguratsiooni pidevalt</p> <p>\u2705 Regulatory compliance</p> <p>SOX, HIPAA, PCI DSS - built-in auditing ja reporting</p> <p>N\u00e4ited: - Enterprise data center management - Financial services (banking, insurance) - Healthcare systems (HIPAA compliance) - Government agencies - Large corporate Windows AD environments</p>"},{"location":"ansible_roles/lecture/#skaleeritavuse-vordlus","title":"Skaleeritavuse v\u00f5rdlus","text":""},{"location":"ansible_roles/lecture/#ansible-limitatsioonid","title":"Ansible limitatsioonid:","text":"<pre><code># 1000 serveriga SSH v\u00f5ib olla aeglane\nansible-playbook -f 50 playbook.yml  # Max 50 paralleelset\n</code></pre> <p>Probleemid suurtes keskkondades: - SSH connection pool t\u00e4is - V\u00f5rgu ribalaius - Control machine'i CPU/memory</p>"},{"location":"ansible_roles/lecture/#puppet-eelised-suurtes-keskkondades","title":"Puppet eelised suurtes keskkondades:","text":"<pre><code># 10,000+ serverit ei ole probleem\n# Iga agent pull'ib iseseisvalt\n# Master delegeerib t\u00f6\u00f6d\n</code></pre> <p>Miks see t\u00f6\u00f6tab paremini: - Hajutatud arhitektuur - Agents t\u00f6\u00f6tavad paralleelselt - Master optimeerib ressursse</p>"},{"location":"ansible_roles/lecture/#infrastructure-drift-ja-compliance","title":"Infrastructure Drift ja Compliance","text":""},{"location":"ansible_roles/lecture/#ansible-fire-and-forget","title":"Ansible - \"Fire and forget\":","text":"<pre><code>1. K\u00e4ivitate playbook'i \u2192 serverid on \u00f5iges olekus\n2. 2 n\u00e4dalat hiljem \u2192 keegi muudab midagi k\u00e4sitsi  \n3. Ansible ei tea sellest midagi\n4. J\u00e4rgmine deployment \u2192 parandab tagasi\n</code></pre> <p>Plussid: Lihtne, ei vaja agente Miinused: Ei j\u00e4lgi drift'i, v\u00f5imalikud security augud</p>"},{"location":"ansible_roles/lecture/#puppet-pidev-jalgimine","title":"Puppet - Pidev j\u00e4lgimine:","text":"<pre><code>1. Agent k\u00e4ib iga 30 minuti tagant\n2. Kontrollib konfiguratsiooni\n3. Parandab automaatselt drift'i\n4. Reporteerib k\u00f5ik muudatused PuppetDB'sse\n5. Saate alert'e kui keegi konfiguratsiooni muudab\n</code></pre> <p>Plussid: Pidev compliance, drift detection Miinused: Keerulisem setup, vajab agente</p>"},{"location":"ansible_roles/lecture/#decision-matrix","title":"Decision Matrix","text":"Kriteerium V\u00e4ike env Suur env Dev team Ops team Startup Enterprise Learning curve Ansible \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 Puppet \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50"},{"location":"ansible_roles/lecture/#enterprise-features-vordlus","title":"Enterprise features v\u00f5rdlus","text":"Feature Ansible Puppet Web UI AWX/Tower (complex setup) Built-in Puppet Console Reporting Limited, manual Comprehensive PuppetDB Role-based access Tower/AWX only Built-in RBAC Compliance auditing Manual scripts Automatic reporting Change tracking Git history Built-in change tracking Node classification Inventory groups External Node Classifier"},{"location":"ansible_roles/lecture/#hybrid-lahenemine","title":"Hybrid l\u00e4henemine","text":"<p>Paljud organisatsioonid kasutavad m\u00f5lemat:</p> <pre><code># Ansible infrastructure provisioning ja deployment\n- name: \"Initial server setup\"\n  hosts: new_servers\n  tasks:\n    - name: \"Create cloud environment\"\n      local_action: ...\n\n    - name: \"Install Puppet agent\"\n      package: \n        name: puppet-agent \n        state: present\n\n# Puppet ongoing configuration management\n# Agents pull konfiguratsiooni iga 30 minuti tagant\n# Hoiab compliance ja drift prevention\n</code></pre> <p>Reaalne n\u00e4ide: Netflix - Ansible: Initial server provisioning, application deployment - Puppet: Ongoing configuration management, compliance - Result: Best of both worlds!</p>"},{"location":"ansible_roles/lecture/#minu-soovitus","title":"Minu soovitus","text":"<p>Algajatele ja v\u00e4iksematele projektidele: Alustage Ansible'iga! - Lihtsam \u00f5ppida - Kiirem alustada - Hea CI/CD integratsioon</p> <p>Kui vajadused kasvavad: - 1000+ serverit - Strict compliance n\u00f5uded - 24/7 monitoring vajadus - Enterprise audit requirements</p> <p>Siis kaaluge Puppet'i v\u00f5i hybrid l\u00e4henemist!</p>"},{"location":"ansible_roles/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>Role'id lahendavad suured probleemid:</p> <p>\u2705 Korduvkasutatavus - sama role mitmes projektis \u2705 Testitavus - iga role eraldi testida \u2705 Loetavus - selge struktuur \u2705 Meeskonnat\u00f6\u00f6 - lihtne jagada \u2705 Hooldatavus - muudatused isoleeritud  </p> <p>M\u00f5lemad t\u00f6\u00f6riistad on head, aga erinevatel juhtudel:</p> <p>Ansible = Tesla - innovaatiline, kiire, sobib modernsele DevOps'ile Puppet = Mercedes - traditsiooniliselt usaldusv\u00e4\u00e4re, enterprise-ready</p> <p>J\u00e4rgmises osas: Praktiline lab - loome oma nginx role'i!</p>"},{"location":"assignments/","title":"\ud83c\udfaf \u00dclesanded - Infrastructure Automation","text":"<p>Tere tulemast infrastruktuuri automatiseerimise kursuse \u00fclesannete lehele! Siin leiad k\u00f5ik praktilised \u00fclesanded DevOps t\u00f6\u00f6riistade kohta.</p>"},{"location":"assignments/#kursuse-ulesehitus","title":"Kursuse \u00fclesehitus","text":"<p>Kursus koosneb 6 peamisest moodulist:</p> <ol> <li>Git &amp; Versioonihaldus - Alus k\u00f5igele</li> <li>Docker &amp; Konteineriseerimine - Rakenduste pakkimine</li> <li>Ansible &amp; Configuration Management - Infrastruktuuri automatiseerimine</li> <li>CI/CD &amp; GitHub Actions - Pidev integratsioon ja tarnimine</li> <li>Kubernetes - Konteinerite orkestreerimine</li> <li>Terraform - Infrastructure as Code</li> </ol>"},{"location":"assignments/#aktiivsed-ulesanded","title":"Aktiivsed \u00fclesanded","text":""},{"location":"assignments/#moodul-1-git-versioonihaldus","title":"\ud83d\udce6 Moodul 1: Git &amp; Versioonihaldus","text":"<p>Rain Pickles Website - Versioonihaldus veebilehe jaoks - Branching, merging, konfliktide lahendamine - T\u00e4htaeg: N\u00e4dal 9</p>"},{"location":"assignments/#moodul-2-docker","title":"Moodul 2: Docker","text":"<p>Multi-Container Application - Dockerize veebirakendus - Docker Compose kasutamine - T\u00e4htaeg: N\u00e4dal 12</p>"},{"location":"assignments/#moodul-3-ansible","title":"\u2699 Moodul 3: Ansible","text":"<p>NGINX + SSL + PostgreSQL - Automatiseeri LAMP stack - SSL sertifikaadid, andmebaas - T\u00e4htaeg: N\u00e4dal 15</p>"},{"location":"assignments/#moodul-4-cicd","title":"Moodul 4: CI/CD","text":"<p>GitHub Actions Pipeline - Automated testing - Docker build &amp; push - T\u00e4htaeg: N\u00e4dal 19</p>"},{"location":"assignments/#moodul-5-kubernetes","title":"\u2638 Moodul 5: Kubernetes","text":"<p>3-Tier App Deploy - Deploy frontend, backend, database - Services, ConfigMaps, Secrets - T\u00e4htaeg: N\u00e4dal 21</p>"},{"location":"assignments/#moodul-6-terraform","title":"\ud83c\udfd7 Moodul 6: Terraform","text":"<p>AWS Infrastructure - VPC, EC2, RDS provisioning - State management - T\u00e4htaeg: N\u00e4dal 23</p>"},{"location":"assignments/#hindamissusteem","title":"Hindamiss\u00fcsteem","text":""},{"location":"assignments/#ulesannete-kaalud","title":"\u00dclesannete kaalud","text":"<ul> <li>Git: 10%</li> <li>Docker: 15%</li> <li>Ansible: 20%</li> <li>CI/CD: 15%</li> <li>Kubernetes: 20%</li> <li>Terraform: 20%</li> </ul>"},{"location":"assignments/#hindamiskriteeriumid","title":"Hindamiskriteeriumid","text":"<ul> <li>Funktsionaalsus: Kas lahendus t\u00f6\u00f6tab?</li> <li>Best Practices: Kas j\u00e4rgitud parimaid praktikaid?</li> <li>Dokumentatsioon: README, kommentaarid</li> <li>Automatiseerimine: Idempotency, error handling</li> </ul>"},{"location":"assignments/#kodulabori-seadistamine","title":"\ud83c\udfe0 Kodulabori seadistamine","text":""},{"location":"assignments/#option-1-vagrant-virtualbox","title":"Option 1: Vagrant + VirtualBox","text":"<pre><code>vagrant init ubuntu/focal64\nvagrant up\nvagrant ssh\n</code></pre>"},{"location":"assignments/#option-2-docker-desktop","title":"Option 2: Docker Desktop","text":"<ul> <li>Windows/Mac: Docker Desktop</li> <li>Linux: Docker Engine + Docker Compose</li> </ul>"},{"location":"assignments/#option-3-cloud-tasuta","title":"Option 3: Cloud (tasuta)","text":"<ul> <li>AWS Free Tier (12 kuud)</li> <li>Azure Student Account</li> <li>Google Cloud Free Credits</li> </ul>"},{"location":"assignments/#vajalikud-tooriistad","title":"\ud83d\udee0 Vajalikud t\u00f6\u00f6riistad","text":"<pre><code># Paigalda k\u00f5ik korraga (Ubuntu/Debian)\nsudo apt update\nsudo apt install -y git docker.io ansible terraform kubectl\n\n# Mac (Homebrew)\nbrew install git docker ansible terraform kubectl\n</code></pre>"},{"location":"assignments/#quick-links","title":"\u26a1 Quick Links","text":"<ul> <li>\ud83c\udf93 GitHub Classroom - Automatiseeritud \u00fclesanded</li> <li>\ud83c\udfc6 Leaderboard - Tulemuste tabel</li> <li>\ud83d\udcad Discussions - K\u00fcsi abi</li> <li>\ud83d\udcd6 Materjalid - Lisalugemine</li> </ul>"},{"location":"assignments/#abi-ja-tugi","title":"\ud83c\udd98 Abi ja tugi","text":""},{"location":"assignments/#kui-jaad-hatta","title":"Kui j\u00e4\u00e4d h\u00e4tta:","text":"<ol> <li>Vaata lecture materjale - Iga mooduli <code>lecture.md</code></li> <li>Proovi lab \u00fclesandeid - Iga mooduli <code>lab.md</code></li> <li>Vaata n\u00e4idiskoode - <code>teacher_repo/</code> kaustas</li> <li>K\u00fcsi abi - GitHub Discussions v\u00f5i praktikumis</li> </ol>"},{"location":"assignments/#sage-vead","title":"Sage vead:","text":"<ul> <li>Permission denied \u2192 Kasuta <code>sudo</code> v\u00f5i kontrolli \u00f5igusi</li> <li>Connection refused \u2192 Kontrolli firewall/ports</li> <li>Module not found \u2192 Paigalda puuduvad s\u00f5ltuvused</li> <li>Timeout \u2192 Suurenda timeout v\u00e4\u00e4rtusi</li> </ul>"},{"location":"assignments/#gamification-achievements","title":"\ud83c\udfae Gamification &amp; Achievements","text":"<p>Teeni badge'e: - \ud83d\ude80 Speed Demon - Esita \u00fclesanne 24h jooksul - \ud83d\udd12 Security First - Implementeeri SSL/TLS \u00f5igesti - \ud83d\udce6 Container Master - Docker multi-stage build &lt; 100MB -  CI/CD Hero - 0 failed pipeline runs - \u2638 K8s Navigator - Deploy ilma kubectl edit'ita - \ud83c\udfd7 Terraform Architect - 0 drift detected</p> <p>Pro tip: Alusta varakult, testi lokaalses keskkonnas, automatiseeri k\u00f5ik mis v\u00f5imalik!</p> <p>Remember: It's not about doing it perfectly the first time, it's about iterating and improving!</p>"},{"location":"assignments/classroom/","title":"GitHub Classroom","text":""},{"location":"assignments/classroom/#automatiseeritud-ulesanded-infrastruktuuri-halduseks","title":"Automatiseeritud \u00fclesanded infrastruktuuri halduseks","text":"<p>GitHub Classroom v\u00f5imaldab automatiseerida DevOps \u00fclesannete jagamist ja hindamist. Iga \u00fclesanne on oma repositoorium koos automaatsete testidega.</p>"},{"location":"assignments/classroom/#aktiivsed-ulesanded","title":"Aktiivsed \u00fclesanded","text":""},{"location":"assignments/classroom/#git-versioonihaldus","title":"Git &amp; Versioonihaldus","text":"<p>Eesm\u00e4rk: Rain Pickles veebilehe versioonihaldus</p> <p>Oskused:  - Git branching strategies - Merge conflicts lahendamine - Git workflow</p> <p>T\u00e4htaeg: 1 n\u00e4dal</p>"},{"location":"assignments/classroom/#nadal-11-12-docker-fundamentals","title":"N\u00e4dal 11-12: Docker Fundamentals","text":"<p>Eesm\u00e4rk: Konteineriseeri veebirakendus</p> <p>Oskused: - Dockerfile loomine - Multi-stage builds - Docker Compose</p> <p>T\u00e4htaeg: 2 n\u00e4dalat</p>"},{"location":"assignments/classroom/#nadal-13-15-ansible-automation","title":"N\u00e4dal 13-15: Ansible Automation","text":"<p>Eesm\u00e4rk: Automatiseeri LAMP stack deploy</p> <p>Oskused: - Ansible playbooks - Roles ja Galaxy - Inventory management</p> <p>T\u00e4htaeg: 3 n\u00e4dalat</p>"},{"location":"assignments/classroom/#cicd-pipeline","title":"CI/CD Pipeline","text":"<p>Eesm\u00e4rk: GitHub Actions CI/CD pipeline</p> <p>Oskused: - Automated testing - Docker image build &amp; push - Deployment automation</p> <p>T\u00e4htaeg: 1 n\u00e4dal</p>"},{"location":"assignments/classroom/#kubernetes-deploy","title":"Kubernetes Deploy","text":"<p>Eesm\u00e4rk: Deploy 3-tier app Kubernetes'isse</p> <p>Oskused: - K8s manifests (Deployment, Service, PVC) - ConfigMaps &amp; Secrets - Ingress configuration</p> <p>T\u00e4htaeg: 1 n\u00e4dal</p>"},{"location":"assignments/classroom/#terraform-infrastructure","title":"Terraform Infrastructure","text":"<p>Eesm\u00e4rk: Infrastructure as Code</p> <p>Oskused: - Terraform providers - Resource management - State management</p> <p>T\u00e4htaeg: 1 n\u00e4dal</p>"},{"location":"assignments/classroom/#toovoog","title":"T\u00f6\u00f6voog","text":"<pre><code>graph LR\n    A[Kliki Start Assignment] --&gt; B[GitHub loob sulle repo]\n    B --&gt; C[Clone repo + Vagrant up]\n    C --&gt; D[Lahenda \u00fclesanne]\n    D --&gt; E[Push lahendus]\n    E --&gt; F[GitHub Actions testid]\n    F --&gt; G{Testid l\u00e4bitud?}\n    G --&gt;|Jah| H[\u2705 Valmis]\n    G --&gt;|Ei| D</code></pre>"},{"location":"assignments/classroom/#hindamine","title":"Hindamine","text":"<p>Iga \u00fclesanne testib: - Funktsionaalsus: 60% - Kas infrastruktuur t\u00f6\u00f6tab? - Best practices: 20% - Kas j\u00e4rgitud parimaid praktikaid? - Dokumentatsioon: 10% - README, kommentaarid - Idempotency: 10% - Kas korduvk\u00e4ivitus on turvaline?</p>"},{"location":"assignments/classroom/#kodulabor","title":"Kodulabor","text":"<p>Soovituslik setup: - Vagrant + VirtualBox - V\u00f5i Docker Desktop - V\u00f5i cloud (AWS Free Tier, Azure Student)</p>"},{"location":"assignments/classroom/#kkk","title":"KKK","text":"Kas ma pean kasutama Vagrantit? <p>Ei, v\u00f5id kasutada Docker'it, cloud'i v\u00f5i isegi f\u00fc\u00fcsilisi masinaid.</p> Kuidas testida Ansible playbooke? <p>Kasuta <code>ansible-playbook --check</code> dry-run jaoks ja Molecule testimiseks.</p> Kas Kubernetes on kohustuslik? <p>Minikube v\u00f5i K3s on piisav. Pole vaja t\u00e4is klastreid.</p>"},{"location":"assignments/github-discussions-setup/","title":"GitHub Discussions Setup","text":""},{"location":"assignments/github-discussions-setup/#overview","title":"Overview","text":"<p>GitHub Discussions provides a forum-like environment for your course, enabling students to ask questions, share knowledge, and collaborate on problems.</p>"},{"location":"assignments/github-discussions-setup/#enabling-discussions","title":"Enabling Discussions","text":""},{"location":"assignments/github-discussions-setup/#repository-settings","title":"Repository Settings","text":"<ol> <li>Go to your repository settings</li> <li>Scroll to \"Features\" section</li> <li>Check \"Discussions\" to enable</li> <li>Choose discussion categories</li> </ol>"},{"location":"assignments/github-discussions-setup/#discussion-categories","title":"Discussion Categories","text":""},{"location":"assignments/github-discussions-setup/#recommended-categories","title":"Recommended Categories","text":"<pre><code>Categories:\n  - name: \"General\"\n    description: \"General course discussions and announcements\"\n    emoji: \"\ud83d\udcac\"\n\n  - name: \"Q&amp;A\"\n    description: \"Questions and answers about assignments\"\n    emoji: \"\"\n\n  - name: \"Help\"\n    description: \"Technical help and troubleshooting\"\n    emoji: \"\ud83c\udd98\"\n\n  - name: \"Showcase\"\n    description: \"Student project showcases and demos\"\n    emoji: \"\"\n\n  - name: \"Resources\"\n    description: \"Helpful resources and links\"\n    emoji: \"\"\n\n  - name: \"Feedback\"\n    description: \"Course feedback and suggestions\"\n    emoji: \"\ud83d\udcad\"\n</code></pre>"},{"location":"assignments/github-discussions-setup/#discussion-guidelines","title":"Discussion Guidelines","text":""},{"location":"assignments/github-discussions-setup/#community-guidelines","title":"Community Guidelines","text":""},{"location":"assignments/github-discussions-setup/#for-students","title":"For Students","text":"<ul> <li>Be respectful and professional in all interactions</li> <li>Search before asking - check if your question was already answered</li> <li>Provide context when asking questions</li> <li>Help others when you can</li> <li>Use appropriate categories for your posts</li> </ul>"},{"location":"assignments/github-discussions-setup/#for-instructors","title":"For Instructors","text":"<ul> <li>Respond promptly to student questions</li> <li>Encourage participation from all students</li> <li>Moderate discussions to maintain quality</li> <li>Provide clear answers and guidance</li> <li>Recognize helpful contributions</li> </ul>"},{"location":"assignments/github-discussions-setup/#posting-guidelines","title":"Posting Guidelines","text":""},{"location":"assignments/github-discussions-setup/#question-format","title":"Question Format","text":"<pre><code>## Question Title\n**Category:** Q&amp;A\n**Assignment:** Week X - Topic\n**Environment:** [Docker/Ansible/etc.]\n\n### Problem Description\n[Describe what you're trying to do]\n\n### What I've Tried\n[Describe steps you've already taken]\n\n### Error Messages\n[Include any error messages or logs]\n\n### Environment Details\n- OS: [Windows/Mac/Linux]\n- Tools: [Docker version, Ansible version, etc.]\n</code></pre>"},{"location":"assignments/github-discussions-setup/#answer-format","title":"Answer Format","text":"<pre><code>## Solution\n\n### Root Cause\n[Explain what was causing the issue]\n\n### Solution Steps\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n### Verification\n[How to verify the solution works]\n\n### Additional Notes\n[Any additional helpful information]\n</code></pre>"},{"location":"assignments/github-discussions-setup/#discussion-templates","title":"Discussion Templates","text":""},{"location":"assignments/github-discussions-setup/#assignment-help-template","title":"Assignment Help Template","text":"<p><pre><code># Assignment Help: [Assignment Name]\n\n## Assignment Details\n- **Week:** X\n- **Topic:** [Topic]\n- **Deadline:** [Date]\n\n## My Question\n[Specific question about the assignment]\n\n## What I've Tried\n- [Attempt 1]\n- [Attempt 2]\n- [Attempt 3]\n\n## Current Status\n[What's working and what's not]\n\n## Error Messages\n</code></pre> [Error messages or logs] <pre><code>## Environment\n- OS: [Your operating system]\n- Tools: [Relevant tool versions]\n</code></pre></p>"},{"location":"assignments/github-discussions-setup/#technical-issue-template","title":"Technical Issue Template","text":"<p><pre><code># Technical Issue: [Brief Description]\n\n## Problem\n[Describe the technical problem]\n\n## Expected Behavior\n[What should happen]\n\n## Actual Behavior\n[What actually happens]\n\n## Steps to Reproduce\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n## Environment\n- OS: [Operating system]\n- Tool Version: [Version number]\n- Configuration: [Relevant config details]\n\n## Logs/Output\n</code></pre> [Include relevant logs or output] <pre><code>\n</code></pre></p>"},{"location":"assignments/github-discussions-setup/#resource-sharing-template","title":"Resource Sharing Template","text":"<pre><code># Resource: [Resource Name]\n\n## Resource Type\n[Documentation/Tutorial/Tool/etc.]\n\n## Description\n[Brief description of the resource]\n\n## Why It's Helpful\n[How this resource helps with the course]\n\n## Link\n[URL to the resource]\n\n## Key Takeaways\n- [Key point 1]\n- [Key point 2]\n- [Key point 3]\n</code></pre>"},{"location":"assignments/github-discussions-setup/#discussion-management","title":"Discussion Management","text":""},{"location":"assignments/github-discussions-setup/#pinning-important-discussions","title":"Pinning Important Discussions","text":"<p>Pin discussions for: - Course announcements - Important resources - Common solutions - Assignment clarifications</p>"},{"location":"assignments/github-discussions-setup/#using-labels","title":"Using Labels","text":"<p>Create labels for: - solved - Question has been answered - needs-more-info - Requires additional information - duplicate - Question already asked - help-wanted - Community help needed - good-first-issue - Good for beginners</p>"},{"location":"assignments/github-discussions-setup/#moderating-discussions","title":"Moderating Discussions","text":"<ul> <li>Monitor for inappropriate content</li> <li>Guide students to existing answers</li> <li>Encourage detailed questions</li> <li>Recognize helpful contributions</li> </ul>"},{"location":"assignments/github-discussions-setup/#integration-with-course","title":"Integration with Course","text":""},{"location":"assignments/github-discussions-setup/#linking-from-course-materials","title":"Linking from Course Materials","text":"<pre><code>## Need Help?\n- [Ask a question in Discussions](https://github.com/mtalvik/automation/discussions)\n- [Check existing Q&amp;A](https://github.com/mtalvik/automation/discussions/categories/q-a)\n- [Browse resources](https://github.com/mtalvik/automation/discussions/categories/resources)\n</code></pre>"},{"location":"assignments/github-discussions-setup/#assignment-integration","title":"Assignment Integration","text":"<p>Include in each assignment: <pre><code>## Getting Help\n1. **Check Discussions first** - Your question might already be answered\n2. **Ask in Q&amp;A category** - Use the assignment help template\n3. **Provide details** - Include error messages and environment info\n4. **Help others** - Answer questions when you can\n</code></pre></p>"},{"location":"assignments/github-discussions-setup/#weekly-discussion-prompts","title":"Weekly Discussion Prompts","text":"<p>Create weekly discussion prompts: <pre><code># Week X Discussion: [Topic]\n\n## This Week's Focus\n[What students are learning this week]\n\n## Discussion Prompts\n1. [Question 1]\n2. [Question 2]\n3. [Question 3]\n\n## Share Your Experience\n- What was challenging?\n- What did you learn?\n- Any tips for others?\n\n## Resources\n- [Link 1]\n- [Link 2]\n</code></pre></p>"},{"location":"assignments/github-discussions-setup/#best-practices","title":"Best Practices","text":""},{"location":"assignments/github-discussions-setup/#for-students_1","title":"For Students","text":"<ul> <li>Search before posting - Use the search function</li> <li>Be specific - Provide detailed information</li> <li>Include context - Mention assignment and environment</li> <li>Help others - Answer questions when you can</li> <li>Use markdown - Format your posts clearly</li> </ul>"},{"location":"assignments/github-discussions-setup/#for-instructors_1","title":"For Instructors","text":"<ul> <li>Set expectations - Clear guidelines for participation</li> <li>Be responsive - Answer questions promptly</li> <li>Encourage peer help - Students learn by helping others</li> <li>Recognize contributions - Highlight helpful posts</li> <li>Moderate actively - Keep discussions on track</li> </ul>"},{"location":"assignments/github-discussions-setup/#community-building","title":"Community Building","text":"<ul> <li>Welcome new students - Make them feel included</li> <li>Celebrate successes - Recognize achievements</li> <li>Share resources - Curate helpful content</li> <li>Encourage collaboration - Group problem-solving</li> <li>Provide feedback - Help students improve</li> </ul>"},{"location":"assignments/github-discussions-setup/#analytics-and-monitoring","title":"Analytics and Monitoring","text":""},{"location":"assignments/github-discussions-setup/#discussion-metrics","title":"Discussion Metrics","text":"<ul> <li>Post frequency - How active is the community</li> <li>Response time - How quickly questions get answered</li> <li>Resolution rate - Percentage of questions solved</li> <li>Participation rate - How many students participate</li> </ul>"},{"location":"assignments/github-discussions-setup/#quality-indicators","title":"Quality Indicators","text":"<ul> <li>Detailed questions - Students providing good context</li> <li>Helpful answers - Community providing good solutions</li> <li>Resource sharing - Students contributing resources</li> <li>Peer support - Students helping each other</li> </ul>"},{"location":"assignments/github-discussions-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"assignments/github-discussions-setup/#common-issues","title":"Common Issues","text":"<ol> <li>Students not finding existing answers</li> <li>Improve search functionality</li> <li>Create better categories</li> <li> <p>Pin common solutions</p> </li> <li> <p>Low participation</p> </li> <li>Create engaging discussion prompts</li> <li>Recognize contributions</li> <li> <p>Make participation part of grading</p> </li> <li> <p>Duplicate questions</p> </li> <li>Use labels to mark duplicates</li> <li>Guide students to existing answers</li> <li>Create FAQ section</li> </ol>"},{"location":"assignments/github-discussions-setup/#support-resources","title":"Support Resources","text":"<ul> <li>GitHub Discussions Documentation</li> <li>Community Guidelines Templates</li> <li>Moderation Best Practices</li> </ul>"},{"location":"assignments/github-education-setup/","title":"GitHub Education Setup","text":""},{"location":"assignments/github-education-setup/#overview","title":"Overview","text":"<p>This guide helps you set up GitHub Education features for your automation course, including GitHub Classroom, student benefits, and educational resources.</p>"},{"location":"assignments/github-education-setup/#github-education-benefits","title":"GitHub Education Benefits","text":""},{"location":"assignments/github-education-setup/#for-educators","title":"For Educators","text":"<ul> <li>GitHub Classroom - Automated assignment distribution and grading</li> <li>Private repositories - Unlimited private repos for educational use</li> <li>GitHub Actions - 2,utes/month for CI/CD</li> <li>GitHub Packages - 500MB storage for container images</li> <li>Priority support - Educational support team</li> </ul>"},{"location":"assignments/github-education-setup/#for-students","title":"For Students","text":"<ul> <li>Student Developer Pack - Access to premium developer tools</li> <li>Private repositories - Unlimited private repos</li> <li>GitHub Actions - 2,utes/month</li> <li>GitHub Packages - 500MB storage</li> <li>Learning resources - GitHub Learning Lab courses</li> </ul>"},{"location":"assignments/github-education-setup/#setup-process","title":"Setup Process","text":""},{"location":"assignments/github-education-setup/#apply-for-github-education","title":"Apply for GitHub Education","text":""},{"location":"assignments/github-education-setup/#educator-application","title":"Educator Application","text":"<ol> <li>Go to GitHub Education</li> <li>Click \"Get benefits for teachers\"</li> <li>Fill out the application:</li> <li>Institution: Your school/university</li> <li>Course details: Automation course information</li> <li>Student count: Expected number of students</li> <li>Use case: Describe how you'll use GitHub</li> </ol>"},{"location":"assignments/github-education-setup/#required-information","title":"Required Information","text":"<ul> <li>Official email address from your institution</li> <li>Course syllabus or description</li> <li>Expected number of students</li> <li>Duration of the course</li> </ul>"},{"location":"assignments/github-education-setup/#github-classroom-setup","title":"GitHub Classroom Setup","text":""},{"location":"assignments/github-education-setup/#create-classroom","title":"Create Classroom","text":"<ol> <li>Go to GitHub Classroom</li> <li>Click \"New classroom\"</li> <li>Fill in details:</li> <li>Classroom name: \"Infrastruktuuri Automatiseerimine\"</li> <li>Organization: Create or use existing</li> <li>Visibility: Private (recommended)</li> </ol>"},{"location":"assignments/github-education-setup/#organization-setup","title":"Organization Setup","text":"<pre><code>Organization name: mtalvik-automation-class\nDescription: Automation course for ITS-24 students\nVisibility: Private\nMembers: Students and teaching assistants\n</code></pre>"},{"location":"assignments/github-education-setup/#assignment-creation","title":"Assignment Creation","text":""},{"location":"assignments/github-education-setup/#assignment-template-structure","title":"Assignment Template Structure","text":"<pre><code>Assignment:\n  name: \"Week X: Topic Name\"\n  repository: \"automation-week-X-starter\"\n  template: true\n  private: true\n  autograding: true\n  deadline: \"2024-XX-XX\"\n</code></pre>"},{"location":"assignments/github-education-setup/#autograding-configuration","title":"Autograding Configuration","text":"<p>Use the <code>.github/classroom/autograding.json</code> file in your repository:</p> <pre><code>{\n  \"tests\": [\n    {\n      \"name\": \"Infrastructure Test\",\n      \"setup\": \"apt-get update &amp;&amp; apt-get install -y ansible\",\n      \"run\": \"ansible-playbook playbook.yml --check\",\n      \"points\": 50\n    }\n  ]\n}\n</code></pre>"},{"location":"assignments/github-education-setup/#student-onboarding","title":"Student Onboarding","text":""},{"location":"assignments/github-education-setup/#student-registration-process","title":"Student Registration Process","text":"<ol> <li>Share classroom link with students</li> <li>Students accept invitation to join classroom</li> <li>Students link GitHub account to classroom</li> <li>Students start assignments from classroom interface</li> </ol>"},{"location":"assignments/github-education-setup/#student-setup-instructions","title":"Student Setup Instructions","text":"<pre><code># Student Setup Guide\n\n### GitHub Account\n- Create GitHub account if you don't have one\n- Use your school email address\n- Complete your profile\n\n### Join Classroom\n- Click the classroom invitation link\n- Accept the invitation\n- Link your GitHub account\n\n### Student Developer Pack\n- Apply for Student Developer Pack\n- Access premium tools and services\n- Use for course projects\n\n### First Assignment\n- Click \"Start assignment\" in classroom\n- Clone your repository\n- Follow assignment instructions\n</code></pre>"},{"location":"assignments/github-education-setup/#assignment-management","title":"Assignment Management","text":""},{"location":"assignments/github-education-setup/#creating-assignments","title":"Creating Assignments","text":"<ol> <li>Go to classroom dashboard</li> <li>Click \"New assignment\"</li> <li>Fill in assignment details:</li> <li>Title and description</li> <li>Repository template</li> <li>Deadline and points</li> <li>Autograding tests</li> </ol>"},{"location":"assignments/github-education-setup/#assignment-types","title":"Assignment Types","text":"<ul> <li>Individual assignments - Each student gets private repo</li> <li>Group assignments - Teams share repository</li> <li>Template repositories - Pre-populated with starter code</li> </ul>"},{"location":"assignments/github-education-setup/#grading-and-feedback","title":"Grading and Feedback","text":""},{"location":"assignments/github-education-setup/#automated-grading","title":"Automated Grading","text":"<ul> <li>GitHub Actions run tests automatically</li> <li>Results displayed in classroom interface</li> <li>Feedback provided through pull requests</li> </ul>"},{"location":"assignments/github-education-setup/#manual-grading","title":"Manual Grading","text":"<ul> <li>Review student code in their repositories</li> <li>Provide feedback through issues or comments</li> <li>Grade assignments in classroom interface</li> </ul>"},{"location":"assignments/github-education-setup/#student-benefits","title":"Student Benefits","text":""},{"location":"assignments/github-education-setup/#student-developer-pack","title":"Student Developer Pack","text":"<p>Students get access to: - AWS Educate - $75 in credits - DigitalOcean - $50 in credits - Namecheap - Free domain name - JetBrains - Free professional IDEs - GitHub Desktop - Git GUI client</p>"},{"location":"assignments/github-education-setup/#learning-resources","title":"Learning Resources","text":"<ul> <li>GitHub Learning Lab - Interactive courses</li> <li>GitHub Skills - Step-by-step tutorials</li> <li>Documentation - Comprehensive guides</li> </ul>"},{"location":"assignments/github-education-setup/#best-practices","title":"Best Practices","text":""},{"location":"assignments/github-education-setup/#for-educators_1","title":"For Educators","text":"<ul> <li>Set clear deadlines and communicate them</li> <li>Provide detailed instructions for each assignment</li> <li>Use templates to ensure consistency</li> <li>Enable autograding for immediate feedback</li> <li>Monitor student progress regularly</li> </ul>"},{"location":"assignments/github-education-setup/#for-students_1","title":"For Students","text":"<ul> <li>Read instructions carefully before starting</li> <li>Ask questions in GitHub Discussions</li> <li>Submit work on time to avoid penalties</li> <li>Use version control effectively</li> <li>Document your work thoroughly</li> </ul>"},{"location":"assignments/github-education-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"assignments/github-education-setup/#common-issues","title":"Common Issues","text":"<ol> <li>Students can't access classroom</li> <li>Check invitation links</li> <li>Verify GitHub account status</li> <li> <p>Ensure proper organization membership</p> </li> <li> <p>Assignments not appearing</p> </li> <li>Check repository permissions</li> <li>Verify template repository setup</li> <li> <p>Ensure proper classroom configuration</p> </li> <li> <p>Autograding not working</p> </li> <li>Check GitHub Actions permissions</li> <li>Verify test configuration</li> <li>Review workflow logs</li> </ol>"},{"location":"assignments/github-education-setup/#support-resources","title":"Support Resources","text":"<ul> <li>GitHub Education Support</li> <li>GitHub Classroom Help</li> <li>GitHub Community Forum</li> </ul>"},{"location":"assignments/github-education-setup/#integration-with-course-materials","title":"Integration with Course Materials","text":""},{"location":"assignments/github-education-setup/#linking-to-course-website","title":"Linking to Course Website","text":"<ul> <li>Include classroom links in course materials</li> <li>Embed assignment instructions in course website</li> <li>Provide direct access to student repositories</li> </ul>"},{"location":"assignments/github-education-setup/#course-website-integration","title":"Course Website Integration","text":"<pre><code>## Week X Assignment\n- [Start Assignment](https://classroom.github.com/a/YOUR_ASSIGNMENT_ID)\n- [Assignment Instructions](docs/assignments/week-X.md)\n- [Student Resources](docs/student-resources.md)\n</code></pre>"},{"location":"assignments/github-education-setup/#monitoring-and-analytics","title":"Monitoring and Analytics","text":""},{"location":"assignments/github-education-setup/#classroom-analytics","title":"Classroom Analytics","text":"<ul> <li>Assignment completion rates</li> <li>Student engagement metrics</li> <li>Code quality statistics</li> <li>Collaboration patterns</li> </ul>"},{"location":"assignments/github-education-setup/#student-progress-tracking","title":"Student Progress Tracking","text":"<ul> <li>Individual repository activity</li> <li>Assignment submission history</li> <li>Code contribution patterns</li> <li>Learning progression</li> </ul>"},{"location":"assignments/github-education-setup/#advanced-features","title":"Advanced Features","text":""},{"location":"assignments/github-education-setup/#custom-autograding","title":"Custom Autograding","text":"<ul> <li>Write custom tests for specific requirements</li> <li>Integrate with external tools (Docker, Ansible)</li> <li>Provide detailed feedback on failures</li> <li>Support multiple test types</li> </ul>"},{"location":"assignments/github-education-setup/#integration-with-lms","title":"Integration with LMS","text":"<ul> <li>Grade passback to institutional systems</li> <li>Roster synchronization with student information systems</li> <li>Assignment distribution through existing platforms</li> <li>Progress reporting to administrators</li> </ul>"},{"location":"assignments/google-classroom-setup/","title":"Google Classroom Integration","text":""},{"location":"assignments/google-classroom-setup/#overview","title":"Overview","text":"<p>This guide helps you integrate your automation course with Google Classroom for seamless assignment management and student tracking.</p>"},{"location":"assignments/google-classroom-setup/#setup-steps","title":"Setup Steps","text":""},{"location":"assignments/google-classroom-setup/#google-classroom-configuration","title":"Google Classroom Configuration","text":""},{"location":"assignments/google-classroom-setup/#create-your-class","title":"Create Your Class","text":"<ol> <li>Go to Google Classroom</li> <li>Click \"Create class\"</li> <li>Fill in class details:</li> <li>Class name: \"Infrastruktuuri Automatiseerimine - ITS-24\"</li> <li>Section: \"T\u00e4iskasvanute klass\"</li> <li>Subject: \"Computer Science\"</li> <li>Room: \"Online\"</li> </ol>"},{"location":"assignments/google-classroom-setup/#class-settings","title":"Class Settings","text":"<ul> <li>Class code: Share with students for easy joining</li> <li>Stream settings: Allow students to post and comment</li> <li>Classwork settings: Enable assignment creation</li> </ul>"},{"location":"assignments/google-classroom-setup/#assignment-templates","title":"Assignment Templates","text":""},{"location":"assignments/google-classroom-setup/#weekly-assignment-structure","title":"Weekly Assignment Structure","text":"<p>Each week follows this pattern:</p> <p>Title: <code>N\u00e4dal [X]: [Topic] - [Assignment Type]</code> Instructions: Copy from your course materials Points: 100 Due date: Set according to your schedule Topic: Create topics for each module</p>"},{"location":"assignments/google-classroom-setup/#assignment-types","title":"Assignment Types","text":"<ol> <li>Lab Assignment - Practical hands-on work</li> <li>Homework - Theoretical and practical combination</li> <li>Reading Assignment - Documentation and research</li> <li>Project - Larger integrated assignments</li> </ol>"},{"location":"assignments/google-classroom-setup/#integration-with-github","title":"Integration with GitHub","text":""},{"location":"assignments/google-classroom-setup/#linking-github-repositories","title":"Linking GitHub Repositories","text":"<ol> <li>In each assignment, include:</li> <li>Link to GitHub Classroom assignment</li> <li>Instructions for repository setup</li> <li>Submission requirements</li> </ol>"},{"location":"assignments/google-classroom-setup/#example-assignment-instructions","title":"Example Assignment Instructions","text":"<pre><code>## \u00dclesanne: Docker Fundamentals Lab\n\n### \u00dclesanne 1.1: GitHub Repository\n1. Kliki [Start Assignment](https://classroom.github.com/a/YOUR_ASSIGNMENT_ID)\n2. Klooni oma repository: `git clone [YOUR_REPO_URL]`\n3. J\u00e4rgi juhiseid `README.md` failis\n\n### \u00dclesanne 2.1: Lab T\u00f6\u00f6\n1. Loo Dockerfile\n2. K\u00e4ivita container\n3. Testi rakendust\n\n### \u00dclesanne 3.1: Esitamine\n1. Push k\u00f5ik muudatused GitHub'i\n2. Lisa link Google Classroom'i\n3. Lisa screenshot t\u00f6\u00f6tavast rakendusest\n</code></pre>"},{"location":"assignments/google-classroom-setup/#grading-integration","title":"Grading Integration","text":""},{"location":"assignments/google-classroom-setup/#rubric-setup","title":"Rubric Setup","text":"<p>Create consistent rubrics for each assignment type:</p> <p>Lab Assignment Rubric (100 points): - Functionality (60 points)   - Code works correctly (30)   - Follows best practices (20)   - Error handling (10) - Documentation (20 points)   - README completeness (10)   - Code comments (10) - Submission (20 points)   - On time (10)   - GitHub repository (10)</p>"},{"location":"assignments/google-classroom-setup/#automated-grading","title":"Automated Grading","text":"<ul> <li>Use GitHub Actions for automated testing</li> <li>Link test results to Google Classroom</li> <li>Provide detailed feedback</li> </ul>"},{"location":"assignments/google-classroom-setup/#student-management","title":"Student Management","text":""},{"location":"assignments/google-classroom-setup/#class-roster","title":"Class Roster","text":"<ul> <li>Import students from your institution's system</li> <li>Create student groups for collaborative work</li> <li>Track individual progress</li> </ul>"},{"location":"assignments/google-classroom-setup/#communication","title":"Communication","text":"<ul> <li>Use Google Classroom announcements for course updates</li> <li>Enable private comments for individual help</li> <li>Use the stream for general discussions</li> </ul>"},{"location":"assignments/google-classroom-setup/#assignment-templates_1","title":"Assignment Templates","text":""},{"location":"assignments/google-classroom-setup/#template-1-lab-assignment","title":"Template 1: Lab Assignment","text":"<pre><code># N\u00e4dal [X]: [Topic] Lab\n\n## Eesm\u00e4rk\n[Learning objectives]\n\n## Vajalikud t\u00f6\u00f6riistad\n- [Tool 1]\n- [Tool 2]\n\n## Sammud\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\n## Esitamine\n- [ ] GitHub repository link\n- [ ] Screenshot t\u00f6\u00f6tavast rakendusest\n- [ ] README.md dokumentatsioon\n\n## Hindamine\n- Funktsionaalsus: 60%\n- Dokumentatsioon: 20%\n- Esitamine: 20%\n</code></pre>"},{"location":"assignments/google-classroom-setup/#template-2-reading-assignment","title":"Template 2: Reading Assignment","text":"<pre><code># N\u00e4dal [X]: [Topic] Lugemine\n\n## Lugemismaterjal\n- [Link 1]\n- [Link 2]\n- [Documentation]\n\n## K\u00fcsimused\n1. [Question 1]\n2. [Question 2]\n3. [Question 3]\n\n## Esitamine\n- Vasta k\u00fcsimustele Google Classroom'is\n- Lisa oma m\u00f5tted ja k\u00fcsimused\n- Viita lugemismaterjalile\n\n## Hindamine\n- Vastuste t\u00e4ielikkus: 50%\n- M\u00f5tlemine ja anal\u00fc\u00fcs: 30%\n- Viited materjalile: 20%\n</code></pre>"},{"location":"assignments/google-classroom-setup/#progress-tracking","title":"Progress Tracking","text":""},{"location":"assignments/google-classroom-setup/#gradebook-setup","title":"Gradebook Setup","text":"<ul> <li>Create categories for different assignment types</li> <li>Set up weighted grading</li> <li>Enable grade export</li> </ul>"},{"location":"assignments/google-classroom-setup/#analytics","title":"Analytics","text":"<ul> <li>Track assignment completion rates</li> <li>Monitor student engagement</li> <li>Identify struggling students early</li> </ul>"},{"location":"assignments/google-classroom-setup/#best-practices","title":"Best Practices","text":""},{"location":"assignments/google-classroom-setup/#communication_1","title":"Communication","text":"<ul> <li>Post weekly announcements</li> <li>Respond to student questions within </li> <li>Use private comments for individual feedback</li> </ul>"},{"location":"assignments/google-classroom-setup/#assignment-management","title":"Assignment Management","text":"<ul> <li>Post assignments at least one week in advance</li> <li>Provide clear, detailed instructions</li> <li>Include examples and templates</li> </ul>"},{"location":"assignments/google-classroom-setup/#feedback","title":"Feedback","text":"<ul> <li>Provide specific, actionable feedback</li> <li>Use rubrics consistently</li> <li>Celebrate student achievements</li> </ul>"},{"location":"assignments/google-classroom-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"assignments/google-classroom-setup/#common-issues","title":"Common Issues","text":"<ol> <li>Students can't access GitHub Classroom</li> <li>Verify they have GitHub accounts</li> <li>Check classroom invitation links</li> <li> <p>Ensure they're in the correct organization</p> </li> <li> <p>Assignment submissions not appearing</p> </li> <li>Check GitHub repository permissions</li> <li>Verify assignment links are correct</li> <li> <p>Ensure students pushed to correct branch</p> </li> <li> <p>Grading integration issues</p> </li> <li>Test GitHub Actions workflows</li> <li>Verify webhook configurations</li> <li>Check API permissions</li> </ol>"},{"location":"assignments/google-classroom-setup/#support-resources","title":"Support Resources","text":"<ul> <li>Google Classroom Help</li> <li>GitHub Classroom Documentation</li> <li>Course-specific help in GitHub Discussions</li> </ul>"},{"location":"assignments/leaderboard/","title":"Leaderboard","text":"Top Performers <p>Automaatselt uueneb igauti tagant</p> Laadin andmeid... Koht Nimi Punkte \u00dclesandeid Badges"},{"location":"assignments/leaderboard/#kuidas-punkte-teenida","title":"Kuidas punkte teenida?","text":"Tegevus Punkte \u00dclesande lahendamine 50-100 K\u00f5ik testid rohelised +20 Esimene lahendus klassis +30 Koodi kvaliteet (linting) +10 Dokumentatsioon +10 Peer review +5"},{"location":"assignments/leaderboard/#badges","title":"Badges","text":"<ul> <li>\ud83d\ude80 Speed Demon - Lahendas \u00fclesande &lt; 1 tunni jooksul</li> <li>\u2728 Perfect Score - 100% testid l\u00e4bitud esimesel katsel</li> <li>\ud83d\udd25 Streak - 5 \u00fclesannet j\u00e4rjest \u00f5igel ajal</li> <li>** Documenter** - Suurep\u00e4rane dokumentatsioon</li> <li>\ud83c\udfaf First Try - K\u00f5ik testid l\u00e4bitud esimesel pushil</li> <li>** Helper** - Aitas teisi Discussions'is</li> <li>\ud83d\udc1b Bug Hunter - Leidis vea \u00fclesandes</li> </ul>"},{"location":"assignments/leaderboard/#statistika","title":"Statistika","text":""},{"location":"assignments/student-guide/","title":"\u00d5pilase Juhend: Alustamine","text":""},{"location":"assignments/student-guide/#tere-tulemast-automatiseerimise-kursusele","title":"Tere tulemast automatiseerimise kursusele!","text":"<p>See juhend aitab sul alustada kursuse platvormide ja t\u00f6\u00f6riistadega.</p>"},{"location":"assignments/student-guide/#kursuse-platvormid","title":"Kursuse Platvormid","text":""},{"location":"assignments/student-guide/#google-classroom","title":"Google Classroom","text":"<ul> <li>Eesm\u00e4rk: \u00dclesannete jagamine ja hindamine</li> <li>Ligip\u00e4\u00e4s: Kasuta \u00f5petaja antud klassi koodi</li> <li>Funktsioonid: </li> <li>\u00dclesannete esitamine</li> <li>Hinnete j\u00e4lgimine</li> <li>Kursuse teadaanded</li> <li>Klassi arutelud</li> </ul>"},{"location":"assignments/student-guide/#github-education","title":"GitHub Education","text":"<ul> <li>Eesm\u00e4rk: Koodihoidlad ja koost\u00f6\u00f6</li> <li>Ligip\u00e4\u00e4s: Loo GitHub konto ja liitu klassiruumiga</li> <li>Funktsioonid:</li> <li>Privaatsed hoidlad \u00fclesannete jaoks</li> <li>Automaatne testimine</li> <li>Versioonihaldus</li> <li>Koost\u00f6\u00f6vahendid</li> </ul>"},{"location":"assignments/student-guide/#github-discussions","title":"GitHub Discussions","text":"<ul> <li>Eesm\u00e4rk: K\u00fcsimused ja vastused ning kogukonna tugi</li> <li>Ligip\u00e4\u00e4s: Saadaval kursuse hoidlas</li> <li>Funktsioonid:</li> <li>K\u00fcsimuste esitamine</li> <li>Ressursside jagamine</li> <li>Abi saamine kaaslastelt</li> <li>Oma t\u00f6\u00f6 tutvustamine</li> </ul>"},{"location":"assignments/student-guide/#alustamine","title":"Alustamine","text":""},{"location":"assignments/student-guide/#samm-1-kontode-loomine","title":"Samm 1: Kontode Loomine","text":""},{"location":"assignments/student-guide/#github-konto","title":"GitHub Konto","text":"<ol> <li>Mine github.com lehele</li> <li>Kl\u00f5psa \"Sign up\"</li> <li>Kasuta oma kooli e-posti aadressi</li> <li>T\u00e4ida oma profiil</li> <li>Taoti Student Developer Pack</li> </ol>"},{"location":"assignments/student-guide/#google-konto","title":"Google Konto","text":"<ol> <li>Kasuta oma kooli Google kontot</li> <li>Liitu Google Classroom'iga klassi koodi abil</li> <li>T\u00e4ida oma profiil</li> </ol>"},{"location":"assignments/student-guide/#samm-2-kursusega-liitumine","title":"Samm 2: Kursusega Liitumine","text":""},{"location":"assignments/student-guide/#github-classroom","title":"GitHub Classroom","text":"<ol> <li>Kl\u00f5psa \u00f5petaja saadetud klassiruumi kutse lingil</li> <li>N\u00f5ustu kutsega</li> <li>\u00dchenda oma GitHub konto</li> <li>Saad ligip\u00e4\u00e4su \u00fclesannete hoidlatele</li> </ol>"},{"location":"assignments/student-guide/#google-classroom_1","title":"Google Classroom","text":"<ol> <li>Kasuta klassi koodi liitumiseks</li> <li>N\u00f5ustu kutsega</li> <li>Vaata l\u00e4bi kursuse materjalid</li> <li>Kontrolli \u00fclesannete t\u00e4htaegu</li> </ol>"},{"location":"assignments/student-guide/#samm-3-keskkonna-seadistamine","title":"Samm 3: Keskkonna Seadistamine","text":""},{"location":"assignments/student-guide/#vajalikud-tooriistad","title":"Vajalikud T\u00f6\u00f6riistad","text":"<ul> <li>Git - Versioonihaldus</li> <li>Docker - Konteinerimine</li> <li>Ansible - Konfiguratsioonihaldus</li> <li>Terraform - Infrastruktuur kui kood</li> <li>VS Code - Koodiredaktor</li> </ul>"},{"location":"assignments/student-guide/#paigaldamise-juhendid","title":"Paigaldamise Juhendid","text":"<ul> <li>Windows Seadistamise Juhend</li> <li>Mac Seadistamise Juhend</li> <li>Linux Seadistamise Juhend</li> </ul>"},{"location":"assignments/student-guide/#ulesannete-toovoog","title":"\u00dclesannete T\u00f6\u00f6voog","text":""},{"location":"assignments/student-guide/#ulesande-alustamine","title":"\u00dclesande Alustamine","text":""},{"location":"assignments/student-guide/#google-classroomist","title":"Google Classroom'ist","text":"<ol> <li>Ava \u00fclesanne</li> <li>Loe juhiseid hoolikalt</li> <li>M\u00e4rgi \u00fcles t\u00e4htaeg ja n\u00f5uded</li> <li>Kl\u00f5psa GitHub Classroom lingil</li> </ol>"},{"location":"assignments/student-guide/#github-classroomist","title":"GitHub Classroom'ist","text":"<ol> <li>Kl\u00f5psa \"Start assignment\"</li> <li>Oota hoidla loomist</li> <li>Klooni hoidla oma arvutisse</li> <li>J\u00e4rgi README juhiseid</li> </ol>"},{"location":"assignments/student-guide/#ulesannete-kallal-tootamine","title":"\u00dclesannete Kallal T\u00f6\u00f6tamine","text":""},{"location":"assignments/student-guide/#arendusprotsess","title":"Arendusprotsess","text":"<ol> <li>Loe n\u00f5udeid - M\u00f5ista, mida vaja teha</li> <li>Seadista keskkond - Paigalda vajalikud t\u00f6\u00f6riistad</li> <li>J\u00e4rgi juhiseid - Samm-sammulised suunised</li> <li>Testi oma t\u00f6\u00f6d - Veendu, et k\u00f5ik t\u00f6\u00f6tab</li> <li>Dokumenteeri oma t\u00f6\u00f6 - Uuenda README ja lisa kommentaarid</li> </ol>"},{"location":"assignments/student-guide/#parimad-tavad","title":"Parimad Tavad","text":"<ul> <li>Committa sageli - Salvesta oma t\u00f6\u00f6d tihti</li> <li>Kirjuta selged commit s\u00f5numid - Kirjelda, mida muutsid</li> <li>Testi enne esitamist - Veendu, et k\u00f5ik t\u00f6\u00f6tab</li> <li>K\u00fcsi abi - Kasuta Discussions'i, kui oled h\u00e4tta j\u00e4\u00e4nud</li> </ul>"},{"location":"assignments/student-guide/#ulesannete-esitamine","title":"\u00dclesannete Esitamine","text":""},{"location":"assignments/student-guide/#github-esitamine","title":"GitHub Esitamine","text":"<ol> <li>L\u00fckka oma muudatused - <code>git push origin main</code></li> <li>Kontrolli automaatseid teste - Vaata tulemusi Actions vahekaardil</li> <li>Paranda probleemid - Lahenda testide vead</li> <li>Uuenda dokumentatsiooni - Veendu, et README on t\u00e4ielik</li> </ol>"},{"location":"assignments/student-guide/#google-classroom-esitamine","title":"Google Classroom Esitamine","text":"<ol> <li>Esita GitHub hoidla link</li> <li>Lisa vajalikud ekraanipildid</li> <li>Lisa l\u00fchike kokkuv\u00f5te sellest, mida saavutasid</li> <li>Esita t\u00e4htajaks</li> </ol>"},{"location":"assignments/student-guide/#abi-saamine","title":"Abi Saamine","text":""},{"location":"assignments/student-guide/#github-discussions_1","title":"GitHub Discussions","text":"<ul> <li>Otsi esmalt - Sinu k\u00fcsimusele v\u00f5ib juba vastatud olla</li> <li>K\u00fcsi Q&amp;A kategoorias - Kasuta abi malli</li> <li>Anna \u00fcksikasju - Lisa veateated ja keskkonna info</li> <li>Aita teisi - Vasta k\u00fcsimustele, kui oskad</li> </ul>"},{"location":"assignments/student-guide/#konsultatsioonid","title":"Konsultatsioonid","text":"<ul> <li>Kontrolli ajakava - Postitatud Google Classroom'is</li> <li>Valmista k\u00fcsimused ette - Pane konkreetsed probleemid valmis</li> <li>Jaga ekraani - N\u00e4ita probleemi otse</li> <li>Tee m\u00e4rkmeid - Dokumenteeri lahendused tuleviku jaoks</li> </ul>"},{"location":"assignments/student-guide/#kaaslaste-tugi","title":"Kaaslaste Tugi","text":"<ul> <li>Moodusta \u00f5pper\u00fchmi - T\u00f6\u00f6ta \u00fclesannete kallal koos</li> <li>Jaga ressursse - Kasulikud lingid ja \u00f5petused</li> <li>Vaata \u00fcle \u00fcksteise t\u00f6\u00f6d - \u00d5pi erinevatest l\u00e4henemistest</li> <li>T\u00e4histage edu - Tunne \u00e4ra saavutusi</li> </ul>"},{"location":"assignments/student-guide/#kursuse-ressursid","title":"Kursuse Ressursid","text":""},{"location":"assignments/student-guide/#dokumentatsioon","title":"Dokumentatsioon","text":"<ul> <li>Kursuse veebileht - https://mtalvik.github.io/automation</li> <li>\u00dclesannete juhised - \u00dcksikasjalikud samm-sammulised juhendid</li> <li>Lugemismaterjalid - Taustateooria ja kontseptsioonid</li> <li>Referentsjuhendid - Kiired k\u00e4skude viited</li> </ul>"},{"location":"assignments/student-guide/#tooriistad-ja-teenused","title":"T\u00f6\u00f6riistad ja Teenused","text":"<ul> <li>Student Developer Pack - Premium t\u00f6\u00f6riistad ja teenused</li> <li>Pilve krediidid - AWS, Azure, DigitalOcean krediidid</li> <li>Tasuta tarkvara - JetBrains IDE-d, GitHub Desktop</li> <li>\u00d5ppimisressursid - GitHub Learning Lab kursused</li> </ul>"},{"location":"assignments/student-guide/#kogukond","title":"Kogukond","text":"<ul> <li>GitHub Discussions - Kursuse k\u00fcsimused ja arutelud</li> <li>\u00d5pper\u00fchmad - Kaaslaste \u00f5ppimine ja koost\u00f6\u00f6</li> <li>N\u00e4idisprojektid - Jaga oma projekte ja saavutusi</li> <li>Tagasiside - Aita kursust parandada</li> </ul>"},{"location":"assignments/student-guide/#hindamine-ja-hinnangud","title":"Hindamine ja Hinnangud","text":""},{"location":"assignments/student-guide/#ulesannete-tuubid","title":"\u00dclesannete T\u00fc\u00fcbid","text":"<ul> <li>Labor\u00fclesanded - Praktilised k\u00e4ed-k\u00fclge t\u00f6\u00f6d</li> <li>Kodut\u00f6\u00f6d - Teooria ja praktika kombinatsioon</li> <li>Lugemis\u00fclesanded - Dokumentatsiooni ja uurimist\u00f6\u00f6</li> <li>Projektid - Suuremad integreeritud \u00fclesanded</li> </ul>"},{"location":"assignments/student-guide/#hindamiskriteeriumid","title":"Hindamiskriteeriumid","text":"<ul> <li>Funktsionaalsus - Kas kood t\u00f6\u00f6tab \u00f5igesti?</li> <li>Parimad tavad - T\u00f6\u00f6stuse standardite j\u00e4rgimine</li> <li>Dokumentatsioon - Selge README ja kommentaarid</li> <li>\u00d5igeaegsus - Esitatud t\u00e4htajaks</li> </ul>"},{"location":"assignments/student-guide/#tagasiside","title":"Tagasiside","text":"<ul> <li>Automaatne testimine - Kohene tagasiside funktsionaalsuse kohta</li> <li>Kaaslaste \u00fclevaatus - \u00d5pi teistelt \u00f5pilastelt</li> <li>\u00d5petaja tagasiside - \u00dcksikasjalikud kommentaarid ja ettepanekud</li> <li>Eneseanal\u00fc\u00fcs - M\u00f5tle oma \u00f5ppimise \u00fcle</li> </ul>"},{"location":"assignments/student-guide/#nouanded-edukuse-saavutamiseks","title":"N\u00f5uanded Edukuse Saavutamiseks","text":""},{"location":"assignments/student-guide/#ajahaldus","title":"Ajahaldus","text":"<ul> <li>Alusta vara - \u00c4ra oota viimase hetkeni</li> <li>Jaga \u00fclesandeid - T\u00f6\u00f6ta \u00fclesannete kallal v\u00e4iksemas t\u00fckkides</li> <li>Sea t\u00e4htajad - Loo oma vahem\u00e4rgid</li> <li>K\u00fcsi abi - \u00c4ra kannata \u00fcksi</li> </ul>"},{"location":"assignments/student-guide/#oppimisstrateegiaid","title":"\u00d5ppimisstrateegiaid","text":"<ul> <li>Harjuta regulaarselt - Praktiline kogemus on v\u00f5tmet\u00e4htsusega</li> <li>Loe dokumentatsiooni - M\u00f5ista t\u00f6\u00f6riistu, mida kasutad</li> <li>Eksperimenteeri - Proovi erinevaid l\u00e4henemisviise</li> <li>Reflekteeri - M\u00f5tle sellele, mida oled \u00f5ppinud</li> </ul>"},{"location":"assignments/student-guide/#koostoo","title":"Koost\u00f6\u00f6","text":"<ul> <li>Aita teisi - \u00d5petamine tugevdab sinu enda \u00f5ppimist</li> <li>Esita k\u00fcsimusi - Rumalaid k\u00fcsimusi ei ole</li> <li>Jaga ressursse - Aita kogukonda</li> <li>T\u00e4histage edasiminekut - Tunnusta oma saavutusi</li> </ul>"},{"location":"assignments/student-guide/#veaotsing","title":"Veaotsing","text":""},{"location":"assignments/student-guide/#levinud-probleemid","title":"Levinud Probleemid","text":"<ol> <li>Ei saa GitHub Classroom'ile ligi</li> <li>Kontrolli oma GitHub kontot</li> <li>Kinnita kutse linki</li> <li> <p>V\u00f5ta \u00fchendust \u00f5petajaga</p> </li> <li> <p>\u00dclesande hoidlat ei loodud</p> </li> <li>Oota m\u00f5ni minut</li> <li>V\u00e4rskenda lehte</li> <li> <p>Kontrolli oma GitHub teateid</p> </li> <li> <p>T\u00f6\u00f6riistad ei t\u00f6\u00f6ta</p> </li> <li>Kontrolli paigaldamise juhendeid</li> <li>Kinnita s\u00fcsteemi n\u00f5udeid</li> <li> <p>K\u00fcsi abi Discussions'is</p> </li> <li> <p>\u00dclesande esitamise probleemid</p> </li> <li>Kontrolli t\u00e4htaega</li> <li>Kinnita hoidla \u00f5igusi</li> <li>V\u00f5ta \u00fchendust \u00f5petajaga</li> </ol>"},{"location":"assignments/student-guide/#toe-saamine","title":"Toe Saamine","text":"<ul> <li>GitHub Discussions - Kursusespetsiifiline abi</li> <li>Konsultatsioonid - Otsene \u00f5petaja tugi</li> <li>Kaaslaste tugi - \u00d5pper\u00fchmad ja koost\u00f6\u00f6</li> <li>Dokumentatsioon - Eneseabi ressursid</li> </ul>"},{"location":"assignments/student-guide/#kursuse-ajakava","title":"Kursuse Ajakava","text":""},{"location":"assignments/student-guide/#nadala-struktuur","title":"N\u00e4dala Struktuur","text":"<ul> <li>Esmasp\u00e4ev - Uus \u00fclesanne postitatud</li> <li>Kolmap\u00e4ev - Labori sessioon (kui kohaldub)</li> <li>Reede - \u00dclesande t\u00e4htaeg</li> <li>N\u00e4dalavahetus - Lugemine ja ettevalmistus</li> </ul>"},{"location":"assignments/student-guide/#tahtsad-kuupaevad","title":"T\u00e4htsad Kuup\u00e4evad","text":"<ul> <li>Kursuse algus - [Kuup\u00e4ev]</li> <li>Vaheeksam - [Kuup\u00e4ev]</li> <li>L\u00f5pueksam - [Kuup\u00e4ev]</li> <li>Kursuse l\u00f5pp - [Kuup\u00e4ev]</li> </ul>"},{"location":"assignments/student-guide/#kontaktandmed","title":"Kontaktandmed","text":""},{"location":"assignments/student-guide/#opetaja","title":"\u00d5petaja","text":"<ul> <li>Nimi: Maria Talvik</li> <li>E-post: [your-email@example.com]</li> <li>Vastuv\u00f5tt: [Ajakava]</li> <li>GitHub: @mtalvik</li> </ul>"},{"location":"assignments/student-guide/#kursuse-ressursid_1","title":"Kursuse Ressursid","text":"<ul> <li>Veebileht: https://mtalvik.github.io/automation</li> <li>Hoidla: https://github.com/mtalvik/automation</li> <li>Arutelud: https://github.com/mtalvik/automation/discussions</li> </ul>"},{"location":"assignments/student-guide/#tere-tulemast-kursusele","title":"Tere tulemast kursusele!","text":"<p>Oleme p\u00f5nevil, et oled automatiseerimise kursusel. See on praktiline, k\u00e4ed-k\u00fclge kursus, mis annab sulle p\u00e4riselu oskused DevOps'i ja infrastruktuuri automatiseerimise valdkonnas.</p> <p>Pidage meeles: - Esitage k\u00fcsimusi - Oleme siin aitamaks - Harjutage regulaarselt - Praktiline kogemus on h\u00e4davajalik - Tehke koost\u00f6\u00f6d - \u00d5ppige oma kaaslastelt - Nautige - Naudige \u00f5ppimisprotsessi</p> <p>Edu \u00f5pingutes!</p>"},{"location":"ci_cd_advanced/homework/","title":"Kodut\u00f6\u00f6 - Projekti L\u00f5petamine","text":"<p>ITS-24 DevOps Automatiseerimine | 1 tund</p>"},{"location":"ci_cd_advanced/homework/#ulesanne-1-kodutoo-eesmark","title":"\u00dclesanne 1: Kodut\u00f6\u00f6 Eesm\u00e4rk","text":"<p>L\u00f5peta oma automatiseerimise projekt ja dokumenteeri see professionaalselt. See on sinu v\u00f5imalus n\u00e4idata k\u00f5iki oskusi, mida oled kursuse jooksul \u00f5ppinud.</p>"},{"location":"ci_cd_advanced/homework/#ulesanne-2-projekti-dokumenteerimine","title":"\u00dclesanne 2: Projekti Dokumenteerimine","text":""},{"location":"ci_cd_advanced/homework/#readmemd-loomine","title":"README.md Loomine","text":"<p>Loo p\u00f5hjalik README.md fail oma projekti jaoks:</p> <p><pre><code># Minu Automatiseerimise Projekt\n\n## Projekti Kirjeldus\n[Kirjelda oma projekti \u00fcksikasjalikult:\n- Millist probleemi see lahendab?\n- Miks see on oluline?\n- Mis oli su eesm\u00e4rk?]\n\n## Kasutatud Tehnoloogiad\n\nM\u00e4rgi \u00e4ra k\u00f5ik tehnoloogiad, mida kasutasid:\n\n- [ ] **Git** - Versioonihaldus ja koost\u00f6\u00f6\n- [ ] **Docker** - Konteinerimine ja pakendamine\n- [ ] **Ansible** - Konfiguratsioonihaldus\n- [ ] **Terraform** - Infrastruktuur kui kood\n- [ ] **CI/CD** - Pidev integratsioon ja tarneahel\n- [ ] **Muud:** [Nimeta t\u00e4iendavad t\u00f6\u00f6riistad]\n\n## Projekti Struktuur\n</code></pre> projekt/ \u251c\u2500\u2500 README.md \u251c\u2500\u2500 docker/ \u2502   \u251c\u2500\u2500 Dockerfile \u2502   \u2514\u2500\u2500 docker-compose.yml \u251c\u2500\u2500 ansible/ \u2502   \u251c\u2500\u2500 playbook.yml \u2502   \u2514\u2500\u2500 inventory/ \u251c\u2500\u2500 terraform/ \u2502   \u251c\u2500\u2500 main.tf \u2502   \u2514\u2500\u2500 variables.tf \u251c\u2500\u2500 .github/ \u2502   \u2514\u2500\u2500 workflows/ \u2514\u2500\u2500 docs/ <pre><code>## Kuidas Kasutada\n\n### Eeltingimused\n- Docker ja Docker Compose\n- [Muud vajalikud t\u00f6\u00f6riistad]\n\n### Samm-sammulised Juhised\n1. **Klooni repository:**\n   ```bash\n   git clone https://github.com/sinu-kasutajanimi/projekti-nimi.git\n   cd projekti-nimi\n   ```\n\n2. **K\u00e4ivita projekt:**\n   ```bash\n   # Lisa konkreetsed k\u00e4sud\n   ```\n\n3. **Kontrolli tulemust:**\n   ```bash\n   # Kuidas kontrollida, et k\u00f5ik t\u00f6\u00f6tab\n   ```\n\n## Projekti Tulemused\n\n### Mida \u00d5ppisin\n- [Konkreetsed oskused, mida omandatud]\n- [V\u00e4ljakutsed, millega silmitsi seisid]\n- [Kuidas probleeme lahendasid]\n\n### J\u00e4rgmised Sammud\n- [Kuidas saaks projekti edasi arendada]\n- [Millised uued tehnoloogiad huvitavad]\n\n## Autorid\n- **Nimi:** [Sinu nimi]\n- **Kursus:** ITS-24 DevOps Automatiseerimine\n- **Aasta:** 2025\n</code></pre></p>"},{"location":"ci_cd_advanced/homework/#ulesanne-3-github-repository-seadistamine","title":"\u00dclesanne 3: GitHub Repository Seadistamine","text":""},{"location":"ci_cd_advanced/homework/#repository-loomine","title":"Repository Loomine","text":"<p>Loo GitHub repository ja seadista see \u00f5igesti:</p> <pre><code># 1. Loo uus repository GitHubis (l\u00e4bi veebiliidese)\n# 2. Klooni see kohalikku arvutisse\ngit clone https://github.com/sinu-kasutajanimi/projekti-nimi.git\ncd projekti-nimi\n\n# 3. Kopeeri oma projektifailid kausta\n# 4. Lisa failid Git'i\ngit add .\ngit commit -m \"Algne projekti import\"\n\n# 5. Push'i GitHubi\ngit push origin main\n</code></pre>"},{"location":"ci_cd_advanced/homework/#vajalikud-failid","title":"Vajalikud Failid","text":"<p>Veendu, et sul on j\u00e4rgmised failid:</p> <ol> <li>README.md - Projekti dokumentatsioon</li> <li>.gitignore - Eiratavad failid</li> <li>LICENSE - Litsentsi info (valikuline)</li> </ol> <p>.gitignore n\u00e4ide: <pre><code># Docker\n*.log\n.env\n\n# Terraform\n*.tfstate\n*.tfstate.backup\n.terraform/\n\n# Ansible\n*.retry\n\n# IDE\n.vscode/\n.idea/\n\n# OS\n.DS_Store\nThumbs.db\n</code></pre></p>"},{"location":"ci_cd_advanced/homework/#ulesanne-4-projekti-esitlus","title":"\u00dclesanne 4: Projekti Esitlus","text":""},{"location":"ci_cd_advanced/homework/#esitluse-ettevalmistus","title":"Esitluse Ettevalmistus","text":"<p>Valmista ette 3-5 minutiline esitlus, mis sisaldab:</p>"},{"location":"ci_cd_advanced/homework/#slaid-1-projekti-tutvustus","title":"Slaid 1: Projekti Tutvustus","text":"<ul> <li>Projekti nimi ja eesm\u00e4rk</li> <li>P\u00f5hiline funktsioon</li> </ul>"},{"location":"ci_cd_advanced/homework/#slaid-2-tehnilised-lahendused","title":"Slaid 2: Tehnilised Lahendused","text":"<ul> <li>Kasutatud tehnoloogiad</li> <li>Arhitektuuri \u00fclevaade</li> <li>Huvitavamad lahendused</li> </ul>"},{"location":"ci_cd_advanced/homework/#slaid-3-valjakutsed-ja-oppimine","title":"Slaid 3: V\u00e4ljakutsed ja \u00d5ppimine","text":"<ul> <li>Suurimad raskused</li> <li>Kuidas neid lahendasid</li> <li>Peamised \u00f5ppetunnid</li> </ul>"},{"location":"ci_cd_advanced/homework/#slaid-4-demo","title":"Slaid 4: Demo","text":"<ul> <li>L\u00fchike n\u00e4idis projekti t\u00f6\u00f6st</li> <li>Ekraanipildid v\u00f5i reaalajas demo</li> </ul>"},{"location":"ci_cd_advanced/homework/#slaid-5-jargmised-sammud","title":"Slaid 5: J\u00e4rgmised Sammud","text":"<ul> <li>Kuidas projekti edasi arendada</li> <li>Uued tehnoloogiad, mida tahaksid \u00f5ppida</li> </ul>"},{"location":"ci_cd_advanced/homework/#esitluse-nouanded","title":"Esitluse N\u00f5uanded","text":"<ul> <li>N\u00e4ita koodi - \u00e4ra ainult r\u00e4\u00e4gi sellest</li> <li>Valmista demo ette - testi enne esitlust</li> <li>Ole uhke - sa oled palju \u00f5ppinud!</li> <li>Jaga kogemusi - mis oli raske, mis lihtne?</li> </ul>"},{"location":"ci_cd_advanced/homework/#ulesanne-5-projekti-hindamine","title":"\u00dclesanne 5: Projekti Hindamine","text":""},{"location":"ci_cd_advanced/homework/#kontroll-loend","title":"Kontroll-loend","text":"<p>Kontrolli enne esitamist:</p>"},{"location":"ci_cd_advanced/homework/#tehniline-pool","title":"Tehniline Pool","text":"<ul> <li> K\u00f5ik kood on GitHubis</li> <li> README.md on t\u00e4ielik ja selge</li> <li> Projekt k\u00e4ivitub juhiste j\u00e4rgi</li> <li> K\u00f5ik kasutatud tehnoloogiad on dokumenteeritud</li> </ul>"},{"location":"ci_cd_advanced/homework/#dokumentatsioon","title":"Dokumentatsioon","text":"<ul> <li> Projekti eesm\u00e4rk on selgelt kirjeldatud</li> <li> Paigaldamise juhised on olemas</li> <li> Kasutamise n\u00e4ited on lisatud</li> <li> \u00d5ppetunnid on dokumenteeritud</li> </ul>"},{"location":"ci_cd_advanced/homework/#esitlus","title":"Esitlus","text":"<ul> <li> Slaidid on valmis</li> <li> Demo on testitud</li> <li> Aeg on planeeritud (3-5 minutit)</li> </ul>"},{"location":"ci_cd_advanced/homework/#hinne-kujuneb","title":"Hinne Kujuneb","text":"<ul> <li>60% - Projekti funktsioon ja tehniline kvaliteet</li> <li>25% - Dokumentatsiooni kvaliteet</li> <li>15% - Esitluse selgus ja ettevalmistus</li> </ul>"},{"location":"ci_cd_advanced/homework/#ulesanne-6-jargmised-sammud","title":"\u00dclesanne 6: J\u00e4rgmised Sammud","text":""},{"location":"ci_cd_advanced/homework/#oppimise-jatkamine","title":"\u00d5ppimise J\u00e4tkamine","text":"<p>Soovitatavad j\u00e4rgmised sammud:</p>"},{"location":"ci_cd_advanced/homework/#tehnoloogiate-suvendamine","title":"Tehnoloogiate S\u00fcvendamine","text":"<ol> <li>Kubernetes - konteinerite orkestratsioon</li> <li>Monitoring - Prometheus, Grafana</li> <li>Security - turvaliste praktikate \u00f5ppimine</li> <li>Cloud Platforms - AWS, Azure, GCP</li> </ol>"},{"location":"ci_cd_advanced/homework/#praktilised-projektid","title":"Praktilised Projektid","text":"<ol> <li>Microservices arhitektuur - mitme teenuse haldamine</li> <li>Infrastructure as Code - t\u00e4ielik automatiseerimine</li> <li>GitOps - Git-p\u00f5hine t\u00f6\u00f6voog</li> <li>Chaos Engineering - s\u00fcsteemi vastupidavuse testimine</li> </ol>"},{"location":"ci_cd_advanced/homework/#kogukond-ja-vorgustik","title":"Kogukond ja V\u00f5rgustik","text":"<ol> <li>GitHub - panusta avatud l\u00e4htekoodiga projektidesse</li> <li>DevOps Estonia - kohalik kogukond</li> <li>Konverentsid - DevOpsDays, KubeCon</li> <li>Sertifikaadid - AWS, Azure, Kubernetes</li> </ol>"},{"location":"ci_cd_advanced/homework/#karjaari-areng","title":"Karj\u00e4\u00e4ri Areng","text":"<p>DevOps rollidega tutvumine: - DevOps Engineer - automatiseerimine ja infrastruktuur - Site Reliability Engineer - s\u00fcsteemi usaldusv\u00e4\u00e4rsus - Platform Engineer - arendajate platformide loomine - Cloud Architect - pilvelahenduste disain</p>"},{"location":"ci_cd_advanced/homework/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>Palju \u00f5nne! Oled edukalt l\u00f5petanud automatiseerimise kursuse!</p>"},{"location":"ci_cd_advanced/homework/#mida-sa-nuud-oskad","title":"Mida Sa N\u00fc\u00fcd Oskad","text":"<ul> <li>\u2705 Git - versioonihaldus ja koost\u00f6\u00f6</li> <li>\u2705 Docker - rakenduste pakendamine</li> <li>\u2705 Ansible - serverite konfigureerimine  </li> <li>\u2705 Terraform - infrastruktuuri kood</li> <li>\u2705 CI/CD - automaatne testimine ja rakendamine</li> </ul>"},{"location":"ci_cd_advanced/homework/#su-jargmised-voimalused","title":"Su J\u00e4rgmised V\u00f5imalused","text":"<ul> <li>J\u00e4tka \u00f5ppimist - tehnoloogiad arenevad kiiresti</li> <li>Ehita projekte - praktika on parim \u00f5petaja</li> <li>V\u00f5ta osa kogukonnast - jaga kogemusi ja \u00f5pi teistelt</li> <li>Otsi praktikat - rakenda oskusi p\u00e4riselu projektides</li> </ul> <p>Edu edasistel DevOps teekondadel! \ud83d\ude80</p>"},{"location":"ci_cd_advanced/homework/#lisaressursid","title":"Lisaressursid","text":""},{"location":"ci_cd_advanced/homework/#dokumentatsioon_1","title":"Dokumentatsioon","text":"<ul> <li>Git dokumentatsioon</li> <li>Docker dokumentatsioon</li> <li>Ansible dokumentatsioon</li> <li>Terraform dokumentatsioon</li> </ul>"},{"location":"ci_cd_advanced/homework/#kogukond","title":"Kogukond","text":"<ul> <li>DevOps Estonia</li> <li>GitHub Estonia</li> <li>Slack kogukond</li> </ul>"},{"location":"ci_cd_advanced/homework/#kursuse-materjalid","title":"Kursuse Materjalid","text":"<ul> <li>Kursuse veebileht</li> <li>GitHub repository</li> </ul>"},{"location":"ci_cd_advanced/lab/","title":"CI/CD Advanced Lab: T\u00e4ielik Automatiseerimine","text":"<p>ITS-24 DevOps Automatiseerimine | Praktiline l\u00f5ppprojekt</p>"},{"location":"ci_cd_advanced/lab/#labi-eesmark","title":"Lab'i eesm\u00e4rk","text":"<p>T\u00e4na teeme L\u00d5PPPROJEKTI! Kasutame K\u00d5IKI oskusi, mida \u00f5ppisime:</p> <ul> <li>Git (N\u00e4dal 9) \u2192 Version control ja collaboration</li> <li>Ansible (N\u00e4dal 11-15) \u2192 Server configuration</li> <li>Docker (N\u00e4dal 19-21) \u2192 Containerization</li> <li>Terraform (N\u00e4dal 23) \u2192 Infrastructure as Code</li> <li>CI/CD (N\u00e4dal 25) \u2192 Automated deployment</li> <li>Monitoring \u2192 Production visibility</li> </ul>"},{"location":"ci_cd_advanced/lab/#projekt-techshop-e-commerce-automatiseerimine","title":"\ud83c\udfe2 Projekt: \"TechShop\" E-commerce Automatiseerimine","text":"<p>Klient: V\u00e4ike e-commerce startup \"TechShop\"</p> <p>Probleem:  - K\u00e4sitsi deployment v\u00f5tab 2 tundi - Tihti vigu (30% failure rate) - Aeglane rollback (1+ tund) - Arendajad stressis</p> <p>Lahendus: T\u00e4ielik automatiseerimine k\u00f5igi \u00f5pitud oskustega!</p>"},{"location":"ci_cd_advanced/lab/#ettevalmistus","title":"\ud83d\udee0 Ettevalmistus","text":""},{"location":"ci_cd_advanced/lab/#vajalikud-tooriistad","title":"Vajalikud t\u00f6\u00f6riistad","text":"<p>Kontrollige, et teil on: <pre><code># Versioonide kontroll\ngit --version           # 2.30+\ndocker --version        # 20.10+\npython3 --version       # 3.9+\nansible --version       # 2.10+\nterraform --version     # 1.0+\n</code></pre></p> <p>Vajalikud kontod: - GitLab konto (tasuta) - Docker Hub konto (valikuline)</p>"},{"location":"ci_cd_advanced/lab/#osa-1-infrastructure-as-code-terraform","title":"Osa 1: Infrastructure as Code (Terraform)","text":""},{"location":"ci_cd_advanced/lab/#11-projekti-struktuur","title":"1.1 Projekti struktuur","text":"<pre><code># Loo projekt\nmkdir techshop-automation\ncd techshop-automation\n\n# Loo Terraform kaust\nmkdir -p terraform/templates\ncd terraform\n</code></pre>"},{"location":"ci_cd_advanced/lab/#12-terraform-konfiguratsioon","title":"1.2 Terraform konfiguratsioon","text":"<p><code>variables.tf</code>: <pre><code>variable \"project_name\" {\n  description = \"Project name\"\n  type        = string\n  default     = \"techshop\"\n}\n\nvariable \"environment\" {\n  description = \"Environment name\"\n  type        = string\n  default     = \"development\"\n}\n\nvariable \"app_port\" {\n  description = \"Application port\"\n  type        = number\n  default     = 5000\n}\n\nvariable \"region\" {\n  description = \"Deploy region\"\n  type        = string\n  default     = \"local\"\n}\n</code></pre></p> <p><code>main.tf</code>: <pre><code>terraform {\n  required_version = \"&gt;= 1.0\"\n\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.4\"\n    }\n    null = {\n      source  = \"hashicorp/null\"\n      version = \"~&gt; 3.2\"\n    }\n  }\n}\n\n# Create project structure\nresource \"local_file\" \"project_config\" {\n  content = jsonencode({\n    project     = var.project_name\n    environment = var.environment\n    port        = var.app_port\n    created_at  = timestamp()\n  })\n  filename = \"${path.module}/config.json\"\n}\n\n# Create docker-compose from template\nresource \"local_file\" \"docker_compose\" {\n  content = templatefile(\"${path.module}/templates/docker-compose.yml.tpl\", {\n    project_name = var.project_name\n    environment  = var.environment\n    app_port     = var.app_port\n  })\n  filename = \"${path.module}/../docker-compose.yml\"\n}\n\n# Create nginx config from template\nresource \"local_file\" \"nginx_config\" {\n  content = templatefile(\"${path.module}/templates/nginx.conf.tpl\", {\n    project_name = var.project_name\n    app_port     = var.app_port\n    server_name  = \"localhost\"\n  })\n  filename = \"${path.module}/../nginx/nginx.conf\"\n}\n\n# Null resource for local setup\nresource \"null_resource\" \"local_setup\" {\n  triggers = {\n    always_run = timestamp()\n  }\n\n  provisioner \"local-exec\" {\n    command = \"echo '\u2705 Infrastructure ready for ${var.project_name}'\"\n  }\n}\n</code></pre></p> <p><code>templates/docker-compose.yml.tpl</code>: <pre><code>version: '3.8'\n\nservices:\n  app:\n    image: ${project_name}:latest\n    container_name: ${project_name}-app\n    ports:\n      - \"${app_port}:${app_port}\"\n    environment:\n      - ENVIRONMENT=${environment}\n      - PORT=${app_port}\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:${app_port}/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - ${project_name}-network\n\n  nginx:\n    image: nginx:alpine\n    container_name: ${project_name}-nginx\n    ports:\n      - \"80:80\"\n    volumes:\n      - ../nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro\n    depends_on:\n      - app\n    networks:\n      - ${project_name}-network\n\nnetworks:\n  ${project_name}-network:\n    driver: bridge\n</code></pre></p> <p><code>templates/nginx.conf.tpl</code>: <pre><code>upstream ${project_name}_backend {\n    server app:${app_port};\n}\n\nserver {\n    listen 80;\n    server_name ${server_name};\n\n    location / {\n        proxy_pass http://${project_name}_backend;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /health {\n        proxy_pass http://${project_name}_backend/health;\n        access_log off;\n    }\n}\n</code></pre></p> <p><code>outputs.tf</code>: <pre><code>output \"project_name\" {\n  description = \"Project name\"\n  value       = var.project_name\n}\n\noutput \"environment\" {\n  description = \"Environment\"\n  value       = var.environment\n}\n\noutput \"app_url\" {\n  description = \"Application URL\"\n  value       = \"http://localhost:${var.app_port}\"\n}\n\noutput \"config_file\" {\n  description = \"Configuration file path\"\n  value       = local_file.project_config.filename\n}\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#13-deploy-infrastruktuur","title":"1.3 Deploy infrastruktuur","text":"<pre><code># Initsialiseeri Terraform\nterraform init\n\n# Vaata muudatusi\nterraform plan\n\n# Deploy\nterraform apply -auto-approve\n\n# Salvesta v\u00e4ljundid\nterraform output -json &gt; outputs.json\n</code></pre>"},{"location":"ci_cd_advanced/lab/#osa-2-server-configuration-ansible","title":"Osa 2: Server Configuration (Ansible)","text":""},{"location":"ci_cd_advanced/lab/#21-ansible-struktuur","title":"2.1 Ansible struktuur","text":"<pre><code># Mine projekti juurkausta\ncd ..\n\n# Loo Ansible struktuur\nmkdir -p ansible/roles/webserver/{tasks,handlers,templates,defaults}\ncd ansible\n</code></pre>"},{"location":"ci_cd_advanced/lab/#22-inventory-konfiguratsioon","title":"2.2 Inventory konfiguratsioon","text":"<p><code>inventory.yml</code>: <pre><code>all:\n  children:\n    local:\n      hosts:\n        localhost:\n          ansible_connection: local\n          ansible_python_interpreter: /usr/bin/python3\n    webservers:\n      hosts:\n        localhost:\n          ansible_connection: local\n      vars:\n        app_name: techshop\n        app_port: 5000\n        docker_network: techshop-network\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#23-webserver-role","title":"2.3 Webserver role","text":"<p><code>roles/webserver/defaults/main.yml</code>: <pre><code>---\napp_name: techshop\napp_port: 5000\napp_user: appuser\napp_dir: /opt/{{ app_name }}\ndocker_compose_version: \"2.21.0\"\n</code></pre></p> <p><code>roles/webserver/tasks/main.yml</code>: <pre><code>---\n- name: Install system packages\n  become: yes\n  package:\n    name:\n      - python3\n      - python3-pip\n      - docker.io\n      - curl\n      - git\n    state: present\n    update_cache: yes\n\n- name: Install Docker Compose\n  become: yes\n  get_url:\n    url: \"https://github.com/docker/compose/releases/download/v{{ docker_compose_version }}/docker-compose-linux-x86_64\"\n    dest: /usr/local/bin/docker-compose\n    mode: '0755'\n\n- name: Ensure Docker service is running\n  become: yes\n  systemd:\n    name: docker\n    state: started\n    enabled: yes\n    daemon_reload: yes\n\n- name: Add current user to docker group\n  become: yes\n  user:\n    name: \"{{ ansible_user_id }}\"\n    groups: docker\n    append: yes\n\n- name: Create application directory\n  become: yes\n  file:\n    path: \"{{ app_dir }}\"\n    state: directory\n    owner: \"{{ ansible_user_id }}\"\n    group: \"{{ ansible_user_id }}\"\n    mode: '0755'\n\n- name: Copy docker-compose file\n  copy:\n    src: \"../docker-compose.yml\"\n    dest: \"{{ app_dir }}/docker-compose.yml\"\n    mode: '0644'\n\n- name: Create nginx config directory\n  file:\n    path: \"{{ app_dir }}/nginx\"\n    state: directory\n    mode: '0755'\n\n- name: Copy nginx configuration\n  copy:\n    src: \"../nginx/nginx.conf\"\n    dest: \"{{ app_dir }}/nginx/nginx.conf\"\n    mode: '0644'\n</code></pre></p> <p><code>roles/webserver/handlers/main.yml</code>: <pre><code>---\n- name: restart docker\n  become: yes\n  systemd:\n    name: docker\n    state: restarted\n\n- name: reload nginx\n  docker_container:\n    name: techshop-nginx\n    restart: yes\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#24-main-playbook","title":"2.4 Main playbook","text":"<p><code>playbook.yml</code>: <pre><code>---\n- name: Configure TechShop infrastructure\n  hosts: local\n  gather_facts: yes\n\n  pre_tasks:\n    - name: Display setup information\n      debug:\n        msg: \"Setting up {{ app_name }} on {{ ansible_hostname }}\"\n\n  roles:\n    - webserver\n\n  post_tasks:\n    - name: Verify Docker installation\n      command: docker --version\n      register: docker_version\n\n    - name: Display Docker version\n      debug:\n        msg: \"Docker version: {{ docker_version.stdout }}\"\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#25-kaivita-ansible","title":"2.5 K\u00e4ivita Ansible","text":"<pre><code># Kontrolli s\u00fcntaksi\nansible-playbook --syntax-check playbook.yml\n\n# K\u00e4ivita playbook\nansible-playbook -i inventory.yml playbook.yml\n\n# Kontrolli tulemust\nansible all -i inventory.yml -m ping\n</code></pre>"},{"location":"ci_cd_advanced/lab/#osa-3-application-development-docker","title":"Osa 3: Application Development (Docker)","text":""},{"location":"ci_cd_advanced/lab/#31-rakenduse-struktuur","title":"3.1 Rakenduse struktuur","text":"<pre><code># Mine projekti juurkausta\ncd ..\n\n# Loo rakenduse kaust\nmkdir -p app/tests\ncd app\n</code></pre>"},{"location":"ci_cd_advanced/lab/#32-flask-rakendus","title":"3.2 Flask rakendus","text":"<p><code>app.py</code>: <pre><code>#!/usr/bin/env python3\n\"\"\"TechShop E-commerce API\"\"\"\n\nfrom flask import Flask, jsonify, request\nimport os\nimport logging\nfrom datetime import datetime\nimport psutil\n\n# Setup logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\nlogger = logging.getLogger(__name__)\n\n# Create Flask app\napp = Flask(__name__)\napp.config['JSON_SORT_KEYS'] = False\n\n# In-memory database (for demo)\nPRODUCTS = [\n    {'id': 1, 'name': 'Laptop', 'price': 999.99, 'stock': 10},\n    {'id': 2, 'name': 'Phone', 'price': 599.99, 'stock': 25},\n    {'id': 3, 'name': 'Tablet', 'price': 399.99, 'stock': 15},\n    {'id': 4, 'name': 'Monitor', 'price': 299.99, 'stock': 20},\n    {'id': 5, 'name': 'Keyboard', 'price': 79.99, 'stock': 50}\n]\n\nORDERS = []\n\n@app.route('/')\ndef home():\n    \"\"\"Home endpoint\"\"\"\n    logger.info(\"Home endpoint accessed\")\n    return jsonify({\n        'service': 'TechShop E-commerce API',\n        'version': '1.0.0',\n        'status': 'running',\n        'timestamp': datetime.now().isoformat(),\n        'endpoints': {\n            'health': '/health',\n            'metrics': '/metrics',\n            'products': '/products',\n            'orders': '/orders'\n        }\n    })\n\n@app.route('/health')\ndef health():\n    \"\"\"Health check endpoint\"\"\"\n    return jsonify({\n        'status': 'healthy',\n        'service': 'techshop-api',\n        'timestamp': datetime.now().isoformat()\n    })\n\n@app.route('/metrics')\ndef metrics():\n    \"\"\"System metrics endpoint\"\"\"\n    cpu_percent = psutil.cpu_percent(interval=1)\n    memory = psutil.virtual_memory()\n    disk = psutil.disk_usage('/')\n\n    return jsonify({\n        'system': {\n            'cpu_percent': cpu_percent,\n            'memory_percent': memory.percent,\n            'memory_available_gb': round(memory.available / (1024**3), 2),\n            'disk_percent': disk.percent,\n            'disk_free_gb': round(disk.free / (1024**3), 2)\n        },\n        'application': {\n            'total_products': len(PRODUCTS),\n            'total_orders': len(ORDERS)\n        },\n        'timestamp': datetime.now().isoformat()\n    })\n\n@app.route('/products')\ndef get_products():\n    \"\"\"Get all products\"\"\"\n    logger.info(\"Products endpoint accessed\")\n    return jsonify({\n        'products': PRODUCTS,\n        'count': len(PRODUCTS),\n        'timestamp': datetime.now().isoformat()\n    })\n\n@app.route('/products/&lt;int:product_id&gt;')\ndef get_product(product_id):\n    \"\"\"Get single product\"\"\"\n    product = next((p for p in PRODUCTS if p['id'] == product_id), None)\n    if product:\n        return jsonify(product)\n    return jsonify({'error': 'Product not found'}), 404\n\n@app.route('/orders', methods=['GET', 'POST'])\ndef handle_orders():\n    \"\"\"Handle orders\"\"\"\n    if request.method == 'GET':\n        return jsonify({\n            'orders': ORDERS,\n            'count': len(ORDERS),\n            'timestamp': datetime.now().isoformat()\n        })\n\n    # POST - create new order\n    data = request.get_json()\n    if not data or 'product_id' not in data:\n        return jsonify({'error': 'Product ID required'}), 400\n\n    product = next((p for p in PRODUCTS if p['id'] == data['product_id']), None)\n    if not product:\n        return jsonify({'error': 'Product not found'}), 404\n\n    if product['stock'] &lt; data.get('quantity', 1):\n        return jsonify({'error': 'Insufficient stock'}), 400\n\n    # Create order\n    order = {\n        'id': len(ORDERS) + 1,\n        'product_id': product['id'],\n        'product_name': product['name'],\n        'quantity': data.get('quantity', 1),\n        'total': product['price'] * data.get('quantity', 1),\n        'created_at': datetime.now().isoformat()\n    }\n\n    # Update stock\n    product['stock'] -= order['quantity']\n    ORDERS.append(order)\n\n    logger.info(f\"Order created: {order['id']}\")\n    return jsonify(order), 201\n\n@app.errorhandler(404)\ndef not_found(error):\n    \"\"\"Handle 404 errors\"\"\"\n    return jsonify({'error': 'Endpoint not found'}), 404\n\n@app.errorhandler(500)\ndef internal_error(error):\n    \"\"\"Handle 500 errors\"\"\"\n    logger.error(f\"Internal error: {error}\")\n    return jsonify({'error': 'Internal server error'}), 500\n\nif __name__ == '__main__':\n    port = int(os.getenv('PORT', 5000))\n    app.run(host='0.0.0.0', port=port, debug=False)\n</code></pre></p> <p><code>requirements.txt</code>: <pre><code>Flask==2.3.3\ngunicorn==21.2.0\npsutil==5.9.5\nrequests==2.31.0\npytest==7.4.2\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#33-dockerfile","title":"3.3 Dockerfile","text":"<p><code>Dockerfile</code>: <pre><code># Multi-stage build\nFROM python:3.9-slim as builder\n\nWORKDIR /build\nCOPY requirements.txt .\nRUN pip install --user --no-cache-dir -r requirements.txt\n\n# Production stage\nFROM python:3.9-slim\n\nWORKDIR /app\n\n# Create non-root user\nRUN useradd -m -u 1000 appuser &amp;&amp; \\\n    mkdir -p /app &amp;&amp; \\\n    chown -R appuser:appuser /app\n\n# Copy dependencies from builder\nCOPY --from=builder /root/.local /home/appuser/.local\n\n# Copy application\nCOPY --chown=appuser:appuser . .\n\n# Switch to non-root user\nUSER appuser\n\n# Add user's local bin to PATH\nENV PATH=/home/appuser/.local/bin:$PATH\n\n# Expose port\nEXPOSE 5000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \\\n  CMD python -c \"import requests; requests.get('http://localhost:5000/health')\"\n\n# Run application\nCMD [\"gunicorn\", \"--bind\", \"0.0.0.0:5000\", \"--workers\", \"2\", \"--timeout\", \"30\", \"app:app\"]\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#34-local-testing","title":"3.4 Local testing","text":"<pre><code># Build image\ndocker build -t techshop:latest .\n\n# Run container\ndocker run -d --name techshop-test -p 5000:5000 techshop:latest\n\n# Test endpoints\ncurl http://localhost:5000/\ncurl http://localhost:5000/health\ncurl http://localhost:5000/metrics\ncurl http://localhost:5000/products\n\n# Create order\ncurl -X POST http://localhost:5000/orders \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"product_id\": 1, \"quantity\": 2}'\n\n# Cleanup\ndocker stop techshop-test\ndocker rm techshop-test\n</code></pre>"},{"location":"ci_cd_advanced/lab/#osa-4-cicd-pipeline-gitlab-ci","title":"Osa 4: CI/CD Pipeline (GitLab CI)","text":""},{"location":"ci_cd_advanced/lab/#41-git-repository-setup","title":"4.1 Git repository setup","text":"<pre><code># Mine projekti juurkausta\ncd ..\n\n# Initialize Git\ngit init\n\n# Create .gitignore\ncat &gt; .gitignore &lt;&lt; EOF\n# Terraform\n*.tfstate\n*.tfstate.*\n.terraform/\nterraform.tfvars\n\n# Python\n__pycache__/\n*.pyc\n.pytest_cache/\nvenv/\n.env\n\n# Docker\n.dockerignore\n\n# IDE\n.vscode/\n.idea/\n*.swp\n\n# OS\n.DS_Store\nThumbs.db\nEOF\n\n# Add files\ngit add .\ngit commit -m \"Initial commit: TechShop automation project\"\n\n# Add remote (replace with your URL)\ngit remote add origin https://gitlab.com/your-username/techshop-automation.git\ngit push -u origin main\n</code></pre>"},{"location":"ci_cd_advanced/lab/#42-gitlab-ci-pipeline","title":"4.2 GitLab CI pipeline","text":"<p><code>.gitlab-ci.yml</code>: <pre><code># Define stages\nstages:\n  - validate\n  - test\n  - build\n  - deploy\n\n# Global variables\nvariables:\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: \"\"\n  IMAGE_NAME: $CI_REGISTRY_IMAGE/techshop\n  IMAGE_TAG: $CI_COMMIT_SHORT_SHA\n\n# Cache configuration\ncache:\n  paths:\n    - .terraform/\n\n# Stage 1: Validate\nvalidate:terraform:\n  stage: validate\n  image: hashicorp/terraform:1.5\n  script:\n    - cd terraform\n    - terraform init -backend=false\n    - terraform fmt -check=true\n    - terraform validate\n  only:\n    - merge_requests\n    - main\n\nvalidate:ansible:\n  stage: validate\n  image: ansible/ansible:latest\n  script:\n    - cd ansible\n    - ansible-playbook --syntax-check playbook.yml\n  only:\n    - merge_requests\n    - main\n\n# Stage 2: Test\ntest:python:\n  stage: test\n  image: python:3.9\n  before_script:\n    - cd app\n    - pip install -r requirements.txt\n  script:\n    - python -m pytest tests/ -v\n    - python -m flake8 app.py --max-line-length=100\n  coverage: '/TOTAL.*\\s+(\\d+%)$/'\n  only:\n    - merge_requests\n    - main\n\ntest:docker:\n  stage: test\n  image: docker:latest\n  services:\n    - docker:dind\n  script:\n    - cd app\n    - docker build -t test-image .\n    - docker run --rm test-image python -c \"import app; print('\u2705 Import successful')\"\n  only:\n    - merge_requests\n    - main\n\n# Stage 3: Build\nbuild:docker:\n  stage: build\n  image: docker:latest\n  services:\n    - docker:dind\n  before_script:\n    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY\n  script:\n    - cd app\n    - docker build -t $IMAGE_NAME:$IMAGE_TAG .\n    - docker tag $IMAGE_NAME:$IMAGE_TAG $IMAGE_NAME:latest\n    - docker push $IMAGE_NAME:$IMAGE_TAG\n    - docker push $IMAGE_NAME:latest\n    - echo \"\u2705 Image pushed: $IMAGE_NAME:$IMAGE_TAG\"\n  only:\n    - main\n\n# Stage 4: Deploy\ndeploy:staging:\n  stage: deploy\n  image: alpine:latest\n  before_script:\n    - apk add --no-cache curl docker-cli\n  script:\n    - echo \"\ud83d\ude80 Deploying to staging...\"\n    - docker pull $IMAGE_NAME:$IMAGE_TAG\n    - docker stop techshop-staging || true\n    - docker rm techshop-staging || true\n    - |\n      docker run -d \\\n        --name techshop-staging \\\n        -p 5001:5000 \\\n        --restart unless-stopped \\\n        $IMAGE_NAME:$IMAGE_TAG\n    - sleep 10\n    - curl -f http://localhost:5001/health || exit 1\n    - echo \"\u2705 Staging deployment successful!\"\n  environment:\n    name: staging\n    url: http://localhost:5001\n  only:\n    - main\n\ndeploy:production:\n  stage: deploy\n  image: alpine:latest\n  before_script:\n    - apk add --no-cache curl docker-cli ansible\n  script:\n    - echo \"\ud83d\ude80 Deploying to production...\"\n    - cd ansible\n    - ansible-playbook -i inventory.yml deploy.yml\n    - curl -f http://localhost/health || exit 1\n    - echo \"\u2705 Production deployment successful!\"\n  environment:\n    name: production\n    url: http://localhost\n  when: manual\n  only:\n    - main\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#43-gitlab-configuration","title":"4.3 GitLab configuration","text":"<pre><code># Set GitLab CI/CD variables\n# Go to: Settings \u2192 CI/CD \u2192 Variables\n\n# Add these variables:\nCI_REGISTRY_USER: your-gitlab-username\nCI_REGISTRY_PASSWORD: your-gitlab-token\nDOCKER_HOST: tcp://docker:2375\n</code></pre>"},{"location":"ci_cd_advanced/lab/#osa-5-monitoring-ja-observability","title":"Osa 5: Monitoring ja Observability","text":""},{"location":"ci_cd_advanced/lab/#51-monitoring-stack","title":"5.1 Monitoring stack","text":"<p><code>monitoring/docker-compose.yml</code>: <pre><code>version: '3.8'\n\nservices:\n  prometheus:\n    image: prom/prometheus:latest\n    container_name: prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    command:\n      - '--config.file=/etc/prometheus/prometheus.yml'\n      - '--storage.tsdb.path=/prometheus'\n    ports:\n      - \"9090:9090\"\n    networks:\n      - monitoring\n\n  grafana:\n    image: grafana/grafana:latest\n    container_name: grafana\n    volumes:\n      - grafana_data:/var/lib/grafana\n      - ./grafana/dashboards:/etc/grafana/provisioning/dashboards\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=admin\n      - GF_USERS_ALLOW_SIGN_UP=false\n    ports:\n      - \"3000:3000\"\n    networks:\n      - monitoring\n\n  node_exporter:\n    image: prom/node-exporter:latest\n    container_name: node_exporter\n    ports:\n      - \"9100:9100\"\n    networks:\n      - monitoring\n\nvolumes:\n  prometheus_data:\n  grafana_data:\n\nnetworks:\n  monitoring:\n    driver: bridge\n</code></pre></p> <p><code>monitoring/prometheus.yml</code>: <pre><code>global:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n      - targets: ['localhost:9090']\n\n  - job_name: 'node'\n    static_configs:\n      - targets: ['node_exporter:9100']\n\n  - job_name: 'techshop'\n    metrics_path: '/metrics'\n    static_configs:\n      - targets: ['host.docker.internal:5000']\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#52-application-metrics","title":"5.2 Application metrics","text":"<p>Lisage <code>app.py</code> faili Prometheus metrics:</p> <pre><code>from prometheus_client import Counter, Histogram, Gauge, generate_latest\n\n# Metrics\nrequest_count = Counter('app_requests_total', 'Total requests', ['method', 'endpoint'])\nrequest_duration = Histogram('app_request_duration_seconds', 'Request duration')\nactive_orders = Gauge('app_active_orders', 'Number of active orders')\n\n@app.route('/metrics')\ndef metrics_prometheus():\n    \"\"\"Prometheus metrics endpoint\"\"\"\n    # Update gauges\n    active_orders.set(len(ORDERS))\n\n    # Return metrics\n    return generate_latest(), 200, {'Content-Type': 'text/plain; charset=utf-8'}\n</code></pre>"},{"location":"ci_cd_advanced/lab/#osa-6-documentation","title":"Osa 6: Documentation","text":""},{"location":"ci_cd_advanced/lab/#61-readmemd","title":"6.1 README.md","text":"<p><pre><code># TechShop E-commerce Automation\n\n## \ud83d\udccb Overview\n\nComplete DevOps automation project demonstrating modern CI/CD practices.\n\n## \ud83c\udfd7 Architecture\n</code></pre> \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   GitLab    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   CI/CD      \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Deployment  \u2502 \u2502   Repo      \u2502     \u2502   Pipeline   \u2502     \u2502  Environment \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502                    \u2502                     \u2502        \u25bc                    \u25bc                     \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  Terraform  \u2502     \u2502   Docker     \u2502     \u2502   Ansible    \u2502 \u2502    IaC      \u2502     \u2502  Container   \u2502     \u2502   Config     \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 <pre><code>## \ud83d\ude80 Quick Start\n\n### Local Development\n```bash\n# Clone repository\ngit clone https://gitlab.com/username/techshop-automation.git\ncd techshop-automation\n\n# Run locally\ncd app\ndocker build -t techshop:latest .\ndocker run -p 5000:5000 techshop:latest\n\n# Test\ncurl http://localhost:5000/health\n</code></pre></p>"},{"location":"ci_cd_advanced/lab/#production-deployment","title":"Production Deployment","text":"<ol> <li>Push code to GitLab</li> <li>Pipeline runs automatically</li> <li>Manual approval for production</li> </ol>"},{"location":"ci_cd_advanced/lab/#monitoring","title":"\ud83d\udcca Monitoring","text":"<ul> <li>Prometheus: http://localhost:9090</li> <li>Grafana: http://localhost:3000</li> <li>Application: http://localhost:5000</li> </ul>"},{"location":"ci_cd_advanced/lab/#technologies","title":"\ud83d\udee0 Technologies","text":"<ul> <li>Infrastructure: Terraform</li> <li>Configuration: Ansible</li> <li>Containerization: Docker</li> <li>CI/CD: GitLab CI</li> <li>Monitoring: Prometheus + Grafana</li> <li>Application: Python Flask</li> </ul>"},{"location":"ci_cd_advanced/lab/#documentation","title":"\ud83d\udcda Documentation","text":"<ul> <li>API Documentation</li> <li>Deployment Guide</li> <li>Troubleshooting</li> </ul>"},{"location":"ci_cd_advanced/lab/#api-documentation","title":"API Documentation","text":"<p>The TechShop API provides the following endpoints:</p> <ul> <li><code>GET /</code> - Service information and available endpoints</li> <li><code>GET /health</code> - Health check endpoint</li> <li><code>GET /metrics</code> - System and application metrics</li> <li><code>GET /products</code> - List all products</li> <li><code>GET /products/{id}</code> - Get specific product</li> <li><code>GET /orders</code> - List all orders</li> <li><code>POST /orders</code> - Create new order</li> </ul>"},{"location":"ci_cd_advanced/lab/#deployment-guide","title":"Deployment Guide","text":""},{"location":"ci_cd_advanced/lab/#local-development","title":"Local Development","text":"<pre><code># Clone repository\ngit clone https://gitlab.com/username/techshop-automation.git\ncd techshop-automation\n\n# Run locally\ncd app\ndocker build -t techshop:latest .\ndocker run -p 5000:5000 techshop:latest\n\n# Test\ncurl http://localhost:5000/health\n</code></pre>"},{"location":"ci_cd_advanced/lab/#production-deployment_1","title":"Production Deployment","text":"<ol> <li>Push code to GitLab</li> <li>Pipeline runs automatically</li> <li>Manual approval for production</li> </ol>"},{"location":"ci_cd_advanced/lab/#troubleshooting","title":"Troubleshooting","text":""},{"location":"ci_cd_advanced/lab/#common-issues","title":"Common Issues","text":"<p>Docker build fails: <pre><code># Check Docker daemon\nsudo systemctl status docker\n# Restart if needed\nsudo systemctl restart docker\n</code></pre></p> <p>Application won't start: <pre><code># Check logs\ndocker logs &lt;container-name&gt;\n# Check port availability\nnetstat -tulpn | grep 5000\n</code></pre></p> <p>Pipeline fails: - Check GitLab CI/CD variables - Verify Docker registry credentials - Review pipeline logs in GitLab</p>"},{"location":"ci_cd_advanced/lab/#metrics","title":"\ud83d\udcc8 Metrics","text":"<ul> <li>Deployment time: 2 hours \u2192 5 minutes</li> <li>Error rate: 30% \u2192 2%</li> <li>Rollback time: 1 hour \u2192 2 minutes ```</li> </ul>"},{"location":"ci_cd_advanced/lab/#labi-kokkuvote","title":"Lab'i kokkuv\u00f5te","text":""},{"location":"ci_cd_advanced/lab/#saavutatud-tulemused","title":"\u2705 Saavutatud tulemused","text":"<ol> <li>T\u00e4ielik automatiseerimine - nullist production'ini</li> <li>K\u00f5ik oskused kasutatud - Git, Ansible, Docker, Terraform, CI/CD</li> <li>Production-ready lahendus - monitoring, health checks, logging</li> <li>Dokumenteeritud projekt - README, API docs, troubleshooting</li> </ol>"},{"location":"ci_cd_advanced/lab/#moodetavad-tulemused","title":"\ud83d\udcca M\u00f5\u00f5detavad tulemused","text":"Metric Enne P\u00e4rast Improvement Deployment aeg 2 tundi 5 minutit 96% \u2193 Vigade arv 30% 2% 93% \u2193 Rollback aeg 1 tund 2 minutit 97% \u2193 Arendaja stress K\u00f5rge Madal 100% \u2193"},{"location":"ci_cd_advanced/lab/#jargmised-sammud","title":"\ud83c\udfaf J\u00e4rgmised sammud","text":"<ul> <li> Lisa Kubernetes orchestration</li> <li> Implementeeri blue-green deployment</li> <li> Lisa security scanning (SAST/DAST)</li> <li> Automatiseeri load testing</li> <li> Lisa disaster recovery</li> </ul>"},{"location":"ci_cd_advanced/lab/#onnitleme","title":"\ud83c\udf89 \u00d5nnitleme!","text":"<p>Olete edukalt l\u00f5petanud DevOps automatiseerimise kursuse l\u00f5ppprojekti! See projekt demonstreerib k\u00f5iki olulisi DevOps praktikaid ja on valmis kasutamiseks p\u00e4ris projektides.</p> <p>Portfolio v\u00e4\u00e4rtus: See projekt on suurep\u00e4rane lisand teie portfolio'sse ja demonstreerib oskusi, mida t\u00f6\u00f6andjad otsivad!</p>"},{"location":"ci_cd_advanced/lecture/","title":"CI/CD Advanced: Ettev\u00f5tte-tasemel DevOps Automatiseerimine","text":""},{"location":"ci_cd_advanced/lecture/#sissejuhatus","title":"Sissejuhatus","text":"<p>Selles peat\u00fckis tutvume ettev\u00f5tte-tasemel CI/CD automatiseerimisega, mis l\u00e4heb palju kaugemale lihtsate \"Hello World\" pipeline'ide. \u00d5pitakse, kuidas ehitada robustseid, turvalisi ja optimeeritud CI/CD s\u00fcsteeme, mis suudavad toetada t\u00f5elist DevOps kultuuri.</p> <p>Allikad ja viited: - Mastering GitLab CI/CD with Advanced Configuration Techniques - Advanced CI/CD Pipeline Configuration Strategies</p>"},{"location":"ci_cd_advanced/lecture/#ettevotte-devops-valjakutsed","title":"Ettev\u00f5tte DevOps V\u00e4ljakutsed","text":""},{"location":"ci_cd_advanced/lecture/#tuupilised-probleemid-suuremates-projektides","title":"T\u00fc\u00fcpilised probleemid suuremates projektides","text":"<ul> <li>Deployment k\u00e4sitsi: 2-4 tundi, k\u00f5rge vigade t\u00f5en\u00e4osus (30-40%)</li> <li>Rollback keerukus: 1-2 tundi, andmekadu risk</li> <li>Deploy sagedus: 1x n\u00e4dalas v\u00f5i harvem</li> <li>Arendajate stress: K\u00f5rge, \u00f6ised deploy'id</li> <li>Kvaliteedi kontroll: Manuaalne, ebaj\u00e4rjekindel</li> <li>Turvalisus: Paroolid koodis, puuduvad turvaskaneerimised</li> </ul>"},{"location":"ci_cd_advanced/lecture/#legacy-deployment-protsess","title":"Legacy deployment protsess","text":"Samm Tegevus Riskid 1 SSH \u00fchendus serverisse Turvahaavatavus, \u00fcksik punkti rike 2 Git pull v\u00e4rske koodi saamiseks Konfliktid, vale branch 3 S\u00f5ltuvuste k\u00e4sitsi installeerimine Versioonikonfliktid 4 Rakenduse taask\u00e4ivitamine Downtime, teenuse katkestus 5 Manuaalne testimine Inimviga, ebaj\u00e4rjekindel 6 Kui midagi l\u00e4heb valesti \u2192 rollback Andmekadu, pikk taastumisaeg"},{"location":"ci_cd_advanced/lecture/#ettevotte-tasemel-lahenduse-arhitektuur","title":"Ettev\u00f5tte-tasemel Lahenduse Arhitektuur","text":""},{"location":"ci_cd_advanced/lecture/#pohiline-devops-stack","title":"P\u00f5hiline DevOps Stack","text":"T\u00f6\u00f6riist Kirjeldus Ettev\u00f5tte Eelised Git (Version Control) Edasij\u00f5udnud harude strateegiad, koodikontroll GitFlow/GitHub Flow, automatiseeritud kvaliteedi v\u00e4ravad GitLab CI/CD Edasij\u00f5udnud pipeline konfiguratsioon Mitmeetapiline, paralleelne t\u00e4itmine, turvaskaneerimine Docker Konteineriseerimine mitmeetapiliste build'idega \u00dchtsed keskkonnad, turvaskaneerimine Terraform Infrastruktur koodina Multi-cloud, oleku haldus, drift detection Ansible Konfiguratsiooni haldus Idempotent, agentideta, inventuuri haldus Prometheus + Grafana J\u00e4lgimine ja hoiatused SLO/SLI j\u00e4lgimine, automatiseeritud incident response Vault Saladuste haldus D\u00fcnaamilised saladused, audit logimine, RBAC"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-git-workflow-ja-harude-strateegia","title":"Edasij\u00f5udnud Git Workflow ja Harude Strateegia","text":""},{"location":"ci_cd_advanced/lecture/#gitflow-rakendamine","title":"GitFlow Rakendamine","text":"<pre><code># Feature arendus\ngit checkout -b feature/user-authentication\ngit commit -m \"Add OAuth2 integration\"\ngit push origin feature/user-authentication\n\n# Loo merge request kvaliteedi v\u00e4ravatega\n# Automaatsed testid, turvaskaneerimised, koodikontroll kohustuslik\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#kvaliteedi-varavad","title":"Kvaliteedi V\u00e4ravad","text":"<ul> <li>Koodikontroll: Minimaalselt 2 heakskiitu vajalik</li> <li>Automaatsed testid: 100% l\u00e4bimise m\u00e4\u00e4r kohustuslik</li> <li>Turvaskaneerimine: \u00dchtegi k\u00f5rge/kriitilist haavatavust</li> <li>J\u00f5udluse testid: Vastuse aeg &lt; 200ms</li> <li>Katvus: Minimaalselt 80% koodi katvus</li> </ul>"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-gitlab-cicd-pipeline-arhitektuur","title":"Edasij\u00f5udnud GitLab CI/CD Pipeline Arhitektuur","text":""},{"location":"ci_cd_advanced/lecture/#mitmeetapiline-pipeline-edasijoudnud-konfiguratsiooniga","title":"Mitmeetapiline Pipeline Edasij\u00f5udnud Konfiguratsiooniga","text":"<p>See on ettev\u00f5tte-tasemel GitLab CI/CD pipeline, mis erineb tavalisest \"Hello World\" n\u00e4itest mitme olulise aspekti poolest:</p>"},{"location":"ci_cd_advanced/lecture/#miks-see-on-edasijoudnud","title":"Miks see on edasij\u00f5udnud?","text":"<ol> <li>Mitmeetapiline struktuur - Pipeline on jagatud loogilisteks etappideks</li> <li>Turvalisus esikohal - Iga etapp sisaldab turvakontrolli</li> <li>Paralleelne t\u00f6\u00f6tlemine - Testid jooksevad samaaegselt</li> <li>Intelligentne caching - Optimeeritud j\u00f5udlus</li> <li>Keskkonna-spetsiifiline loogika - Erinevad reeglid erinevatele keskkondadele</li> </ol> <pre><code># .gitlab-ci.yml - Ettev\u00f5tte-tasemel konfiguratsioon\n# \n# EDASIJ\u00d5UDNUD FUNKTSIOON 1: Mitmeetapiline struktuur\n# Tavaline pipeline: build -&gt; test -&gt; deploy\n# Meie pipeline: validate -&gt; test -&gt; security -&gt; build -&gt; deploy-staging -&gt; deploy-production -&gt; monitor\nstages:\n  - validate    # Koodi kvaliteedi kontroll\n  - test        # Automaatsed testid\n  - security    # Turvaskaneerimine\n  - build       # Docker image loomine\n  - deploy-staging    # Staging keskkonda deploy\n  - deploy-production # Production keskkonda deploy\n  - monitor     # J\u00e4lgimine ja tervise kontrollid\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 2: Optimeeritud Docker konfiguratsioon\nvariables:\n  DOCKER_DRIVER: overlay2        # Kiirem failis\u00fcsteem\n  DOCKER_TLS_CERTDIR: \"/certs\"   # Turvaline TLS\n  DOCKER_BUILDKIT: 1             # Uusim build tehnoloogia\n\n# Globaalne konfiguratsioon - rakendub k\u00f5igile job'idele\ndefault:\n  image: docker:24.0.5\n  services:\n    - docker:24.0.5-dind  # Docker-in-Docker teenus\n  before_script:\n    - docker info\n    - echo \"Alustan pipeline'i $CI_COMMIT_REF_NAME jaoks\"\n\n# ETAPP 1: Valideerimine\n# EDASIJ\u00d5UDNUD FUNKTSIOON 3: Tingimuslik t\u00e4itmine\nvalidate:\n  stage: validate\n  image: alpine:latest\n  script:\n    - apk add --no-cache git\n    - git validate --strict  # Kontrollib koodi kvaliteeti\n    - echo \"Koodi valideerimine \u00f5nnestus\"\n  rules:\n    # Jookseb ainult merge request'ide ja main branch'i jaoks\n    - if: '$CI_PIPELINE_SOURCE == \"merge_request_event\"'\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n\n# ETAPP 2: Testimine\n# EDASIJ\u00d5UDNUD FUNKTSIOON 4: Paralleelne testimine maatriks strateegiaga\ntest:unit:\n  stage: test\n  image: node:20-alpine\n  script:\n    - npm ci --cache .npm --prefer-offline  # Optimeeritud install\n    - npm run test:unit\n    - npm run test:coverage\n  coverage: '/Lines\\s*:\\s*(\\d+\\.\\d+)%/'  # Automaatne katvuse m\u00f5\u00f5tmine\n  artifacts:\n    reports:\n      coverage_report:\n        coverage_format: cobertura\n        path: coverage/cobertura-coverage.xml\n    paths:\n      - coverage/\n    expire_in: 1 week  # Artifaktid kustuvad automaatselt\n  cache:\n    key: ${CI_COMMIT_REF_SLUG}-npm  # Unikaalne cache v\u00f5ti\n    paths:\n      - .npm/\n      - node_modules/\n  parallel:\n    matrix:\n      # EDASIJ\u00d5UDNUD FUNKTSIOON 5: Testimine mitmes Node.js versioonis\n      - NODE_VERSION: [\"18\", \"20\"]  # Jookseb paralleelselt m\u00f5lemas versioonis\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 6: Integratsiooni testid teenustega\ntest:integration:\n  stage: test\n  image: python:3.11-slim\n  services:\n    - postgres:15-alpine  # Andmebaas teenus\n    - redis:7-alpine      # Cache teenus\n  variables:\n    POSTGRES_DB: test_db\n    POSTGRES_USER: test_user\n    POSTGRES_PASSWORD: test_pass\n  script:\n    - pip install -r requirements.txt\n    - pytest tests/integration/ -v --cov=app\n  artifacts:\n    when: always  # Salvestab tulemused isegi kui test eba\u00f5nnestub\n    paths:\n      - test-results/\n    reports:\n      junit: test-results/junit.xml  # GitLab saab n\u00e4ha test tulemusi\n\n# ETAPP 3: Turvalisus\n# EDASIJ\u00d5UDNUD FUNKTSIOON 7: P\u00f5hjalik turvaskaneerimine\nsecurity:scan:\n  stage: security\n  image: securecodewarrior/docker-security-scan:latest\n  script:\n    - docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA .\n    - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \n        securecodewarrior/docker-security-scan:latest \n        $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n    - if: '$CI_PIPELINE_SOURCE == \"merge_request_event\"'\n\n# ETAPP 4: Build\n# EDASIJ\u00d5UDNUD FUNKTSIOON 8: Mitmeetapiline Docker build\nbuild:\n  stage: build\n  image: docker:24.0.5\n  services:\n    - docker:24.0.5-dind\n  script:\n    - docker build \n        --build-arg BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')  # Build kuup\u00e4ev\n        --build-arg VCS_REF=$CI_COMMIT_SHA                       # Git commit hash\n        --build-arg VERSION=$CI_COMMIT_TAG                       # Versiooni number\n        -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA                     # Unikaalne tag\n        -t $CI_REGISTRY_IMAGE:latest                             # Latest tag\n        .\n    - docker push $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n    - docker push $CI_REGISTRY_IMAGE:latest\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n    - if: '$CI_COMMIT_TAG'\n\n# ETAPP 5: Staging Deploy\n# EDASIJ\u00d5UDNUD FUNKTSIOON 9: Manuaalne heakskiit ja keskkonna haldus\ndeploy:staging:\n  stage: deploy-staging\n  image: alpine:latest\n  environment:\n    name: staging\n    url: https://staging.techshop.com  # GitLab n\u00e4itab keskkonna URL'i\n  script:\n    - apk add --no-cache curl\n    - curl -X POST \"$STAGING_WEBHOOK_URL\" \n        -H \"Authorization: Bearer $STAGING_DEPLOY_TOKEN\"\n        -d '{\"image\": \"'$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA'\"}'\n    - echo \"Staging deployment k\u00e4ivitatud\"\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual        # EDASIJ\u00d5UDNUD: N\u00f5uab manuaalset heakskiitu\n  allow_failure: false # EDASIJ\u00d5UDNUD: Eba\u00f5nnestumine peatab pipeline'i\n\n# ETAPP 6: Production Deploy\n# EDASIJ\u00d5UDNUD FUNKTSIOON 10: Tag-based deployment\ndeploy:production:\n  stage: deploy-production\n  image: alpine:latest\n  environment:\n    name: production\n    url: https://techshop.com\n  script:\n    - apk add --no-cache curl\n    - curl -X POST \"$PROD_WEBHOOK_URL\" \n        -H \"Authorization: Bearer $PROD_DEPLOY_TOKEN\"\n        -d '{\"image\": \"'$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA'\"}'\n    - echo \"Production deployment k\u00e4ivitatud\"\n  rules:\n    # EDASIJ\u00d5UDNUD: Jookseb ainult versiooni tag'idega (nt v1.2.3)\n    - if: '$CI_COMMIT_TAG =~ /^v\\d+\\.\\d+\\.\\d+$/'\n  when: manual\n  allow_failure: false\n\n# ETAPP 7: J\u00e4lgimine\n# EDASIJ\u00d5UDNUD FUNKTSIOON 11: Post-deployment tervise kontrollid\nmonitor:health:\n  stage: monitor\n  image: curlimages/curl:latest\n  script:\n    - curl -f $STAGING_URL/health || exit 1    # Tervise endpoint\n    - curl -f $STAGING_URL/metrics || exit 1   # Meetrikate endpoint\n    - echo \"Tervise kontrollid \u00f5nnestusid\"\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  needs:\n    - deploy:staging  # EDASIJ\u00d5UDNUD: Ootab staging deploy'i l\u00f5ppu\n</code></pre> <p>Allikas: GitLab CI/CD Advanced Configuration</p>"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-pipeline-funktsioonid","title":"Edasij\u00f5udnud Pipeline Funktsioonid","text":""},{"location":"ci_cd_advanced/lecture/#1-modulaarne-konfiguratsioon-includeidega","title":"1. Modulaarne Konfiguratsioon Include'idega","text":"<p>Miks see on edasij\u00f5udnud? - Korduvkasutatavus: Sama konfiguratsiooni saab kasutada mitmes projektis - Hooldatavus: Iga funktsioon on eraldi failis - Testitavus: Saab testida \u00fcksikuid komponente - Jagamine: Meeskond saab jagada konfiguratsioone</p> <pre><code># .gitlab-ci.yml (p\u00f5hifail)\n# EDASIJ\u00d5UDNUD: Modulaarne struktuur - jagame pipeline'i v\u00e4iksemateks osadeks\ninclude:\n  - local: '.gitlab-ci/build.yml'      # Build loogika eraldi failis\n  - local: '.gitlab-ci/test.yml'       # Test loogika eraldi failis\n  - local: '.gitlab-ci/deploy.yml'     # Deploy loogika eraldi failis\n  - project: 'devops/shared-templates' # Jagatud mallid teisest projektist\n    file: '/security-scan.yml'\n    ref: 'main'\n\nvariables:\n  GLOBAL_VAR: \"shared-value\"  # Globaalsed muutujad k\u00f5igile job'idele\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#2-dunaamilised-muutujad-ja-tingimuslik-loogika","title":"2. D\u00fcnaamilised Muutujad ja Tingimuslik Loogika","text":"<p>Miks see on edasij\u00f5udnud? - Automaatne keskkonna tuvastamine: Pipeline ise otsustab, kuhu deploy'ida - Vigade v\u00e4hendamine: Ei pea k\u00e4sitsi keskkonda valima - Paindlikkus: \u00dcks konfiguratsioon t\u00f6\u00f6tab k\u00f5igis keskkondades</p> <pre><code># EDASIJ\u00d5UDNUD: D\u00fcnaamiline keskkonna konfiguratsioon\ndeploy:\n  stage: deploy\n  variables:\n    # EDASIJ\u00d5UDNUD FUNKTSIOON: Automaatne keskkonna tuvastamine\n    # Kui branch on \"main\" -&gt; production, muidu -&gt; staging\n    ENVIRONMENT: $([ \"$CI_COMMIT_BRANCH\" == \"main\" ] &amp;&amp; echo \"production\" || echo \"staging\")\n\n    # EDASIJ\u00d5UDNUD FUNKTSIOON: D\u00fcnaamiline URL valik\n    # Valib \u00f5ige URL'i vastavalt keskkonnale\n    DEPLOY_URL: $([ \"$CI_COMMIT_BRANCH\" == \"main\" ] &amp;&amp; echo \"$PROD_URL\" || echo \"$STAGING_URL\")\n  script:\n    - echo \"Deploying to $ENVIRONMENT at $DEPLOY_URL\"\n    - ./scripts/deploy.sh $ENVIRONMENT\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#3-edasijoudnud-caching-strateegiad","title":"3. Edasij\u00f5udnud Caching Strateegiad","text":"<p>Miks see on edasij\u00f5udnud? - Kiirus: Cache'itud s\u00f5ltuvused = kiiremad build'id - Kulude kokkuhoid: V\u00e4hem ressursse kulutatakse - Intelligentne cache: Cache muutub ainult siis, kui s\u00f5ltuvused muutuvad</p> <pre><code># EDASIJ\u00d5UDNUD: Optimeeritud caching erinevate job'ide jaoks\ncache:\n  key: \n    files:\n      - package-lock.json    # Kui package-lock.json muutub, cache uueneb\n      - requirements.txt     # Kui requirements.txt muutub, cache uueneb\n  paths:\n    - node_modules/          # Node.js s\u00f5ltuvused\n    - .npm/                  # npm cache\n    - venv/                  # Python virtuaalne keskkond\n  policy: pull-push          # Laeb cache'i ja salvestab uue\n\n# EDASIJ\u00d5UDNUD: Job-spetsiifiline cache override\ntest:unit:\n  cache:\n    key: ${CI_COMMIT_REF_SLUG}-test  # Unikaalne cache v\u00f5ti test'ide jaoks\n    paths:\n      - test-results/        # Test tulemused\n    policy: pull             # Ainult laeb cache'i, ei salvesta\n</code></pre> <p>Allikas: Advanced CI/CD Pipeline Configuration Strategies</p>"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-docker-konfiguratsioon","title":"Edasij\u00f5udnud Docker Konfiguratsioon","text":""},{"location":"ci_cd_advanced/lecture/#mitmeetapiline-dockerfile-turvalisusega","title":"Mitmeetapiline Dockerfile Turvalisusega","text":"<p>Miks see on edasij\u00f5udnud? - Turvalisus: Kasutab mitte-root kasutajat - Optimeeritud suurus: Ainult vajalikud failid l\u00f5plikus image'is - Tervise kontrollid: Automaatne kontroll, kas rakendus t\u00f6\u00f6tab - Parimad praktikad: J\u00e4rgib Docker turvalisuse soovitusi</p> <pre><code># EDASIJ\u00d5UDNUD: Mitmeetapiline build tootmise optimeerimiseks\n# \n# ETAPP 1: Build etapp - siin kompileeritakse ja ehitatakse\nFROM node:20-alpine AS builder\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 1: Turvalisus - kasuta mitte-root kasutajat\n# Tavaline Docker: kasutab root kasutajat (ohtlik!)\n# Meie lahendus: loob spetsiaalse kasutaja\nRUN addgroup -g 1001 -S nodejs\nRUN adduser -S nextjs -u 1001\n\nWORKDIR /app\nCOPY package*.json ./\n# EDASIJ\u00d5UDNUD FUNKTSIOON 2: Optimeeritud install\nRUN npm ci --only=production &amp;&amp; npm cache clean --force\n\n# ETAPP 2: Runtime etapp - siin jookseb rakendus\nFROM node:20-alpine AS runner\nWORKDIR /app\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 3: Turvaline kopeerimine \u00f5ige omandi\u00f5igustega\n# Kopeerib ainult vajalikud failid builder'ist\nCOPY --from=builder --chown=nextjs:nodejs /app/node_modules ./node_modules\nCOPY --chown=nextjs:nodejs . .\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 4: Turvalisus - l\u00fclitu mitte-root kasutajale\nUSER nextjs\n\nEXPOSE 3000\nENV PORT 3000\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 5: Automaatne tervise kontroll\n# Kontrollib iga 30 sekundi j\u00e4rel, kas rakendus t\u00f6\u00f6tab\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD curl -f http://localhost:3000/health || exit 1\n\nCMD [\"npm\", \"start\"]\n</code></pre> <p>Miks mitmeetapiline build on parem? - V\u00e4iksem image: Ainult runtime failid, mitte build t\u00f6\u00f6riistad - Kiirem start: V\u00e4hem failisid = kiirem container k\u00e4ivitumine - Turvalisem: V\u00e4hem haavatavusi, kuna build t\u00f6\u00f6riistad puuduvad</p>"},{"location":"ci_cd_advanced/lecture/#docker-turvaskaneerimine","title":"Docker Turvaskaneerimine","text":"<p>Miks see on edasij\u00f5udnud? - Automaatne skaneerimine: Iga Docker image skaneeritakse automaatselt - Mitme t\u00f6\u00f6riista kasutamine: Trivy + SecureCodeWarrior = p\u00f5hjalikum kontroll - Integratsioon pipeline'iga: Turvaskaneerimine on osa CI/CD protsessist - Vigade ennetamine: Leidab haavatavusi enne production'i</p> <pre><code># EDASIJ\u00d5UDNUD: Turvaskaneerimine pipeline'is\nsecurity:docker:\n  stage: security\n  image: docker:latest\n  services:\n    - docker:dind  # Docker-in-Docker teenus\n  script:\n    # ETAPP 1: Ehita Docker image\n    - docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA .\n\n    # ETAPP 2: Trivy skaneerimine - leiab haavatavusi\n    # EDASIJ\u00d5UDNUD FUNKTSIOON: P\u00f5hjalik haavatavuste anal\u00fc\u00fcs\n    - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \n        aquasec/trivy image $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n\n    # ETAPP 3: SecureCodeWarrior skaneerimine - t\u00e4iendav turvakontroll\n    # EDASIJ\u00d5UDNUD FUNKTSIOON: Mitme t\u00f6\u00f6riista kasutamine\n    - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \n        securecodewarrior/docker-security-scan:latest \n        $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n</code></pre> <p>Miks kasutada mitut turvaskaneerimise t\u00f6\u00f6riista? - Trivy: Leiab teadaolevad haavatavused (CVE) - SecureCodeWarrior: Leiab konfiguratsiooni probleeme - Kombineeritud tulemus: P\u00f5hjalikum turvakontroll</p> <p>Allikas: Docker Security Best Practices</p>"},{"location":"ci_cd_advanced/lecture/#infrastruktur-koodina-terraformiga","title":"Infrastruktur Koodina Terraform'iga","text":""},{"location":"ci_cd_advanced/lecture/#edasijoudnud-terraform-konfiguratsioon","title":"Edasij\u00f5udnud Terraform Konfiguratsioon","text":"<p>Miks see on edasij\u00f5udnud? - Oleku haldus: S3 backend + DynamoDB lukustamine - Modulaarne struktuur: Kasutab AWS mooduleid - Automaatne skaleerimine: ECS automaatne skaleerimine - Turvalisus: VPC privaatsed ja avalikud subnet'id - Tagimine: Automaatne ressursside tagimine</p> <pre><code># terraform/main.tf\n# EDASIJ\u00d5UDNUD FUNKTSIOON 1: Versiooni kontroll ja provider'ite haldus\nterraform {\n  required_version = \"&gt;= 1.0\"  # Tagab uusima Terraform versiooni\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~&gt; 5.0\"  # Uusim AWS provider\n    }\n  }\n\n  # EDASIJ\u00d5UDNUD FUNKTSIOON 2: Remote state haldus\n  backend \"s3\" {\n    bucket         = \"techshop-terraform-state\"  # State faili asukoht\n    key            = \"production/terraform.tfstate\"\n    region         = \"eu-west-1\"\n    encrypt        = true                        # Kr\u00fcpteeritud state\n    dynamodb_table = \"terraform-locks\"           # Lukustamine paralleelsete muudatuste vastu\n  }\n}\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 3: Keskkonna-spetsiifiline konfiguratsioon\nlocals {\n  environment = terraform.workspace  # Automaatne keskkonna tuvastamine\n  common_tags = {\n    Project     = \"TechShop\"\n    Environment = local.environment\n    ManagedBy   = \"Terraform\"\n    Owner       = \"DevOps Team\"\n  }\n}\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 4: VPC turvalisuse parimate praktikatega\nmodule \"vpc\" {\n  source = \"terraform-aws-modules/vpc/aws\"  # Kasutab testitud AWS moodulit\n\n  name = \"techshop-${local.environment}\"\n  cidr = var.vpc_cidr\n\n  # EDASIJ\u00d5UDNUD: Mitme availability zone kasutamine\n  azs             = [\"${var.aws_region}a\", \"${var.aws_region}b\"]\n  private_subnets = var.private_subnet_cidrs  # Privaatsed subnet'id (andmebaasid)\n  public_subnets  = var.public_subnet_cidrs   # Avalikud subnet'id (load balancer'id)\n\n  enable_nat_gateway = true   # NAT gateway privaatsete subnet'ide jaoks\n  enable_vpn_gateway = false  # VPN ei ole vajalik\n\n  tags = local.common_tags\n}\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 5: ECS Cluster automaatse skaleerimisega\nresource \"aws_ecs_cluster\" \"main\" {\n  name = \"techshop-${local.environment}\"\n\n  setting {\n    name  = \"containerInsights\"  # P\u00f5hjalik container j\u00e4lgimine\n    value = \"enabled\"\n  }\n\n  tags = local.common_tags\n}\n\n# EDASIJ\u00d5UDNUD FUNKTSIOON 6: Automaatse skaleerimise konfiguratsioon\nresource \"aws_appautoscaling_target\" \"ecs_target\" {\n  max_capacity       = 10  # Maksimaalne container'ite arv\n  min_capacity       = 2   # Minimaalne container'ite arv\n  resource_id        = \"service/${aws_ecs_cluster.main.name}/${aws_ecs_service.main.name}\"\n  scalable_dimension = \"ecs:service:DesiredCount\"\n  service_namespace  = \"ecs\"\n}\n</code></pre> <p>Miks see on ettev\u00f5tte-tasemel? - Oleku haldus: Remote state + lukustamine = meeskonna t\u00f6\u00f6 - Modulaarsus: AWS moodulid = testitud ja hooldatud kood - Skaleeritavus: Automaatne skaleerimine vastavalt koormusele - Turvalisus: VPC eraldamine ja NAT gateway</p> <p>Allikas: Terraform Best Practices</p>"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-cicd-pipeline-voo","title":"Edasij\u00f5udnud CI/CD Pipeline Voo","text":"<pre><code>flowchart TD\n    A[Koodi Commit] --&gt; B[Valideerimine]\n    B --&gt; C[Turvaskaneerimine]\n    C --&gt; D[Unit Testid]\n    C --&gt; E[Integratsiooni Testid]\n    C --&gt; F[J\u00f5udluse Testid]\n\n    D --&gt; G[Build Docker Image]\n    E --&gt; G\n    F --&gt; G\n\n    G --&gt; H[Turvaskaneerimine Image]\n    H --&gt; I[Push Registry'sse]\n\n    I --&gt; J{Keskkond?}\n    J --&gt;|Staging| K[Deploy Staging'isse]\n    J --&gt;|Production| L[Manuaalne Heakskiit]\n\n    K --&gt; M[Tervise Kontrollid]\n    L --&gt; N[Deploy Production'isse]\n    N --&gt; O[Production Tervise Kontrollid]\n\n    M --&gt; P[Smoke Testid]\n    O --&gt; Q[J\u00e4lgimine ja Hoiatused]\n\n    B --&gt; R[Valideerimine Eba\u00f5nnestus]\n    C --&gt; S[Turva Probleemid]\n    D --&gt; T[Testid Eba\u00f5nnestus]\n    E --&gt; T\n    F --&gt; T\n    H --&gt; U[Haavatavused Leitud]\n\n    R --&gt; V[Paranda ja Proovi Uuesti]\n    S --&gt; V\n    T --&gt; V\n    U --&gt; V\n    V --&gt; A\n\n    P --&gt; W[Deploy \u00d5nnestus]\n    Q --&gt; X[Production Valmis]</code></pre> <p>Allikas: CI/CD Pipeline Design Patterns</p>"},{"location":"ci_cd_advanced/lecture/#turvalisus-esikohal-cicd-rakendamine","title":"Turvalisus-Esikohal CI/CD Rakendamine","text":""},{"location":"ci_cd_advanced/lecture/#saladuste-haldus","title":"Saladuste Haldus","text":"<pre><code># \u00c4ra kunagi hardcode'i saladusi - kasuta GitLab CI/CD muutujaid\nvariables:\n  # Need on seadistatud GitLab UI's Settings &gt; CI/CD &gt; Variables\n  AWS_ACCESS_KEY_ID: $AWS_ACCESS_KEY_ID\n  AWS_SECRET_ACCESS_KEY: $AWS_SECRET_ACCESS_KEY\n  DATABASE_PASSWORD: $DATABASE_PASSWORD\n  API_SECRET_KEY: $API_SECRET_KEY\n\n# Kasuta kaitstud muutujaid tootmise jaoks\ndeploy:production:\n  variables:\n    ENVIRONMENT: \"production\"\n  script:\n    - echo \"Deploying with secure credentials\"\n    - ./scripts/deploy.sh\n  only:\n    variables:\n      - $CI_COMMIT_TAG\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#turvaskaneerimise-pipeline","title":"Turvaskaneerimise Pipeline","text":"<pre><code># P\u00f5hjalik turvaskaneerimine\nsecurity:comprehensive:\n  stage: security\n  image: securecodewarrior/security-scan:latest\n  script:\n    # SAST - Static Application Security Testing\n    - semgrep --config=auto .\n    - bandit -r . -f json -o bandit-report.json\n\n    # S\u00f5ltuvuste skaneerimine\n    - safety check --json --output safety-report.json\n    - npm audit --audit-level moderate\n\n    # Konteineri turvalisus\n    - trivy image --severity HIGH,CRITICAL $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n\n    # Infrastruktuuri turvalisus\n    - checkov -d terraform/ --framework terraform\n  artifacts:\n    reports:\n      sast: bandit-report.json\n      dependency_scanning: safety-report.json\n    paths:\n      - security-reports/\n    expire_in: 1 week\n  allow_failure: false\n</code></pre> <p>Allikas: Security-First CI/CD Practices</p>"},{"location":"ci_cd_advanced/lecture/#joudluse-optimeerimise-strateegiad","title":"J\u00f5udluse Optimeerimise Strateegiad","text":""},{"location":"ci_cd_advanced/lecture/#pipeline-optimeerimise-tehnikad","title":"Pipeline Optimeerimise Tehnikad","text":"<pre><code># Paralleelne t\u00e4itmine kiiremate pipeline'ide jaoks\ntest:parallel:\n  stage: test\n  parallel:\n    matrix:\n      - TEST_SUITE: [\"unit\", \"integration\", \"e2e\"]\n      - NODE_VERSION: [\"18\", \"20\"]\n  script:\n    - npm run test:$TEST_SUITE\n  cache:\n    key: ${CI_COMMIT_REF_SLUG}-${TEST_SUITE}\n    paths:\n      - node_modules/\n      - test-results/\n\n# Optimeeritud Docker build'id BuildKit'iga\nbuild:optimized:\n  stage: build\n  variables:\n    DOCKER_BUILDKIT: 1\n    BUILDKIT_PROGRESS: plain\n  script:\n    - docker build \n        --cache-from $CI_REGISTRY_IMAGE:cache\n        --cache-to $CI_REGISTRY_IMAGE:cache\n        --target production\n        -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n        .\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-caching-strateegiad","title":"Edasij\u00f5udnud Caching Strateegiad","text":"<pre><code># Mitmetasemeline caching\ncache:\n  key: \n    files:\n      - package-lock.json\n      - requirements.txt\n      - Dockerfile\n  paths:\n    - node_modules/\n    - .npm/\n    - venv/\n    - .cache/\n  policy: pull-push\n\n# Job-spetsiifiline cache optimeerimine\ntest:unit:\n  cache:\n    key: ${CI_COMMIT_REF_SLUG}-test\n    paths:\n      - test-results/\n      - coverage/\n    policy: pull\n</code></pre> <p>Allikas: Pipeline Performance Optimization</p>"},{"location":"ci_cd_advanced/lecture/#jalgimine-ja-jalgitavus","title":"J\u00e4lgimine ja J\u00e4lgitavus","text":""},{"location":"ci_cd_advanced/lecture/#rakenduse-joudluse-jalgimine","title":"Rakenduse J\u00f5udluse J\u00e4lgimine","text":"<pre><code># Post-deployment j\u00e4lgimine\nmonitor:deployment:\n  stage: monitor\n  image: curlimages/curl:latest\n  script:\n    # Tervise kontrollid\n    - curl -f $DEPLOY_URL/health || exit 1\n    - curl -f $DEPLOY_URL/ready || exit 1\n\n    # J\u00f5udluse kontrollid\n    - response_time=$(curl -o /dev/null -s -w '%{time_total}' $DEPLOY_URL)\n    - if (( $(echo \"$response_time &gt; 2.0\" | bc -l) )); then exit 1; fi\n\n    # Meetrikate valideerimine\n    - curl -f $DEPLOY_URL/metrics | grep -q \"http_requests_total\"\n\n    echo \"K\u00f5ik j\u00e4lgimise kontrollid \u00f5nnestusid\"\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  needs:\n    - deploy:staging\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#prometheus-ja-grafana-integratsioon","title":"Prometheus ja Grafana Integratsioon","text":"<pre><code># Meetrikate kogumise t\u00f6\u00f6\ncollect:metrics:\n  stage: monitor\n  image: prom/prometheus:latest\n  script:\n    - promtool check config /etc/prometheus/prometheus.yml\n    - curl -X POST http://prometheus:9090/-/reload\n  variables:\n    PROMETHEUS_URL: \"http://prometheus:9090\"\n</code></pre> <p>Allikas: DevOps Monitoring Best Practices</p>"},{"location":"ci_cd_advanced/lecture/#tulemused-enne-vs-parast-rakendamist","title":"Tulemused: Enne vs P\u00e4rast Rakendamist","text":"N\u00e4itaja Enne (K\u00e4sitsi) P\u00e4rast (Automatiseeritud) Paranemine Deployment Aeg 2-4 tundi 5-10 minutit 95% kiirem Vigade M\u00e4\u00e4r 30-40% 2-5% 85% v\u00e4henemine Rollback Aeg 1-2 tundi 2-5 minutit 95% kiirem Deployment Sagedus 1x n\u00e4dalas 5-10x p\u00e4evas 10x suurenemine Arendajate Stress K\u00f5rge Madal Oluline leevendus Turva Haavatavused K\u00e4sitsi, ebaj\u00e4rjekindel Automatiseeritud skaneerimine 100% katvus Infrastruktuuri Drift Tavaline Elimineeritud 100% j\u00e4rjepidevus Keskmine Taastumisaeg 2-4 tundi 15-30 minutit 90% paranemine <p>Allikas: DevOps Transformation Metrics</p>"},{"location":"ci_cd_advanced/lecture/#production-troubleshooting-advanced-scenarios","title":"Production Troubleshooting: Advanced Scenarios","text":""},{"location":"ci_cd_advanced/lecture/#scenario-1-502-bad-gateway-error","title":"Scenario 1: 502 Bad Gateway Error","text":"Step Command/Action Purpose Pipeline Check <code>gitlab-ci-lint .gitlab-ci.yml</code> Validate CI configuration Container Status <code>docker ps</code>, <code>docker logs techshop-app</code> Check container health Load Balancer <code>kubectl get svc</code>, <code>kubectl describe svc</code> Verify service endpoints Database Connection <code>mysql -h db.techshop.com -u user -p</code> Test database connectivity Network Policies <code>kubectl get networkpolicies</code> Check security rules Resource Limits <code>kubectl top pods</code>, <code>kubectl describe pod</code> Verify resource constraints Solution Update Terraform config, redeploy with Ansible Fix and restore service"},{"location":"ci_cd_advanced/lecture/#scenario-2-performance-degradation","title":"Scenario 2: Performance Degradation","text":"Step Command/Action Purpose Metrics Check <code>curl $PROMETHEUS_URL/api/v1/query?query=response_time</code> Analyze performance metrics Log Analysis <code>kubectl logs -f deployment/techshop-app</code> Identify bottlenecks Resource Usage <code>kubectl top nodes</code>, <code>kubectl top pods</code> Check resource utilization Auto-scaling <code>kubectl get hpa</code>, <code>kubectl describe hpa</code> Verify scaling behavior Database Performance <code>mysql -e \"SHOW PROCESSLIST\"</code> Check database queries Solution Scale resources, optimize queries, update HPA Restore performance"},{"location":"ci_cd_advanced/lecture/#scenario-3-security-incident-response","title":"Scenario 3: Security Incident Response","text":"Step Command/Action Purpose Threat Detection Check security scan reports, SIEM alerts Identify security issues Container Scan <code>trivy image techshop:latest</code> Scan for vulnerabilities Network Analysis <code>kubectl get networkpolicies</code>, <code>kubectl logs</code> Check network traffic Access Review Review RBAC policies, audit logs Verify access controls Incident Response Isolate affected systems, patch vulnerabilities Contain and remediate Post-Incident Update security policies, improve monitoring Prevent future incidents"},{"location":"ci_cd_advanced/lecture/#reaalne-naide-ettevotte-tasemel-cicd-automatiseerimine","title":"Reaalne N\u00e4ide: Ettev\u00f5tte-tasemel CI/CD Automatiseerimine","text":""},{"location":"ci_cd_advanced/lecture/#deployment-machine-null-downtime-auto-healing-susteem","title":"\"Deployment Machine\" - Null-Downtime, Auto-Healing S\u00fcsteem","text":"<p>See on p\u00f5hjalik n\u00e4ide, kuidas \u00fcks ettev\u00f5te ehitas t\u00e4ielikult automatiseeritud, turvalise ja null-downtime deployment s\u00fcsteemi. See n\u00e4itab, kuidas k\u00f5ik edasij\u00f5udnud tehnikad t\u00f6\u00f6tavad koos reaalses keskkonnas.</p> <p>Allikas: The CI/CD Pipeline Upgrade That Took Our Deploys From Stressful to Effortless</p>"},{"location":"ci_cd_advanced/lecture/#probleem-vs-eesmark","title":"Probleem vs Eesm\u00e4rk","text":"<p>Probleem: - Deployment'id olid riskantsed, manuaalsed, \u00f6\u00f6sel tehtavad ja l\u00e4bipaistmatud - K\u00f5rge vigade t\u00f5en\u00e4osus - Pikk taastumisaeg probleemide korral</p> <p>Eesm\u00e4rk: - Kiire ja turvaline tarnimine - Null-downtime release'id - Kohene rollback - Sisseehitatud turvalisus - Rikas j\u00e4lgitavus</p>"},{"location":"ci_cd_advanced/lecture/#10-pohilist-komponenti","title":"10 P\u00f5hilist Komponenti","text":"<p>1. Nutikas Branching ja Kiire Tagasiside</p> <pre><code># EDASIJ\u00d5UDNUD: V\u00e4ikeste muudatuste strateegia\nbranching_strategy:\n  type: \"trunk-based\"\n  max_pr_size: \"300 rida\"\n  required_reviews: 2\n  status_checks:\n    - lint\n    - unit_tests\n    - sast\n    - secrets_scan\n  conventional_commits: true  # feat:, fix: \u2192 automaatne versioneerimine\n</code></pre> <p>2. Supply Chain Turvalisus (CI-sse sisse ehitatud)</p> <pre><code># EDASIJ\u00d5UDNUD: T\u00e4ielik turvalisuse kontroll\nsecurity_pipeline:\n  sbom:\n    tool: \"CycloneDX\"\n    action: \"produce_on_every_build\"\n    attach_as: \"artifact_and_label\"\n\n  image_signing:\n    tool: \"Cosign\"\n    policy: \"only_signed_images_in_cluster\"\n\n  vulnerability_scan:\n    tools: [\"Trivy\", \"Grype\"]\n    fail_on: \"Critical/High\"\n    allowlist: \"time_bound\"\n\n  provenance:\n    tool: \"SLSA_attestation\"\n    store_with: \"image\"\n</code></pre> <p>3. Efemeersed Preview Keskkonnad</p> <pre><code># EDASIJ\u00d5UDNUD: Iga PR jaoks automaatne keskkond\npreview_environments:\n  trigger: \"on_pr_creation\"\n  process:\n    - create_namespace\n    - deploy_with_helm_kustomize\n    - run_smoke_and_contract_tests\n    - post_url_to_pr\n    - auto_destroy_on_close\n  data:\n    seed_with: \"masked_test_data\"\n    disable: \"external_callbacks\"\n</code></pre> <p>4. GitOps CD (Deklaratiivne, Audititav)</p> <pre><code># EDASIJ\u00d5UDNUD: Git kui t\u00f5e allikas\ngitops_setup:\n  repositories:\n    app_repo: \"code\"\n    env_repo: \"manifests\"\n\n  process:\n    ci_updates: \"image_tag_in_env_repo\"\n    argo_cd_syncs: \"clusters_to_env_repo_state\"\n    drift_detection: \"alerts_enabled\"\n\n  rollback: \"git_revert\"\n</code></pre> <p>5. Progressiivne Tarnimine (Argo Rollouts)</p> <pre><code># EDASIJ\u00d5UDNUD: Canary deployment strateegia\nprogressive_delivery:\n  tool: \"Argo_Rollouts\"\n  canary_plan:\n    steps:\n      - \"5% \u2192 pause(5m)\"\n      - \"25% \u2192 pause(10m)\" \n      - \"50% \u2192 pause(10m)\"\n      - \"100%\"\n\n  automated_analysis:\n    metrics_source: \"Prometheus/Datadog\"\n    check_metrics:\n      - \"error_rate_5xx\"\n      - \"p95_latency\"\n      - \"resource_saturation\"\n      - \"business_kpi_checkout_success\"\n\n    promotion_conditions:\n      score: \"\u2265 threshold for N intervals\"\n\n    auto_rollback:\n      trigger: \"error_rate &gt;1% for 2 consecutive intervals\"\n</code></pre> <p>6. Post-Deploy Kvaliteedi V\u00e4ravad</p> <pre><code># EDASIJ\u00d5UDNUD: \"Deploy \u00f5nnestus\" \u2260 \"see on hea\"\npost_deploy_quality:\n  dast:\n    tool: \"ZAP\"\n    environment: \"staging\"\n\n  e2e_tests:\n    tools: [\"Playwright\", \"Cypress\"]\n    type: \"smoke_post_release\"\n\n  load_tests:\n    tool: \"k6\"\n    schedule: \"off_peak\"\n    compare_to: \"SLO_budgets\"\n</code></pre> <p>7. Governance ja Policy-as-Code</p> <pre><code># EDASIJ\u00d5UDNUD: Compliance ilma inimeste ummikute\ngovernance:\n  policy_engines: [\"Kyverno\", \"OPA_Gatekeeper\"]\n\n  rules:\n    - \"enforce_resource_limits_requests\"\n    - \"block_privileged_hostpath\"\n    - \"require_image_signature_sbom_labels\"\n\n  infrastructure:\n    tool: \"Terraform\"\n    cost_analysis: \"Infracost_comments_on_MR\"\n</code></pre> <p>8. Observability Esikohal (OTel + SLOs)</p> <pre><code># EDASIJ\u00d5UDNUD: Kui sa ei n\u00e4e, ei saa \u00f5igeaegselt rollback'ida\nobservability:\n  instrumentation: \"OpenTelemetry\"\n  data_types: [\"traces\", \"metrics\", \"logs\"]\n\n  slos:\n    - \"availability\"\n    - \"latency_p95\"\n    - \"error_rate\"\n    - \"error_budget\"\n\n  release_dashboards:\n    show: \"canary_vs_stable_metrics\"\n    display: \"rollout_step_aca_score\"\n</code></pre> <p>9. Resilientsus ja Andmete Turvalisus</p> <pre><code># EDASIJ\u00d5UDNUD: Enamik \"halbu deploy'e\" on andmeprobleemid\nresilience:\n  db_migrations:\n    pattern: \"expand_contract\"\n    requirement: \"backward_compatible_reads\"\n\n  feature_flags:\n    tools: [\"LaunchDarkly\", \"OpenFeature\"]\n    use_cases: [\"kill_switches\", \"gradual_exposure\"]\n\n  chaos_testing:\n    schedule: \"nightly_smoke_non_prod\"\n    tests: [\"pod_kill\", \"node_drain\"]\n    verify: \"self_heal_works\"\n</code></pre> <p>10. Saladuste ja Juurdep\u00e4\u00e4su Haldus</p> <pre><code># EDASIJ\u00d5UDNUD: V\u00e4him privileeg ja audititavad muudatused\nsecrets_management:\n  workload_identity: \"OIDC_for_CI_to_cluster\"\n  external_secrets: \"AWS_Secrets_Manager_HashiCorp_Vault\"\n  csi_driver: \"secrets_to_pods\"\n  rotation: \"no_long_lived_tokens_in_CI\"\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#konkreetne-roll-forwardrollback-loogika","title":"Konkreetne Roll-Forward/Rollback Loogika","text":"<pre><code># EDASIJ\u00d5UDNUD: Kopeeritav loogika\npromotion_logic:\n  promote_when:\n    - \"last_3_analysis_intervals_pass\"\n    - \"no_paging_alerts\"\n    - \"business_kPI_within_\u00b12%_baseline\"\n\n  rollback_when:\n    - \"error_rate &gt;1% for 2 intervals\"\n    - \"p95 &gt; SLO+20%\"\n    - \"crashloop \u2265 N\"\n\n  freeze:\n    trigger: \"auto_change_freeze_on_incident_SEV-2+\"\n    until: \"postmortem_actions_merged\"\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#tuupilised-probleemid-ja-lahendused","title":"T\u00fc\u00fcpilised Probleemid ja Lahendused","text":"Probleem Lahendus Aeglane CI (&gt;15 min) Jagatud job'id, test maatriks selektiivselt, cache s\u00f5ltuvused, shard testid Ebakindlad testid Karantiin + \u00f6\u00f6sel; \u00e4ra blokeeri release'e teadaolevate flake'ide t\u00f5ttu Policy m\u00fcra Alusta \"audit\" re\u017eiimis; edenda \"enforce\" re\u017eiimi reegli kaupa Canary valepositiivid Pikenda intervalli, stabiliseeri meetrikad, soenda cache'id DB \u00fchildumatus Kohusta tagasi\u00fchilduvaid deploy'e; kui mitte, siis Blue/Green"},{"location":"ci_cd_advanced/lecture/#minimaalne-adoptsiooni-plaan-4-sprinti","title":"Minimaalne Adoptsiooni Plaan (4 Sprint'i)","text":"<pre><code># EDASIJ\u00d5UDNUD: Samm-sammult rakendamine\nsprint_1:\n  focus: \"Harden CI\"\n  tasks:\n    - \"SAST, secrets scan, SBOM, signing\"\n    - \"Target: 10-min CI\"\n\nsprint_2:\n  focus: \"Argo CD + env repo\"\n  tasks:\n    - \"Basic deploys\"\n    - \"SLOs defined\"\n\nsprint_3:\n  focus: \"Argo Rollouts canary\"\n  tasks:\n    - \"Prometheus checks\"\n    - \"Slack notifications\"\n\nsprint_4:\n  focus: \"Policy enforcement\"\n  tasks:\n    - \"Signed images, resources\"\n    - \"Preview envs on PRs\"\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#moodetavad-naitajad-exec-dashboard","title":"M\u00f5\u00f5detavad N\u00e4itajad (Exec Dashboard)","text":"<ul> <li>Lead time for changes - muudatuste aeg</li> <li>Deployment frequency - deployment'ide sagedus  </li> <li>Change failure rate - muudatuste eba\u00f5nnestumise m\u00e4\u00e4r</li> <li>MTTR - keskmine taastumisaeg</li> <li>Error budget burn - vea eelarve p\u00f5letamine</li> <li>% auto-rollbacks vs manual - automaatse vs manuaalse rollback'i suhe</li> <li>Cost per release - kulud release'i kohta</li> </ul> <p>Allikas: Advanced CI/CD Pipeline Case Study</p>"},{"location":"ci_cd_advanced/lecture/#edasijoudnud-automatiseerimise-projektide-struktuur","title":"Edasij\u00f5udnud Automatiseerimise Projektide Struktuur","text":""},{"location":"ci_cd_advanced/lecture/#ettevotte-tasemel-devops-projekt","title":"Ettev\u00f5tte-tasemel DevOps Projekt","text":"<p>Loo p\u00f5hjalik automatiseerimise projekt j\u00e4rgmise ettev\u00f5tte-tasemel struktuuriga:</p> <pre><code>techshop-enterprise-devops/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 terraform/\n\u2502   \u2502   \u251c\u2500\u2500 environments/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 staging/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 production/\n\u2502   \u2502   \u251c\u2500\u2500 modules/\n\u2502   \u2502   \u2514\u2500\u2500 state/\n\u2502   \u2514\u2500\u2500 ansible/\n\u2502       \u251c\u2500\u2500 playbooks/\n\u2502       \u251c\u2500\u2500 roles/\n\u2502       \u2514\u2500\u2500 inventory/\n\u251c\u2500\u2500 applications/\n\u2502   \u251c\u2500\u2500 frontend/\n\u2502   \u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u2502   \u2514\u2500\u2500 .gitlab-ci.yml\n\u2502   \u251c\u2500\u2500 backend/\n\u2502   \u2502   \u251c\u2500\u2500 Dockerfile\n\u2502   \u2502   \u2514\u2500\u2500 .gitlab-ci.yml\n\u2502   \u2514\u2500\u2500 shared/\n\u251c\u2500\u2500 ci-cd/\n\u2502   \u251c\u2500\u2500 .gitlab-ci/\n\u2502   \u2502   \u251c\u2500\u2500 build.yml\n\u2502   \u2502   \u251c\u2500\u2500 test.yml\n\u2502   \u2502   \u251c\u2500\u2500 security.yml\n\u2502   \u2502   \u2514\u2500\u2500 deploy.yml\n\u2502   \u2514\u2500\u2500 scripts/\n\u251c\u2500\u2500 monitoring/\n\u2502   \u251c\u2500\u2500 prometheus/\n\u2502   \u251c\u2500\u2500 grafana/\n\u2502   \u2514\u2500\u2500 alertmanager/\n\u251c\u2500\u2500 security/\n\u2502   \u251c\u2500\u2500 policies/\n\u2502   \u251c\u2500\u2500 scans/\n\u2502   \u2514\u2500\u2500 compliance/\n\u251c\u2500\u2500 documentation/\n\u2502   \u251c\u2500\u2500 architecture/\n\u2502   \u251c\u2500\u2500 runbooks/\n\u2502   \u2514\u2500\u2500 troubleshooting/\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"ci_cd_advanced/lecture/#pohilised-automatiseerimise-oskused","title":"P\u00f5hilised Automatiseerimise Oskused","text":"<p>Tehnilised Oskused:</p> <ul> <li>Edasij\u00f5udnud GitLab CI/CD: Mitmeetapilised pipeline'id, paralleelne t\u00e4itmine, turvaskaneerimine</li> <li>Konteineri Orkestreerimine: Docker, Kubernetes, Helm chart'id</li> <li>Infrastruktur Koodina: Terraform, Ansible, CloudFormation</li> <li>Turvalisus: SAST/DAST, haavatavuste skaneerimine, saladuste haldus</li> <li>J\u00e4lgimine: Prometheus, Grafana, ELK stack, APM t\u00f6\u00f6riistad</li> <li>Pilve Platvormid: AWS, Azure, GCP mitme regiooni deployment'idega</li> </ul> <p>Automatiseerimise Kultuur:</p> <ul> <li>DevOps Kultuur: Koost\u00f6\u00f6, automatiseerimise m\u00f5tlemine, pidev parandamine</li> <li>Incident Response: On-call protseduurid, post-mortem anal\u00fc\u00fcs</li> <li>Dokumentatsioon: Tehniline kirjutamine, runbook'id, arhitektuuri diagrammid</li> <li>Juhtimine: Mentoring, teadmiste jagamine, protsesside parandamine</li> </ul>"},{"location":"ci_cd_advanced/lecture/#best-practices-summary","title":"Best Practices Summary","text":""},{"location":"ci_cd_advanced/lecture/#1-security-first-approach","title":"1. Security-First Approach","text":"<ul> <li>Never hardcode secrets in code</li> <li>Implement comprehensive security scanning</li> <li>Use least-privilege access principles</li> <li>Regular security audits and updates</li> </ul>"},{"location":"ci_cd_advanced/lecture/#2-pipeline-optimization","title":"2. Pipeline Optimization","text":"<ul> <li>Use parallel execution where possible</li> <li>Implement intelligent caching strategies</li> <li>Optimize Docker builds with multi-stage builds</li> <li>Monitor pipeline performance metrics</li> </ul>"},{"location":"ci_cd_advanced/lecture/#3-infrastructure-as-code","title":"3. Infrastructure as Code","text":"<ul> <li>Version control all infrastructure</li> <li>Use modular, reusable components</li> <li>Implement proper state management</li> <li>Regular drift detection and remediation</li> </ul>"},{"location":"ci_cd_advanced/lecture/#4-monitoring-observability","title":"4. Monitoring &amp; Observability","text":"<ul> <li>Implement comprehensive logging</li> <li>Set up meaningful alerts and SLIs</li> <li>Use distributed tracing</li> <li>Regular capacity planning</li> </ul>"},{"location":"ci_cd_advanced/lecture/#5-continuous-improvement","title":"5. Continuous Improvement","text":"<ul> <li>Regular retrospectives and post-mortems</li> <li>Measure and track key metrics</li> <li>Automate repetitive tasks</li> <li>Foster a culture of learning</li> </ul>"},{"location":"ci_cd_advanced/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>See ettev\u00f5tte-tasemel DevOps automatiseerimise rakendamine toob kaasa:</p> <p>Operatsionaalne T\u00e4iuslikkus:</p> <ul> <li>95% kiiremad deployment'id (4 tundi \u2192 10 minutit)</li> <li>85% v\u00e4hem vigu (40% \u2192 5% eba\u00f5nnestumise m\u00e4\u00e4r)</li> <li>10x sagedamad deployment'id (n\u00e4dalas \u2192 p\u00e4evas)</li> <li>90% kiirem incident response (4 tundi \u2192 30 minutit)</li> </ul> <p>\u00c4ri V\u00e4\u00e4rtus:</p> <ul> <li>V\u00e4hendatud operatsioonikulud automatiseerimise kaudu</li> <li>Parandatud arendajate produktiivsus self-service deployment'idega</li> <li>Tugevdatud turvalisuse positsioon automatiseeritud skaneerimisega</li> <li>Parem kliendi kogemus kiiremate funktsioonide tarnimisega</li> </ul> <p>Automatiseerimise M\u00f5ju:</p> <ul> <li>T\u00e4ielik automatiseerimine k\u00f5igist manuaalsetest protsessidest</li> <li>Pidev parandamine m\u00f5\u00f5detavate meetrikate kaudu</li> <li>Skaleeritav lahendus mis kasvab koos ettev\u00f5ttega</li> <li>Tugev automatiseerimise kultuur meeskonnas</li> </ul> <p>Edu v\u00f5ti on CI/CD pipeline'i k\u00e4sitlemine tootmiskoodina - versiooni kontroll, testi, j\u00e4lgi ja paranda pidevalt. See l\u00e4henemine mitte ainult ei muuda deployment protsessi, vaid loob ka tugeva automatiseerimise aluse ettev\u00f5tte jaoks.</p> <p>Pea meeles: DevOps ei ole ainult t\u00f6\u00f6riistad - see on kultuur, koost\u00f6\u00f6 ja pidev parandamine.</p>"},{"location":"docker_fundamentals/homework/","title":"S\u00fcsteemi Oleku Dashboard Deployment","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: \u00d5ppida Docker ja Podman container'ite kasutamist praktikas (v\u00f5ib olla keeruline, aga j\u00f5ukohane)</p> <p>Te saate valmis veebisaidi - keskenduge container tehnoloogiate \u00f5ppimisele!</p>"},{"location":"docker_fundamentals/homework/#task-1-projekt-susteemi-oleku-dashboard","title":"Task 1: Projekt: S\u00fcsteemi Oleku Dashboard","text":"<p>Mida see teeb: - N\u00e4itab container informatsiooni - Kuvab serveri olekut - V\u00f5imaldab testida connectivity - Eristab Docker vs Podman deployment</p> <p>Mida te \u00f5pite: - Docker ja Podman deployment - Environment variables kasutamine - Container networking - docker-compose orchestration</p>"},{"location":"docker_fundamentals/homework/#task-2-kloonige-starter-repository","title":"Task 2: Kloonige starter repository","text":""},{"location":"docker_fundamentals/homework/#ulesanne-21-kloonige-kodutoo-starter-repository","title":"\u00dclesanne 2.1: Kloonige kodut\u00f6\u00f6 starter repository","text":"<pre><code># Clone valmis starter repository\ngit clone https://github.com/teacher/docker-dashboard-starter.git\ncd docker-dashboard-starter\n\n# Loo oma branch\ngit checkout -b homework-TEIE-NIMI\n\n# N\u00e4iteks: git checkout -b homework-maria-talvik\n</code></pre> <p>Mida me saime? - Valmis HTML dashboard - Dockerfile template - docker-compose.yml - nginx.conf konfiguratsioon - README dokumentatsioon</p> <p>Ei pea ise kirjutama - fookus container'itel!</p>"},{"location":"docker_fundamentals/homework/#tutvuge-starter-failidega","title":"Tutvuge starter failidega","text":"<p>Kontrollige, mis failid on olemas: <pre><code>ls -la\n# Peaksite n\u00e4gema:\n# index.html - Dashboard rakendus\n# Dockerfile - Container juhised\n# docker-compose.yml - Multi-container setup\n# nginx.conf - Web server config\n# README.md - Dokumentatsioon\n</code></pre></p> <p><code>index.html</code> on valmis dashboard rakendus - see n\u00e4itab: - Container runtime info (Docker/Podman) - S\u00fcsteemi olek ja uptime - Interaktiivsed nupud testimiseks - Responsive disain</p>"},{"location":"docker_fundamentals/homework/#testage-starter-rakendust-brauseris","title":"Testage starter rakendust brauseris","text":"<pre><code># Avage index.html otse brauseris (ilma container'ita)\nopen index.html\n# V\u00f5i Linux'is: firefox index.html\n\n# Dashboard peaks avanema ja n\u00e4itama:\n# - S\u00fcsteemi oleku info\n# - Container runtime: \"Unknown\" \n# - Interactive buttons t\u00f6\u00f6tavad\n</code></pre> <p>Mida need failid teevad? - <code>index.html</code> - Dashboard rakendus (juba valmis!) - <code>Dockerfile</code> - Container ehitamise juhised - <code>docker-compose.yml</code> - Mitme-container haldamine - <code>nginx.conf</code> - Veebserveri t\u00e4psemad seadistused</p>"},{"location":"docker_fundamentals/homework/#docker-container-loomine","title":"Docker container loomine**","text":""},{"location":"docker_fundamentals/homework/#tutvuge-dockerfileiga","title":"Tutvuge Dockerfile'iga","text":"<p>Vaadake olemas olevat <code>Dockerfile</code> faili: <pre><code>cat Dockerfile\n</code></pre></p> <p>Dockerfile sisu ja selgitus: <pre><code>FROM nginx:alpine              # Kasutame nginx web server'it\nCOPY index.html /usr/share/nginx/html/   # Kopeerime HTML faili\nCOPY nginx.conf /etc/nginx/conf.d/default.conf  # Custom config\nEXPOSE 80                      # Container port 80\n</code></pre></p> <p>Mida see teeb: - Alustab nginx serveriga (v\u00e4ike Alpine Linux) - Kopeerib meie HTML faili \u00f5igesse kohta - Lisab custom nginx konfiguratsiooni - Avab port 80 HTTP liikluseks</p>"},{"location":"docker_fundamentals/homework/#testige-docker-build","title":"Testige Docker build","text":"<pre><code># Ehitage container image\ndocker build -t my-dashboard .\n\n# Mida see k\u00e4sk teeb?\n# - Loeb Dockerfile faili\n# - Laadib nginx:alpine image\n# - Kopeerib index.html faili\n# - Loob uue image nimega \"my-dashboard\"\n\n# Kontrollige, et image on loodud\ndocker images | grep my-dashboard\n</code></pre>"},{"location":"docker_fundamentals/homework/#esimene-commit-oma-branchiga","title":"Esimene commit oma branch'iga","text":"<pre><code># Commit esialgsed muudatused (kui tegite m\u00f5nda)\ngit add .\ngit commit -m \"Alustasin kodut\u00f6\u00f6d: kontrollisin starter failid ja Docker build\"\n\n# Push oma branch GitHub'i\ngit push origin homework-TEIE-NIMI\n\n# Miks me commit'ime?\n# - Salvestame oma t\u00f6\u00f6 progressi\n# - N\u00e4itame, et alustasime t\u00f6\u00f6d\n# - Saame tagasina kui midagi l\u00e4heb valesti\n</code></pre>"},{"location":"docker_fundamentals/homework/#task-3-samm-3-containerite-kaivitamine","title":"Task 3: Samm 3: Container'ite k\u00e4ivitamine","text":""},{"location":"docker_fundamentals/homework/#dockeriga-deploy","title":"Docker'iga deploy","text":"<pre><code># K\u00e4ivitage container\ndocker run -d --name my-docker-app -p 8080:80 my-dashboard\n\n# Mida see k\u00e4sk teeb?\n# -d = detached mode (taustal)\n# --name = anname container'ile nime \"my-docker-app\"\n# -p 8080:80 = \u00fchendame host port 8080 \u2192 container port 80\n# my-dashboard = kasutame meie loodud image't\n\n# Kontrollige, et container t\u00f6\u00f6tab\ndocker ps\n\n# Testidige brauseris\necho \"Avage brauser: http://localhost:8080\"\n</code></pre>"},{"location":"docker_fundamentals/homework/#podmaniga-deploy","title":"Podman'iga deploy","text":"<pre><code># Ehitage image Podman'iga\npodman build -t my-dashboard-podman .\n\n# K\u00e4ivitage Podman container\npodman run -d --name my-podman-app -p 8081:80 my-dashboard-podman\n\n# Kontrollige Podman container'eid\npodman ps\n\n# Testidige brauseris\necho \"Avage brauser: http://localhost:8081\"\n</code></pre> <p>Docker vs Podman erinevused: - Docker vajab daemon'it (background service) - Podman t\u00f6\u00f6tab ilma daemon'ita - K\u00e4sud on peaaegu identilised - M\u00f5lemad kasutavad sama container format</p>"},{"location":"docker_fundamentals/homework/#docker-compose-kasutamine","title":"Docker-compose kasutamine","text":"<p>Looge <code>docker-compose.yml</code> fail: <pre><code>version: '3.8'\n\nservices:\n  dashboard:\n    build: .\n    ports:\n      - \"8080:80\"\n    container_name: compose-dashboard\n</code></pre></p> <p>K\u00e4ivitage docker-compose'iga: <pre><code># Ehitage ja k\u00e4ivitage\ndocker-compose up -d\n\n# Mida see teeb?\n# - Loeb docker-compose.yml faili\n# - Ehitab image kui vaja\n# - K\u00e4ivitab container'i\n# - Seadistab networking automaatselt\n\n# Kontrollige\ndocker-compose ps\n\n# Testidige: http://localhost:8080\n</code></pre></p>"},{"location":"docker_fundamentals/homework/#commit-oma-edu","title":"Commit oma edu","text":"<pre><code>git add docker-compose.yml\ngit commit -m \"Docker ja Podman deployment t\u00f6\u00f6tab - m\u00f5lemad testitud\"\n</code></pre>"},{"location":"docker_fundamentals/homework/#task-4-containerite-haldamine","title":"Task 4: Container'ite haldamine**","text":""},{"location":"docker_fundamentals/homework/#containerite-info-vaatamine","title":"Container'ite info vaatamine","text":"<pre><code># Vaadake k\u00f5iki t\u00f6\u00f6tavaid container'eid\ndocker ps\n\n# Vaadake container'i logisid\ndocker logs my-docker-app\n\n# Sisenege container'isse (debugging)\ndocker exec -it my-docker-app sh\n\n# Container'ist v\u00e4ljumine\nexit\n</code></pre> <p>Mida need k\u00e4sud teevad? - <code>docker ps</code> - n\u00e4itab t\u00f6\u00f6tavaid container'eid - <code>docker logs</code> - n\u00e4itab container'i v\u00e4ljundit - <code>docker exec -it</code> - lubab container'isse siseneda</p>"},{"location":"docker_fundamentals/homework/#containerite-peatamine-ja-kustutamine","title":"Container'ite peatamine ja kustutamine","text":"<pre><code># Peatage container\ndocker stop my-docker-app\n\n# Kustutage container\ndocker rm my-docker-app\n\n# Teha m\u00f5lemat korraga\ndocker rm -f my-docker-app\n\n# Kustutage ka image (kui vaja)\ndocker rmi my-dashboard\n</code></pre>"},{"location":"docker_fundamentals/homework/#docker-compose-haldamine","title":"Docker-compose haldamine","text":"<pre><code># Vaadake docker-compose staatust\ndocker-compose ps\n\n# Vaadake logisid\ndocker-compose logs\n\n# Peatage k\u00f5ik teenused\ndocker-compose down\n\n# K\u00e4ivitage uuesti\ndocker-compose up -d\n</code></pre>"},{"location":"docker_fundamentals/homework/#ressursside-kasutus","title":"Ressursside kasutus","text":"<pre><code># Vaadake container'ite ressursside kasutust\ndocker stats\n\n# Vaadake Docker disk kasutust\ndocker system df\n\n# Puhastage unused resources\ndocker system prune -f\n</code></pre> <p>Commit haldamise oskused: <pre><code>git add .\ngit commit -m \"\u00d5ppisin container'ite haldamist - start, stop, logs, cleanup\"\n</code></pre></p>"},{"location":"docker_fundamentals/homework/#task-5-loplik-dokumentatsioon","title":"Task 5: L\u00f5plik dokumentatsioon ()**","text":""},{"location":"docker_fundamentals/homework/#muutke-readmemd-faili","title":"Muutke README.md faili","text":"<p>Fail: <code>README.md</code> (kopeerige ja t\u00e4itke oma andmed): <pre><code># System Status Dashboard - [TEIE NIMI]\n\n## Mis see on?\nSystem Status Dashboard on veebirakendus, mis n\u00e4itab container informatsiooni,\ns\u00fcsteemi olekut ja v\u00f5imaldab testida erinevaid operations.\n\n## Task 6: Kuidas k\u00e4ivitada?\n\n### Docker'iga:\n```bash\ndocker build -t dashboard .\ndocker run -d -p 8080:80 dashboard\n# Avage: http://localhost:8080?type=Docker\n</code></pre></p>"},{"location":"docker_fundamentals/homework/#podmaniga","title":"Podman'iga:","text":"<pre><code>podman build -t dashboard .\npodman run -d -p 8081:80 dashboard  \n# Avage: http://localhost:8081?type=Podman\n</code></pre>"},{"location":"docker_fundamentals/homework/#docker-composeiga","title":"Docker-compose'iga:","text":"<pre><code>docker-compose up -d\n# Docker: http://localhost:8080?type=Docker\n# Podman: http://localhost:8081?type=Podman\n</code></pre>"},{"location":"docker_fundamentals/homework/#funktsioonid","title":"Funktsioonid","text":"<ul> <li>System status monitoring</li> <li>Container runtime detection</li> <li>Interactive operations testing</li> <li>Real-time uptime counter</li> <li>Health check endpoint</li> <li>Custom nginx configuration</li> </ul>"},{"location":"docker_fundamentals/homework/#keskkonnamuutujad","title":"Keskkonnamuutujad","text":"Muutuja Kirjeldus <code>CONTAINER_TYPE</code> N\u00e4itab Docker v\u00f5i Podman <code>DEPLOY_DATE</code> Millal container deployiti"},{"location":"docker_fundamentals/homework/#tervise-kontroll","title":"Tervise kontroll","text":"<p>K\u00fclastage <code>/health</code> endpoint'i container'i tervise staatuse kontrollimiseks.</p>"},{"location":"docker_fundamentals/homework/#task-7-ekraanipildid","title":"Task 7: Ekraanipildid","text":"<p>[Lisage oma screenshot'id siia]</p>"},{"location":"docker_fundamentals/homework/#task-8-mida-ma-oppisin","title":"Task 8: Mida ma \u00f5ppisin","text":"<ul> <li>[Teie kogemus 1]</li> <li>[Teie kogemus 2] </li> <li>[Teie kogemus 3]</li> </ul>"},{"location":"docker_fundamentals/homework/#task-9-probleemid-ja-lahendused","title":"Task 9: Probleemid ja lahendused","text":"<p>Probleem: [Kirjeldage probleem mis teil tekkis] Lahendus: [Kuidas te selle lahendasite] <pre><code>#### Tehke screenshot'id\n\n**Vajalikud screenshot'id:**\n1. Dashboard t\u00f6\u00f6tab Docker'is: `http://localhost:8080?type=Docker`\n2. Dashboard t\u00f6\u00f6tab Podman'is: `http://localhost:8081?type=Podman`  \n3. Terminal output: `docker ps` ja `podman ps`\n4. Tervise kontrolli test: `curl http://localhost:8082/health`\n\n**Salvestage screenshot'id `screenshots/` kausta.**\n\n---\n\n#### L\u00f5plik push oma branch'iga\n\n```bash\n# Veenduge, et k\u00f5ik on commit'itud\ngit add .\ngit commit -m \"L\u00f5plik esitamine: Docker kodut\u00f6\u00f6 valmis - k\u00f5ik containerid testitud\"\n\n# Push final version\ngit push origin homework-TEIE-NIMI\n\n# GitHub'is saate luua Pull Request \u00f5petajale\n# Teacher repository \u2192 Pull Requests \u2192 New Pull Request\n</code></pre></p>"},{"location":"docker_fundamentals/homework/#task-10-esitamise-nouded","title":"Task 10: Esitamise n\u00f5uded","text":""},{"location":"docker_fundamentals/homework/#repository-peab-sisaldama","title":"Repository peab sisaldama:","text":"<pre><code>docker-fundamentals-homework/\n\u251c\u2500\u2500 README.md                    # Projekti kirjeldus\n\u251c\u2500\u2500 index.html                   # Veebisaidi fail\n\u251c\u2500\u2500 Dockerfile                   # Container definitsioon\n\u251c\u2500\u2500 docker-compose.yml           # Multi-container setup\n\u2514\u2500\u2500 screenshots/ (valikuline)    # T\u00f6\u00f6tavate container'ite pildid\n</code></pre>"},{"location":"docker_fundamentals/homework/#esitamine","title":"Esitamine:","text":"<ol> <li>GitHub Pull Request link esitage \u00f5ppetoolis</li> <li>Oma branch teacher repository's: <code>homework-TEIE-NIMI</code></li> <li>T\u00f6\u00f6tav demonstratsioon - \u00f5petaja saab checkout'ida ja testida</li> </ol>"},{"location":"docker_fundamentals/homework/#repository-peab-naitama","title":"Repository peab n\u00e4itama:","text":"<ul> <li>T\u00f6\u00f6tav rakendus Docker'is</li> <li>T\u00f6\u00f6tav rakendus Podman'is</li> <li>docker-compose setup</li> <li>Selge dokumentatsioon README.md's</li> <li>Git commit history n\u00e4itab progressi</li> </ul>"},{"location":"docker_fundamentals/lab/","title":"Docker Fundamentals Lab: Docker &amp; Podman P\u00f5hilised Kogemused","text":""},{"location":"docker_fundamentals/lab/#eesmark-feel-the-difference-container-fundamentals-hands-on-2h","title":"Eesm\u00e4rk: \"Feel the difference\" - Container fundamentals hands-on (2h)","text":"<p>T\u00e4na \u00f5pite konteinerite alused praktikas. Fookus on m\u00f5istmisel, mitte s\u00fcntaksil.</p>"},{"location":"docker_fundamentals/lab/#labi-eesmargid","title":"Lab'i eesm\u00e4rgid","text":"<p>P\u00e4rast seda lab'i teate: - Miks konteinerid on kiired (kogesite ise) - Kuidas ehitada lihtsat rakendust (k\u00e4ed-k\u00fcljes) - Docker vs Podman erinevusi (side-by-side) - P\u00f5hilisi troubleshooting'u oskusi (\u00f5ppinud vigadest)</p>"},{"location":"docker_fundamentals/lab/#task-1-container-speed-experience","title":"Task 1: Container Speed Experience","text":""},{"location":"docker_fundamentals/lab/#ulesanne-11-feel-the-speed","title":"\u00dclesanne 1.1: \"Feel the Speed\"","text":"<p>V\u00f5rdle VM vs Container startup aegu:</p> <pre><code>## Testi container kiirus\ntime docker run hello-world\n# M\u00e4rkige aeg: _____ sekundit\n\n## Testi teist container'it  \ntime docker run alpine echo \"Hello from container\"\n# M\u00e4rkige aeg: _____ sekundit\n\n## Task 2: V\u00f5rdle VM'iga (kui teil on access)\n# K\u00e4ivitage VM - m\u00e4rkige aeg: _____utit\n</code></pre> <p>** Mida m\u00e4rkasite?** - Container startup: ___ sekundit - VM startup: ___utit - Erinevus: ___x kiirem</p>"},{"location":"docker_fundamentals/lab/#ulesanne-12-resource-usage-comparison","title":"\u00dclesanne 1.2: Resource Usage Comparison","text":"<pre><code>## Vaadake Docker daemon resource kasutust\nps aux | grep docker\n# M\u00e4rkige RAM kasutus: _____ MB\n\n## Task 3: K\u00e4ivitage lihtne web server\ndocker run -d --name test-web -p 8080:80 nginx\n\n## Task 4: Kontrollige container'i resource kasutust\ndocker stats test-web --no-stream\n# M\u00e4rkige CPU ja RAM: CPU: ___% RAM: ___MB\n\n## Testiga \u00fchendust\ncurl http://localhost:8080\n# Kas t\u00f6\u00f6tab? \u2705/\u274c\n</code></pre> <p>\ud83e\uddf9 Cleanup: <pre><code>docker stop test-web &amp;&amp; docker rm test-web\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#ulesanne-13-basic-commands-discovery","title":"\u00dclesanne 1.3: Basic Commands Discovery","text":"<p>Avastage k\u00e4ske ja vaadake, mis juhtub:</p> <pre><code># Millised image'id teil on?\ndocker images\n\n# Millised containers t\u00f6\u00f6tavad?\ndocker ps\ndocker ps -a  # Mis erinevus?\n\n# Palju ruumi v\u00f5tab Docker?\ndocker system df\n\n# K\u00fcsimus: Miks \"hello-world\" image on endiselt olemas?\n# Vastus: _______________________\n</code></pre>"},{"location":"docker_fundamentals/lab/#task-5-samm-2-build-your-first-app","title":"Task 5: \ud83d\udce6 Samm 2: Build Your First App ()","text":""},{"location":"docker_fundamentals/lab/#ulesanne-21-prepare-simple-web-app","title":"\u00dclesanne 2.1: Prepare Simple Web App","text":"<p>Looge t\u00f6\u00f6kaust: <pre><code>mkdir ~/docker-fundamentals-lab &amp;&amp; cd ~/docker-fundamentals-lab\n</code></pre></p> <p>Looge lihtne HTML fail: <pre><code>&lt;!-- index.html --&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;My Container App&lt;/title&gt;\n    &lt;style&gt;\n        body { font-family: Arial; text-align: center; margin-top: 100px; }\n        .container { background: #f0f0f0; padding: 20px; border-radius: 10px; }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;h1&gt; My First Container App!&lt;/h1&gt;\n        &lt;p&gt;Server: &lt;span id=\"hostname\"&gt;Loading...&lt;/span&gt;&lt;/p&gt;\n        &lt;p&gt;Time: &lt;span id=\"time\"&gt;&lt;/span&gt;&lt;/p&gt;\n        &lt;script&gt;\n            document.getElementById('time').innerText = new Date();\n            fetch('/hostname').then(r =&gt; r.text()).then(h =&gt; \n                document.getElementById('hostname').innerText = h\n            ).catch(() =&gt; \n                document.getElementById('hostname').innerText = 'Container ID: Unknown'\n            );\n        &lt;/script&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#ulesanne-22-write-your-first-dockerfile","title":"\u00dclesanne 2.2: Write Your First Dockerfile","text":"<p>Template (t\u00e4itke l\u00fcngad): <pre><code># TODO: Vali base image (nginx:alpine)\nFROM ______\n\n# TODO: Kopeeri HTML fail \u00f5igesse kohta \n# Nginx serveerib faile kaustast: /usr/share/nginx/html/\nCOPY ______ ______\n\n# TODO: Avage port 80\nEXPOSE ______\n\n# CMD juba defined base image'is!\n</code></pre></p> <p>Vastused (p\u00e4rast katsetamist): <pre><code>FROM nginx:alpine\nCOPY index.html /usr/share/nginx/html/\nEXPOSE 80\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#ulesanne-23-build-and-test","title":"\u00dclesanne 2.3: Build and Test","text":"<pre><code>## Task 6: Build image\ndocker build -t my-web-app .\n\n# Kas build \u00f5nnestus? \u2705/\u274c\n# Kui ei, siis vaadake error message'i ja parandage\n\n## Task 7: Run container\ndocker run -d --name my-app -p 8080:80 my-web-app\n\n## Test\ncurl http://localhost:8080\n# V\u00f5i avage brauseris: http://localhost:8080\n\n# Kas n\u00e4ete oma HTML'i? \u2705/\u274c\n</code></pre>"},{"location":"docker_fundamentals/lab/#ulesanne-24-modify-and-rebuild","title":"\u00dclesanne 2.4: Modify and Rebuild","text":"<p>Muutke HTML faili: <pre><code>&lt;!-- Lisa midagi uut, n\u00e4iteks: --&gt;\n&lt;p&gt;Version: 2.0 - Updated!&lt;/p&gt;\n&lt;p&gt;Student: [Your Name]&lt;/p&gt;\n</code></pre></p> <p>Rebuild ja test: <pre><code># Build uus versioon\ndocker build -t my-web-app:v2 .\n\n# Stop vana container\ndocker stop my-app &amp;&amp; docker rm my-app\n\n# Start uus container\ndocker run -d --name my-app-v2 -p 8080:80 my-web-app:v2\n\n# Test\ncurl http://localhost:8080\n# Kas n\u00e4ete muudatusi? \u2705/\u274c\n</code></pre></p> <p>\ud83e\uddf9 Cleanup: <pre><code>docker stop my-app-v2 &amp;&amp; docker rm my-app-v2\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#docker-vs-podman-side-by-side","title":"Docker vs Podman Side-by-Side ()**","text":""},{"location":"docker_fundamentals/lab/#ulesanne-31-install-podman-if-needed","title":"\u00dclesanne 3.1: Install Podman (if needed)","text":"<pre><code># Ubuntu/Debian\nsudo apt update &amp;&amp; sudo apt install -y podman\n\n# Test installation\npodman --version\n</code></pre>"},{"location":"docker_fundamentals/lab/#ulesanne-32-same-commands-different-tools","title":"\u00dclesanne 3.2: Same Commands, Different Tools","text":"<p>K\u00e4ivitage SAMA rakendus m\u00f5lemas s\u00fcsteemis:</p> <p>Docker versio: <pre><code># Terminal 1: Docker\ndocker run -d --name web-docker -p 8081:80 my-web-app:v2\n</code></pre></p> <p>Podman versio: <pre><code># Terminal 2: Podman  \npodman run -d --name web-podman -p 8082:80 my-web-app:v2\n</code></pre></p> <p>Teste m\u00f5lemat: <pre><code># Docker test\ncurl http://localhost:8081\n\n# Podman test  \ncurl http://localhost:8082\n\n# M\u00f5lemad t\u00f6\u00f6tavad? \u2705/\u274c\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#ulesanne-33-observe-the-differences","title":"\u00dclesanne 3.3: Observe the Differences","text":"<p>Resource usage: <pre><code># Docker daemon\nps aux | grep dockerd\n# M\u00e4rkige RAM kasutus: _____ MB\n\n# Podman (no daemon!)\nps aux | grep podman\n# M\u00e4rkige RAM kasutus: _____ MB\n</code></pre></p> <p>User permissions: <pre><code># Docker (check groups)\ngroups $USER\n# Kas \"docker\" on listis? \u2705/\u274c\n\n# Podman (no special groups needed)\npodman run --rm alpine id\n# Container sees: uid=0 (root)\n\nwhoami\n# Host sees: [your username]\n</code></pre></p> <p>Commands: <pre><code># Proovige sama k\u00e4sku\ndocker ps\npodman ps\n\n# Kas output on sarnane? \u2705/\u274c\n</code></pre></p> <p>\ud83e\uddf9 Cleanup: <pre><code>docker stop web-docker &amp;&amp; docker rm web-docker\npodman stop web-podman &amp;&amp; podman rm web-podman\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#task-8-samm-4-troubleshooting-networks","title":"Task 8: \ud83d\udc1b Samm 4: Troubleshooting &amp; Networks ()","text":""},{"location":"docker_fundamentals/lab/#ulesanne-41-fix-broken-container","title":"\u00dclesanne 4.1: Fix Broken Container","text":"<p>Antakse teile \"broken\" Dockerfile: <pre><code>FROM nginx:alpine\nCOPY index.html /wrong/path/\nEXPOSE 80\n</code></pre></p> <p>Proovige ehitada: <pre><code>docker build -t broken-app .\ndocker run -d --name broken -p 8083:80 broken-app\ncurl http://localhost:8083\n</code></pre></p> <p>Diagnoosimine: <pre><code># Vaadake loge\ndocker logs broken\n\n# Minge sisse ja uurige\ndocker exec -it broken sh\nls /usr/share/nginx/html/  # Kas index.html on siin?\nexit\n</code></pre></p> <p>** K\u00fcsimus:** Miks ei t\u00f6\u00f6ta? Vastus: ________________</p> <p>Parandage ja teste uuesti: <pre><code>FROM nginx:alpine\nCOPY index.html /usr/share/nginx/html/\nEXPOSE 80\n</code></pre></p>"},{"location":"docker_fundamentals/lab/#ulesanne-42-simple-network-test","title":"\u00dclesanne 4.2: Simple Network Test","text":"<pre><code># K\u00e4ivitage 2 container'it custom network'is\ndocker network create test-network\n\ndocker run -d --name app1 --network test-network nginx:alpine\ndocker run -d --name app2 --network test-network nginx:alpine\n\n# Test connectivity\ndocker exec app1 ping app2\n# Kas t\u00f6\u00f6tab? \u2705/\u274c\n\n# Cleanup\ndocker stop app1 app2 &amp;&amp; docker rm app1 app2\ndocker network rm test-network\n</code></pre>"},{"location":"docker_fundamentals/lab/#task-9-volume-persistence-test","title":"Task 9: Volume Persistence Test ()**","text":""},{"location":"docker_fundamentals/lab/#ulesanne-51-data-persistence-challenge","title":"\u00dclesanne 5.1: Data Persistence Challenge","text":"<p>Create persistent web content: <pre><code>## Task 10: Create volume\ndocker volume create web-content\n\n## Task 11: Run container with volume\ndocker run -d --name web-persistent \\\n    -p 8084:80 \\\n    -v web-content:/usr/share/nginx/html \\\n    nginx:alpine\n\n## Task 12: Add custom content\ndocker exec web-persistent sh -c 'echo \"&lt;h1&gt;Persistent Data!&lt;/h1&gt;\" &gt; /usr/share/nginx/html/index.html'\n\n## Test\ncurl http://localhost:8084\n# Kas n\u00e4ete custom content'i? \u2705/\u274c\n\n## Destroy container (but keep volume!)\ndocker stop web-persistent &amp;&amp; docker rm web-persistent\n\n## Task 13: Create NEW container with SAME volume\ndocker run -d --name web-new \\\n    -p 8084:80 \\\n    -v web-content:/usr/share/nginx/html \\\n    nginx:alpine\n\n## Test again\ncurl http://localhost:8084\n# Kas andmed on alles? \u2705/\u274c\n</code></pre></p> <p>** K\u00fcsimus:** Miks andmed j\u00e4id alles? Vastus: ________________</p>"},{"location":"docker_fundamentals/lab/#ulesanne-52-development-workflow","title":"\u00dclesanne 5.2: Development Workflow","text":"<pre><code># Mount current directory\ndocker run -it --rm \\\n    -v $(pwd):/workspace \\\n    -w /workspace \\\n    alpine sh\n\n# Inside container:\necho \"Container can modify host files\" &gt; test.txt\nexit\n\n# Check on host:\ncat test.txt\n# Kas fail on host'is? \u2705/\u274c\n\n# Cleanup\nrm test.txt\n</code></pre>"},{"location":"docker_fundamentals/lab/#lab-summary-reflection","title":"Lab Summary &amp; Reflection**","text":""},{"location":"docker_fundamentals/lab/#mida-te-kogesite","title":"Mida te kogesite:","text":"<p>Container Speed: - Container startup: ___ sekundit vs VM: ___utit - Resource efficiency: V\u00e4hem overhead</p> <p>Building Apps: - Dockerfile = retsept rakenduse loomiseks - Layer caching optimiseerib rebuild kiirust</p> <p>Docker vs Podman: - Docker: Daemon architecture, vajab special group - Podman: Daemonless, rootless security</p> <p>Troubleshooting: - <code>docker logs</code> - esimene debug samm - <code>docker exec</code> - konteiner investigation - Volume'id s\u00e4ilitavad andmeid</p>"},{"location":"docker_fundamentals/lab/#jargmised-sammud","title":"J\u00e4rgmised sammud:","text":"<p>Kodut\u00f6\u00f6: S\u00fcvauurige Docker vs Podman v\u00f5rdlust J\u00e4rgmine lab: Docker Compose multi-container applications</p>"},{"location":"docker_fundamentals/lab/#task-14-boonusulesanded-dockeri-oskajatele","title":"Task 14: BOONUS\u00dcLESANDED (Docker'i oskajatele)","text":""},{"location":"docker_fundamentals/lab/#ulesanne-multi-stage-docker-builds","title":"\u00dclesanne Multi-stage Docker Builds","text":"<pre><code># Optimized Node.js build\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\nFROM node:18-alpine AS runtime\nWORKDIR /app\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY . .\nEXPOSE 3000\nCMD [\"npm\", \"start\"]\n\n# Build: docker build -t optimized-app .\n</code></pre>"},{"location":"docker_fundamentals/lab/#ulesanne-docker-security-ja-best-practices","title":"\u00dclesanne Docker Security ja Best Practices","text":"<pre><code># Non-root user\nFROM alpine:latest\nRUN addgroup -g 1001 appgroup &amp;&amp; \\\n    adduser -u 1001 -G appgroup -s /bin/sh -D appuser\nUSER appuser\n\n# Security scanning\ndocker scout cves myapp:latest\ndocker security scan myapp:latest\n\n# Read-only filesystem\ndocker run --read-only --tmpfs /tmp myapp:latest\n\n# Resource limits\ndocker run --memory=512m --cpus=1.5 myapp:latest\n</code></pre>"},{"location":"docker_fundamentals/lab/#ulesanne-advanced-networking-ja-storage","title":"\u00dclesanne Advanced Networking ja Storage","text":"<pre><code># Custom networks\ndocker network create --driver bridge \\\n  --subnet=172.20.0.0/16 \\\n  --gateway=172.20.0.1 \\\n  custom-network\n\n# Named volumes with options\ndocker volume create --driver local \\\n  --opt type=bind \\\n  --opt device=/host/path \\\n  --opt o=bind \\\n  custom-volume\n\n# Network debugging\ndocker exec container-name netstat -tulpn\ndocker exec container-name ss -tulpn\n</code></pre>"},{"location":"docker_fundamentals/lab/#ulesanne-docker-performance-monitoring","title":"\u00dclesanne Docker Performance Monitoring","text":"<pre><code># Container stats\ndocker stats --format \"table {{.Container}}\\t{{.CPUPerc}}\\t{{.MemUsage}}\"\n\n# System events\ndocker events --filter container=myapp\n\n# Detailed inspection\ndocker inspect myapp | jq '.[].[0].State'\n\n# Health checks\ndocker run --health-cmd='curl -f http://localhost:3000/health' \\\n           --health-interval=30s \\\n           --health-timeout=10s \\\n           --health-retries=3 \\\n           myapp:latest\n</code></pre>"},{"location":"docker_fundamentals/lab/#ulesanne-docker-compose-advanced","title":"\u00dclesanne Docker Compose Advanced","text":"<pre><code># docker-compose.advanced.yml\nversion: '3.8'\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile.prod\n      args:\n        - NODE_ENV=production\n    deploy:\n      replicas: 3\n      restart_policy:\n        condition: on-failure\n        delay: 5s\n        max_attempts: 3\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    secrets:\n      - db_password\n    configs:\n      - app_config\n\nsecrets:\n  db_password:\n    file: ./secrets/db_password.txt\n\nconfigs:\n  app_config:\n    file: ./configs/app.conf\n</code></pre> <p>H\u00e4sti tehtud! Teil on n\u00fc\u00fcd nii p\u00f5hi- kui ka ekspert-tasemel container kogemused! </p>"},{"location":"docker_fundamentals/lecture/","title":"Docker Fundamentals","text":""},{"location":"docker_fundamentals/lecture/#teemad-container-technology-overview-docker-installation-ja-basic-commands-dockerfile-creation-docker-networking-ja-volumes-podman-introduction-ja-comparison","title":"Teemad: Container technology overview, Docker installation ja basic commands, Dockerfile creation, Docker networking ja volumes, Podman introduction ja comparison","text":"<p>Eelmisel n\u00e4dalal \u00f5ppisime Ansible role'e. T\u00e4na astume j\u00e4rgmisesse dimensiooni - konteinerite maailm.</p> <p>M\u00f5tle konteineritele kui LEGO klotside s\u00fcsteemile - iga konteiner on \u00fcks klots, mis saab kiiresti kokku panna suuremateks rakendusteks.</p>"},{"location":"docker_fundamentals/lecture/#task-1-docker-installatsioon-ja-pohilised-moisted","title":"Task 1: Docker Installatsioon ja P\u00f5hilised M\u00f5isted","text":""},{"location":"docker_fundamentals/lecture/#ulesanne-11-getting-started-with-docker","title":"\u00dclesanne 1.1: Getting Started with Docker","text":""},{"location":"docker_fundamentals/lecture/#ulesanne-12-mis-on-docker","title":"\u00dclesanne 1.2: Mis on Docker?","text":"<p>Docker = t\u00f6\u00f6riist konteinerite loomiseks ja haldamiseks.</p> <p>Lihtne definitsioon: Docker v\u00f5imaldab sul pakkida rakenduse koos k\u00f5igi s\u00f5ltuvustega \u00fchte \"kasti\" (konteiner), mis t\u00f6\u00f6tab igal arvutil.</p>"},{"location":"docker_fundamentals/lecture/#ulesanne-13-pohilised-moisted","title":"\u00dclesanne 1.3: P\u00f5hilised m\u00f5isted","text":"<p>Image = Mall konteineri jaoks (nagu CD-ROM) - N\u00e4iteks: <code>nginx:alpine</code>, <code>python:3.9</code>, <code>mysql:8.0</code> - Sisaldab OS'i, rakendust ja s\u00f5ltuvusi</p> <p>Container = K\u00e4ivitatud image (nagu programm arvutis) - Elab ja t\u00f6\u00f6tab - V\u00f5ib peatada, kustutada, taask\u00e4ivitada</p> <p>Dockerfile = Retsept image'i loomiseks - Tekstifail, mis kirjeldab, kuidas image ehitada</p> <p>Registry = Pood image'ite jaoks (Docker Hub) - Nagu App Store, aga konteinerite jaoks</p>"},{"location":"docker_fundamentals/lecture/#ulesanne-14-docker-installatsioon","title":"\u00dclesanne 1.4: Docker installatsioon","text":""},{"location":"docker_fundamentals/lecture/#ubuntudebian","title":"Ubuntu/Debian:","text":"<pre><code>## Task 2: Update package list\nsudo apt update\n\n## Install prerequisites\nsudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release\n\n## Task 3: Add Docker's official GPG key\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n## Task 4: Add Docker repository\necho \"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n\n## Install Docker\nsudo apt update\nsudo apt install -y docker-ce docker-ce-cli containerd.io\n\n## Task 5: Start Docker service\nsudo systemctl start docker\nsudo systemctl enable docker\n\n## Task 6: Add user to docker group (v\u00e4ltida sudo kasutamist)\nsudo usermod -aG docker $USER\n\n## Task 7: Logout ja login uuesti, v\u00f5i k\u00e4ivita:\nnewgrp docker\n</code></pre>"},{"location":"docker_fundamentals/lecture/#macos","title":"macOS:","text":"<pre><code># Download ja install Docker Desktop\n# https://www.docker.com/products/docker-desktop\n</code></pre>"},{"location":"docker_fundamentals/lecture/#windows","title":"Windows:","text":"<pre><code># Download ja install Docker Desktop\n# https://www.docker.com/products/docker-desktop\n</code></pre>"},{"location":"docker_fundamentals/lecture/#esimene-docker-kask","title":"Esimene Docker k\u00e4sk","text":"<pre><code># Testi installatsiooni\ndocker --version\n\n# K\u00e4ivita esimene konteiner\ndocker run hello-world\n\n# Mida see tegi?\n## Laadis hello-world image Docker Hub'ist\n## Task 8: K\u00e4ivitas konteineri\n## Task 9: Konteiner tervitas sind ja v\u00e4ljus\n</code></pre>"},{"location":"docker_fundamentals/lecture/#docker-arhitektuur","title":"Docker arhitektuur","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Docker Client                 \u2502\n\u2502     (docker k\u00e4skude kasutaja)          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Docker Daemon                 \u2502\n\u2502     (background service)                \u2502\n\u2502  - Image management                     \u2502\n\u2502  - Container lifecycle                  \u2502\n\u2502  - Networking                          \u2502\n\u2502  - Storage                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Containers                    \u2502\n\u2502  [Container 1] [Container 2] [Container 3]\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"docker_fundamentals/lecture/#docker-hub-imageite-pood","title":"Docker Hub - Image'ite pood","text":"<p>Docker Hub = Suurim konteinerite registry - https://hub.docker.com - Tuhanded valmis image'id - Nagu GitHub, aga konteinerite jaoks</p> <p>Populaarsed image'id: - <code>nginx</code> - Web server - <code>mysql</code> - Andmebaas - <code>python</code> - Python runtime - <code>node</code> - Node.js runtime - <code>ubuntu</code> - Ubuntu OS - <code>alpine</code> - V\u00e4ike Linux OS</p>"},{"location":"docker_fundamentals/lecture/#esimene-praktiline-naide","title":"Esimene praktiline n\u00e4ide","text":"<pre><code>## Task 10: K\u00e4ivita web server\ndocker run -d -p 8080:80 nginx\n\n# Mida see teeb?\n# -d = detached (taustal)\n# -p 8080:80 = port mapping (host:container)\n# nginx = image nimi\n\n## Testi brauseris\n# Avage: http://localhost:8080\n\n## Vaata t\u00f6\u00f6tavaid konteinereid\ndocker ps\n\n## Task 11: Peata konteiner\ndocker stop $(docker ps -q)\n\n## Kustuta konteiner\ndocker rm $(docker ps -aq)\n</code></pre>"},{"location":"docker_fundamentals/lecture/#kasulikud-kasud-algajale","title":"Kasulikud k\u00e4sud algajale","text":"<pre><code># Image'ite haldamine\ndocker images                    # N\u00e4ita k\u00f5iki image'eid\ndocker pull nginx               # Lae image alla\ndocker rmi nginx                # Kustuta image\n\n# Container'ite haldamine\ndocker ps                       # N\u00e4ita t\u00f6\u00f6tavaid konteinereid\ndocker ps -a                    # N\u00e4ita k\u00f5iki konteinereid\ndocker logs container_name      # Vaata konteineri loge\ndocker exec -it container_name bash  # Sisene konteinerisse\n\n# S\u00fcsteemi haldamine\ndocker system df                # Vaata ruumi kasutust\ndocker system prune             # Puhasta kasutamata objektid\ndocker info                     # Docker info\n</code></pre>"},{"location":"docker_fundamentals/lecture/#levinumad-vead-ja-lahendused","title":"Levinumad vead ja lahendused","text":"<p>Viga 1: \"Permission denied\" <pre><code># Probleem: User pole docker grupis\n# Lahendus:\nsudo usermod -aG docker $USER\n# Logout ja login uuesti\n</code></pre></p> <p>Viga 2: \"Cannot connect to the Docker daemon\" <pre><code># Probleem: Docker daemon ei t\u00f6\u00f6ta\n# Lahendus:\nsudo systemctl start docker\nsudo systemctl enable docker\n</code></pre></p> <p>Viga 3: \"Port already in use\" <pre><code># Probleem: Port juba kasutusel\n# Lahendus:\ndocker ps                      # Leia konfliktne konteiner\ndocker stop container_name     # Peata see\n# V\u00f5i kasuta teist porti: -p 8081:80\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#docker-vs-traditsiooniline-arendus","title":"Docker vs traditsiooniline arendus","text":"<p>Traditsiooniline l\u00e4henemine: <pre><code>\"See t\u00f6\u00f6tabu arvutil\"\n- Installeri Python 3.9\n- Installeri nginx\n- Seadista MySQL\n- Konfigureeri firewall\n- \"Miks see ei t\u00f6\u00f6ta sinu arvutil?\"\n</code></pre></p> <p>Docker l\u00e4henemine: <pre><code>\"See t\u00f6\u00f6tab igal arvutil\"\ndocker run my-app\n- K\u00f5ik s\u00f5ltuvused on image's\n- Sama keskkond igal pool\n- Kiire deployment\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#jargmised-sammud","title":"J\u00e4rgmised sammud","text":"<p>P\u00e4rast installatsiooni ja p\u00f5hiliste k\u00e4skude \u00f5ppimist: 1. Container vs VM - miks konteinerid on paremad? 2. Dockerfile - kuidas luua oma image'eid? 3. Networking - kuidas konteinerid suhtlevad? 4. Volumes - kuidas s\u00e4ilitada andmeid?</p>"},{"location":"docker_fundamentals/lecture/#task-12-containers-vs-vms","title":"Task 12: Containers vs VMs","text":""},{"location":"docker_fundamentals/lecture/#container-technology-overview","title":"Container Technology Overview","text":""},{"location":"docker_fundamentals/lecture/#luhike-evolutsioon","title":"L\u00fchike evolutsioon","text":"<pre><code>graph TB\n    subgraph \"\ud83c\udfd7 F\u00fc\u00fcsilised serverid (kuni 2000)\"\n        Physical1[Apache + Linux&lt;br/&gt;Server 1]\n        Physical2[MySQL + Linux&lt;br/&gt;Server 2]\n        Physical3[Exchange + Windows&lt;br/&gt;Server 3]\n    end\n\n    subgraph \" Virtuaalne masina (2000-2010)\"\n        HostOS[Host OS]\n        Hypervisor[Hypervisor]\n        VM1[VM1&lt;br/&gt;OS + App]\n        VM2[VM2&lt;br/&gt;OS + App]\n        VM3[VM3&lt;br/&gt;OS + App]\n\n        HostOS --&gt; Hypervisor\n        Hypervisor --&gt; VM1\n        Hypervisor --&gt; VM2\n        Hypervisor --&gt; VM3\n    end\n\n    subgraph \"\ud83d\udce6 Konteinerid (2013-t\u00e4na)\"\n        HostOS2[Host OS]\n        Runtime[Container Runtime]\n        Container1[App1&lt;br/&gt;10-100MB]\n        Container2[App2&lt;br/&gt;10-100MB]\n        Container3[App3&lt;br/&gt;10-100MB]\n\n        HostOS2 --&gt; Runtime\n        Runtime --&gt; Container1\n        Runtime --&gt; Container2\n        Runtime --&gt; Container3\n    end\n\n    style Physical1 fill:#ff9999\n    style Physical2 fill:#ff9999\n    style Physical3 fill:#ff9999\n    style VM1 fill:#ffcc99\n    style VM2 fill:#ffcc99\n    style VM3 fill:#ffcc99\n    style Container1 fill:#99ff99\n    style Container2 fill:#99ff99\n    style Container3 fill:#99ff99</code></pre> <p>F\u00fc\u00fcsilised serverid (kuni 2000): - \u00dcks rakendus = \u00dcks server - Probleemid: Kallis, ineffektiivne (5-15% kasutus)</p> <p>Virtuaalne masina (2000-2010): - \u00dcks server = Mitu VM'i - Iga VM vajab t\u00e4ispikka OS'i: 1-2GB RAM, 20GB disk - Parem, aga suur overhead</p> <p>Konteinerid (2013-t\u00e4na): - \u00dcks OS = Palju konteinereid - Jagavad sama OS kernel'it: 10-100MB per container - Maksimaalne efektiivsus!</p>"},{"location":"docker_fundamentals/lecture/#peamine-erinevus","title":"Peamine erinevus","text":"<p>Virtual Machine = Terve arvuti sinus arvutis - Oma OS, oma kernel, oma m\u00e4lu - Nagu eraldi korter majas</p> <p>Container = Aplikatsioon + s\u00f5ltuvused - Jagab host OS kernel'it - Nagu tuba korteris - jagad k\u00f6\u00f6k ja vannituba</p>"},{"location":"docker_fundamentals/lecture/#praktilised-numbrid","title":"Praktilised numbrid","text":"Kriteerium Virtual Machines Containers K\u00e4ivitusaeg 1-utit 1-5 sekundit M\u00e4lu 1-8GB per VM 10-100MB per container Mahtuvus 10-50 per server 100-1000 per server Disk size 10-50GB 100MB-1GB"},{"location":"docker_fundamentals/lecture/#analoogia-korterimaja-vs-konteinerid","title":"Analoogia: Korterimaja vs Konteinerid","text":"<p>VM = Korterimaja: - Iga korter (VM) on eraldi - Igal on oma elekter, vesi, k\u00fcte - Turvaline, aga kallis</p> <p>Containers = \u00dchiselamu: - Jagavad infrastruktuuri (kernel) - Kiirem, odavam - V\u00e4hem isolatsiooni</p>"},{"location":"docker_fundamentals/lecture/#millal-kasutada-mida","title":"Millal kasutada mida?","text":"<p>Kasuta VM'e kui: - Erinevad OS'id (Windows + Linux) - Maksimum turvalisus (pank, haigla) - Legacy s\u00fcsteemid - Pikaajalised teenused</p> <p>Kasuta konteinereid kui: - Kaasaegsed web rakendused - Development/testing - Microservices - CI/CD pipelines - Kiire deployment</p>"},{"location":"docker_fundamentals/lecture/#kiire-naide","title":"Kiire n\u00e4ide","text":"<p>WordPress sait:</p> <p>VM lahendus: - 3 VM'i: Web (2GB), Database (4GB), Load Balancer (1GB) - Kokku: 7GB RAM, 90GB disk, deployment</p> <p>Container lahendus: - 3 konteinerit: Web, DB, LB - Kokku: 650MB RAM, 650MB disk, 17 sek deployment</p> <p>Tulemus: 10x v\u00e4hem ressursse, 20x kiirem!</p>"},{"location":"docker_fundamentals/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>Konteinerid ei asenda VM'e - nad lahendavad erinevaid probleeme: - VM'id = maksimaalne isolatsioon ja turvalisus - Konteinerid = maksimaalne efektiivsus ja kiirus</p>"},{"location":"docker_fundamentals/lecture/#docker-commands","title":"Docker Commands","text":""},{"location":"docker_fundamentals/lecture/#docker-cli-basics","title":"Docker CLI Basics","text":""},{"location":"docker_fundamentals/lecture/#docker-cli-pohialused","title":"Docker CLI p\u00f5hialused","text":"<p>Docker CLI on teie peamine t\u00f6\u00f6riist. \u00d5pime AINULT Docker k\u00e4ske - Podman tuleb j\u00e4rgmises loengus!</p> <pre><code>docker [OPTIONS] COMMAND [ARG...]\n\n# N\u00e4ited:\ndocker run nginx              # K\u00e4ivita nginx\ndocker ps                     # N\u00e4ita containers\ndocker images                 # N\u00e4ita image'e\n</code></pre>"},{"location":"docker_fundamentals/lecture/#imageide-haldamine","title":"Image'ide haldamine","text":"<pre><code>## Task 13: Image'ide allalaadimine\ndocker pull nginx             # Viimane versioon\ndocker pull nginx:1.21        # Konkreetne versioon\ndocker pull ubuntu:20.04      # Erinevad base image'id\n\n## Task 14: Image'ide vaatamine\ndocker images                 # K\u00f5ik lokaalsed image'id\ndocker image inspect nginx    # Detailne info\ndocker search mysql           # Otsi Docker Hub'ist\n\n## Task 15: Cleanup\ndocker rmi nginx              # Kustuta image\ndocker image prune            # Kustuta kasutamata image'id\n</code></pre>"},{"location":"docker_fundamentals/lecture/#containerite-kaivitamine","title":"Container'ite k\u00e4ivitamine","text":"<pre><code># P\u00f5hilised k\u00e4sud\ndocker run nginx                    # Foreground (blokeerib terminal)\ndocker run -d nginx                 # Detached (background)\ndocker run --name my-web nginx     # Anna nimi\ndocker run -p 8080:80 nginx        # Port mapping: host:container\n\n# Interaktiivne kasutamine\ndocker run -it ubuntu bash         # Interactive terminal\ndocker exec -it container_name bash # K\u00e4ivita k\u00e4sk olemasolevs\n</code></pre>"},{"location":"docker_fundamentals/lecture/#containerite-jalgimine","title":"Container'ite j\u00e4lgimine","text":"<pre><code># \u00dclevaade\ndocker ps                     # T\u00f6\u00f6tavad containers\ndocker ps -a                  # K\u00f5ik (ka peatatud)\ndocker stats                  # Live resource kasutus\ndocker logs container_name    # Container logid\ndocker logs -f container_name # Follow logs (real-time)\n</code></pre>"},{"location":"docker_fundamentals/lecture/#container-lifecycle","title":"Container lifecycle","text":"<pre><code>docker start container_name   # K\u00e4ivita peatatud\ndocker stop container_name    # Peata gracefully\ndocker restart container_name # Restart\ndocker rm container_name      # Kustuta container\ndocker rm -f container_name   # Force kustutamine\n</code></pre>"},{"location":"docker_fundamentals/lecture/#praktilised-naited","title":"Praktilised n\u00e4ited","text":""},{"location":"docker_fundamentals/lecture/#naide-1-lihtne-web-server","title":"N\u00e4ide 1: Lihtne web server","text":"<pre><code># K\u00e4ivita Nginx\ndocker run -d --name my-web -p 80:80 nginx\n\n# Testi\ncurl http://localhost\n\n# Vaata loge\ndocker logs my-web\n\n# Cleanup\ndocker stop my-web &amp;&amp; docker rm my-web\n</code></pre>"},{"location":"docker_fundamentals/lecture/#naide-2-database","title":"N\u00e4ide 2: Database","text":"<pre><code># MySQL andmebaas\ndocker run -d \\\n  --name mysql-db \\\n  -e MYSQL_ROOT_PASSWORD=secret123 \\\n  -e MYSQL_DATABASE=testdb \\\n  -p 3306:3306 \\\n  mysql:8.0\n\n# \u00dchenda\ndocker exec -it mysql-db mysql -u root -p\n</code></pre>"},{"location":"docker_fundamentals/lecture/#naide-3-development","title":"N\u00e4ide 3: Development","text":"<pre><code># Python development\ndocker run -it \\\n  --name python-dev \\\n  -v $(pwd):/workspace \\\n  -w /workspace \\\n  python:3.9 bash\n\n# N\u00fc\u00fcd saad editeerida faile host'is!\n</code></pre>"},{"location":"docker_fundamentals/lecture/#environment-variables","title":"Environment variables","text":"<pre><code># \u00dcks muutuja\ndocker run -e NODE_ENV=production node-app\n\n# Mitu muutujat\ndocker run \\\n  -e DB_HOST=localhost \\\n  -e DB_PORT=5432 \\\n  -e DEBUG=true \\\n  my-app\n\n# Env file'ist\ndocker run --env-file .env my-app\n</code></pre>"},{"location":"docker_fundamentals/lecture/#volume-mounting-quick-intro","title":"Volume mounting (quick intro)","text":"<pre><code># Host kaust \u2192 container kaust\ndocker run -v /host/path:/container/path nginx\n\n# Current directory\ndocker run -v $(pwd):/app -w /app node:16 npm install\n\n# Named volume (advanced - \u00f5pime hiljem)\ndocker volume create my-data\ndocker run -v my-data:/data nginx\n</code></pre>"},{"location":"docker_fundamentals/lecture/#kasulikud-aliased","title":"Kasulikud aliased","text":"<p>Lisa oma <code>~/.bashrc</code> faili: <pre><code>alias dps='docker ps'\nalias dpsa='docker ps -a'\nalias dimg='docker images'\nalias dstop='docker stop $(docker ps -q)'\nalias drm='docker rm $(docker ps -aq)'\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#system-cleanup","title":"System cleanup","text":"<pre><code>docker info                  # Docker info\ndocker system df             # Disk kasutus\ndocker system prune          # Kustuta unused objects\ndocker system prune -a       # Kustuta K\u00d5IK unused\n</code></pre>"},{"location":"docker_fundamentals/lecture/#algaja-vead-ja-lahendused","title":"Algaja vead ja lahendused","text":"<p>Viga 1: \"Permission denied\" <pre><code># Probleem: User pole docker grupis\nsudo usermod -aG docker $USER\n# Logout ja login uuesti\n</code></pre></p> <p>Viga 2: \"Port already in use\" <pre><code># Probleem: Port juba kasutusel\ndocker ps                    # Leia conflicting container\ndocker stop container_name   # Peata see\n# V\u00f5i kasuta teist porti: -p 8081:80\n</code></pre></p> <p>Viga 3: Container kohe v\u00e4ljub <pre><code># Kontrolli loge\ndocker logs container_name\n\n# Tihti puudub foreground protsess\n# Lisa CMD v\u00f5i ENTRYPOINT Dockerfile'is\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#napunaited","title":"N\u00e4pun\u00e4ited","text":"<ol> <li>Alati kasuta <code>-d</code> production containers jaoks</li> <li>Anna containers nimed <code>--name</code> flagiga  </li> <li>Port mapping on oluline: <code>-p host:container</code></li> <li>Cleanup regulaarselt <code>docker system prune</code></li> <li>Kasuta <code>docker logs</code> debug'imiseks</li> </ol>"},{"location":"docker_fundamentals/lecture/#task-16-podman-introduction","title":"Task 16: Podman Introduction","text":""},{"location":"docker_fundamentals/lecture/#podman-vs-docker","title":"Podman vs Docker","text":""},{"location":"docker_fundamentals/lecture/#mis-on-podman","title":"Mis on Podman?","text":"<p>Podman (Pod Manager) on Docker'i alternatiiv Red Hat'i poolt. </p> <p>Peamine erinevus: Podman t\u00f6\u00f6tab ILMA daemon'ita!</p>"},{"location":"docker_fundamentals/lecture/#docker-vs-podman-arhitektuur","title":"Docker vs Podman arhitektuur","text":"<p>Docker: <pre><code>You \u2192 Docker Client \u2192 Docker Daemon \u2192 Container\n              \u2191              \u2191\n           Terminal      Always running\n                         as ROOT user\n</code></pre></p> <p>Podman: <pre><code>You \u2192 Podman \u2192 Container\n         \u2191\n    Direct execution\n    NO daemon needed!\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#peamised-erinevused","title":"Peamised erinevused","text":"Aspekt Docker Podman Daemon Vajab dockerd EI vaja daemon'it Root Vajab root \u00f5igusi T\u00f6\u00f6tab rootless Startup Daemon peab t\u00f6\u00f6tama Kohe kasutamisvalmis Security docker group = root Tavaline user"},{"location":"docker_fundamentals/lecture/#installation","title":"Installation","text":"<p>Docker installation (\u00fclevaade): <pre><code>sudo apt install docker.io\nsudo systemctl start docker      # Start daemon\nsudo usermod -aG docker $USER    # Add to group\n# Logout/login required\n</code></pre></p> <p>Podman installation: <pre><code>sudo apt install podman\n# That's it! Kohe kasutamisvalmis\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#commands-peaaegu-identne","title":"Commands - peaaegu identne!","text":"<pre><code># Docker                 \u2192    Podman\ndocker pull nginx       \u2192    podman pull nginx\ndocker run -d nginx     \u2192    podman run -d nginx\ndocker ps               \u2192    podman ps\ndocker logs name        \u2192    podman logs name\ndocker exec -it name bash \u2192 podman exec -it name bash\n</code></pre> <p>Magic trick: Podman alias <pre><code># Lisa ~/.bashrc faili\nalias docker=podman\n\n# N\u00fc\u00fcd k\u00f5ik docker k\u00e4sud t\u00f6\u00f6tavad!\ndocker run nginx  # Tegelikult: podman run nginx\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#rootless-containers-suur-eelis","title":"Rootless containers (SUUR eelis!)","text":"<p>Docker probleem: <pre><code># docker group = root equivalent\ndocker run -v /:/host -it alpine chroot /host bash\n# Oled n\u00fc\u00fcd ROOT host s\u00fcsteemis! \ud83d\ude31\n</code></pre></p> <p>Podman lahendus: <pre><code># T\u00f6\u00f6tab tava userina\npodman run -it alpine id\n# uid=0(root) gid=0(root)  \u2190 Inside container\nwhoami  # user \u2190 On host\n\n# User namespace mapping:\n# Container root (0) = Host user (1000)\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#podman-unique-features","title":"Podman unique features","text":""},{"location":"docker_fundamentals/lecture/#pods-kubernetes-like","title":"Pods (Kubernetes-like)","text":"<pre><code># Loo pod (containers group)\npodman pod create --name web-pod -p 8080:80\n\n# Lisa containers pod'i\npodman run -d --pod web-pod --name web nginx\npodman run -d --pod web-pod --name cache redis\n\n# Containers pod'is jagavad:\n# - Network (localhost communication)\n# - Storage\n# - IP address\n</code></pre>"},{"location":"docker_fundamentals/lecture/#systemd-integration","title":"Systemd integration","text":"<pre><code># Generate systemd service\npodman run -d --name my-app nginx\npodman generate systemd --new --files --name my-app\n\n# Install USER service (no sudo!)\nmkdir -p ~/.config/systemd/user\nmv *.service ~/.config/systemd/user/\nsystemctl --user enable container-my-app.service\n</code></pre>"},{"location":"docker_fundamentals/lecture/#kubernetes-yaml-support","title":"Kubernetes YAML support","text":"<pre><code># Generate Kubernetes YAML\npodman generate kube web-pod &gt; pod.yaml\n\n# Deploy Kubernetes'es\nkubectl apply -f pod.yaml\n\n# V\u00f5i kasuta Podman'iga\npodman play kube pod.yaml\n</code></pre>"},{"location":"docker_fundamentals/lecture/#performance-vordlus","title":"Performance v\u00f5rdlus","text":"<p>Memory usage: - Docker: ~50-200MB daemon + containers - Podman: 0MB daemon (ainult containers)</p> <p>Startup speed: - Docker: ~2-3 sekundit (daemon communication) - Podman: ~1-2 sekundit (direct execution)</p>"},{"location":"docker_fundamentals/lecture/#millal-kasutada-mida_1","title":"Millal kasutada mida?","text":""},{"location":"docker_fundamentals/lecture/#vali-docker-kui","title":"Vali Docker kui:","text":"<ul> <li>Team tunneb juba Docker'it</li> <li>Vajad Docker-specific tooling'ut</li> <li>Windows/macOS development</li> <li>Olemasolev Docker infrastruktuur</li> </ul>"},{"location":"docker_fundamentals/lecture/#vali-podman-kui","title":"Vali Podman kui:","text":"<ul> <li>Turvalisus on prioriteet</li> <li>RHEL/CentOS/Fedora keskkonnas</li> <li>Ei taha daemon overhead'i</li> <li>Rootless containers vajalik</li> <li>Kubernetes workflows</li> </ul>"},{"location":"docker_fundamentals/lecture/#lihtne-migratsioon","title":"Lihtne migratsioon","text":"<pre><code>## Install Podman\nsudo apt install podman\n\n## Task 17: Add alias\necho \"alias docker=podman\" &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n## Install podman-compose (if needed)\npip3 install podman-compose\n\n## Task 18: Use existing docker-compose.yml\npodman-compose up -d\n</code></pre>"},{"location":"docker_fundamentals/lecture/#praktiline-naide","title":"Praktiline n\u00e4ide","text":"<p>Same application, different tools:</p> <p>Docker: <pre><code>docker run -d --name web -p 8080:80 nginx\ndocker logs web\ndocker exec -it web bash\n</code></pre></p> <p>Podman: <pre><code>podman run -d --name web -p 8080:80 nginx\npodman logs web  \npodman exec -it web bash\n</code></pre></p> <p>Result: Identne kasutuskogemus, turvalisem backend!</p>"},{"location":"docker_fundamentals/lecture/#kokkuvote_1","title":"Kokkuv\u00f5te","text":"<ul> <li>Podman = Docker without daemon</li> <li>Commands peaaegu identne</li> <li>Turvalisem (rootless)</li> <li>Kubernetes native support</li> <li>Easy migration with aliases</li> </ul>"},{"location":"docker_fundamentals/lecture/#dockerfile-best-practices","title":"Dockerfile Best Practices","text":""},{"location":"docker_fundamentals/lecture/#container-build-optimization","title":"Container Build Optimization","text":""},{"location":"docker_fundamentals/lecture/#mis-on-dockerfile","title":"Mis on Dockerfile?","text":"<p>Dockerfile = retsept teie rakenduse konteineri loomiseks.</p> <p>M\u00f5tle sellele kui IKEA m\u00f6\u00f6bli kokkupaneku juhendile - sammhaaval juhised, kuidas komponentidest valmis toode teha.</p> <pre><code># See on Dockerfile - simple text file\nFROM nginx:alpine\nCOPY index.html /usr/share/nginx/html/\nEXPOSE 80\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n</code></pre>"},{"location":"docker_fundamentals/lecture/#pohiinstruktsioonid","title":"P\u00f5hiinstruktsioonid","text":""},{"location":"docker_fundamentals/lecture/#from-base-image","title":"FROM - Base image","text":"<pre><code># Official image (ALATI eelistatud)\nFROM nginx:alpine\nFROM python:3.9\nFROM node:16\n\n# Konkreetne versioon (production)\nFROM node:16.14.2-alpine\nFROM python:3.9.16-slim\n\n# \u00c4RA tee nii:\nFROM nginx  # latest tag - ette arvamatu!\n</code></pre>"},{"location":"docker_fundamentals/lecture/#copy-vs-add","title":"COPY vs ADD","text":"<pre><code># COPY - lihtne kopeerimine (kasuta seda!)\nCOPY app.py /app/\nCOPY src/ /app/src/\nCOPY . /app/\n\n# ADD - automaatne ekstraktimine (harva vajad)\nADD archive.tar.gz /app/  # Automaatselt pakib lahti\nADD http://example.com/file.txt /app/  # Laeb URL'ist\n\n# REEGEL: Kasuta COPY, v\u00e4lja arvatud kui vajad ADD funktsioone\n</code></pre>"},{"location":"docker_fundamentals/lecture/#run-commands","title":"RUN - Commands","text":"<pre><code># VALE: Palju layer'eid\nRUN apt-get update\nRUN apt-get install -y curl\nRUN apt-get clean\n\n# \u00d5IGE: \u00dcks layer\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y curl &amp;&amp; \\\n    apt-get clean &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/*\n</code></pre>"},{"location":"docker_fundamentals/lecture/#workdir-working-directory","title":"WORKDIR - Working directory","text":"<pre><code># \u00d5IGE viis\nWORKDIR /app\nCOPY package.json .\nRUN npm install\n\n# VALE viis\nCOPY package.json /app/package.json\nRUN cd /app &amp;&amp; npm install\n</code></pre>"},{"location":"docker_fundamentals/lecture/#cmd-vs-entrypoint","title":"CMD vs ENTRYPOINT","text":"<pre><code># CMD - default command (override'itav)\nCMD [\"python\", \"app.py\"]\n# docker run myapp              \u2192 python app.py\n# docker run myapp echo hello   \u2192 echo hello\n\n# ENTRYPOINT - alati jookseb\nENTRYPOINT [\"python\", \"app.py\"]  \n# docker run myapp              \u2192 python app.py\n# docker run myapp --debug      \u2192 python app.py --debug\n\n# Koos (best practice)\nENTRYPOINT [\"python\", \"app.py\"]\nCMD [\"--help\"]\n# docker run myapp              \u2192 python app.py --help\n# docker run myapp --prod       \u2192 python app.py --prod\n</code></pre>"},{"location":"docker_fundamentals/lecture/#best-practice-1-layer-cache-optimization","title":"Best Practice #1: Layer Cache Optimization","text":"<p>Probleem: Iga kord kui muudad koodi, installib dependencies uuesti.</p> <p>VALE j\u00e4rjekord: <pre><code>FROM node:16\nCOPY . /app/          # K\u00f5ik kood kopeeritakse kohe\nWORKDIR /app\nRUN npm install      # Dependencies installib uuesti kui kood muutub\nCMD [\"npm\", \"start\"]\n</code></pre></p> <p>\u00d5IGE j\u00e4rjekord: <pre><code>FROM node:16\nWORKDIR /app\n\n## Task 19: Copy dependency files (muutuvad harva)\nCOPY package*.json ./\nRUN npm install\n\n## Task 20: Copy source code (muutub tihti) \nCOPY . .\nCMD [\"npm\", \"start\"]\n</code></pre></p> <p>Miks t\u00f6\u00f6tab: Docker cache'ib layer'eid. Dependencies muutuvad harva!</p>"},{"location":"docker_fundamentals/lecture/#best-practice-2-multi-stage-builds","title":"Best Practice #2: Multi-stage Builds","text":"<p>Probleem: Build tools suurendavad production image'i.</p> <p>Single-stage (SUUR ~1GB): <pre><code>FROM node:16\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install        # Dev dependencies ka!\nCOPY . .\nRUN npm run build\nCMD [\"npm\", \"start\"]\n</code></pre></p> <p>Multi-stage (V\u00c4IKE ~200MB): <pre><code># Stage 1: Build\nFROM node:16 AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nRUN npm run build\n\n# Stage 2: Production\nFROM node:16-alpine\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install --only=production\nCOPY --from=builder /app/dist ./dist\nCMD [\"npm\", \"start\"]\n</code></pre></p> <p>Tulemus: 80% v\u00e4iksem image!</p>"},{"location":"docker_fundamentals/lecture/#best-practice-3-security","title":"Best Practice #3: Security","text":"<pre><code>## Konkreetsed versioonid\nFROM node:16.14.2-alpine  # Mitte: FROM node\n\n## Task 21: Non-root user\nRUN addgroup -g 1001 -S appuser &amp;&amp; \\\n    adduser -S appuser -u 1001\n\n## Task 22: \u00c4ra jookse root'ina\nUSER appuser\n\n## Task 23: Ownership\nCOPY --chown=appuser:appuser . .\n\n## Task 24: Minimal packages\nRUN apk add --no-cache curl\n</code></pre>"},{"location":"docker_fundamentals/lecture/#best-practice-4-size-optimization","title":"Best Practice #4: Size Optimization","text":"<pre><code>## Task 25: Alpine images (v\u00e4iksemad)\nFROM python:3.9-alpine  # vs python:3.9\n\n## Task 26: Clean up same layer'is\nRUN apk add --no-cache build-base &amp;&amp; \\\n    pip install -r requirements.txt &amp;&amp; \\\n    apk del build-base\n\n## Task 27: .dockerignore file\n</code></pre> <p>.dockerignore n\u00e4ide: <pre><code>node_modules\n.git\n*.md\n.env\ntest/\ndocs/\ncoverage/\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#praktiline-naide-python-flask","title":"Praktiline n\u00e4ide: Python Flask","text":"<pre><code>FROM python:3.9-slim\n\n# Non-root user\nRUN groupadd -r appuser &amp;&amp; useradd -r -g appuser appuser\n\nWORKDIR /app\n\n# Dependencies first\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Source code last\nCOPY --chown=appuser:appuser . .\n\n# Switch to non-root\nUSER appuser\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=10s \\\n    CMD curl -f http://localhost:5000/health || exit 1\n\nEXPOSE 5000\nCMD [\"gunicorn\", \"--bind\", \"0.0.0.0:5000\", \"app:app\"]\n</code></pre>"},{"location":"docker_fundamentals/lecture/#advanced-extreme-size-optimization","title":"Advanced: Extreme size optimization","text":"<p>Go application (5MB image!): <pre><code># Build stage\nFROM golang:1.19-alpine AS builder\nWORKDIR /app\nCOPY . .\nRUN CGO_ENABLED=0 go build -o app\n\n# Runtime stage\nFROM scratch  # T\u00fchi image!\nCOPY --from=builder /app/app /app\nEXPOSE 8080\nCMD [\"/app\"]\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#common-mistakes","title":"Common mistakes","text":""},{"location":"docker_fundamentals/lecture/#mistake-1-cached-package-lists","title":"Mistake 1: Cached package lists","text":"<pre><code># VALE\nRUN apt-get update\nRUN apt-get install -y curl  # Kasutab vana cache'i\n\n# \u00d5IGE  \nRUN apt-get update &amp;&amp; apt-get install -y curl\n</code></pre>"},{"location":"docker_fundamentals/lecture/#mistake-2-root-user","title":"Mistake 2: Root user","text":"<pre><code># VALE\nFROM ubuntu\nCOPY app /app\nCMD [\"/app\"]  # Jookseb root'ina\n\n# \u00d5IGE\nFROM ubuntu\nRUN useradd -m appuser\nUSER appuser\nCOPY app /app\nCMD [\"/app\"]\n</code></pre>"},{"location":"docker_fundamentals/lecture/#mistake-3-secrets-in-layers","title":"Mistake 3: Secrets in layers","text":"<pre><code># VALE - secrets j\u00e4\u00e4vad image'i\nCOPY secret.key /app/\nRUN echo \"PASSWORD=secret\" &gt; /app/.env\n\n# \u00d5IGE - runtime secrets\nENV PASSWORD_FILE=/run/secrets/password\nCMD [\"sh\", \"-c\", \"PASSWORD=$(cat $PASSWORD_FILE) /app\"]\n</code></pre>"},{"location":"docker_fundamentals/lecture/#dockerfile-linting","title":"Dockerfile linting","text":"<pre><code># Install Hadolint\ndocker run --rm -i hadolint/hadolint &lt; Dockerfile\n\n# Common warnings:\n# - DL3008: Pin versions in apt install\n# - DL3025: Use JSON array for CMD\n# - DL3059: Multiple consecutive RUN\n</code></pre>"},{"location":"docker_fundamentals/lecture/#golden-rules","title":"Golden Rules","text":"<ol> <li>Official base images</li> <li>Dependencies enne, kood p\u00e4rast (cache optimization)</li> <li>Multi-stage builds production'is</li> <li>Non-root user</li> <li>Pin package versions</li> <li>Combine RUN statements</li> <li>Use .dockerignore</li> <li>Add health checks</li> <li>Lint with Hadolint</li> </ol>"},{"location":"docker_fundamentals/lecture/#build-ja-test","title":"Build ja test","text":"<pre><code># Build\ndocker build -t myapp:v1.0 .\n\n# Test different stages\ndocker build --target builder -t myapp:builder .\n\n# Test security\ndocker run --rm -it myapp:v1.0 whoami  # Should NOT be root\n</code></pre>"},{"location":"docker_fundamentals/lecture/#task-28-networks-ja-volumes","title":"Task 28: Networks ja Volumes","text":""},{"location":"docker_fundamentals/lecture/#container-connectivity-data-persistence","title":"Container Connectivity &amp; Data Persistence","text":""},{"location":"docker_fundamentals/lecture/#docker-networking","title":"Docker Networking","text":"<p>Probleem: Kuidas containers omavahel suhtlevad?</p> <p>Analoogia: Container = korter majas. Network = telefonikaabel korterite vahel.</p>"},{"location":"docker_fundamentals/lecture/#default-networks","title":"Default networks","text":"<pre><code># Vaata k\u00f5iki v\u00f5rke\ndocker network ls\n\n# Default networks:\n# bridge    \u2190 Default network\n# host      \u2190 Host network\n# none      \u2190 No network\n</code></pre>"},{"location":"docker_fundamentals/lecture/#bridge-network-default","title":"Bridge network (default)","text":"<pre><code># Default k\u00e4itumine\ndocker run -d --name web1 nginx\ndocker run -d --name web2 nginx\n\n# Containers saavad IP aadressid:\n# web1: 172.17.0.2\n# web2: 172.17.0.3\n\n# Saavad ping'ida IP kaudu\ndocker exec web1 ping 172.17.0.3  # \u2705 T\u00f6\u00f6tab\n\n# AGA EI SAA kasutada nimesid\ndocker exec web1 ping web2        # \u274c Ei t\u00f6\u00f6ta\n</code></pre>"},{"location":"docker_fundamentals/lecture/#custom-networks-soovitatud","title":"Custom networks (SOOVITATUD!)","text":"<pre><code># Loo custom network\ndocker network create myapp-network\n\n# K\u00e4ivita containers custom network'is\ndocker run -d --name web --network myapp-network nginx\ndocker run -d --name api --network myapp-network python:3.9\n\n# N\u00fc\u00fcd hostname resolution t\u00f6\u00f6tab!\ndocker exec web ping api          # \u2705 T\u00f6\u00f6tab!\ndocker exec api ping web          # \u2705 T\u00f6\u00f6tab!\n</code></pre>"},{"location":"docker_fundamentals/lecture/#praktiline-naide-3-tier-app","title":"Praktiline n\u00e4ide: 3-tier app","text":"<pre><code># Loo networks\ndocker network create frontend   # Web \u2194 API\ndocker network create backend    # API \u2194 Database\n\n# Database (ainult backend)\ndocker run -d --name db \\\n  --network backend \\\n  -e POSTGRES_PASSWORD=secret \\\n  postgres:13\n\n# API (m\u00f5lemas networks)\ndocker run -d --name api \\\n  --network backend \\\n  python:3.9\ndocker network connect frontend api\n\n# Web (ainult frontend)  \ndocker run -d --name web \\\n  --network frontend \\\n  -p 80:80 \\\n  nginx\n</code></pre> <p>Topology: <pre><code>Internet \u2192 [web] \u2192 [api] \u2192 [db]\n          frontend backend\n</code></pre></p>"},{"location":"docker_fundamentals/lecture/#host-networking","title":"Host networking","text":"<pre><code># Container kasutab host network'i\ndocker run -d --network host nginx\n\n# Container port'id on otse host'is\n# Ei vaja port mapping'ut!\ncurl http://localhost:80  # T\u00f6\u00f6tab kohe\n</code></pre>"},{"location":"docker_fundamentals/lecture/#docker-volumes","title":"Docker Volumes","text":"<p>Probleem: Container kustutamisel K\u00d5IK andmed kaovad!</p> <p>Analoogia: Volume = v\u00e4line k\u00f5vaketas, mida saad container'ite vahel jagada.</p>"},{"location":"docker_fundamentals/lecture/#volume-tuubid","title":"Volume t\u00fc\u00fcbid","text":""},{"location":"docker_fundamentals/lecture/#named-volumes-soovitatud","title":"Named volumes (SOOVITATUD)","text":"<pre><code># Loo named volume\ndocker volume create mydata\n\n# Kasuta volume'i\ndocker run -d \\\n  --name database \\\n  -v mydata:/var/lib/mysql \\\n  mysql:8.0\n\n# Volume info\ndocker volume ls\ndocker volume inspect mydata\n</code></pre>"},{"location":"docker_fundamentals/lecture/#bind-mounts-host-kaustade-kinnitamine","title":"Bind mounts (host kaustade kinnitamine)","text":"<pre><code># Mount host directory \u2192 container\ndocker run -d \\\n  --name web \\\n  -v /home/user/website:/usr/share/nginx/html \\\n  nginx\n\n# Muudatused host'is on kohe n\u00e4htavad container'is!\necho \"&lt;h1&gt;Hello&lt;/h1&gt;\" &gt; /home/user/website/index.html\ncurl http://localhost  # Uus sisu!\n</code></pre>"},{"location":"docker_fundamentals/lecture/#tmpfs-mounts-ram-based","title":"tmpfs mounts (RAM-based)","text":"<pre><code># Temporary storage (ainult RAM'is)\ndocker run -d \\\n  --name cache \\\n  --tmpfs /tmp \\\n  redis:alpine\n\n# /tmp data kaob container'i restart'imisel\n</code></pre>"},{"location":"docker_fundamentals/lecture/#praktiline-naide-persistent-database","title":"Praktiline n\u00e4ide: Persistent database","text":"<pre><code>## Task 29: Loo volume\ndocker volume create postgres_data\n\n## Task 30: K\u00e4ivita database volume'iga\ndocker run -d \\\n  --name mydb \\\n  -e POSTGRES_PASSWORD=secret \\\n  -v postgres_data:/var/lib/postgresql/data \\\n  postgres:13\n\n## Task 31: Loo andmeid\ndocker exec -it mydb psql -U postgres\n# CREATE TABLE users (id SERIAL, name TEXT);\n# INSERT INTO users (name) VALUES ('Alice'), ('Bob');\n\n## Kustuta container\ndocker stop mydb &amp;&amp; docker rm mydb\n\n## Task 32: K\u00e4ivita uus container SAMA volume'iga\ndocker run -d \\\n  --name newdb \\\n  -e POSTGRES_PASSWORD=secret \\\n  -v postgres_data:/var/lib/postgresql/data \\\n  postgres:13\n\n## Task 33: Andmed on alles!\ndocker exec -it newdb psql -U postgres -c \"SELECT * FROM users;\"\n</code></pre>"},{"location":"docker_fundamentals/lecture/#development-workflow","title":"Development workflow","text":"<pre><code># Mount source code arendamiseks\ndocker run -it \\\n  --name dev \\\n  -v $(pwd):/workspace \\\n  -w /workspace \\\n  -p 3000:3000 \\\n  node:16 bash\n\n# Edita faile host'is, jooksu container'is!\n</code></pre>"},{"location":"docker_fundamentals/lecture/#volume-cleanup","title":"Volume cleanup","text":"<pre><code># Vaata volumes\ndocker volume ls\n\n# Kustuta volume\ndocker volume rm mydata\n\n# Kustuta kasutamata volumes\ndocker volume prune\n</code></pre>"},{"location":"docker_fundamentals/lecture/#kokkuvote_2","title":"Kokkuv\u00f5te","text":"<p>Networks: Containers suhtlevad custom network'ides hostname'ide kaudu</p> <p>Volumes: Andmed p\u00fcsivad container'ite kustutamisel</p> <p>Best practices: - Kasuta custom networks - Named volumes production'is - Bind mounts development'is</p>"},{"location":"docker_fundamentals/lecture/#kokkuvote-week-19-docker-fundamentals","title":"Kokkuv\u00f5te: Week 19 Docker Fundamentals","text":"<p>Selles n\u00e4dalas \u00f5ppisime:</p>"},{"location":"docker_fundamentals/lecture/#peamised-teemad","title":"Peamised teemad:","text":"<ol> <li>Containers vs VMs</li> <li>Container efektiivsus ja kiirus</li> <li>Ressursside optimeerimine</li> <li> <p>Deployment stsenaariumi valikud</p> </li> <li> <p>Docker CLI Mastery</p> </li> <li>Container lifecycle management</li> <li>Image operations ja cleanup</li> <li> <p>Development workflows</p> </li> <li> <p>Podman Alternative</p> </li> <li>Daemonless architecture</li> <li>Rootless security</li> <li> <p>Kubernetes integration</p> </li> <li> <p>Dockerfile Optimization</p> </li> <li>Layer caching strategies</li> <li>Multi-stage builds</li> <li>Security best practices</li> <li> <p>Size optimization</p> </li> <li> <p>Networking &amp; Storage</p> </li> <li>Custom networks ja service discovery</li> <li>Volume persistence strategies</li> <li>Development ja production patterns</li> </ol>"},{"location":"docker_fundamentals/lecture/#praktilised-oskused","title":"\ud83d\udee0 Praktilised oskused:","text":"<ul> <li>Container technology m\u00f5istmine</li> <li>Docker CLI commands fluently</li> <li>Dockerfile kirjutamine optimaalselt</li> <li>Network ja volume management</li> <li>Docker vs Podman trade-offs</li> </ul>"},{"location":"docker_fundamentals/lecture/#jargmine-nadal","title":"J\u00e4rgmine n\u00e4dal:","text":"<p>N\u00e4dal 21 - Docker Compose ja Orchestration: - Multi-container applications - Service orchestration - Environment management - Production deployment strategies</p> <p>Valmistumine: M\u00f5elge, kuidas hallata keerulist rakendust, mis vajab andmebaasi, web serverit, cache'i ja monitoring'ut k\u00f5ike koos?</p> <p>Head containeriseerimist! </p>"},{"location":"docker_orchestration/homework/","title":"Kodut\u00f6\u00f6: Docker Compose ja Kubernetes Praktika","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Docker Compose ja Kubernetes praktiline kasutamine praktilist t\u00f6\u00f6d</p>"},{"location":"docker_orchestration/homework/#task-1-projekt-multi-container-rakendus-docker-composeiga-ja-kubernetesil","title":"Task 1: Projekt: Multi-Container Rakendus Docker Compose'iga ja Kubernetes'il**","text":"<p>Docker Compose v\u00f5imaldab hallata mitut container'it kui \u00fchte rakendust. Kubernetes v\u00f5imaldab hallata mitut container'it mitmel masinal. Selles kodut\u00f6\u00f6s \u00f5pite m\u00f5lemat l\u00e4henemist.</p>"},{"location":"docker_orchestration/homework/#mida-te-ehitate","title":"Mida te ehitate?","text":"<p>\ud83c\udf10 Frontend - Lihtne web rakendus (HTML/CSS/JS) kasutajaliidese jaoks \ud83d\udd27 Backend - Flask API \u00e4riloogika ja andmete t\u00f6\u00f6tlemiseks \ud83d\uddc4 Database - PostgreSQL andmete salvestamiseks \ud83d\udcca Monitoring - Health checks ja logide vaatamine</p> <p>\ud83d\udd17 Teenuste suhtlus: <pre><code>Kasutaja \u2192 Frontend \u2192 Backend \u2192 Database\n     \u2191                                    \u2193\n     \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Vastus \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2190\n</code></pre></p>"},{"location":"docker_orchestration/homework/#arhitektuuri-diagramm","title":"Arhitektuuri diagramm","text":"<pre><code>graph TB\n    subgraph \"Internet\"\n        User[\ud83d\udc64 Kasutaja]\n    end\n\n    subgraph \"Kubernetes Cluster\"\n        subgraph \"Ingress Layer\"\n            Ingress[\u2696 Nginx Ingress&lt;br/&gt;Load Balancer]\n        end\n\n        subgraph \"Application Layer\"\n            Frontend1[\ud83c\udf10 Frontend Pod 1&lt;br/&gt;React App]\n            Frontend2[\ud83c\udf10 Frontend Pod 2&lt;br/&gt;React App]\n            Backend1[\ud83d\udd27 Backend Pod 1&lt;br/&gt;Flask API]\n            Backend2[\ud83d\udd27 Backend Pod 2&lt;br/&gt;Flask API]\n        end\n\n        subgraph \"Data Layer\"\n            Redis[ Redis Cache&lt;br/&gt;Session/Data Cache]\n            Postgres[\ud83d\uddc4 PostgreSQL&lt;br/&gt;Persistent Data]\n        end\n\n        subgraph \"Monitoring\"\n            Health[\ud83d\udcca Health Checks&lt;br/&gt;Liveness/Readiness]\n        end\n    end\n\n    User --&gt; Ingress\n    Ingress --&gt; Frontend1\n    Ingress --&gt; Frontend2\n    Ingress --&gt; Backend1\n    Ingress --&gt; Backend2\n\n    Frontend1 --&gt; Backend1\n    Frontend2 --&gt; Backend2\n    Backend1 --&gt; Redis\n    Backend2 --&gt; Redis\n    Backend1 --&gt; Postgres\n    Backend2 --&gt; Postgres\n\n    Health --&gt; Frontend1\n    Health --&gt; Frontend2\n    Health --&gt; Backend1\n    Health --&gt; Backend2\n    Health --&gt; Redis\n    Health --&gt; Postgres\n\n    style Ingress fill:#ff9999\n    style Frontend1 fill:#99ccff\n    style Frontend2 fill:#99ccff\n    style Backend1 fill:#99ff99\n    style Backend2 fill:#99ff99\n    style Redis fill:#ffcc99\n    style Postgres fill:#cc99ff\n    style Health fill:#ffff99</code></pre>"},{"location":"docker_orchestration/homework/#keskkonna-seadistamine","title":"Keskkonna seadistamine**","text":""},{"location":"docker_orchestration/homework/#kontrollige-keskkonda","title":"Kontrollige keskkonda:","text":"<pre><code>docker --version\ndocker-compose --version\nminikube status\nkubectl get nodes\n</code></pre>"},{"location":"docker_orchestration/homework/#loo-projekti-struktuur","title":"Loo projekti struktuur:","text":"<pre><code>mkdir ~/docker-orchestration-homework\ncd ~/docker-orchestration-homework\nmkdir -p app/{frontend,backend}\ngit init\necho \"node_modules/\\n.env\\n*.log\" &gt; .gitignore\n</code></pre>"},{"location":"docker_orchestration/homework/#rakenduse-komponentide-loomine","title":"Rakenduse komponentide loomine ()**","text":"<p>N\u00fc\u00fcd hakkame tegelikult midagi tegema. Siin n\u00e4eme, kuidas k\u00f5ik t\u00f6\u00f6tab.</p> <p>Kujutage ette, et ehitame maja. Meil on plaan, meil on materjalid, ja n\u00fc\u00fcd hakkame ehitama. Frontend on nagu maja esiukse - see, mida k\u00f5ik n\u00e4evad. Backend on nagu maja \"aju\" - seal toimub k\u00f5ik loogika. Ja andmebaas? See on nagu maja keldri - seal hoitakse k\u00f5iki olulisi asju.</p> <p>Ma tean, et see v\u00f5ib tunduda keeruline, aga teeme seda sammhaaval. Iga samm on lihtne, ja kui teeme k\u00f5ik \u00f5igesti, siis l\u00f5puks t\u00f6\u00f6tab k\u00f5ik koos nagu orkester.</p> <p>Mida me t\u00e4pselt teeme? No, k\u00f5igepealt loome lihtsa veebilehe. Siis teeme API, mis t\u00f6\u00f6tleb andmeid. Ja l\u00f5puks \u00fchendame k\u00f5ike andmebaasiga. K\u00f5ik on lihtne, kui teeme seda sammhaaval.</p> <p>Ja mida te \u00f5pite? No, k\u00f5igepealt \u00f5pite, kuidas veebirakendused t\u00f6\u00f6tavad. Siis \u00f5pite, kuidas erinevad osad omavahel suhtlevad. Ja l\u00f5puks \u00f5pite, kuidas k\u00f5ike koos hoida ja probleeme lahendada.</p>"},{"location":"docker_orchestration/homework/#lihtne-frontend","title":"Lihtne Frontend","text":"<p>N\u00fc\u00fcd kopeerime frontend'i failid. See on automation kursus, seega me ei kirjuta HTML koodi - me lihtsalt kopeerime valmis failid.</p> <p>Frontend on nagu kontrollpaneel - see n\u00e4itab kasutajale, mis toimub ja v\u00f5imaldab neil rakendust testida.</p> <p>Kuidas me seda teeme? No, k\u00f5igepealt kopeerime failid teacher_repo'st. See on nagu valmis maja ostmine - me ei ehita seda, me lihtsalt kasutame seda.</p> <pre><code># Kopeerige Docker Compose fail\ncp teacher_repo/docker-orchestration-starter/templates/docker-compose.yml.example docker-compose.yml\n</code></pre> <p>Mida te t\u00e4pselt teete? No, k\u00f5igepealtge teacher_repo kausta ja kopeerige frontend failid oma projekti kausta. See on lihtne - ainult kopeerige failid \u00f5igesse kohta.</p> <pre><code># Kopeerige frontend failid\ncp teacher_repo/docker-orchestration-starter/templates/app/frontend/* app/frontend/\n</code></pre> <p>Kuidas testida? Kui failid on kopeeritud, avage brauser,ge <code>http://localhost:8080</code> ja vajutage nuppe. Vaadake, kas midagi juhtub.</p> <p>Mida te \u00f5pite? Kuidas kasutada valmis komponente, kuidas suhelda backend API-ga ja kuidas testida rakenduse t\u00f6\u00f6d.</p> <p>Ja kui midagi ei t\u00f6\u00f6ta? Kontrollige, et failid on \u00f5iges kaustas ja veenduge, et backend t\u00f6\u00f6tab.</p>"},{"location":"docker_orchestration/homework/#lihtne-backend","title":"Lihtne Backend","text":"<p>N\u00fc\u00fcd kopeerime backend'i failid. See on automation kursus, seega me ei kirjuta Python koodi - me lihtsalt kopeerime valmis failid.</p> <p>Backend on nagu restorani k\u00f6\u00f6k - kasutajad ei n\u00e4e seda, aga k\u00f5ik t\u00f6\u00f6 toimub seal. Frontend saadab tellimused, backend t\u00f6\u00f6tleb need ja tagastab tulemused.</p> <p>Kuidas me seda teeme? No, k\u00f5igepealt kopeerime Python failid teacher_repo'st. See on nagu valmis k\u00f6\u00f6gi retsept - me ei kirjuta seda, me lihtsalt kasutame seda.</p> <p>Mida te t\u00e4pselt teete? No, k\u00f5igepealtge teacher_repo kausta ja kopeerige backend failid oma projekti kausta. See on lihtne - ainult kopeerige failid \u00f5igesse kohta.</p> <pre><code># Kopeerige backend failid\ncp teacher_repo/docker-orchestration-starter/templates/app/backend/* app/backend/\n</code></pre> <p>Kuidas testida? Kui failid on kopeeritud, k\u00e4ivitage <code>python app.py</code>, avage brauser jage <code>http://localhost:5000/api/status</code>. Peaksite n\u00e4gema JSON vastust.</p> <p>Mida te \u00f5pite? Kuidas kasutada valmis API-d, kuidas \u00fchenduda andmebaasiga ja kuidas testida backend'i t\u00f6\u00f6d.</p> <p>Ja kui midagi ei t\u00f6\u00f6ta? Kontrollige, et failid on \u00f5iges kaustas, kontrollige, et Python on installitud ja veenduge, et andmebaas t\u00f6\u00f6tab.</p>"},{"location":"docker_orchestration/homework/#task-2-kubernetes-praktika","title":"Task 2: Kubernetes Praktika ()**","text":"<p>N\u00fc\u00fcd hakkame \u00f5ppima Kubernetes'i - see on nagu \u00f5ppima, kuidas hallata mitut restorani korraga!</p> <p>Miks me seda teeme? Kubernetes on nagu restoraniketi juht - see v\u00f5imaldab hallata mitut rakendust mitmel masinal korraga. Docker Compose oli nagu \u00fche restorani juht, aga Kubernetes on nagu kogu keti juht.</p> <p>Kuidas me seda teeme? 1. Seadistame Kubernetes keskkonna - nagu restorani kohvikuga varustamine 2. Loome manifeste - need on nagu restorani t\u00f6\u00f6juhendid 3. Juurutame rakenduse - nagu restorani avamine 4. Testime t\u00f6\u00f6d - nagu kvaliteedi kontroll</p>"},{"location":"docker_orchestration/homework/#kubernetes-keskkonna-seadistamine","title":"Kubernetes Keskkonna Seadistamine","text":"<p>Enne kui hakkame restorani avama, peame veenduma, et k\u00f5ik t\u00f6\u00f6riistad on kohal.</p> <p>Miks me seda teeme? Kubernetes vajab erilist keskkonda - nagu restoran vajab k\u00f6\u00f6ki, laudasid ja personali. Minikube simuleerib t\u00f5elist Kubernetes clustrit teie arvutil.</p> <p>Kuidas me seda teeme? 1. Kontrollige kubectl - see on nagu restorani juhtimise t\u00f6\u00f6riist 2. Kontrollige Minikube - see on nagu restorani kohvik 3. Testige \u00fchendust - veenduge, et k\u00f5ik t\u00f6\u00f6tab</p> <p>Kontrollige Minikube'i: <pre><code># Kontrollige kubectl konfiguratsiooni - see n\u00e4itab, millist restorani juhtida\nkubectl config current-context\n\n# Minikube konteksti seadistamine - valige \u00f5ige restoran\nkubectl config use-contextikube\n\n# Testige \u00fchendust - veenduge, et restoran on avatud\nkubectl cluster-info\n</code></pre></p> <p>Mida peaksite n\u00e4gema? - <code>minikube</code> kontekst - Cluster info koos URL'iga - Mitte \u00fchtegi veateadet</p>"},{"location":"docker_orchestration/homework/#kubernetes-manifests-loomine","title":"Kubernetes Manifests Loomine","text":"<p>N\u00fc\u00fcd loome restorani t\u00f6\u00f6juhendid - need on nagu retseptid, mis \u00fctlevad, kuidas iga teenus t\u00f6\u00f6tab.</p> <p>Miks me seda teeme? Manifestid on nagu restorani t\u00f6\u00f6juhendid - need \u00fctlevad Kubernetes'ile, mida ja kuidas teha. Ilma nendeta ei tea Kubernetes, mida teha.</p> <p>Kuidas me seda teeme? 1. Loome kaustade struktuuri - nagu restorani osakondade korraldamine 2. Loome iga komponendi manifesti - nagu iga osakonna t\u00f6\u00f6juhend 3. Seadistame teenuste suhtluse - nagu osakondade vahelise koost\u00f6\u00f6</p> <p>Mida peate tegema:</p> <ol> <li> <p>Loo projekti struktuur: <pre><code># Looge kaustad nagu restorani osakonnad\nmkdir -p k8s/{namespace,database,backend,frontend}\n</code></pre></p> </li> <li> <p>Loo Namespace (k8s/namespace/namespace.yaml):</p> </li> <li>See on nagu restorani nimi - eraldab teie rakenduse teistest</li> <li>Kasuta <code>apiVersion: v1</code></li> <li>Lisa <code>kind: Namespace</code></li> <li> <p>Lisa metadata nimega <code>docker-orchestration-app</code></p> </li> <li> <p>Loo Database komponendid:</p> </li> <li>Deployment (k8s/database/deployment.yaml): PostgreSQL container, 1 replica<ul> <li>See on nagu andmebaasi serveri seadistamine</li> </ul> </li> <li>PVC (k8s/database/pvc.yaml): 1Gi salvestusruum<ul> <li>See on nagu andmete salvestamise ruum</li> </ul> </li> <li> <p>Service (k8s/database/service.yaml): ClusterIP teenus pordil 5432</p> <ul> <li>See on nagu andmebaasi telefoninumber</li> </ul> </li> <li> <p>Loo Backend komponendid:</p> </li> <li>Deployment (k8s/backend/deployment.yaml): Flask app, 2 replicas, health checks<ul> <li>See on nagu backend serverite seadistamine</li> </ul> </li> <li> <p>Service (k8s/backend/service.yaml): ClusterIP teenus pordil 5000</p> <ul> <li>See on nagu backend'i telefoninumber</li> </ul> </li> <li> <p>Loo Frontend komponendid:</p> </li> <li>Deployment (k8s/frontend/deployment.yaml): Nginx container, 2 replicas<ul> <li>See on nagu frontend serverite seadistamine</li> </ul> </li> <li>ConfigMap (k8s/frontend/configmap.yaml): HTML sisu<ul> <li>See on nagu frontend'i sisu</li> </ul> </li> <li>Service (k8s/frontend/service.yaml): LoadBalancer teenus pordil 80<ul> <li>See on nagu frontend'i telefoninumber</li> </ul> </li> </ol> <p>Kuidas testida? 1. Looge k\u00f5ik failid 2. Kontrollige YAML s\u00fcntaksit 3. Veenduge, et failid on \u00f5iges kaustas</p> <p>Mida \u00f5pite: - Kuidas luua Kubernetes manifeste - Kuidas kasutada Deployments, Services, ConfigMaps - Kuidas seadistada health checks - Kuidas kasutada PersistentVolumeClaims - Kuidas konfigureerida teenuste v\u00f5rgu\u00fchendused</p> <p>Kui midagi ei t\u00f6\u00f6ta: - Kontrollige YAML s\u00fcntaksit (indentatsioon on oluline!) - Veenduge, et failid on \u00f5iges kaustas - Kontrollige, et Minikube t\u00f6\u00f6tab</p>"},{"location":"docker_orchestration/homework/#kubernetes-juurutamine","title":"Kubernetes Juurutamine","text":"<p>N\u00fc\u00fcd avame restorani - see on nagu k\u00f5igi t\u00f6\u00f6juhendite rakendamine ja restorani avamine k\u00fclastajatele.</p> <p>Miks me seda teeme? Juurutamine on nagu restorani avamine - k\u00f5ik t\u00f6\u00f6juhendid on valmis, personal on kohal ja n\u00fc\u00fcd avame uksed k\u00fclastajatele.</p> <p>Kuidas me seda teeme? 1. Juurutame iga komponendi - nagu iga osakonna k\u00e4ivitamine 2. Kontrollime juurutamist - nagu kvaliteedi kontroll 3. Testime t\u00f6\u00f6d - nagu esimeste k\u00fclastajate vastuv\u00f5tmine</p> <p>Juurutage k\u00f5ik komponendid: <pre><code># Namespace - looge restorani nimi\nkubectl apply -f k8s/namespace/\n\n# Database - k\u00e4ivitage andmebaasi server\nkubectl apply -f k8s/database/\n\n# Backend - k\u00e4ivitage backend serverid\nkubectl apply -f k8s/backend/\n\n# Frontend - k\u00e4ivitage frontend serverid\nkubectl apply -f k8s/frontend/\n</code></pre></p> <p>Mida peaksite n\u00e4gema? - <code>namespace/docker-orchestration-app created</code> - <code>deployment.apps/database-deployment created</code> - <code>service/database-service created</code> - <code>deployment.apps/backend-deployment created</code> - <code>service/backend-service created</code> - <code>deployment.apps/frontend-deployment created</code> - <code>service/frontend-service created</code></p> <p>Kontrollige juurutamist: <pre><code># Kontrollige k\u00f5iki ressurssideid - nagu restorani \u00fclevaatus\nkubectl get all -n docker-orchestration-app\n\n# Kontrollige podide staatust - nagu personali kontroll\nkubectl get pods -n docker-orchestration-app\n\n# Vaadake logisid - nagu t\u00f6\u00f6 j\u00e4lgimine\nkubectl logs -f deployment/backend-deployment -n docker-orchestration-app\n</code></pre></p> <p>Mida peaksite n\u00e4gema? - K\u00f5ik podid oleksid <code>Running</code> staatuses - Mitte \u00fchtegi <code>Pending</code> v\u00f5i <code>Error</code> staatust - Logides peaks olema <code>Running on http://0.0.0.0:5000</code></p> <p>Kui midagi ei t\u00f6\u00f6ta: - Kontrollige, et k\u00f5ik failid on juurutatud - Vaadake podide logisid vigade jaoks - Kontrollige, et Minikube'l on piisavalt ressursse</p>"},{"location":"docker_orchestration/homework/#docker-compose-ja-kubernetes-vordlus","title":"Docker Compose ja Kubernetes V\u00f5rdlus ()**","text":"<p>Tere! N\u00fc\u00fcd v\u00f5rdleme kahte l\u00e4henemist - see on nagu v\u00f5rdlema \u00fche restorani juhtimist vs kogu restoraniketi juhtimist.</p> <p>Miks me seda teeme? V\u00f5rdlus aitab m\u00f5ista, millal kasutada Docker Compose'i ja millal Kubernetes'i. See on nagu valida \u00fche restorani ja kogu keti vahel.</p> <p>Kuidas me seda teeme? 1. Juurutame Docker Compose rakenduse - nagu \u00fche restorani avamine 2. Juurutame Kubernetes rakenduse - nagu kogu keti avamine 3. V\u00f5rdleme t\u00f6\u00f6d - nagu kvaliteedi v\u00f5rdlus 4. Anal\u00fc\u00fcsime erinevusi - nagu juhtimise v\u00f5rdlus</p>"},{"location":"docker_orchestration/homework/#docker-compose-juurutamine","title":"Docker Compose Juurutamine","text":"<p>Tere! N\u00fc\u00fcd avame \u00fche restorani - see on lihtne ja kiire.</p> <p>Miks me seda teeme? Docker Compose on nagu \u00fche restorani avamine - lihtne, kiire ja k\u00f5ik on \u00fchel kohal. See on ideaalne arenduseks ja testimiseks.</p> <p>Kuidas me seda teeme? 1. Loome Docker Compose faili - see on nagu restorani men\u00fc\u00fc 2. K\u00e4ivitame rakenduse - nagu restorani avamine 3. Kontrollime t\u00f6\u00f6d - nagu kvaliteedi kontroll</p> <p>K\u00e4ivita Docker Compose rakendus: <pre><code># Docker Compose faili loomine - see on nagu restorani men\u00fc\u00fc kirjutamine\ncat &gt; docker-compose.yml &lt;&lt; 'EOF'\nversion: '3.8'\n\nservices:\n  frontend:\n    image: nginx:alpine\n    ports:\n      - \"8080:80\"\n    volumes:\n      - ./app/frontend:/usr/share/nginx/html:ro\n    depends_on:\n      - backend\n\n  backend:\n    build: ./app/backend\n    ports:\n      - \"5000:5000\"\n    environment:\n      - DB_HOST=db\n      - DB_NAME=app\n      - DB_USER=postgres\n      - DB_PASSWORD=secret\n    depends_on:\n      - db\n\n  db:\n    image: postgres:13\n    environment:\n      - POSTGRES_DB=app\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=secret\n    volumes:\n      - db_data:/var/lib/postgresql/data\n\nvolumes:\n  db_data:\nEOF\n\n# K\u00e4ivita rakendus - nagu restorani avamine\ndocker-compose up -d\n\n# Kontrolli teenuseid - nagu personali kontroll\ndocker-compose ps\n</code></pre></p> <p>Mida peaksite n\u00e4gema? - <code>frontend</code> - <code>Up</code> staatus - <code>backend</code> - <code>Up</code> staatus - <code>db</code> - <code>Up</code> staatus - Mitte \u00fchtegi <code>Exit</code> v\u00f5i <code>Error</code> staatust</p> <p>Kuidas testida? 1. Avage brauser jage <code>http://localhost:8080</code> 2. Peaksite n\u00e4gema frontend'i 3. Vajutage nuppe ja testige funktsionaalsust</p>"},{"location":"docker_orchestration/homework/#kubernetes-juurutamine_1","title":"Kubernetes Juurutamine","text":"<p>Juuruta sama rakendus Kubernetes'il: <pre><code># Backend image build ja load\ncd app/backend\ndocker build -t docker-orchestration-backend:latest .\nminikube image load docker-orchestration-backend:latest\n\n# Juuruta k\u00f5ik komponendid\nkubectl apply -f k8s/namespace/\nkubectl apply -f k8s/database/\nkubectl apply -f k8s/backend/\nkubectl apply -f k8s/frontend/\n\n# Kontrolli juurutamist\nkubectl get all -n docker-orchestration-app\n</code></pre></p>"},{"location":"docker_orchestration/homework/#vordlus-ja-testimine","title":"V\u00f5rdlus ja Testimine","text":"<p>Testi m\u00f5lemat rakendust: <pre><code># Docker Compose test\ncurl http://localhost:8080\ncurl http://localhost:5000/api/status\n\n# Kubernetes test\nkubectl port-forward service/frontend-service 8081:80 -n docker-orchestration-app &amp;\nkubectl port-forward service/backend-service 5001:5000 -n docker-orchestration-app &amp;\n\ncurl http://localhost:8081\ncurl http://localhost:5001/api/status\n</code></pre></p> <p>V\u00f5rdlus tabel:</p> Aspekt Docker Compose Kubernetes Juhtimine <code>docker-compose up/down</code> <code>kubectl apply/delete</code> Skaleerimine K\u00e4sitsi replica arv <code>kubectl scale deployment</code> Load Balancing Ei ole Automaatne Health Checks K\u00e4sitsi Liveness/Readiness probes Storage Volumes PVC/PV Networking Lihtne Services, Ingress Monitoring K\u00e4sitsi Automaatne"},{"location":"docker_orchestration/homework/#task-3-scaling-and-monitoring","title":"Task 3: Scaling and Monitoring ()**","text":""},{"location":"docker_orchestration/homework/#application-scaling","title":"Application Scaling","text":"<pre><code># Skaleerige backend teenust\nkubectl scale deployment backend-deployment --replicas=3 -n docker-orchestration-app\n\n# Skaleerige frontend teenust\nkubectl scale deployment frontend-deployment --replicas=3 -n docker-orchestration-app\n\n# Kontrollige skaleerimist\nkubectl get pods -n docker-orchestration-app\n</code></pre>"},{"location":"docker_orchestration/homework/#basic-monitoring","title":"Basic Monitoring","text":"<pre><code># Podide ressursside kasutus\nkubectl top pods -n docker-orchestration-app\n\n# Node ressursside kasutus\nkubectl top nodes\n\n# Podide logide vaatamine\nkubectl logs -l app=backend -n docker-orchestration-app --tail=50\n</code></pre>"},{"location":"docker_orchestration/homework/#health-checks","title":"Health Checks","text":"<pre><code># Testige health endpoint'i\nkubectl port-forward service/backend-service 5000:5000 -n docker-orchestration-app\ncurl http://localhost:5000/api/health\n\n# Testige status endpoint'i\ncurl http://localhost:5000/api/status\n</code></pre>"},{"location":"docker_orchestration/homework/#task-4-advanced-features-optional","title":"Task 4: Advanced Features (Optional)**","text":""},{"location":"docker_orchestration/homework/#configmap-ja-secrets","title":"ConfigMap ja Secrets","text":"<p>k8s/config/configmap.yaml: <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\n  namespace: docker-orchestration-app\ndata:\n  NODE_ENV: \"production\"\n  DB_NAME: \"app\"\n  REDIS_PORT: \"6379\"\n</code></pre></p> <p>k8s/config/secret.yaml: <pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: app-secrets\n  namespace: docker-orchestration-app\ntype: Opaque\ndata:\n  DB_PASSWORD: c2VjcmV0  # base64 encoded \"secret\"\n  DB_USER: cG9zdGdyZXM=  # base64 encoded \"postgres\"\n</code></pre></p>"},{"location":"docker_orchestration/homework/#horizontal-pod-autoscaler","title":"Horizontal Pod Autoscaler","text":"<p>k8s/scaling/hpa.yaml: <pre><code>apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: backend-hpa\n  namespace: docker-orchestration-app\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: backend-deployment\nReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n</code></pre></p>"},{"location":"docker_orchestration/homework/#task-5-documentation-ja-submission","title":"Task 5: Documentation ja Submission ()**","text":""},{"location":"docker_orchestration/homework/#readmemd-loomine","title":"README.md loomine","text":"<pre><code># Docker Orchestration Kubernetes Homework\n\n## Task 6: Projekt kirjeldus\nMulti-tier web application Kubernetes'il koos frontend, backend, database ja cache teenustega.\n\n## Task 7: Komponendid\n- Frontend: React application\n- Backend: Python Flask API\n- Database: PostgreSQL\n- Cache: Redis\n- Ingress: Nginx\n\n## Task 8: Juurutamine\n```bash\nkubectl apply -f k8s/\n</code></pre>"},{"location":"docker_orchestration/homework/#testimine","title":"Testimine","text":"<pre><code>kubectl port-forward service/frontend-service 8080:3000 -n docker-orchestration-app\n</code></pre>"},{"location":"docker_orchestration/homework/#task-9-skaleerimine","title":"Task 9: Skaleerimine","text":"<p><pre><code>kubectl scale deployment backend-deployment --replicas=3 -n docker-orchestration-app\n</code></pre> <pre><code>#### Git commit ja push\n\n```bash\n# Lisa k\u00f5ik failid\ngit add .\n\n# Esimene commit\ngit commit -m \"Initial Kubernetes deployment setup\"\n\n# Push GitHub'i\ngit push -u origin main\n</code></pre></p>"},{"location":"docker_orchestration/homework/#task-10-troubleshooting","title":"Task 10: Troubleshooting","text":""},{"location":"docker_orchestration/homework/#levinud-probleemid","title":"Levinud probleemid:","text":"<p>Probleem: Pod ei k\u00e4ivitu <pre><code># Kontrollige podi staatust\nkubectl describe pod &lt;pod-name&gt; -n docker-orchestration-app\n\n# Vaadake logisid\nkubectl logs &lt;pod-name&gt; -n docker-orchestration-app\n</code></pre></p> <p>Probleem: Service ei \u00fchendu <pre><code># Kontrollige service konfiguratsiooni\nkubectl describe service &lt;service-name&gt; -n docker-orchestration-app\n\n# Testige endpoint'i\nkubectl port-forward service/&lt;service-name&gt; &lt;port&gt; -n docker-orchestration-app\n</code></pre></p> <p>Probleem: Image ei leia <pre><code># Kontrollige image olemasolu\ndocker images | grep docker-orchestration\n\n# Load image Minikube'i\nminikube image load docker-orchestration-backend:latest\n</code></pre></p> <p>Probleem: Kodu masina seadistamine - Vaadake eraldi juhendit: <code>kodu_masina_ehitus_juhend.md</code></p>"},{"location":"docker_orchestration/homework/#task-11-lisaressursid","title":"Task 11: Lisaressursid","text":"<ul> <li>Kubernetes Documentation</li> <li>Minikube Getting Started</li> <li>Kubernetes YAML Reference</li> <li>Kubernetes Best Practices</li> <li>Kubernetes Architecture</li> <li>Microservices Patterns</li> </ul>"},{"location":"docker_orchestration/homework/#alternative-orchestrators","title":"Alternative Orchestrators:","text":"<ul> <li>Docker Swarm</li> <li>HashiCorp Nomad</li> <li>Apache Mesos</li> <li>Docker Swarm vs Kubernetes</li> </ul>"},{"location":"docker_orchestration/homework/#kodu-masina-seadistamine","title":"\ud83c\udfe0 Kodu masina seadistamine:","text":"<ul> <li>Kodu Masina Ehitus Juhend - T\u00e4ielik juhend VM, VSCode ja SSH seadistamiseks</li> </ul>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/","title":"\ud83c\udfe0 Kodu Masina Ehitus Juhend","text":"<p>Eesm\u00e4rk: Seadistada arenduskeskkond kodus Kubernetes ja Docker \u00f5ppimiseks</p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#sisukord","title":"Sisukord","text":"<ol> <li>Virtuaalse masina loomine</li> <li>VSCode seadistamine</li> <li>SSH \u00fchenduse seadistamine</li> <li>Docker ja Kubernetes installimine</li> <li>Probleemide lahendamine</li> </ol>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#virtuaalse-masina-loomine","title":"Virtuaalse masina loomine","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#susteemi-nouded","title":"S\u00fcsteemi n\u00f5uded:","text":"<ul> <li>RAM: V\u00e4hemalt 8GB (soovituslik 16GB)</li> <li>CPU: V\u00e4hemalt 4 tuuma (soovituslik 8 tuuma)</li> <li>Ketas: V\u00e4hemalt 50GB vaba ruumi</li> <li>OS: Windows 10/11, macOS, v\u00f5i Linux</li> </ul>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#1-multipass-soovituslik-ubuntu","title":"1. Multipass (soovituslik - Ubuntu)","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#windows-setup","title":"Windows Setup","text":"<pre><code>## Laadige alla: https://multipass.run/download/windows\n## Installige ja taask\u00e4ivitage arvuti\n## Avage PowerShell ja k\u00e4ivitage:\n\n# Looge virtuaalne masin\nmultipass launch --name dev-lab --memory 8G --disk 30G --cpus 4\n\n# \u00dchenduge masinaga\nmultipass shell dev-lab\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#macos-setup","title":"macOS Setup","text":"<pre><code># Installige Homebrew'iga\nbrew install --cask multipass\n\n# Looge virtuaalne masin\nmultipass launch --name dev-lab --memory 8G --disk 30G --cpus 4\nmultipass shell dev-lab\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#linux-setup","title":"Linux Setup","text":"<pre><code># Installige Snap'iga\nsudo snap install multipass\n\n# Looge virtuaalne masin\nmultipass launch --name dev-lab --memory 8G --disk 30G --cpus 4\nmultipass shell dev-lab\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#2-virtualbox-ubuntu-server","title":"2. VirtualBox + Ubuntu Server","text":"<p>1. VirtualBox installimine: - Laadige alla: https://www.virtualbox.org/ - Installige ja taask\u00e4ivitage arvuti</p> <p>2. Ubuntu Server allalaadimine: - Laadige alla: https://ubuntu.com/download/server - Valige LTS versioon (22.04 LTS)</p> <p>3. Virtuaalse masina loomine: <pre><code># VirtualBox'is:\n## \"New\" \u2192 \"Expert mode\"\n## Nimi: \"Dev-Lab\"\n## OS: Ubuntu 64-bit\n## RAM: 8192 MB (8GB)\n## CPU: 4 tuuma\n## Ketas: 50GB\n## K\u00e4ivitage ja installige Ubuntu Server\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#3-wsl2-windows-1011","title":"3. WSL2 (Windows 10/11)","text":"<pre><code># Avage PowerShell administraatorina\nwsl --install -d Ubuntu\n\n# Taask\u00e4ivitage arvuti\n# Avage Ubuntu terminal ja seadistage kasutaja\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#vscode-seadistamine","title":"\ud83d\udcbb VSCode seadistamine","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#1-vscode-installimine","title":"1. VSCode installimine","text":"<p>Windows/macOS/Linux: - Laadige alla: https://code.visualstudio.com/ - Installige ja avage</p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#2-kasulikud-laiendused","title":"2. Kasulikud laiendused","text":"<p>Kubernetes ja Docker: <pre><code># Installige j\u00e4rgmised laiendused:\n## \"Docker\" - Microsoft\n## \"Kubernetes\" - Microsoft\n## \"YAML\" - Red Hat\n## \"Remote - SSH\" - Microsoft\n## \"Remote - WSL\" - Microsoft (Windows)\n</code></pre></p> <p>Arenduskeskkond: <pre><code>## \"GitLens\" - Git integreerimine\n## \"Auto Rename Tag\" - HTML/XML\n## \"Bracket Pair Colorizer\" - koodi lugemine\n## \"Material Icon Theme\" - failide ikoonid\n## \"One Dark Pro\" - tumm teema\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#3-vscode-seaded","title":"3. VSCode seaded","text":"<p>settings.json: <pre><code>{\n    \"editor.fontSize\": 14,\n    \"editor.fontFamily\": \"Consolas, 'Courier New', monospace\",\n    \"editor.tabSize\": 2,\n    \"editor.insertSpaces\": true,\n    \"editor.wordWrap\": \"on\",\n    \"files.autoSave\": \"onFocusChange\",\n    \"terminal.integrated.fontSize\": 14,\n    \"workbench.colorTheme\": \"One Dark Pro\",\n    \"workbench.iconTheme\": \"material-icon-theme\"\n}\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#ssh-\u00fchenduse-seadistamine","title":"\ud83d\udd10 SSH \u00fchenduse seadistamine","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#1-ssh-votmete-loomine-host-masinal","title":"1. SSH v\u00f5tmete loomine (host masinal)","text":"<p>Windows: <pre><code># Avage PowerShell\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n# Salvestage: C:\\Users\\YourName\\.ssh\\id_rsa\n</code></pre></p> <p>macOS/Linux: <pre><code>ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n# Salvestage: ~/.ssh/id_rsa\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#2-ssh-votme-kopeerimine-vmi","title":"2. SSH v\u00f5tme kopeerimine VM'i","text":"<p>Multipass: <pre><code># Kopeerige avalik v\u00f5ti VM'i\nmultipass exec dev-lab -- bash -c 'mkdir -p ~/.ssh'\nmultipass transfer ~/.ssh/id_rsa.pub dev-lab:/home/ubuntu/.ssh/authorized_keys\nmultipass exec dev-lab -- bash -c 'chmod 600 ~/.ssh/authorized_keys'\n</code></pre></p> <p>VirtualBox/WSL2: <pre><code># Kopeerige avalik v\u00f5ti k\u00e4sitsi v\u00f5i kasutage ssh-copy-id\nssh-copy-id username@vm-ip-address\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#3-ssh-konfiguratsioon","title":"3. SSH konfiguratsioon","text":"<p>~/.ssh/config (host masinal): <pre><code>Host dev-lab\n    HostName 192.168.1.100  # VM'i IP aadress\n    User ubuntu\n    Port 22\n    IdentityFile ~/.ssh/id_rsa\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#4-vscode-remote-ssh-seadistamine","title":"4. VSCode Remote SSH seadistamine","text":"<p>1. Avage VSCode 2. Vajutage <code>Ctrl+Shift+P</code> (Windows/Linux) v\u00f5i <code>Cmd+Shift+P</code> (macOS) 3. Otsige \"Remote-SSH: Connect to Host\" 4. Valige \"Add New SSH Host\" 5. Sisestage: <code>ssh ubuntu@192.168.1.100</code> 6. \u00dchenduge ja avage kaust</p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#docker-ja-kubernetes-installimine","title":"Docker ja Kubernetes installimine","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#1-docker-installimine-vms","title":"1. Docker installimine VM's","text":"<pre><code># \u00dchenduge VM'iga\nssh dev-lab\n\n# Docker installimine\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n\n# Lisa kasutaja docker gruppi\nsudo usermod -aG docker $USER\n\n# Taask\u00e4ivitage terminal\nnewgrp docker\n\n# Kontrollige installimist\ndocker --version\ndocker run hello-world\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#2-minikube-installimine","title":"2. Minikube installimine","text":"<pre><code># Kubectl installimine\ncurl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n\n# Minikube installimine\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo installikube-linux-amd64 /usr/local/bin/minikube\n\n# Minikube k\u00e4ivitamine\nminikube start --driver=docker --memory=4096 --cpus=2\n\n# Kontrollige\nkubectl get nodes\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#3-kubernetes-dashboard","title":"3. Kubernetes Dashboard","text":"<pre><code># Dashboard installimine\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml\n\n# Proxy k\u00e4ivitamine\nkubectl proxy --address='0.0.0.0' --port=8001 --accept-hosts='.*'\n\n# Avage brauser: http://vm-ip:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/\n</code></pre>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#probleemide-lahendamine","title":"Probleemide lahendamine","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#1-ssh-uhenduse-probleemid","title":"1. SSH \u00fchenduse probleemid","text":"<p>\u00dchendus ei t\u00f6\u00f6ta: <pre><code># Kontrollige VM'i IP aadressi\nip addr show\n\n# Kontrollige SSH teenust\nsudo systemctl status ssh\n\n# K\u00e4ivitage SSH teenus\nsudo systemctl start ssh\nsudo systemctl enable ssh\n</code></pre></p> <p>V\u00f5tme probleemid: <pre><code># Kontrollige v\u00f5tmete \u00f5igusi\nchmod 600 ~/.ssh/id_rsa\nchmod 644 ~/.ssh/id_rsa.pub\n\n# Kontrollige VM'i v\u00f5tmete \u00f5igusi\nchmod 700 ~/.ssh\nchmod 600 ~/.ssh/authorized_keys\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#2-docker-probleemid","title":"2. Docker probleemid","text":"<p>Docker ei k\u00e4ivitu: <pre><code># Kontrollige Docker teenust\nsudo systemctl status docker\n\n# K\u00e4ivitage Docker\nsudo systemctl start docker\nsudo systemctl enable docker\n\n# Kontrollige kasutaja gruppi\ngroups $USER\n</code></pre></p> <p>Minikube probleemid: <pre><code># Minikube logid\nminikube logs\n\n# Minikube taask\u00e4ivitamine\nminikube stop\nminikube delete\nminikube start --driver=docker\n\n# Ressursi kontroll\nfree -h\ndf -h\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#3-vscode-probleemid","title":"3. VSCode probleemid","text":"<p>Remote SSH ei \u00fchendu: <pre><code># Kontrollige SSH konfiguratsiooni\nssh -T dev-lab\n\n# Kontrollige VSCode Remote SSH laiendust\n# Vajutage Ctrl+Shift+P ja otsige \"Remote-SSH: Show Log\"\n</code></pre></p> <p>Failide s\u00fcnkroniseerimise probleemid: <pre><code># Kontrollige faili \u00f5igusi\nls -la\n\n# Muutke faili omanikku\nsudo chown -R $USER:$USER /path/to/project\n</code></pre></p>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#lisaressursid","title":"Lisaressursid","text":""},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#dokumentatsioon","title":"Dokumentatsioon:","text":"<ul> <li>Multipass Documentation</li> <li>VSCode Remote Development</li> <li>Docker Installation</li> <li>Minikube Documentation</li> </ul>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#video-juhendid","title":"Video juhendid:","text":"<ul> <li>VSCode Remote SSH Setup</li> <li>Docker Installation on Ubuntu</li> <li>Minikube Quick Start</li> </ul>"},{"location":"docker_orchestration/kodu_masina_ehitus_juhend/#kasulikud-kasud","title":"Kasulikud k\u00e4sud:","text":"<pre><code># VM'i info\nmultipass info dev-lab\n\n# Ressursi kasutus\nhtop\nfree -h\ndf -h\n\n# V\u00f5rgu info\nip addr show\nnetstat -tulpn\n\n# Logide vaatamine\njournalctl -f\ndocker logs &lt;container&gt;\nkubectl logs &lt;pod&gt;\n</code></pre>"},{"location":"docker_orchestration/lab/","title":"Lab: Docker Compose Praktika","text":"<p>Kestus: Eesm\u00e4rk: \u00d5ppida Docker Compose'i praktilist kasutamist ja luua lihtsa multi-container rakenduse</p>"},{"location":"docker_orchestration/lab/#opivaljundid","title":"\u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast laborit oskate: - Kirjutada lihtsa Docker Compose faili - p\u00f5hilised teenused - K\u00e4ivitada multi-container rakendust - \u00fche k\u00e4suga - M\u00f5ista teenuste s\u00f5ltuvusi - mis k\u00e4ivitub enne - Debugida probleeme - logide vaatamine - Kasutada dokumentatsiooni - abi leidmine</p>"},{"location":"docker_orchestration/lab/#task-1-lihtsa-rakenduse-loomine","title":"Task 1: Lihtsa rakenduse loomine","text":""},{"location":"docker_orchestration/lab/#ulesanne-11-projekti-struktuuri-loomine","title":"\u00dclesanne 1.1: Projekti struktuuri loomine","text":"<p>Loome lihtsa web rakenduse, mis koosneb kahest osast: - Web server - kuvab veebilehte - Database - salvestab andmeid</p> <pre><code># Projekti kataloogi loomine\nmkdir ~/docker-orchestration-lab\ncd ~/docker-orchestration-lab\n\n# Lihtne struktuur\nmkdir app\n</code></pre>"},{"location":"docker_orchestration/lab/#ulesanne-12-lihtsa-web-rakenduse-loomine","title":"\u00dclesanne 1.2: Lihtsa web rakenduse loomine","text":"<p>Kopeerime valmis HTML faili teacher_repo'st:</p> <pre><code># Kopeerige valmis HTML fail\ncp teacher_repo/docker-orchestration-starter/templates/app/frontend/index.html.example app/index.html\n</code></pre> <p>Mida see teeb? - Kuvab lihtsa veebilehe - N\u00e4itab, et rakendus t\u00f6\u00f6tab - Kuvab praeguse aja</p> <p>Miks me ei kirjuta HTML koodi? See on automation kursus, mitte veebiarenduse kursus. Me keskendume Docker Compose'i \u00f5ppimisele, mitte HTML kirjutamisele.</p>"},{"location":"docker_orchestration/lab/#ulesanne-13-docker-compose-faili-loomine","title":"\u00dclesanne 1.3: Docker Compose faili loomine","text":"<p>Kopeerime valmis Docker Compose faili teacher_repo'st:</p> <pre><code># Kopeerige valmis Docker Compose fail\ncp teacher_repo/docker-orchestration-starter/templates/docker-compose.yml.example docker-compose.yml\n</code></pre> <p>Mida see teeb? - Web teenus - kuvab HTML faili brauseris - Database teenus - salvestab andmeid (praegu ei kasuta)</p> <p>Miks me ei kirjuta Docker Compose faili? See on lihtne lab, kus \u00f5pime Docker Compose'i kasutamist. Hiljem \u00f5pite ka failide kirjutamist. - Volumes - p\u00fcsivad andmed andmebaasi jaoks             host=os.getenv('REDIS_HOST', 'redis'),             port=int(os.getenv('REDIS_PORT', 6379)),             decode_responses=True         )         r.ping()         return r     except Exception as e:         return None</p> <p>@app.route('/api/status') def status():     db_status = \"Connected\" if get_db_connection() else \"Disconnected\"     redis_status = \"Connected\" if get_redis_connection() else \"Disconnected\"</p> <pre><code>return jsonify({\n    'status': 'OK',\n    'environment': os.getenv('NODE_ENV', 'development'),\n    'database': db_status,\n    'cache': redis_status,\n    'timestamp': datetime.now().isoformat()\n})\n</code></pre> <p>@app.route('/api/health') def health():     return jsonify({'status': 'healthy'})</p> <p>if name == 'main':     app.run(host='0.0.0.0', port=5000, debug=os.getenv('DEBUG', 'false').lower() == 'true') <pre><code>**Backend requirements (app/backend/requirements.txt):**\n</code></pre> Flask==2.3.3 psycopg2-binary==2.9.7 redis==4.6.0 <pre><code>### \u00dclesanne 1.4: Docker Compose konfiguratsioon\n\n**Base configuration (docker-compose.yml):**\n```yaml\nversion: '3.8'\n\nservices:\n  frontend:\n    image: nginx:alpine\n    ports:\n      - \"${FRONTEND_PORT:-80}:80\"\n    volumes:\n      - ./app/frontend:/usr/share/nginx/html:ro\n    depends_on:\n      - backend\n    networks:\n      - frontend\n\n  backend:\n    build:\n      context: ./app/backend\n      dockerfile: Dockerfile\n    environment:\n      - NODE_ENV=${NODE_ENV:-development}\n      - DEBUG=${DEBUG:-false}\n      - DB_HOST=db\n      - DB_NAME=${DB_NAME:-app}\n      - DB_USER=${DB_USER:-postgres}\n      - DB_PASSWORD=${DB_PASSWORD:-secret}\n      - REDIS_HOST=redis\n      - REDIS_PORT=6379\n    depends_on:\n      - db\n      - redis\n    networks:\n      - frontend\n      - backend\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:5000/api/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  db:\n    image: postgres:13\n    environment:\n      - POSTGRES_DB=${DB_NAME:-app}\n      - POSTGRES_USER=${DB_USER:-postgres}\n      - POSTGRES_PASSWORD=${DB_PASSWORD:-secret}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - backend\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${DB_USER:-postgres}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:alpine\n    volumes:\n      - redis_data:/data\n    networks:\n      - backend\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n\nvolumes:\n  postgres_data:\n  redis_data:\n\nnetworks:\n  frontend:\n    driver: bridge\n  backend:\n    driver: bridge\n    internal: true\n</code></pre></p> <p>Backend Dockerfile (app/backend/Dockerfile): <pre><code>FROM python:3.9-slim\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\nEXPOSE 5000\n\nCMD [\"python\", \"app.py\"]\n</code></pre></p>"},{"location":"docker_orchestration/lab/#ulesanne-15-rakenduse-kaivitamine","title":"\u00dclesanne 1.5: Rakenduse k\u00e4ivitamine","text":"<p>K\u00e4ivitage rakendus: <pre><code># K\u00e4ivita k\u00f5ik teenused\ndocker-compose up -d\n\n# Vaata, kas k\u00f5ik t\u00f6\u00f6tab\ndocker-compose ps\n\n# Vaata logisid\ndocker-compose logs web\n</code></pre></p> <p>Testige rakendust: - Avage brauser jage aadressile: <code>http://localhost:8080</code> - Peaksite n\u00e4gema veebilehte \"\ud83d\ude80 Week 21 Lab\"</p> <p>Peatage rakendus: <pre><code># Peata k\u00f5ik teenused\ndocker-compose down\n</code></pre></p>"},{"location":"docker_orchestration/lab/#task-2-probleemide-lahendamine","title":"Task 2: Probleemide lahendamine","text":""},{"location":"docker_orchestration/lab/#ulesanne-21-levinud-probleemid-ja-lahendused","title":"\u00dclesanne 2.1: Levinud probleemid ja lahendused","text":"<p>Probleem: Port on juba kasutusel <pre><code># Vea s\u00f5num: \"port is already allocated\"\n# Lahendus: Muutke porti docker-compose.yml failis\nports:\n  - \"8081:80\"  # 8080 asemel 8081\n</code></pre></p> <p>Probleem: Container ei k\u00e4ivitu <pre><code># Vaata logisid\ndocker-compose logs web\n\n# Vaata k\u00f5iki logisid\ndocker-compose logs\n</code></pre></p> <p>Probleem: Fail ei leia <pre><code># Kontrollige, kas fail eksisteerib\nls -la app/index.html\n\n# Kontrollige faili \u00f5igused\nchmod 644 app/index.html\n</code></pre></p>"},{"location":"docker_orchestration/lab/#ulesanne-22-debugimise-kasud","title":"\u00dclesanne 2.2: Debugimise k\u00e4sud","text":"<pre><code># Vaata k\u00f5iki container'eid\ndocker ps\n\n# Vaata container'i sisu\ndocker exec -it docker-orchestration-lab_web_1 sh\n\n# Vaata faili sisu container'is\ndocker exec docker-orchestration-lab_web_1 cat /usr/share/nginx/html/index.html\n</code></pre>"},{"location":"docker_orchestration/lab/#ulesanne-23-podman-compose-konfiguratsioon","title":"\u00dclesanne 2.3: Podman Compose konfiguratsioon","text":"<p>Podman-specific docker-compose.yml: <pre><code>version: '3.8'\n\nservices:\n  frontend:\n    image: nginx:alpine\n    ports:\n      - \"${FRONTEND_PORT:-80}:80\"\n    volumes:\n      - ./app/frontend:/usr/share/nginx/html:ro\n    depends_on:\n      - backend\n    networks:\n      - frontend\n\n  backend:\n    build:\n      context: ./app/backend\n      dockerfile: Dockerfile\n    environment:\n      - NODE_ENV=${NODE_ENV:-development}\n      - DEBUG=${DEBUG:-false}\n      - DB_HOST=db\n      - DB_NAME=${DB_NAME:-app}\n      - DB_USER=${DB_USER:-postgres}\n      - DB_PASSWORD=${DB_PASSWORD:-secret}\n      - REDIS_HOST=redis\n      - REDIS_PORT=6379\n    depends_on:\n      - db\n      - redis\n    networks:\n      - frontend\n      - backend\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:5000/api/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  db:\n    image: postgres:13\n    environment:\n      - POSTGRES_DB=${DB_NAME:-app}\n      - POSTGRES_USER=${DB_USER:-postgres}\n      - POSTGRES_PASSWORD=${DB_PASSWORD:-secret}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - backend\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${DB_USER:-postgres}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:alpine\n    volumes:\n      - redis_data:/data\n    networks:\n      - backend\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n\nvolumes:\n  postgres_data:\n  redis_data:\n\nnetworks:\n  frontend:\n    driver: bridge\n  backend:\n    driver: bridge\n    internal: true\n</code></pre></p>"},{"location":"docker_orchestration/lab/#ulesanne-24-podman-compose-kaivitamine","title":"\u00dclesanne 2.4: Podman Compose k\u00e4ivitamine","text":"<pre><code># Peatage Docker Compose teenused\ndocker-compose down\n\n# K\u00e4ivitage Podman Compose\npodman-compose --env-file .env.development up -d\n\n# Kontrollige teenuseid\npodman-compose ps\n\n# Vaadake logisid\npodman-compose logs -f backend\n\n# Testige rakendust\ncurl http://localhost:8080/api/status\n</code></pre>"},{"location":"docker_orchestration/lab/#task-3-vordlus-ja-analuus","title":"Task 3: V\u00f5rdlus ja Anal\u00fc\u00fcs","text":""},{"location":"docker_orchestration/lab/#ulesanne-31-performance-vordlus","title":"\u00dclesanne 3.1: Performance v\u00f5rdlus","text":"<pre><code># Docker Compose resource usage\ndocker stats\n\n# Podman resource usage\npodman stats\n\n# V\u00f5rdle m\u00e4lu ja CPU kasutust\n</code></pre>"},{"location":"docker_orchestration/lab/#ulesanne-32-security-vordlus","title":"\u00dclesanne 3.2: Security v\u00f5rdlus","text":"<pre><code># Docker process info\nps aux | grep docker\n\n# Podman process info\nps aux | grep podman\n\n# User context\ndocker ps\npodman ps\n</code></pre>"},{"location":"docker_orchestration/lab/#ulesanne-33-logide-ja-monitoring","title":"\u00dclesanne 3.3: Logide ja monitoring","text":"<pre><code># Docker Compose logid\ndocker-compose logs --tail=50\n\n# Podman Compose logid\npodman-compose logs --tail=50\n\n# V\u00f5rdle logide formaati ja sisu\n</code></pre>"},{"location":"docker_orchestration/lab/#labori-kokkuvote","title":"Labori Kokkuv\u00f5te","text":""},{"location":"docker_orchestration/lab/#opitud-kontseptsioonid","title":"\u00d5pitud kontseptsioonid:","text":"<p>Docker Compose faili kirjutamine - lihtne YAML s\u00fcntaks Multi-container rakenduse k\u00e4ivitamine - \u00fche k\u00e4suga Teenuste haldamine - k\u00e4ivitamine, peatamine, logide vaatamine Probleemide lahendamine - debugimise oskused Dokumentatsiooni kasutamine - abi leidmine  </p>"},{"location":"docker_orchestration/lab/#jargmised-sammud","title":"J\u00e4rgmised sammud:","text":"<ol> <li>Rohkem teenuseid - lisage backend ja cache</li> <li>Environment variables - erinevate keskkondade haldamine</li> <li>Production setup - turvaline ja skaleeritav konfiguratsioon</li> <li>Kubernetes - kui vajate rohkem funktsionaalsust</li> </ol>"},{"location":"docker_orchestration/lab/#troubleshooting","title":"Troubleshooting","text":""},{"location":"docker_orchestration/lab/#levinud-probleemid","title":"Levinud probleemid:","text":"<p>Probleem: Teenused ei k\u00e4ivitu \u00f5iges j\u00e4rjekorras <pre><code># Lahendus: Lisa health checks ja depends_on\ndepends_on:\n  db:\n    condition: service_healthy\n</code></pre></p> <p>Probleem: Podman network error <pre><code># Lahendus: Lisa selges\u00f5naline network konfiguratsioon\nnetworks:\n  default:\n    driver: bridge\n</code></pre></p> <p>Probleem: Volume permissions <pre><code># Lahendus: Lisa user mapping\nservices:\n  db:\n    user: \"1000:1000\"\n</code></pre></p>"},{"location":"docker_orchestration/lab/#lisaressursid-ja-abi","title":"Lisaressursid ja abi","text":""},{"location":"docker_orchestration/lab/#oppimiseks","title":"\u00d5ppimiseks:","text":"<ul> <li>Docker Compose Quickstart - kiire algus</li> <li>Docker Compose Examples - palju n\u00e4iteid</li> <li>Docker Compose Reference - k\u00f5ik v\u00f5imalikud seaded</li> </ul>"},{"location":"docker_orchestration/lab/#abi-saamiseks","title":"\ud83c\udd98 Abi saamiseks:","text":"<ul> <li>Docker Community - foorumid</li> <li>Stack Overflow - k\u00fcsimused ja vastused</li> <li>Docker Documentation - ametlik dokumentatsioon</li> </ul>"},{"location":"docker_orchestration/lab/#praktikaks","title":"Praktikaks:","text":"<ul> <li>Docker Compose Best Practices - tootmiskeskkonna n\u00f5uded</li> <li>Docker Compose Networking - v\u00f5rgu konfiguratsioon</li> <li>Docker Compose Environment Variables - keskkonnamuutujad</li> </ul>"},{"location":"docker_orchestration/lecture/","title":"Docker Compose ja Orchestration","text":"<p>Kestus: Teemad: Docker Compose p\u00f5hialused, Lihtsad multi-container rakendused, Keskkondade haldamine, Alternatiivide tutvustus</p>"},{"location":"docker_orchestration/lecture/#task-1-opivaljundid","title":"Task 1: \u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast seda n\u00e4dalat oskate: - Kirjutada lihtsaid Docker Compose faile - p\u00f5hilised teenused ja nende seosed - K\u00e4ivitada multi-container rakendusi - \u00fche k\u00e4suga kogu rakendus - M\u00f5ista p\u00f5him\u00f5tteid - miks orkestreerimine vajalik - Tutvuda alternatiividega - teada, et Kubernetes pole ainus valik - Kasutada dokumentatsiooni - oskus leida abi ja n\u00e4iteid</p>"},{"location":"docker_orchestration/lecture/#docker-compose-overview","title":"Docker Compose Overview","text":""},{"location":"docker_orchestration/lecture/#tere-tulemast-orkestreerimise-maailma","title":"Tere tulemast orkestreerimise maailma!","text":"<p>Tere tagasi! Eelmisel n\u00e4dalal \u00f5ppisime \u00fcksikute container'ite haldamist. T\u00e4na astume j\u00e4rgmisele tasemele - \u00f5pime mitme container'i korraga haldamist, teenuste orkestreerimist ja production-ready s\u00fcsteemide ehitamist.</p>"},{"location":"docker_orchestration/lecture/#mis-on-orkestreerimine-ja-miks-see-vajalik","title":"Mis on orkestreerimine ja miks see vajalik?","text":"<p>Orkestreerimine t\u00e4hendab mitme container'i koordineerimist, et need koos t\u00f6\u00f6taksid kui \u00fcks rakendus. Kujutage ette orkestrit - iga muusik (container) m\u00e4ngib oma instrumenti, aga dirigent (orkestreerija) koordineerib k\u00f5iki, et nad koos ilusalt m\u00e4ngiks.</p> <pre><code>graph TB\n    subgraph \"\ud83c\udfb5 Orkester (Rakendus)\"\n        Conductor[\ud83c\udfbc Dirigent&lt;br/&gt;Orkestreerija]\n        Violin[\ud83c\udfbb Viul&lt;br/&gt;Frontend]\n        Piano[\ud83c\udfb9 Klaver&lt;br/&gt;Backend]\n        Drums[\ud83e\udd41 Trummid&lt;br/&gt;Database]\n        Bass[\ud83c\udfb8 Bass&lt;br/&gt;Cache]\n    end\n\n    Conductor --&gt; Violin\n    Conductor --&gt; Piano\n    Conductor --&gt; Drums\n    Conductor --&gt; Bass\n\n    Violin --&gt; Piano\n    Piano --&gt; Drums\n    Piano --&gt; Bass\n\n    style Conductor fill:#ff9999\n    style Violin fill:#99ccff\n    style Piano fill:#99ff99\n    style Drums fill:#ffcc99\n    style Bass fill:#cc99ff</code></pre> <p>Miks orkestreerimine on oluline? - Keerukad rakendused - t\u00e4nap\u00e4eva web rakendused koosnevad mitmest komponendist - S\u00f5ltuvused - erinevad teenused s\u00f5ltuvad \u00fcksteisest - Skaleerimine - vajadus k\u00e4ivitada mitu koopiat samast teenusest - Turvalisus - erinevate teenuste isoleerimine</p>"},{"location":"docker_orchestration/lecture/#reaalne-probleem-web-rakenduse-kaivitamine","title":"Reaalne probleem: Web rakenduse k\u00e4ivitamine","text":"<p>Kujutage ette, et teil on t\u00e4nap\u00e4evane web rakendus:</p> <pre><code>graph TB\n    subgraph \"\ud83c\udf10 T\u00e4nap\u00e4evane Web Rakendus\"\n        User[\ud83d\udc64 Kasutaja]\n\n        subgraph \"Frontend Layer\"\n            React[\u269b React App&lt;br/&gt;Kasutajaliides]\n            Vue[\ud83d\udc9a Vue App&lt;br/&gt;Kasutajaliides]\n            Angular[\ud83c\udd70 Angular App&lt;br/&gt;Kasutajaliides]\n        end\n\n        subgraph \"Backend Layer\"\n            NodeAPI[\ud83d\udfe2 Node.js API&lt;br/&gt;\u00c4riloogika]\n            PythonAPI[\ud83d\udc0d Python API&lt;br/&gt;\u00c4riloogika]\n            JavaAPI[\u2615 Java API&lt;br/&gt;\u00c4riloogika]\n        end\n\n        subgraph \"Data Layer\"\n            Postgres[\ud83d\udc18 PostgreSQL&lt;br/&gt;Andmebaas]\n            MySQL[\ud83d\udc2c MySQL&lt;br/&gt;Andmebaas]\n            Redis[\ud83d\udd34 Redis&lt;br/&gt;Cache]\n        end\n\n        subgraph \"Infrastructure\"\n            Nginx[\ud83c\udf10 Nginx&lt;br/&gt;Load Balancer]\n        end\n    end\n\n    User --&gt; Nginx\n    Nginx --&gt; React\n    Nginx --&gt; Vue\n    Nginx --&gt; Angular\n\n    React --&gt; NodeAPI\n    Vue --&gt; PythonAPI\n    Angular --&gt; JavaAPI\n\n    NodeAPI --&gt; Postgres\n    PythonAPI --&gt; MySQL\n    JavaAPI --&gt; Redis\n\n    style User fill:#ffcc99\n    style Nginx fill:#ff9999\n    style React fill:#99ccff\n    style Vue fill:#99ff99\n    style Angular fill:#ffcc99\n    style NodeAPI fill:#99ccff\n    style PythonAPI fill:#99ff99\n    style JavaAPI fill:#ffcc99\n    style Postgres fill:#cc99ff\n    style MySQL fill:#cc99ff\n    style Redis fill:#ff6666</code></pre> <p>Ilma orkestreerimise t\u00f6\u00f6riistata peate k\u00e4ivitama k\u00f5ik need komponendid k\u00e4sitsi:</p>"},{"location":"docker_orchestration/lecture/#probleem-ilma-composeita","title":"Probleem ilma Compose'ita","text":"<pre><code># Ilma Compose'ita peate k\u00e4ivitama:\n\n## Database - andmete salvestamine\ndocker run -d \\\n  --name myapp-db \\\n  -e POSTGRES_PASSWORD=secret \\\n  -e POSTGRES_DB=myapp \\\n  -v myapp_db_data:/var/lib/postgresql/data \\\n  postgres:13\n\n## Task 2: Redis cache - kiire andmete juurdep\u00e4\u00e4s\ndocker run -d \\\n  --name myapp-redis \\\n  -v myapp_redis_data:/data \\\n  redis:alpine\n\n## Backend API - \u00e4riloogika ja andmete t\u00f6\u00f6tlemine\ndocker run -d \\\n  --name myapp-api \\\n  --link myapp-db:db \\\n  --link myapp-redis:redis \\\n  -e DATABASE_URL=postgres://postgres:secret@db:5432/myapp \\\n  -e REDIS_URL=redis://redis:6379 \\\n  myapp/api:latest\n\n## Task 3: Frontend - kasutajaliides\ndocker run -d \\\n  --name myapp-web \\\n  --link myapp-api:api \\\n  -p 80:80 \\\n  -e API_URL=http://api:3000 \\\n  myapp/web:latest\n\n## Task 4: Nginx reverse proxy - koormuse jaotus ja SSL\ndocker run -d \\\n  --name myapp-nginx \\\n  --link myapp-web:web \\\n  --link myapp-api:api \\\n  -p 443:443 \\\n  -v ./nginx.conf:/etc/nginx/nginx.conf \\\n  nginx:alpine\n</code></pre> <p>Mida iga k\u00e4sk teeb? - <code>docker run -d</code> - k\u00e4ivitab container taustal (detached mode) - <code>--name</code> - annab container'ile nime, et seda hiljem leida - <code>-e</code> - seadistab keskkonnamuutujad (environment variables) - <code>-v</code> - seob hosti kausta container'iga (volume) - <code>--link</code> - loob v\u00f5rgu\u00fchenduse teiste container'itega - <code>-p</code> - avab pordid v\u00e4lismaailmale</p> <p>Probleemid k\u00e4sitsi k\u00e4ivitamisega:</p> <pre><code>graph LR\n    subgraph \"\ud83e\udd2f Keeruline protsess\"\n        Step1[1. Database&lt;br/&gt;docker run -d --name...]\n        Step2[2. Redis&lt;br/&gt;docker run -d --name...]\n        Step3[3. Backend&lt;br/&gt;docker run -d --name...]\n        Step4[4. Frontend&lt;br/&gt;docker run -d --name...]\n        Step5[5. Nginx&lt;br/&gt;docker run -d --name...]\n    end\n\n    Step1 --&gt; Step2\n    Step2 --&gt; Step3\n    Step3 --&gt; Step4\n    Step4 --&gt; Step5\n\n    subgraph \"\u274c Probleemid\"\n        P1[\ud83d\udd17 Dependency Hell&lt;br/&gt;\u00d5ige j\u00e4rjekord?]\n        P2[\ud83d\udeab Raske peatada&lt;br/&gt;5 eraldi k\u00e4sku]\n        P3[\ud83d\udcdd Ei reprodutseeritav&lt;br/&gt;Erinevad keskkonnad]\n        P4[\ud83d\udd27 Raske debug&lt;br/&gt;Hajutatud logid]\n        P5[ Aega n\u00f5udev&lt;br/&gt;Iga kord sama]\n        P6[\ud83d\udc65 Raske jagada&lt;br/&gt;Kolleegid ei tea]\n    end\n\n    style Step1 fill:#ffcccc\n    style Step2 fill:#ffcccc\n    style Step3 fill:#ffcccc\n    style Step4 fill:#ffcccc\n    style Step5 fill:#ffcccc\n    style P1 fill:#ff9999\n    style P2 fill:#ff9999\n    style P3 fill:#ff9999\n    style P4 fill:#ff9999\n    style P5 fill:#ff9999\n    style P6 fill:#ff9999</code></pre> <p>\ud83e\udd2f Keeruline meelde j\u00e4tta - 5 erinevat k\u00e4sku, iga\u00fchel oma parameetrid \ud83d\udd17 Dependency hell - peate teadma \u00f5iget j\u00e4rjekorda (db \u2192 redis \u2192 api \u2192 web \u2192 nginx) \ud83d\udeab Raske peatada - peate peatama 5 eraldi container'it k\u00e4sitsi \ud83d\udcdd Ei ole reprodutseeritav - erinevad keskkonnad, erinevad seaded \ud83d\udd27 Raske debuggida - logid on hajutatud erinevatesse container'itesse Aega n\u00f5udev - iga kord sama protsess uuesti \ud83d\udc65 Raske jagada - teie kolleegid ei tea, milliseid k\u00e4ske kasutada</p>"},{"location":"docker_orchestration/lecture/#docker-compose-lahendus","title":"Docker Compose lahendus","text":"<p>Docker Compose on t\u00f6\u00f6riist, mis v\u00f5imaldab kirjeldada kogu rakenduse konfiguratsiooni \u00fches failis. See on nagu \"retsept\" - kirjeldate, milliseid komponente vajate ja kuidas need omavahel seotud on.</p> <p>Miks Docker Compose on parem? - \u00dcks fail - kogu konfiguratsioon \u00fches kohas - Deklaratiivne - kirjeldate, mida tahate, mitte kuidas seda teha - Reprodutseeritav - sama tulemus igal masinal - Lihtne jagada - faili saate jagada kolleegidega - Automaatne j\u00e4rjekord - Compose teab, mis j\u00e4rjekorras k\u00e4ivitada</p> <p>Sama rakendus Docker Compose'iga:</p> <pre><code>graph TB\n    subgraph \"\ud83d\udcc4 docker-compose.yml struktuur\"\n        Version[\ud83d\udccb version: '3.8'&lt;br/&gt;Compose versioon]\n        Services[\ud83d\udce6 services:&lt;br/&gt;K\u00f5ik teenused]\n        Volumes[\ud83d\udcbe volumes:&lt;br/&gt;P\u00fcsivad andmed]\n    end\n\n    subgraph \"\ud83d\udd27 Teenused\"\n        DB[\ud83d\uddc4 db&lt;br/&gt;PostgreSQL]\n        Redis[\ud83d\udd34 redis&lt;br/&gt;Cache]\n        API[\ud83d\udd27 api&lt;br/&gt;Backend]\n        Web[\ud83c\udf10 web&lt;br/&gt;Frontend]\n        Nginx[\u2696 nginx&lt;br/&gt;Load Balancer]\n    end\n\n    Services --&gt; DB\n    Services --&gt; Redis\n    Services --&gt; API\n    Services --&gt; Web\n    Services --&gt; Nginx\n\n    DB --&gt; Volumes\n    Redis --&gt; Volumes\n\n    style Version fill:#ffcc99\n    style Services fill:#99ccff\n    style Volumes fill:#99ff99\n    style DB fill:#cc99ff\n    style Redis fill:#ff6666\n    style API fill:#99ccff\n    style Web fill:#99ff99\n    style Nginx fill:#ff9999</code></pre> <pre><code># docker-compose.yml\n# See fail kirjeldab kogu rakenduse struktuuri\n\nversion: '3.8'  # Compose faili versioon\n\nservices:  # K\u00f5ik teenused (container'id)\n  # Database teenus - andmete salvestamine\n  db:\n    image: postgres:13  # Millist image'i kasutada\n    environment:  # Keskkonnamuutujad\n      POSTGRES_PASSWORD: secret\n      POSTGRES_DB: myapp\n    volumes:  # P\u00fcsivad andmed\n      - db_data:/var/lib/postgresql/data\n\n  # Cache teenus - kiire andmete juurdep\u00e4\u00e4s\n  redis:\n    image: redis:alpine\n    volumes:\n      - redis_data:/data\n\n  # Backend API - \u00e4riloogika ja andmete t\u00f6\u00f6tlemine\n  api:\n    image: myapp/api:latest\n    environment:\n      DATABASE_URL: postgres://postgres:secret@db:5432/myapp\n      REDIS_URL: redis://redis:6379\n    depends_on:  # S\u00f5ltuvused - mis teenused peavad k\u00e4ivituma enne\n      - db\n      - redis\n\n  # Frontend - kasutajaliides\n  web:\n    image: myapp/web:latest\n    environment:\n      API_URL: http://api:3000\n    depends_on:\n      - api\n\n  # Load balancer - koormuse jaotus ja SSL\n  nginx:\n    image: nginx:alpine\n    ports:  # Avab pordid v\u00e4lismaailmale\n      - \"443:443\"\n    volumes:  # Seob konfiguratsioonifaili\n      - ./nginx.conf:/etc/nginx/nginx.conf\n    depends_on:\n      - web\n      - api\n\nvolumes:  # P\u00fcsivad andmed, mis s\u00e4ilivad container'ite vahel\n  db_data:\n  redis_data:\n</code></pre> <p>Mida iga osa teeb?</p> <pre><code>graph LR\n    subgraph \"\ud83d\udccb Docker Compose faili osad\"\n        Version[\ud83d\udccb version&lt;br/&gt;Compose versioon&lt;br/&gt;3.8+]\n        Services[\ud83d\udce6 services&lt;br/&gt;K\u00f5ik teenused&lt;br/&gt;container'id]\n        Image[ image&lt;br/&gt;Docker image&lt;br/&gt;postgres:13]\n        Env[\ud83c\udf0d environment&lt;br/&gt;Keskkonnamuutujad&lt;br/&gt;POSTGRES_PASSWORD]\n        Vol[\ud83d\udcbe volumes&lt;br/&gt;P\u00fcsivad andmed&lt;br/&gt;db_data]\n        Depends[\ud83d\udd17 depends_on&lt;br/&gt;S\u00f5ltuvused&lt;br/&gt;db, redis]\n        Ports[\ud83c\udf10 ports&lt;br/&gt;Pordid&lt;br/&gt;80:80]\n    end\n\n    Services --&gt; Image\n    Services --&gt; Env\n    Services --&gt; Vol\n    Services --&gt; Depends\n    Services --&gt; Ports\n\n    style Version fill:#ffcc99\n    style Services fill:#99ccff\n    style Image fill:#99ff99\n    style Env fill:#ffcc99\n    style Vol fill:#99ff99\n    style Depends fill:#ffcc99\n    style Ports fill:#99ff99</code></pre> <ul> <li><code>version</code> - Compose faili versioon (kasuta alati 3.8+)</li> <li><code>services</code> - k\u00f5ik teenused, mida rakendus vajab</li> <li><code>image</code> - millist Docker image'i kasutada</li> <li><code>environment</code> - keskkonnamuutujad (nagu <code>-e</code> k\u00e4sus)</li> <li><code>volumes</code> - p\u00fcsivad andmed (nagu <code>-v</code> k\u00e4sus)</li> <li><code>depends_on</code> - s\u00f5ltuvused (mis teenus k\u00e4ivitub enne)</li> <li><code>ports</code> - avab pordid (nagu <code>-p</code> k\u00e4sus)</li> </ul> <p>Kasu v\u00f5rreldes k\u00e4sitsi k\u00e4ivitamisega:</p> <pre><code>graph LR\n    subgraph \"\u2705 Docker Compose lahendus\"\n        ComposeFile[\ud83d\udcc4 docker-compose.yml&lt;br/&gt;\u00dcks fail]\n        OneCommand[\ud83d\ude80 docker-compose up&lt;br/&gt;\u00dcks k\u00e4sk]\n        AutoOrder[ Automaatne j\u00e4rjekord&lt;br/&gt;depends_on]\n        EasyStop[\u23f9 docker-compose down&lt;br/&gt;Lihtne peatamine]\n    end\n\n    subgraph \"\u2705 Eelised\"\n        E1[\ud83d\udcdd Reprodutseeritav&lt;br/&gt;Sama igal masinal]\n        E2[\ud83d\udcca Keskendatud logid&lt;br/&gt;docker-compose logs]\n        E3[\ud83d\udd27 Lihtne debug&lt;br/&gt;logs -f reaalajas]\n        E4[\u26a1 Kiire iteratsioon&lt;br/&gt;restart teenuseid]\n        E5[ Version control&lt;br/&gt;Git'i lisada]\n    end\n\n    ComposeFile --&gt; OneCommand\n    OneCommand --&gt; AutoOrder\n    AutoOrder --&gt; EasyStop\n\n    style ComposeFile fill:#ccffcc\n    style OneCommand fill:#ccffcc\n    style AutoOrder fill:#ccffcc\n    style EasyStop fill:#ccffcc\n    style E1 fill:#99ff99\n    style E2 fill:#99ff99\n    style E3 fill:#99ff99\n    style E4 fill:#99ff99\n    style E5 fill:#99ff99</code></pre> <p>\u2705 \u00dcks k\u00e4sk - <code>docker-compose up</code> vs 5 eraldi k\u00e4sku \u2705 Automaatne j\u00e4rjekord - <code>depends_on</code> teeb kindlaks, mis k\u00e4ivitub enne \u2705 Lihtne peatamine - <code>docker-compose down</code> peatab k\u00f5ik korraga \u2705 Reprodutseeritav - sama tulemus igal masinal, igal arendajal \u2705 Keskendatud logid - <code>docker-compose logs</code> n\u00e4itab k\u00f5iki logisid \u2705 Lihtne debug - <code>docker-compose logs -f</code> j\u00e4lgib logisid reaalajas \u2705 Kiire iteratsioon - <code>docker-compose restart</code> taask\u00e4ivitab teenuse \u2705 Version control - faili saate Git'i lisada ja jagada</p>"},{"location":"docker_orchestration/lecture/#docker-compose-pohimotted","title":"Docker Compose p\u00f5him\u00f5tted","text":""},{"location":"docker_orchestration/lecture/#deklaratiivne-konfiguratsioon","title":"Deklaratiivne konfiguratsioon","text":"<p>Sa kirjeldad, mida tahad, mitte kuidas seda saavutada. See on nagu restorani men\u00fc\u00fc - sa \u00fctled, mida tahad s\u00fc\u00fca, mitte kuidas seda valmistada.</p> <pre><code>graph LR\n    subgraph \"\ud83c\udf7d Restorani analoogia\"\n        Menu[\ud83d\udccb Men\u00fc\u00fc&lt;br/&gt;\"Tahan pitsa\"]\n        Kitchen[\ud83d\udc68\u200d\ud83c\udf73 K\u00f6\u00f6k&lt;br/&gt;Teab kuidas valmistada]\n        Food[\ud83c\udf55 Pitsa&lt;br/&gt;Valmis toit]\n    end\n\n    subgraph \" Docker Compose\"\n        YAML[\ud83d\udcc4 docker-compose.yml&lt;br/&gt;\"Tahan PostgreSQL\"]\n        Compose[\u2699 Compose&lt;br/&gt;Teab kuidas k\u00e4ivitada]\n        Container[\ud83d\udc18 PostgreSQL&lt;br/&gt;K\u00e4ivitatud andmebaas]\n    end\n\n    Menu --&gt; Kitchen\n    Kitchen --&gt; Food\n\n    YAML --&gt; Compose\n    Compose --&gt; Container\n\n    style Menu fill:#ffcc99\n    style Kitchen fill:#99ccff\n    style Food fill:#99ff99\n    style YAML fill:#ffcc99\n    style Compose fill:#99ccff\n    style Container fill:#99ff99</code></pre> <p>N\u00e4ide: <pre><code># Sa \u00fctled: \"Tahan PostgreSQL andmebaasi\"\ndb:\n  image: postgres:13\n  environment:\n    POSTGRES_PASSWORD: secret\n</code></pre> Compose teeb: K\u00e4ivitab PostgreSQL container'i, seadistab parooli, loob andmebaasi</p>"},{"location":"docker_orchestration/lecture/#teenused-services","title":"Teenused (Services)","text":"<p>Iga konteiner on \"teenus\" - tal on nimi ja roll. Teenused on nagu restorani osakonnad - k\u00f6\u00f6k, teenindus, kassa.</p> <pre><code>graph TB\n    subgraph \"\ud83c\udfea Restorani osakonnad\"\n        Kitchen[\ud83d\udc68\u200d\ud83c\udf73 K\u00f6\u00f6k&lt;br/&gt;Valmistab toitu]\n        Service[\ud83d\udc69\u200d\ud83d\udcbc Teenindus&lt;br/&gt;V\u00f5tab tellimused]\n        Cashier[\ud83d\udcb0 Kassa&lt;br/&gt;Maksab arve]\n    end\n\n    subgraph \" Docker teenused\"\n        DB[\ud83d\uddc4 db&lt;br/&gt;Andmebaas]\n        API[\ud83d\udd27 api&lt;br/&gt;API server]\n        Web[\ud83c\udf10 web&lt;br/&gt;Veebileht]\n    end\n\n    Service --&gt; Kitchen\n    Kitchen --&gt; Cashier\n\n    Web --&gt; API\n    API --&gt; DB\n\n    style Kitchen fill:#ffcc99\n    style Service fill:#99ccff\n    style Cashier fill:#99ff99\n    style DB fill:#ffcc99\n    style API fill:#99ccff\n    style Web fill:#99ff99</code></pre> <p>N\u00e4ide: <pre><code>services:\n  db:      # Teenuse nimi - andmebaas\n  api:     # Teenuse nimi - API server\n  web:     # Teenuse nimi - veebileht\n</code></pre></p>"},{"location":"docker_orchestration/lecture/#vorgud-ja-andmete-jagamine","title":"V\u00f5rgud ja andmete jagamine","text":"<p>Compose loob automaatselt v\u00f5rgu, kus k\u00f5ik teenused saavad omavahel suhelda. See on nagu restorani sisev\u00f5rk - k\u00f6\u00f6k saab suhelda teenindusega.</p> <pre><code>graph TB\n    subgraph \"\ud83c\udfea Restorani sisev\u00f5rk\"\n        Kitchen[\ud83d\udc68\u200d\ud83c\udf73 K\u00f6\u00f6k&lt;br/&gt;192.168.1.10]\n        Service[\ud83d\udc69\u200d\ud83d\udcbc Teenindus&lt;br/&gt;192.168.1.11]\n        Cashier[\ud83d\udcb0 Kassa&lt;br/&gt;192.168.1.12]\n    end\n\n    subgraph \" Docker v\u00f5rk\"\n        Web[\ud83c\udf10 web&lt;br/&gt;web:3000]\n        API[\ud83d\udd27 api&lt;br/&gt;api:5000]\n        DB[\ud83d\uddc4 db&lt;br/&gt;db:5432]\n    end\n\n    Kitchen -.-&gt;|\"Suhtleb\"| Service\n    Service -.-&gt;|\"Suhtleb\"| Cashier\n\n    Web -.-&gt;|\"web:3000\"| API\n    API -.-&gt;|\"db:5432\"| DB\n\n    style Kitchen fill:#ffcc99\n    style Service fill:#99ccff\n    style Cashier fill:#99ff99\n    style Web fill:#ffcc99\n    style API fill:#99ccff\n    style DB fill:#99ff99</code></pre> <p>Automaatne v\u00f5rk: - K\u00f5ik teenused samas v\u00f5rgus - Teenused saavad \u00fcksteist leida nime j\u00e4rgi - N\u00e4iteks: <code>db:5432</code> \u00fchendub andmebaasi teenusega</p>"},{"location":"docker_orchestration/lecture/#task-5-pohilised-moisted-ja-protsessid","title":"Task 5: P\u00f5hilised m\u00f5isted ja protsessid","text":""},{"location":"docker_orchestration/lecture/#kust-tulevad-docker-imageid","title":"Kust tulevad Docker image'id?","text":"<pre><code>graph LR\n    subgraph \"\ud83d\udce6 Image allikad\"\n        DockerHub[ Docker Hub&lt;br/&gt;docker.io]\n        Private[\ud83c\udfe2 Private Registry&lt;br/&gt;company.com/registry]\n        Local[\ud83d\udcbb Kohalikud image'id&lt;br/&gt;docker build]\n    end\n\n    subgraph \"\u2b07 Allalaadimine\"\n        Pull[\ud83d\udce5 docker pull&lt;br/&gt;Allalaadimine]\n        Build[\ud83d\udd28 docker build&lt;br/&gt;Ehitus]\n    end\n\n    DockerHub --&gt; Pull\n    Private --&gt; Pull\n    Local --&gt; Build\n\n    style DockerHub fill:#99ccff\n    style Private fill:#ffcc99\n    style Local fill:#99ff99\n    style Pull fill:#ccccff\n    style Build fill:#ccccff</code></pre> <p>Docker Hub - avalik pood, kust saad alla laadida valmis image'id - <code>docker pull nginx</code> - laeb alla nginx image'i - <code>docker pull postgres:13</code> - laeb alla PostgreSQL versiooni 13</p> <p>Private Registry - ettev\u00f5tte oma image'ite pood - <code>docker pull company.com/myapp:latest</code></p> <p>Kohalik ehitus - teed ise image'i - <code>docker build -t myapp .</code> - ehitad image'i kohalikult</p>"},{"location":"docker_orchestration/lecture/#kuidas-imageid-ehitatakse","title":"Kuidas image'id ehitatakse?","text":"<pre><code>graph TB\n    subgraph \"\ud83d\udd28 Image ehitus\"\n        Dockerfile[\ud83d\udcc4 Dockerfile&lt;br/&gt;\"Retsept\"]\n        Build[\ud83d\udd28 docker build&lt;br/&gt;Ehitus]\n        Image[\ud83d\udce6 Image&lt;br/&gt;Valmis pakett]\n    end\n\n    subgraph \"\ud83d\udccb Dockerfile sisu\"\n        Base[\ud83d\udc27 Base Image&lt;br/&gt;Ubuntu, Alpine]\n        Copy[\ud83d\udccb COPY&lt;br/&gt;Failide kopeerimine]\n        Install[\ud83d\udce6 RUN&lt;br/&gt;Paketite installimine]\n        Expose[\ud83c\udf10 EXPOSE&lt;br/&gt;Pordi avamine]\n        CMD[\u25b6 CMD&lt;br/&gt;K\u00e4ivitamisk\u00e4sk]\n    end\n\n    Dockerfile --&gt; Build\n    Build --&gt; Image\n\n    Base --&gt; Copy\n    Copy --&gt; Install\n    Install --&gt; Expose\n    Expose --&gt; CMD\n\n    style Dockerfile fill:#ffcc99\n    style Build fill:#99ccff\n    style Image fill:#99ff99\n    style Base fill:#ccccff\n    style Copy fill:#ccccff\n    style Install fill:#ccccff\n    style Expose fill:#ccccff\n    style CMD fill:#ccccff</code></pre> <p>Dockerfile - \"retsept\" image'i jaoks: <pre><code># Base image - millest alustada\nFROM node:16-alpine\n\n# T\u00f6\u00f6kataloog\nWORKDIR /app\n\n# Kopeeri failid\nCOPY package*.json ./\nRUN npm install\n\n# Kopeeri rakenduse failid\nCOPY . .\n\n# Ava port\nEXPOSE 3000\n\n# K\u00e4ivitamisk\u00e4sk\nCMD [\"npm\", \"start\"]\n</code></pre></p>"},{"location":"docker_orchestration/lecture/#millest-koosneb-docker-image","title":"Millest koosneb Docker image?","text":"<pre><code>graph TB\n    subgraph \"\ud83d\udce6 Docker Image struktuur\"\n        Layer1[\ud83d\udccb Layer 1&lt;br/&gt;Base Image&lt;br/&gt;Ubuntu/Alpine]\n        Layer2[\ud83d\udccb Layer 2&lt;br/&gt;S\u00fcsteemi paketid&lt;br/&gt;apt install]\n        Layer3[\ud83d\udccb Layer 3&lt;br/&gt;Rakenduse failid&lt;br/&gt;COPY .]\n        Layer4[\ud83d\udccb Layer 4&lt;br/&gt;Konfiguratsioon&lt;br/&gt;ENV, EXPOSE]\n    end\n\n    Layer1 --&gt; Layer2\n    Layer2 --&gt; Layer3\n    Layer3 --&gt; Layer4\n\n    style Layer1 fill:#ffcccc\n    style Layer2 fill:#ffcccc\n    style Layer3 fill:#ccffcc\n    style Layer4 fill:#ccffcc</code></pre> <p>Image koosneb kihtidest (layers): - Base layer - operatsioonis\u00fcsteem (Ubuntu, Alpine) - System layer - s\u00fcsteemi paketid ja t\u00f6\u00f6riistad - Application layer - sinu rakenduse failid - Config layer - keskkonnamuutujad ja seaded</p>"},{"location":"docker_orchestration/lecture/#kuidas-containerid-tootavad","title":"Kuidas container'id t\u00f6\u00f6tavad?","text":"<pre><code>graph LR\n    subgraph \" Container eluts\u00fckkel\"\n        Image[\ud83d\udce6 Image&lt;br/&gt;Staatiline fail]\n        Container[\ud83d\udce6 Container&lt;br/&gt;K\u00e4ivitatud protsess]\n        Running[\u25b6 Running&lt;br/&gt;T\u00f6\u00f6tav rakendus]\n        Stopped[\u23f9 Stopped&lt;br/&gt;Peatatud]\n        Removed[\ud83d\uddd1 Removed&lt;br/&gt;Kustutatud]\n    end\n\n    Image --&gt; Container\n    Container --&gt; Running\n    Running --&gt; Stopped\n    Stopped --&gt; Container\n    Stopped --&gt; Removed\n\n    style Image fill:#ffcc99\n    style Container fill:#99ccff\n    style Running fill:#99ff99\n    style Stopped fill:#ffcc99\n    style Removed fill:#ff9999</code></pre> <p>Container eluts\u00fckkel: 1. Image - staatiline fail (nagu ZIP) 2. Container - k\u00e4ivitatud image (nagu programm) 3. Running - t\u00f6\u00f6tav rakendus 4. Stopped - peatatud, aga alles 5. Removed - kustutatud</p>"},{"location":"docker_orchestration/lecture/#pohikasud","title":"P\u00f5hik\u00e4sud","text":"<p>Docker Compose'iga on k\u00f5ik lihtne - ainult m\u00f5ni p\u00f5hik\u00e4sk, mida peate teadma:</p> <pre><code>graph LR\n    subgraph \"\ud83d\ude80 K\u00e4ivitamine\"\n        Up[\ud83d\udcc8 docker-compose up&lt;br/&gt;K\u00e4ivita k\u00f5ik]\n        UpD[\ud83d\udcc8 docker-compose up -d&lt;br/&gt;Taustal]\n        Build[\ud83d\udd28 docker-compose build&lt;br/&gt;Ehita image]\n        BuildUp[\ud83d\udd28 docker-compose up --build&lt;br/&gt;Ehita ja k\u00e4ivita]\n    end\n\n    subgraph \"\u23f9 Peatamine\"\n        Down[\ud83d\udcc9 docker-compose down&lt;br/&gt;Peata k\u00f5ik]\n        Restart[ docker-compose restart&lt;br/&gt;Taask\u00e4ivita]\n    end\n\n    subgraph \"\ud83d\udcca Info\"\n        PS[\ud83d\udccb docker-compose ps&lt;br/&gt;Staatust]\n        Logs[\ud83d\udcdd docker-compose logs&lt;br/&gt;Logid]\n        LogsF[\ud83d\udcdd docker-compose logs -f&lt;br/&gt;Reaalajas]\n    end\n\n    Up --&gt; Down\n    UpD --&gt; Down\n    Build --&gt; BuildUp\n    Restart --&gt; Up\n\n    style Up fill:#ccffcc\n    style UpD fill:#ccffcc\n    style Build fill:#ccffcc\n    style BuildUp fill:#ccffcc\n    style Down fill:#ffcccc\n    style Restart fill:#ffcccc\n    style PS fill:#ccccff\n    style Logs fill:#ccccff\n    style LogsF fill:#ccccff</code></pre> <pre><code># K\u00e4ivita k\u00f5ik teenused (n\u00e4ete logisid)\ndocker-compose up\n\n# K\u00e4ivita taustal (detached mode - ei n\u00e4e logisid)\ndocker-compose up -d\n\n# Peata ja eemalda k\u00f5ik teenused\ndocker-compose down\n\n# Vaata teenuste staatust\ndocker-compose ps\n\n# Vaata konkreetse teenuse logisid\ndocker-compose logs web\n\n# J\u00e4lgi logisid reaalajas (nagu tail -f)\ndocker-compose logs -f\n\n# Taask\u00e4ivita konkreetne teenus\ndocker-compose restart api\n\n# Ehita image uuesti (kui muutsite Dockerfile'i)\ndocker-compose build\n\n# Ehita ja k\u00e4ivita uuesti\ndocker-compose up --build\n</code></pre> <p>Praktiline n\u00e4ide: <pre><code>## Task 6: K\u00e4ivita rakendus\ndocker-compose up -d\n\n## Vaata, kas k\u00f5ik t\u00f6\u00f6tab\ndocker-compose ps\n\n## Vaata logisid, kui midagi ei t\u00f6\u00f6ta\ndocker-compose logs -f\n\n## Task 7: Peata rakendus\ndocker-compose down\n</code></pre></p>"},{"location":"docker_orchestration/lecture/#task-8-multi-service-applications","title":"Task 8: Multi-service Applications","text":""},{"location":"docker_orchestration/lecture/#teenuste-tuubid-ja-rollid","title":"Teenuste t\u00fc\u00fcbid ja rollid","text":""},{"location":"docker_orchestration/lecture/#web-application-stack","title":"Web Application Stack","text":"<pre><code>version: '3.8'\n\nservices:\n  # Frontend - kasutajaliides\n  frontend:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./frontend:/usr/share/nginx/html\n    depends_on:\n      - backend\n\n  # Backend - API server\n  backend:\n    build: ./backend\n    environment:\n      - DATABASE_URL=postgres://user:pass@db:5432/app\n      - REDIS_URL=redis://cache:6379\n    depends_on:\n      - db\n      - cache\n\n  # Database - andmete salvestamine\n  db:\n    image: postgres:13\n    environment:\n      - POSTGRES_DB=app\n      - POSTGRES_USER=user\n      - POSTGRES_PASSWORD=pass\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\n  # Cache - kiire andmete juurdep\u00e4\u00e4s\n  cache:\n    image: redis:alpine\n    volumes:\n      - redis_data:/data\n\nvolumes:\n  postgres_data:\n  redis_data:\n</code></pre>"},{"location":"docker_orchestration/lecture/#dependency-management","title":"Dependency Management","text":""},{"location":"docker_orchestration/lecture/#depends_on-teenuste-jarjekord","title":"depends_on - teenuste j\u00e4rjekord","text":"<pre><code>services:\n  app:\n    image: myapp:latest\n    depends_on:\n      - db\n      - redis\n      - elasticsearch\n\n  db:\n    image: postgres:13\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:alpine\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 3s\n      retries: 5\n</code></pre>"},{"location":"docker_orchestration/lecture/#networking","title":"Networking","text":""},{"location":"docker_orchestration/lecture/#default-network","title":"Default Network","text":"<p>Compose loob automaatselt v\u00f5rgu, kus teenused saavad omavahel suhelda teenuse nimede abil.</p> <pre><code>services:\n  web:\n    image: nginx\n    # Saab \u00fchenduda db teenusega: db:5432\n\n  db:\n    image: postgres\n    # Teenuse nimi 'db' on automaatselt DNS-is\n</code></pre>"},{"location":"docker_orchestration/lecture/#custom-networks","title":"Custom Networks","text":"<pre><code>services:\n  web:\n    image: nginx\n    networks:\n      - frontend\n      - backend\n\n  api:\n    image: myapp/api\n    networks:\n      - backend\n\n  db:\n    image: postgres\n    networks:\n      - backend\n\nnetworks:\n  frontend:\n    driver: bridge\n  backend:\n    driver: bridge\n    internal: true  # Ainult sisemine v\u00f5rk\n</code></pre>"},{"location":"docker_orchestration/lecture/#task-9-lihtne-orkestreerimine","title":"Task 9: Lihtne orkestreerimine","text":""},{"location":"docker_orchestration/lecture/#miks-docker-compose-on-piisav","title":"Miks Docker Compose on piisav?","text":"<p>Docker Compose on lihtne ja piisav enamiku rakenduste jaoks. \u00c4ra keeruta lihtsaid asju keeruliseks!</p>"},{"location":"docker_orchestration/lecture/#millal-vajad-midagi-keerukamat","title":"Millal vajad midagi keerukamat?","text":"<p>Docker Compose sobib, kui: - Sul on v\u00e4ike kuni keskmine rakendus - K\u00f5ik teenused jooksevad \u00fchel masinal - Sul pole vaja automaatset skaleerimist - Tahad lihtsat ja kiiret setup'i</p> <p>Vajad midagi keerukamat, kui: - Sul on palju masinaid (cluster) - Vajad automaatset skaleerimist - Sul on v\u00e4ga suur rakendus - Vajad k\u00f5rget k\u00e4ttesaadavust</p>"},{"location":"docker_orchestration/lecture/#lihtne-soovitus","title":"Lihtne soovitus","text":"<pre><code>graph LR\n    subgraph \"\ud83c\udfaf Alusta siit\"\n        Simple[ Docker Compose&lt;br/&gt;Lihtne ja piisav]\n        Complex[\u2638 Kubernetes&lt;br/&gt;Keeruline, aga v\u00f5imas]\n    end\n\n    Simple --&gt;|\"Kui vajad rohkem\"| Complex\n\n    style Simple fill:#99ff99\n    style Complex fill:#ff9999</code></pre> <p>\u00d5ppimise j\u00e4rjekord: 1. Docker Compose - alusta siit 2. Kubernetes - kui vajad rohkem 3. Alternatiivid - kui K8s pole \u00f5ige valik</p> <p>Lihtne reegel: \u00c4ra kasuta Kubernetes'i, kui Docker Compose t\u00f6\u00f6tab!</p>"},{"location":"docker_orchestration/lecture/#task-10-environment-management","title":"Task 10: Environment Management","text":""},{"location":"docker_orchestration/lecture/#environment-specific-configurations","title":"Environment-specific configurations","text":""},{"location":"docker_orchestration/lecture/#development-vs-production","title":"Development vs Production","text":"<pre><code># docker-compose.yml (base)\nversion: '3.8'\n\nservices:\n  web:\n    image: nginx:alpine\n    ports:\n      - \"${WEB_PORT:-80}:80\"\n    environment:\n      - NODE_ENV=${NODE_ENV:-development}\n      - DEBUG=${DEBUG:-true}\n    volumes:\n      - ./src:/app/src:ro\n\n  db:\n    image: postgres:13\n    environment:\n      - POSTGRES_DB=${DB_NAME:-app}\n      - POSTGRES_USER=${DB_USER:-user}\n      - POSTGRES_PASSWORD=${DB_PASSWORD:-pass}\n</code></pre>"},{"location":"docker_orchestration/lecture/#environment-files","title":"Environment Files","text":"<pre><code># .env.development\nWEB_PORT=3000\nNODE_ENV=development\nDEBUG=true\nDB_NAME=app_dev\nDB_USER=dev_user\nDB_PASSWORD=dev_pass\n\n# .env.production\nWEB_PORT=80\nNODE_ENV=production\nDEBUG=false\nDB_NAME=app_prod\nDB_USER=prod_user\nDB_PASSWORD=prod_pass\n</code></pre>"},{"location":"docker_orchestration/lecture/#environment-specific-compose-files","title":"Environment-specific Compose Files","text":"<pre><code># docker-compose.override.yml (development)\nversion: '3.8'\n\nservices:\n  web:\n    volumes:\n      - ./src:/app/src:ro\n      - ./logs:/app/logs\n    environment:\n      - DEBUG=true\n      - LOG_LEVEL=debug\n\n  db:\n    ports:\n      - \"5432:5432\"  # Expose for debugging\n</code></pre> <pre><code># docker-compose.prod.yml (production)\nversion: '3.8'\n\nservices:\n  web:\n    restart: unless-stopped\n    environment:\n      - DEBUG=false\n      - LOG_LEVEL=warn\n    deploy:\n      replicas: 3\n\n  db:\n    restart: unless-stopped\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n</code></pre>"},{"location":"docker_orchestration/lecture/#kasutamine-erinevates-keskkondades","title":"Kasutamine erinevates keskkondades","text":"<pre><code># Development\ndocker-compose up\n\n# Production\ndocker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d\n\n# Staging\ndocker-compose -f docker-compose.yml -f docker-compose.staging.yml up -d\n</code></pre>"},{"location":"docker_orchestration/lecture/#task-11-kubernetes-introduction","title":"Task 11: Kubernetes Introduction","text":""},{"location":"docker_orchestration/lecture/#miks-kubernetes","title":"Miks Kubernetes?","text":""},{"location":"docker_orchestration/lecture/#docker-compose-piirangud","title":"Docker Compose piirangud","text":"<ul> <li>Single host - ainult \u00fchel masinal</li> <li>No auto-scaling - k\u00e4sitsi skaleerimine</li> <li>Limited orchestration - lihtne orkestreerimine</li> <li>No self-healing - k\u00e4sitsi taask\u00e4ivitamine</li> </ul>"},{"location":"docker_orchestration/lecture/#kubernetes-eelised","title":"Kubernetes eelised","text":"<ul> <li>Multi-host - mitmel masinal</li> <li>Auto-scaling - automaatne skaleerimine</li> <li>Self-healing - automaatne taask\u00e4ivitamine</li> <li>Load balancing - automaatne koormuse jaotus</li> <li>Rolling updates - katkestusteta uuendused</li> </ul>"},{"location":"docker_orchestration/lecture/#kubernetes-pohikomponendid","title":"Kubernetes p\u00f5hikomponendid","text":""},{"location":"docker_orchestration/lecture/#pod","title":"Pod","text":"<pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: web-pod\nspec:\n  containers:\n  - name: web\n    image: nginx:alpine\n    ports:\n    - containerPort: 80\n</code></pre>"},{"location":"docker_orchestration/lecture/#deployment","title":"Deployment","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web-deployment\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: web\n  template:\n    metadata:\n      labels:\n        app: web\n    spec:\n      containers:\n      - name: web\n        image: nginx:alpine\n        ports:\n        - containerPort: 80\n</code></pre>"},{"location":"docker_orchestration/lecture/#service","title":"Service","text":"<pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: web-service\nspec:\n  selector:\n    app: web\n  ports:\n  - port: 80\n    targetPort: 80\n  type: LoadBalancer\n</code></pre>"},{"location":"docker_orchestration/lecture/#minikube-local-kubernetes","title":"Minikube - Local Kubernetes","text":"<pre><code># Install Minikube\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo installikube-linux-amd64 /usr/local/bin/minikube\n\n# Start cluster\nminikube start\n\n# Deploy application\nkubectl apply -f deployment.yaml\n\n# Access application\nminikube service web-service\n</code></pre>"},{"location":"docker_orchestration/lecture/#docker-compose-vs-kubernetes","title":"Docker Compose vs Kubernetes","text":"<pre><code>graph LR\n    subgraph \" Docker Compose\"\n        Compose[ Docker Compose&lt;br/&gt;\u2022 Lihtne&lt;br/&gt;\u2022 \u00dcks host&lt;br/&gt;\u2022 K\u00e4sitsi skaleerimine&lt;br/&gt;\u2022 Madal \u00f5ppimisk\u00f5ver&lt;br/&gt;\u2022 Arendus]\n    end\n\n    subgraph \"\u2638 Kubernetes\"\n        K8s[\u2638 Kubernetes&lt;br/&gt;\u2022 Keeruline&lt;br/&gt;\u2022 Mitmed hostid&lt;br/&gt;\u2022 Automaatne skaleerimine&lt;br/&gt;\u2022 K\u00f5rge \u00f5ppimisk\u00f5ver&lt;br/&gt;\u2022 Tootmine]\n    end\n\n    Compose -.-&gt;|\"J\u00e4rgmine samm\"| K8s\n\n    style Compose fill:#99ccff\n    style K8s fill:#ff9999</code></pre> Feature Docker Compose Kubernetes Complexity Lihtne Keeruline Hosts Single Multiple Scaling Manual Auto Learning curve Madal K\u00f5rge Use case Development Production"},{"location":"docker_orchestration/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>P\u00e4rast seda n\u00e4dalat oskate:</p> <p>\u2705 Docker Compose - multi-container rakenduste haldamine \u2705 Environment management - erinevate keskkondade konfigureerimine \u2705 Podman alternatives - rootless container orkestreerimine \u2705 Kubernetes basics - production-ready orkestreerimise alused \u2705 Best practices - turvaline ja skaleeritav arhitektuur  </p>"},{"location":"docker_orchestration/lecture/#praktiline-soovitus","title":"Praktiline soovitus:","text":"<p>Alusta lihtsast: 1. Docker Compose - lihtsate rakenduste jaoks 2. Kubernetes - kui vajad rohkem funktsionaalsust 3. Alternatiivid - kui K8s on liiga keeruline</p> <p>\u00d5ppimise j\u00e4rjekord: - Docker Compose p\u00f5hialused - J\u00e4rgmised n\u00e4dalad: Kubernetes s\u00fcgavamalt - Tulevikus: Alternatiivide tutvustus</p> <p>J\u00e4rgmine samm: Laboris praktiseerime lihtsa rakenduse juurutamist!</p>"},{"location":"docker_orchestration/lecture/#task-12-lihtne-mote-ara-jargi-hupe","title":"Task 12: \ud83e\udd14 Lihtne m\u00f5te: \u00c4ra j\u00e4rgi h\u00fcpe","text":""},{"location":"docker_orchestration/lecture/#miks-see-oluline-on","title":"Miks see oluline on?","text":"<p>Oleme \u00f5ppinud Docker Compose'i ja orkestreerimist, aga on oluline m\u00f5ista: lihtne on parem.</p>"},{"location":"docker_orchestration/lecture/#lihtne-vs-keeruline","title":"Lihtne vs keeruline","text":"<pre><code>graph LR\n    subgraph \"\ud83c\udfd7 Keeruline\"\n        Micro[\ud83d\udd27 Mikroteenused&lt;br/&gt;Palju v\u00e4ikseid osi]\n        K8s[\u2638 Kubernetes&lt;br/&gt;Keeruline setup]\n        Complex[\ud83e\udd2f Raske debugida&lt;br/&gt;Palju asju hallata]\n    end\n\n    subgraph \"\ud83d\uddff Lihtne\"\n        Mono[\ud83c\udfe2 \u00dcks rakendus&lt;br/&gt;K\u00f5ik koos]\n        Compose[ Docker Compose&lt;br/&gt;Lihtne setup]\n        Simple[\ud83d\ude0c Lihtne debugida&lt;br/&gt;V\u00e4he asju hallata]\n    end\n\n    Micro --&gt; Complex\n    K8s --&gt; Complex\n    Mono --&gt; Simple\n    Compose --&gt; Simple\n\n    style Micro fill:#ffcccc\n    style K8s fill:#ffcccc\n    style Complex fill:#ff9999\n    style Mono fill:#ccffcc\n    style Compose fill:#ccffcc\n    style Simple fill:#99ff99</code></pre>"},{"location":"docker_orchestration/lecture/#lihtne-opetus","title":"Lihtne \u00f5petus","text":"<p>Alusta lihtsast: - \u00dcks rakendus, \u00fcks andmebaas - Docker Compose lihtsateks asjadeks - Lisa keerukust ainult siis, kui vajad</p> <p>\u00c4ra j\u00e4rgi h\u00fcpe: - Mikroteenused pole alati parem - Kubernetes pole alati vajalik - Lihtne on parem kui keeruline</p>"},{"location":"docker_orchestration/lecture/#loppmote","title":"L\u00f5ppm\u00f5te","text":"<p>Vali see, mis t\u00f6\u00f6tab sinu jaoks. M\u00f5nikord on lihtne lahendus parim lahendus.</p>"},{"location":"docker_orchestration/lecture/#lisaressursid-ja-dokumentatsioon","title":"Lisaressursid ja dokumentatsioon","text":""},{"location":"docker_orchestration/lecture/#oppimiseks","title":"\u00d5ppimiseks:","text":"<ul> <li>Docker Compose Documentation - ametlik dokumentatsioon</li> <li>Docker Compose Quickstart - kiire algus</li> <li>Docker Compose Examples - palju n\u00e4iteid</li> </ul>"},{"location":"docker_orchestration/lecture/#praktikaks","title":"Praktikaks:","text":"<ul> <li>Docker Compose Reference - k\u00f5ik v\u00f5imalikud seaded</li> <li>Docker Compose Best Practices - tootmiskeskkonna n\u00f5uded</li> <li>Docker Compose Networking - v\u00f5rgu konfiguratsioon</li> </ul>"},{"location":"docker_orchestration/lecture/#abi-saamiseks","title":"\ud83c\udd98 Abi saamiseks:","text":"<ul> <li>Docker Community - foorumid</li> <li>Stack Overflow - k\u00fcsimused ja vastused</li> <li>Docker Hub - valmis image'id</li> </ul>"},{"location":"docker_orchestration/lecture/#alternatiivide-kohta","title":"Alternatiivide kohta:","text":"<ul> <li>Podman Compose - rootless alternatiiv</li> <li>Kubernetes Documentation - kui vajate rohkem</li> <li>Minikube - kohalik Kubernetes</li> </ul>"},{"location":"docker_orchestration/lecture/#lihtsate-lahenduste-kohta","title":"\ud83e\udd14 Lihtsate lahenduste kohta:","text":"<ul> <li>Start Simple - Alusta lihtsast</li> <li>Docker Compose Best Practices - Tootmiskeskkonna n\u00f5uded</li> </ul>"},{"location":"docker_orchestration/lecture/#rohkem-lugemist-orkestreerimise-kohta","title":"Rohkem lugemist orkestreerimise kohta:","text":"<ul> <li>16 Most Useful Container Orchestration Tools in 2025 - \u00dclevaade erinevatest orkestreerimise t\u00f6\u00f6riistadest</li> </ul>"},{"location":"git_version_control/homework/","title":"Git Projekti Portfolio","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Demonstreerida Git'i ja GitHub'i oskusi praktilist t\u00f6\u00f6d</p>"},{"location":"git_version_control/homework/#task-1-ulesande-kirjeldus","title":"Task 1: \u00dclesande Kirjeldus","text":"<p>Looge lihtne projekt, mis demonstreerib k\u00f5iki Git'i ja GitHub'i peamisi oskusi. Fookus on Git workflow'l, mitte koodi keerukusel.</p>"},{"location":"git_version_control/homework/#task-2-oluline-oige-git-flow","title":"Task 2: OLULINE: \u00d5ige Git Flow","text":"<pre><code>main (toodang)        \u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25cf\n                       \\         \\         \\  \ndevelop (test)          \u25cf\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u25cf\n                         \\     \\ /     /\nfeature branch'id        \u25cf\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u25cf\n</code></pre> <p>ALATI j\u00e4rgige: feature \u2192 develop \u2192 main</p> <p>MITTE KUNAGI: feature \u2192 main</p>"},{"location":"git_version_control/homework/#task-3-juhend","title":"Task 3: Juhend","text":""},{"location":"git_version_control/homework/#ulesanne-11-repository-loomine","title":"\u00dclesanne 1.1: Repository Loomine","text":"<ol> <li>GitHub'is looge uus repository</li> <li>Nimi: <code>its-git-demo</code> (v\u00f5i sarnane)</li> <li> <p>Public, README, MIT license</p> </li> <li> <p>Kloonige repository <pre><code>git clone https://github.com/teie-nimi/its-git-demo.git\ncd its-git-demo\n</code></pre></p> </li> <li> <p>Looge p\u00f5hilised failid</p> </li> <li>Muutke README.md</li> <li> <p>Looge .gitignore: <code>echo \"*.log\\n*.tmp\" &gt; .gitignore</code></p> </li> <li> <p>Esimene commit <pre><code>git add .\ngit commit -m \"Initial commit\"\ngit push origin main\n</code></pre></p> </li> </ol>"},{"location":"git_version_control/homework/#ulesanne-21-lihtne-script","title":"\u00dclesanne 2.1: Lihtne Script","text":"<ol> <li>Looge develop branch</li> <li>Minge main branch'ilt develop branch'ile</li> <li> <p>Push'ige develop branch GitHub'i</p> </li> <li> <p>Looge feature branch</p> </li> <li>Develop branch'ilt looge uus branch, n\u00e4iteks \"feature/system-info\"</li> <li> <p>Vahetage sellele branch'ile</p> </li> <li> <p>Kirjutage lihtne script</p> </li> <li>Looge bash script fail (n\u00e4iteks system_info.sh)</li> <li>Kopeerige see kood: <pre><code>#!/bin/bash\necho \"=== System Information ===\"\necho \"Date: $(date)\"\necho \"User: $(whoami)\"\necho \"Current directory: $(pwd)\"\necho \"Home directory: $HOME\"\necho \"\"\necho \"=== Disk Usage ===\"\ndf -h | head -5\necho \"\"\necho \"=== Memory Info ===\"\nfree -h 2&gt;/dev/null || echo \"Memory info not available\"\necho \"\"\necho \"Script completed successfully!\"\n</code></pre></li> <li>Tehke script k\u00e4ivitatavaks: <code>chmod +x system_info.sh</code></li> <li> <p>Testige script'i: <code>./system_info.sh</code></p> </li> <li> <p>Looge dokumentatsioon</p> </li> <li>Looge USAGE.md fail</li> <li> <p>Kopeerige see sisu: <pre><code># Usage Guide\n\n## System Info Script\n\n### Purpose\nShows basic system information.\n\n### Usage\n```bash\n./system_info.sh\n</code></pre></p> <p>### Output  Script displays:  - Current date and time  - Current user name  - Current directory path  - Disk usage information  - Memory information</p> <p>### Requirements  - Bash shell  - Unix/Linux system  ```</p> </li> <li> <p>Seadistage GitHub Actions</p> </li> <li>Looge <code>.github/workflows</code> kaust</li> <li> <p>Looge test.yml fail:    <pre><code>name: Test\non: [push, pull_request]\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n    - run: |\n        bash -n system_info.sh\n        chmod +x system_info.sh\n        ./system_info.sh\n</code></pre></p> </li> <li> <p>Commit ja push k\u00f5ik muudatused</p> </li> <li>Staging area selgitus: Git'is on 3 ala:<ul> <li>Working Directory (teie failid)</li> <li>Staging Area (failid valmis commit'iks) \u2b05 SIIN</li> <li>Repository (commit'itud failid)</li> </ul> </li> <li>Lisage k\u00f5ik failid staging area'le: <code>git add .</code></li> <li>Vaadake olekut: <code>git status</code> (rohelised failid on staging area's)</li> <li>Tehke commit selge s\u00f5numiga: <code>git commit -m \"feat: add system info script and docs\"</code></li> <li>Push'ige feature branch GitHub'i: <code>git push origin feature/system-info</code></li> </ol>"},{"location":"git_version_control/homework/#ulesanne-31-github-features","title":"\u00dclesanne 3.1: GitHub Features","text":"<ol> <li>Looge Issues GitHub'is</li> <li>Issue #1: \"Add system info script\" - m\u00e4rgistage label'iga \"enhancement\"</li> <li> <p>Issue #2: \"Improve documentation\" - m\u00e4rgistage label'iga \"documentation\"</p> </li> <li> <p>Tehke Pull Request</p> </li> <li>GitHub'is looge PR: feature/system-info \u2192 develop</li> <li>OLULINE: PR PEABema develop branch'i, MITTE main'i</li> <li>Kirjutage hea pealkiri ja kirjeldus</li> <li>Mainige, et see lahendab Issue #1 (\"Closes #1\")</li> <li> <p>Merge'ige PR (ise endale)</p> </li> <li> <p>Cleanup p\u00e4rast PR merge'it</p> </li> <li>Minge develop branch'ile: <code>git checkout develop</code></li> <li>Pull'ige muudatused: <code>git pull origin develop</code></li> <li>Kustutage feature branch: <code>git branch -d feature/system-info</code></li> <li> <p>Kustutage remote feature branch: <code>git push origin --delete feature/system-info</code></p> </li> <li> <p>Testige GitHub Actions</p> </li> <li>Vaadake GitHub'is Actions tab'is</li> <li>Veenduge, et workflow t\u00f6\u00f6tab</li> <li>Kui ei t\u00f6\u00f6ta, parandage vead</li> </ol>"},{"location":"git_version_control/homework/#ulesanne-41-git-advanced-features","title":"\u00dclesanne 4.1: Git Advanced Features","text":"<ol> <li>Looge tahtlikult merge conflict</li> <li>Minge develop branch'ile: <code>git checkout develop</code></li> <li>Muutke README.md faili (lisage rida l\u00f5ppu): \"Develop branch versioon\"</li> <li> <p>Commit'ige: <code>git commit -am \"docs: update from develop\"</code></p> </li> <li> <p>Minge main branch'ile: <code>git checkout main</code> </p> </li> <li>Muutke README.md SAMA KOHTA teisiti: \"Main branch versioon\"</li> <li> <p>Commit'ige: <code>git commit -am \"docs: update from main\"</code></p> </li> <li> <p>N\u00fc\u00fcd merge develop \u2192 main: <code>git merge develop</code></p> </li> <li> <p>Git \u00fctleb konflikt! \u2705</p> </li> <li> <p>Lahendage merge conflict</p> </li> <li>Avage README.md ja n\u00e4ete konflikti m\u00e4rke</li> <li>Konflikti n\u00e4ide: <pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\nMain branch versioon\n=======\nDevelop branch versioon\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; develop\n</code></pre></li> <li>Otsustage, kumba versiooni hoida v\u00f5i kombineerige</li> <li>Eemaldage konflikti m\u00e4rgid (&lt;&lt;&lt;&lt;, ====, &gt;&gt;&gt;&gt;)</li> <li>Lisage fail staging area'le</li> <li> <p>L\u00f5petage merge commit'iga</p> </li> <li> <p>N\u00e4idake rebase kasutamist</p> </li> <li>Looge uus feature branch develop'ist: <code>git checkout -b feature/rebase-demo</code></li> <li>Tehke seal m\u00f5ni muudatus ja commit</li> <li>Kasutage git rebase k\u00e4sku main branch'i peale: <code>git rebase main</code></li> <li> <p>Merge'ige muudatus develop'i</p> </li> <li> <p>T\u00c4HTIS: Merge develop \u2192 main (toodangusse)</p> </li> <li>Kui develop on valmis: <code>git checkout main</code></li> <li>Merge develop: <code>git merge develop</code></li> <li> <p>Push toodangusse: <code>git push origin main</code></p> </li> <li> <p>Looge tagged release'd</p> </li> <li>Tag'ige praegune main versioon v1.0.0: <code>git tag v1.0.0</code></li> <li>Push'ige tag'id GitHub'i: <code>git push origin v1.0.0</code></li> <li>GitHub'is looge Release v1.0.0 tag'i p\u00f5hjal</li> </ol>"},{"location":"git_version_control/homework/#ulesanne-51-finalize","title":"\u00dclesanne 5.1: Finalize","text":"<ol> <li>Uuendage README.md</li> <li> <p>Kopeerige see sisu README.md faili: <pre><code># Git Demo Project\n\nLihtne projekt Git ja GitHub oskuste demonstreerimiseks.\n\n## Eesm\u00e4rk\nSee projekt n\u00e4itab:\n- Git branching ja merging\n- GitHub collaboration\n- Automatiseeritud testimine\n- Dokumentatsiooni haldus\n\n## Git Oskused\n- \u2705 Repository seadistamine\n- \u2705 Feature branch workflow\n- \u2705 Merge conflict lahendamine\n- \u2705 Pull Request'id\n- \u2705 GitHub Actions\n- \u2705 Tagged release'id\n\n## Failid\n- `system_info.sh` - S\u00fcsteemi info script\n- `USAGE.md` - Kasutamise juhend\n- `.github/workflows/test.yml` - Automaatne testimine\n\n## Kasutamine\n```bash\n./system_info.sh\n</code></pre></p> <p>See on \u00f5ppeprojekt Git workflow demonstreerimiseks.  ```</p> </li> <li> <p>Tehke teine release</p> </li> <li>Commit'ige README muudatused develop branch'is</li> <li>Merge develop \u2192 main</li> <li>Tag'ige versioon v1.1.0</li> <li> <p>Push'ige k\u00f5ik muudatused ja tag'id</p> </li> <li> <p>L\u00f5plik kontroll</p> </li> <li>Veenduge, et GitHub'is on n\u00e4ha:<ul> <li>V\u00e4hemalt 10 commit'i</li> <li>Mitu branch'i</li> <li>Issues ja PR</li> <li>GitHub Actions t\u00f6\u00f6tab</li> <li>2 tag'i/release'i</li> </ul> </li> </ol>"},{"location":"git_version_control/lab/","title":"Git Version Control Lab: Git &amp; GitHub Actions","text":"<p>Kestus: Eesm\u00e4rk: Praktiliselt harjutada k\u00f5iki Git'i peamisi funktsioone</p>"},{"location":"git_version_control/lab/#task-1-git-basics-ja-kohalik-kasutamine","title":"Task 1: Git Basics ja Kohalik Kasutamine","text":""},{"location":"git_version_control/lab/#harjutus-11-git-setup-ja-esimene-repository","title":"Harjutus 1.1: Git Setup ja Esimene Repository","text":"<p>Seadistage Git: <pre><code># Kontrollige, kas Git on installeeritud\ngit --version\n\n# Seadistage kasutajainfo (kasutage oma andmeid)\ngit config --global user.name \"Teie Nimi\"\ngit config --global user.email \"teie.email@example.com\"\n\n# Kontrollige seadistusi\ngit config --list\n\n# Seadistage editor (valikuline)\ngit config --global core.editor \"code --wait\"  # VS Code\n</code></pre></p> <p>Looge esimene repository: <pre><code># Looge kaust\nmkdir git-practice-lab\ncd git-practice-lab\n\n# Algatage Git repository\ngit init\n\n# Kontrollige olukorda\ngit status\n\n# Looge esimene fail\necho \"# Git Practice Lab\" &gt; README.md\necho \"See onu Git harjutuste projekt.\" &gt;&gt; README.md\n\n# Tehke esimene commit\ngit add README.md\ngit status\ngit commit -m \"Esimene commit: lisa README\"\n\n# Vaadake ajalugu\ngit log\ngit log --oneline\n</code></pre></p> <p>Kontrollpunkt: Teil peaks olema Git repository \u00fche commit'iga.</p>"},{"location":"git_version_control/lab/#harjutus-12-pohiline-git-workflow","title":"Harjutus 1.2: P\u00f5hiline Git Workflow","text":"<p>Looge ja muutke faile: <pre><code># Looge Python script\ncat &gt; calculator.py &lt;&lt; 'EOF'\ndef add(a, b):\n    return a + b\n\ndef subtract(a, b):\n    return a - b\n\nif __name__ == \"__main__\":\n    print(\"Calculator: 2 + 3 =\", add(2, 3))\nEOF\n\n# Kontrollige olukorda\ngit status\n\n# Lisage fail ja tehke commit\ngit add calculator.py\ngit status\ngit commit -m \"Lisa lihtne kalkulaator\"\n\n# Muutke faili\necho \"\" &gt;&gt; calculator.py\necho \"def multiply(a, b):\" &gt;&gt; calculator.py\necho \"    return a * b\" &gt;&gt; calculator.py\n\n# Vaadake muudatusi\ngit diff\ngit status\n\n# Commit muudatused\ngit add calculator.py\ngit commit -m \"Lisa korrutamise funktsioon\"\n</code></pre></p> <p>Harjutage erinevaid Git k\u00e4ske: <pre><code># Vaadake commit'ide ajalugu\ngit log --oneline --graph\n\n# Vaadake konkreetse commit'i detaile\ngit show HEAD\ngit show HEAD~1\n\n# Looge veel faile\necho \"print('Tere, Git!')\" &gt; hello.py\necho \"*.pyc\" &gt; .gitignore\necho \"__pycache__/\" &gt;&gt; .gitignore\n\n# Lisage k\u00f5ik korraga\ngit add .\ngit status\ngit commit -m \"Lisa hello script ja gitignore\"\n</code></pre></p> <p>Kontrollpunkt: Teil peaks olema 3-4 commit'i erinevate failidega.</p>"},{"location":"git_version_control/lab/#harjutus-13-advanced-git-operations","title":"Harjutus 1.3: Advanced Git Operations","text":"<p>Staging area vahele j\u00e4tmine: <pre><code># Muutke calculator.py\necho \"\" &gt;&gt; calculator.py\necho \"def divide(a, b):\" &gt;&gt; calculator.py\necho \"    if b != 0:\" &gt;&gt; calculator.py\necho \"        return a / b\" &gt;&gt; calculator.py\necho \"    return 'Error: Division by zero'\" &gt;&gt; calculator.py\n\n# Commit otse ilma git add'ita\ngit commit -am \"Lisa jagamise funktsioon\"\n\n# Vaadake erinevusi\ngit diff HEAD~1\ngit show --stat HEAD\n</code></pre></p> <p>Failide kustutamine ja \u00fcmbernimetamine: <pre><code># Looge ajutine fail\necho \"Ajutine sisu\" &gt; temp.txt\ngit add temp.txt\ngit commit -m \"Lisa ajutine fail\"\n\n# Kustutage fail\ngit rm temp.txt\ngit status\ngit commit -m \"Kustuta ajutine fail\"\n\n# Nimetage fail \u00fcmber\ngit mv hello.py greeting.py\ngit status\ngit commit -m \"Nimeta hello.py \u00fcmber greeting.py\"\n</code></pre></p> <p>Muudatuste tagasiv\u00f5tmine: <pre><code># Tehke m\u00f5ni muudatus\necho \"Vigane kood\" &gt;&gt; calculator.py\n\n# Vaadake muudatust\ngit diff\n\n# V\u00f5tke muudatus tagasi\ngit checkout -- calculator.py\n\n# Kontrollige\ngit status\n\n# Tehke muudatus ja lisage staging'u\necho \"Veel \u00fcks muudatus\" &gt;&gt; calculator.py\ngit add calculator.py\n\n# Eemaldage staging'st\ngit reset HEAD calculator.py\ngit status\n\n# T\u00fchistage t\u00f6\u00f6kausta muudatus\ngit checkout -- calculator.py\n</code></pre></p> <p>Kontrollpunkt: Oskate faile kustutada, \u00fcmbernimetada ja muudatusi t\u00fchistada.</p>"},{"location":"git_version_control/lab/#task-2-branching-ja-merging","title":"Task 2: Branching ja Merging","text":""},{"location":"git_version_control/lab/#harjutus-21-harude-loomine-ja-haldamine","title":"Harjutus 2.1: Harude Loomine ja Haldamine","text":"<p>Looge uus branch: <pre><code># Vaadake praeguseid branch'e\ngit branch\n\n# Looge uus branch\ngit branch feature/advanced-math\n\n# Vahetage branch'i\ngit checkout feature/advanced-math\n\n# V\u00f5i tehke m\u00f5lemad koos\ngit checkout -b feature/string-utils\n\n# Kontrollige, kus olete\ngit branch\n</code></pre></p> <p>Arendage eri branch'ides: <pre><code># Olge feature/string-utils branch'is\ncat &gt; string_utils.py &lt;&lt; 'EOF'\ndef reverse_string(text):\n    return text[::-1]\n\ndef count_words(text):\n    return len(text.split())\n\ndef capitalize_words(text):\n    return ' '.join(word.capitalize() for word in text.split())\n\nif __name__ == \"__main__\":\n    test_text = \"tere git maailm\"\n    print(\"Original:\", test_text)\n    print(\"Reversed:\", reverse_string(test_text))\n    print(\"Word count:\", count_words(test_text))\n    print(\"Capitalized:\", capitalize_words(test_text))\nEOF\n\ngit add string_utils.py\ngit commit -m \"Lisa string utiliitide moodul\"\n\n# Minge teise branch'i\ngit checkout feature/advanced-math\n\ncat &gt; advanced_math.py &lt;&lt; 'EOF'\nimport math\n\ndef power(base, exponent):\n    return base ** exponent\n\ndef square_root(number):\n    return math.sqrt(number)\n\ndef factorial(n):\n    if n &lt;= 1:\n        return 1\n    return n * factorial(n - 1)\n\nif __name__ == \"__main__\":\n    print(\"2^3 =\", power(2, 3))\n    print(\"sqrt(16) =\", square_root(16))\n    print(\"5! =\", factorial(5))\nEOF\n\ngit add advanced_math.py\ngit commit -m \"Lisa t\u00e4psema matemaatika moodul\"\n\n# Vaadake branch'ide ajalugu\ngit log --oneline --graph --all\n</code></pre></p> <p>Kontrollpunkt: Teil on kaks feature branch'i erinevate failidega.</p>"},{"location":"git_version_control/lab/#harjutus-22-branchide-merging","title":"Harjutus 2.2: Branch'ide Merging","text":"<p>Merge esimene branch main'i: <pre><code># Minge main branch'i\ngit checkout main\n\n# Merge string-utils\ngit merge feature/string-utils\n\n# Vaadake tulemust\ngit log --oneline --graph\nls -la\n\n# Testage merged koodi\npython3 string_utils.py\n</code></pre></p> <p>Merge teine branch: <pre><code># Merge advanced-math\ngit merge feature/advanced-math\n\n# Vaadake tulemust\ngit log --oneline --graph --all\nls -la\n\n# Testage\npython3 advanced_math.py\n</code></pre></p> <p>Kontrollpunkt: M\u00f5lemad feature'id on main'is merge'itud.</p>"},{"location":"git_version_control/lab/#harjutus-23-merge-conflicts","title":"Harjutus 2.3: Merge Conflicts","text":"<p>Looge konflikt: <pre><code># Looge kaks branch'i, mis muudavad sama faili\ngit checkout -b fix/calculator-output\n\n# Muutke calculator.py\nsed -i 's/print(\"Calculator: 2 + 3 =\", add(2, 3))/print(\"Kalkulaator: 2 + 3 =\", add(2, 3))/' calculator.py\n\ngit add calculator.py\ngit commit -m \"Muuda v\u00e4ljund eestikeelseks\"\n\n# Minge main'i ja tehke konfliktne muudatus\ngit checkout main\n\n# Muutke sama rida teisiti\nsed -i 's/print(\"Calculator: 2 + 3 =\", add(2, 3))/print(\"CALC RESULT: 2 + 3 =\", add(2, 3))/' calculator.py\n\ngit add calculator.py\ngit commit -m \"Muuda v\u00e4ljund l\u00fchemaks\"\n\n# Proovige merge'ida - konflikt!\ngit merge fix/calculator-output\n</code></pre></p> <p>Lahendage konflikt: <pre><code># Vaadake konfliktset faili\ncat calculator.py\n\n# Redigeerige k\u00e4sitsi v\u00f5i kasutage merge tool'i\n# Eemaldage konfliktim\u00e4rgid ja valige \u00f5ige versioon\n\n# N\u00e4iteks j\u00e4tke eestikeelne versioon:\ncat &gt; calculator.py &lt;&lt; 'EOF'\ndef add(a, b):\n    return a + b\n\ndef subtract(a, b):\n    return a - b\n\ndef multiply(a, b):\n    return a * b\n\ndef divide(a, b):\n    if b != 0:\n        return a / b\n    return 'Error: Division by zero'\n\nif __name__ == \"__main__\":\n    print(\"Kalkulaator: 2 + 3 =\", add(2, 3))\nEOF\n\n# L\u00f5petage merge\ngit add calculator.py\ngit status\ngit commit\n\n# Vaadake tulemust\ngit log --oneline --graph\n</code></pre></p> <p>Kontrollpunkt: Olete edukalt merge konflikti lahendanud.</p>"},{"location":"git_version_control/lab/#task-3-github-ja-remote-repositories","title":"Task 3: GitHub ja Remote Repositories","text":""},{"location":"git_version_control/lab/#harjutus-31-github-setup-ja-ssh","title":"Harjutus 3.1: GitHub Setup ja SSH","text":"<p>SSH v\u00f5tmete seadistamine: <pre><code># Kontrollige, kas SSH v\u00f5tmed on olemas\nls -la ~/.ssh/\n\n# Kui pole, looge uued (kasutage oma email'i)\nssh-keygen -t ed25519 -C \"teie.email@example.com\"\n\n# K\u00e4ivitage SSH agent\neval \"$(ssh-agent -s)\"\n\n# Lisage v\u00f5ti agendile\nssh-add ~/.ssh/id_ed25519\n\n# Kopeerige avalik v\u00f5ti\ncat ~/.ssh/id_ed25519.pub\n</code></pre></p> <p>GitHub'is: 1. Minge Settings \u2192 SSH and GPG keys 2. Click \"New SSH key\" 3. Kleepige avalik v\u00f5ti 4. Save</p> <p>Testuge SSH \u00fchendust: <pre><code>ssh -T git@github.com\n</code></pre></p> <p>Kontrollpunkt: SSH \u00fchendus GitHub'iga t\u00f6\u00f6tab.</p>"},{"location":"git_version_control/lab/#harjutus-32-remote-repository-ja-collaboration","title":"Harjutus 3.2: Remote Repository ja Collaboration","text":"<p>GitHub'is looge uus repository: 1. Click \"New repository\" 2. Nimi: <code>git-practice-lab</code> 3. Public repository 4. \u00c4RA lisa README (meil on juba) 5. Create repository</p> <p>\u00dchendage kohalik repo GitHub'iga: <pre><code># Lisage remote\ngit remote add origin git@github.com:TEIE-KASUTAJANIMI/git-practice-lab.git\n\n# Kontrollige remote'e\ngit remote -v\n\n# Push'ige esimest korda\ngit push -u origin main\n\n# Push'ige k\u00f5ik branch'id\ngit push origin feature/advanced-math\ngit push origin fix/calculator-output\n</code></pre></p> <p>Pull/Push workflow: <pre><code># Simuleerige meeskonnat\u00f6\u00f6d\n# GitHub'is tehke muudatus otse veebi kaudu:\n## Task 4: Avage README.md\n## Lisage rida \"Muudatus GitHub'is\"\n## Task 5: Commit directly to main\n\n# Kohalikult pull'ige muudatus\ngit pull origin main\n\n# Tehke kohalik muudatus\necho \"\" &gt;&gt; README.md\necho \"Kohalik muudatus\" &gt;&gt; README.md\n\ngit add README.md\ngit commit -m \"Lisa kohalik muudatus\"\n\n# Push'ige\ngit push origin main\n</code></pre></p> <p>Kontrollpunkt: Kohalik ja remote repository on s\u00fcnkroniseeritud.</p>"},{"location":"git_version_control/lab/#harjutus-33-pull-requests","title":"Harjutus 3.3: Pull Requests","text":"<p>Looge uus feature: <pre><code># Looge uus branch\ngit checkout -b feature/documentation\n\n# Looge dokumentatsioon\ncat &gt; USAGE.md &lt;&lt; 'EOF'\n# Git Practice Lab Kasutamine\n\n## Failide kirjeldus\n\n- `calculator.py` - P\u00f5hilised matemaatilised operatsioonid\n- `advanced_math.py` - T\u00e4psemad matemaatikafunktsioonid  \n- `string_utils.py` - Stringide t\u00f6\u00f6tlemise utiliidid\n- `greeting.py` - Lihtne tervitusprogramm\n\n## Kasutamine\n\n```bash\npython3 calculator.py\npython3 advanced_math.py\npython3 string_utils.py\npython3 greeting.py\n</code></pre></p>"},{"location":"git_version_control/lab/#task-6-arendamine","title":"Task 6: Arendamine","text":"<ol> <li>Fork'ige repository</li> <li>Looge feature branch</li> <li>Tehke muudatused</li> <li>Looge Pull Request EOF</li> </ol> <p>git add USAGE.md git commit -m \"Lisa kasutamise dokumentatsioon\"</p>"},{"location":"git_version_control/lab/#pushige-branch","title":"Push'ige branch","text":"<p>git push origin feature/documentation <pre><code>**GitHub'is looge Pull Request:**\n1. Minge oma repository lehele\n2. Click \"Compare &amp; pull request\"\n3. Kirjutage hea pealkiri ja kirjeldus\n4. Create pull request\n5. Merge pull request\n6. Delete branch\n\n**Kohalikult puhastage:**\n```bash\ngit checkout main\ngit pull origin main\ngit branch -d feature/documentation\ngit push origin --delete feature/documentation\n</code></pre></p> <p>Kontrollpunkt: Olete edukalt teinud Pull Request'i workflow.</p>"},{"location":"git_version_control/lab/#task-7-advanced-git-features","title":"Task 7: Advanced Git Features","text":""},{"location":"git_version_control/lab/#harjutus-41-git-rebase-ja-history-cleanup","title":"Harjutus 4.1: Git Rebase ja History Cleanup","text":"<p>Interactive Rebase: <pre><code># Looge mitu v\u00e4ikest commit'i\necho \"# TODO\" &gt;&gt; TODO.md\ngit add TODO.md\ngit commit -m \"Lisa TODO fail\"\n\necho \"- Lisa testid\" &gt;&gt; TODO.md\ngit add TODO.md\ngit commit -m \"Lisa esimene \u00fclesanne\"\n\necho \"- Paranda dokumentatsiooni\" &gt;&gt; TODO.md\ngit add TODO.md\ngit commit -m \"Lisa teine \u00fclesanne\"\n\necho \"- Optimiseeri kood\" &gt;&gt; TODO.md\ngit add TODO.md\ngit commit -m \"Lisa kolmas \u00fclesanne\"\n\n# Vaadake ajalugu\ngit log --oneline -5\n\n# \u00dchendage viimased 4 commit'i \u00fcheks\ngit rebase -i HEAD~4\n\n# Editor avaneb - muutke:\n# pick \u2192 squash (v\u00f5i s) viimastel 3 real\n# J\u00e4tke esimene \"pick\"\n\n# Salvestage ja sulgege editor\n# Uus editor commit s\u00f5numiga - redigeerige vajadusel\n</code></pre></p>"},{"location":"git_version_control/lab/#harjutus-42-git-stash","title":"Harjutus 4.2: Git Stash","text":"<pre><code># Alustage muudatusi\necho \"Pooleli t\u00f6\u00f6\" &gt;&gt; calculator.py\n\n# Aga vajate kiirestina teise branch'i\ngit stash\n\n# Kontrollige olukorda\ngit status\n\n# Minge teise branch'i, tehke t\u00f6\u00f6d\ngit checkout feature/advanced-math\necho \"Kiire parandus\" &gt;&gt; advanced_math.py\ngit add advanced_math.py\ngit commit -m \"Kiire parandus advanced math'is\"\n\n# Minge tagasi ja taastage stash\ngit checkout main\ngit stash pop\n\n# L\u00f5petage t\u00f6\u00f6\ngit add calculator.py\ngit commit -m \"L\u00f5peta pooleli t\u00f6\u00f6\"\n</code></pre>"},{"location":"git_version_control/lab/#harjutus-43-cherry-pick","title":"Harjutus 4.3: Cherry-pick","text":"<pre><code># Oletame, et feature branch'is on hea commit, mida tahate main'is\ngit log --oneline feature/advanced-math\n\n# V\u00f5tke konkreetne commit main'i (kasutage \u00f5iget hash'i)\ngit cherry-pick COMMIT-HASH\n\n# Vaadake tulemust\ngit log --oneline -3\n</code></pre> <p>Kontrollpunkt: Oskate kasutada Git'i t\u00e4psemaid funktsioone.</p>"},{"location":"git_version_control/lab/#kokkuvote-ja-kontrolljaarati","title":"Kokkuv\u00f5te ja Kontrolljaarati","text":""},{"location":"git_version_control/lab/#loplik-kontroll","title":"L\u00f5plik kontroll","text":"<p>Kontrollige oma oskusi: <pre><code>## Task 8: Repository struktuur\nls -la\ngit log --oneline --graph -10\n\n## Task 9: Remote'id\ngit remote -v\n\n## Task 10: Branch'id\ngit branch -a\n\n## Task 11: Viimased commit'id\ngit log --oneline -5\n\n## Task 12: Git config\ngit config --list | grep user\n</code></pre></p>"},{"location":"git_version_control/lab/#mida-te-nuud-oskate","title":"Mida te n\u00fc\u00fcd oskate:","text":"<ul> <li>Git'i seadistamine ja p\u00f5hik\u00e4sud</li> <li>Staging area kasutamine</li> <li>Branch'ide loomine ja merge'imine</li> <li>Merge konfliktide lahendamine</li> <li>SSH seadistamine GitHub'iga</li> <li>Remote repository workflow</li> <li>Pull Request'ide tegemine</li> <li>Advanced Git features (rebase, stash, cherry-pick)</li> </ul>"},{"location":"git_version_control/lab/#jargmised-sammud","title":"J\u00e4rgmised sammud:","text":"<ol> <li>Harjutage iga p\u00e4ev - Git on nagu jalgrattas\u00f5it</li> <li>Liituge open source projektidega - tehke PR'e</li> <li>Seadistage Git aliases - kiiremaks t\u00f6\u00f6tamiseks</li> <li>\u00d5ppige Git GUI t\u00f6\u00f6riistu - GitKraken, SourceTree</li> <li>Uurige GitHub Actions - CI/CD automatiseerimine</li> </ol>"},{"location":"git_version_control/lab/#git-aliases-boonusulesanne","title":"Git Aliases (boonus\u00fclesanne):","text":"<pre><code># Kasulikud aliased\ngit config --global alias.st status\ngit config --global alias.co checkout  \ngit config --global alias.br branch\ngit config --global alias.ci commit\ngit config --global alias.unstage 'reset HEAD --'\ngit config --global alias.last 'log -1 HEAD'\ngit config --global alias.visual '!gitk'\ngit config --global alias.lg 'log --oneline --graph --all'\n\n# Testage\ngit st\ngit lg\n</code></pre> <p>** \u00d5nnitleme! Olete l\u00e4binud Git'i p\u00f5hilise v\u00e4lja\u00f5ppe.**</p>"},{"location":"git_version_control/lab/#task-13-boonusulesanded-juba-giti-oskajatele","title":"Task 13: BOONUS\u00dcLESANDED (juba Git'i oskajatele)","text":""},{"location":"git_version_control/lab/#ulesanne-1-advanced-git-features","title":"\u00dclesanne 1: Advanced Git Features","text":""},{"location":"git_version_control/lab/#interactive-rebase-commitide-uhendamine","title":"Interactive Rebase - Commit'ide \u00dchendamine","text":"<pre><code># Looge mitu v\u00e4ikest commiti\necho \"Feature 1\" &gt; feature1.txt &amp;&amp; git add . &amp;&amp; git commit -m \"Add feature 1\"\necho \"Feature 2\" &gt; feature2.txt &amp;&amp; git add . &amp;&amp; git commit -m \"Add feature 2\" \necho \"Fix typo\" &gt;&gt; feature1.txt &amp;&amp; git add . &amp;&amp; git commit -m \"Fix typo in feature 1\"\n\n# Interactive rebase - \u00fchendage commitid\ngit rebase -i HEAD~3\n# Muutke \"pick\" -&gt; \"squash\" kahel viimasel real\n# Salvestage ja sulgege editor\n</code></pre>"},{"location":"git_version_control/lab/#cherry-pick-ja-advanced-stash","title":"Cherry-pick ja Advanced Stash","text":"<pre><code># Stash koos metadata'ga\necho \"Pooleli t\u00f6\u00f6\" &gt; wip.txt\ngit add .\ngit stash push -m \"WIP: new authentication feature\"\n\n# Cherry-pick - kopeerige konkreetne commit\ngit log --oneline -5  # Leidke commit hash\ngit cherry-pick &lt;commit-hash&gt;\n\n# Stash management\ngit stash list\ngit stash show stash@{0}\ngit stash pop  # v\u00f5i git stash apply\n</code></pre>"},{"location":"git_version_control/lab/#advanced-log-ja-blame","title":"Advanced Log ja Blame","text":"<pre><code># Graafiline commit history\ngit log --graph --pretty=format:'%h -%d %s (%cr) &lt;%an&gt;' --abbrev-commit --all\n\n# Failispetsiifilised muutused\ngit log --follow -p -- filename.txt\n\n# Blame - kes kirjutas millise rea\ngit blame README.md\ngit blame -L 10,20 README.md  # Ainult read 10-20\n\n# Commit range'ide v\u00f5rdlus\ngit diff main..feature-branch\ngit log main..feature-branch --oneline\n</code></pre>"},{"location":"git_version_control/lab/#ulesanne-2-git-hooks-ja-workflow-automation","title":"\u00dclesanne 2: Git Hooks ja Workflow Automation","text":""},{"location":"git_version_control/lab/#pre-commit-hook-automaatne-kvaliteedikontroll","title":"Pre-commit Hook (automaatne kvaliteedikontroll)","text":"<pre><code># Looge pre-commit hook\nmkdir -p .git/hooks\ncat &gt; .git/hooks/pre-commit &lt;&lt; 'EOF'\n#!/bin/bash\necho \" Kontrollime koodi enne commit'i...\"\n\n# Kontrolli, et ei commitita suuri faile\nfind . -size +1M -type f -exec ls -lh {} \\; | grep -E '\\.(jpg|png|gif|mp4|zip)$' \nif [ $? -eq 0 ]; then\n  echo \"\u274c Suured failid leitud! Kasutage Git LFS.\"\n  exit 1\nfi\n\n# Kontrolli, et ei ole debug koodi\ngrep -r \"console.log\\|debugger\\|TODO\" --include=\"*.js\" .\nif [ $? -eq 0 ]; then\n  echo \"\u26a0  Debug kood leitud! Kas olete kindel?\"\n  echo \"J\u00e4tkamiseks vajutage Enter, katkestamiseks Ctrl+C\"\n  read\nfi\n\necho \"\u2705 Pre-commit kontroll OK!\"\nEOF\n\nchmod +x .git/hooks/pre-commit\n\n# Testige hook'i\necho \"console.log('test')\" &gt; debug.js\ngit add debug.js\ngit commit -m \"Test hook\" # Hook k\u00fcsib kinnitust\n</code></pre>"},{"location":"git_version_control/lab/#post-merge-hook-automaatne-cleanup","title":"Post-merge Hook (automaatne cleanup)","text":"<pre><code>cat &gt; .git/hooks/post-merge &lt;&lt; 'EOF'\n#!/bin/bash\necho \"\ud83e\uddf9 Post-merge cleanup...\"\n\n# Kustuta vanale branch'id\ngit branch --merged | grep -v \"\\*\\|main\\|master\" | xargs -n 1 git branch -d\n\n# Update dependencies kui package.json muutus\nif [ -f package.json ] &amp;&amp; git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD | grep -q \"package.json\"; then\n  echo \"\ud83d\udce6 package.json muutus, updatein dependencies...\"\n  npm install\nfi\n\necho \"\u2705 Post-merge cleanup l\u00f5petatud!\"\nEOF\n\nchmod +x .git/hooks/post-merge\n</code></pre>"},{"location":"git_version_control/lab/#ulesanne-3-git-submodules-ja-worktrees","title":"\u00dclesanne 3: Git Submodules ja Worktrees","text":""},{"location":"git_version_control/lab/#submodules-dependency-management","title":"Submodules - Dependency Management","text":"<pre><code># Lisa library submodule'ina\ngit submodule add https://github.com/lodash/lodash.git vendor/lodash\ngit commit -m \"Add lodash as submodule\"\n\n# Clone repo koos submodule'itega\ngit clone --recursive &lt;your-repo-url&gt;\n\n# Update submodule'id\ngit submodule update --remote --merge\n\n# Eemalda submodule\ngit submodule deinit vendor/lodash\ngit rm vendor/lodash\n</code></pre>"},{"location":"git_version_control/lab/#worktrees-parallel-development","title":"Worktrees - Parallel Development","text":"<pre><code># Loo worktree uue feature jaoks\ngit worktree add ../feature-payment feature/payment\ncd ../feature-payment\n# N\u00fc\u00fcd saate t\u00f6\u00f6data samaaegselt main ja feature branch'idega\n\n# List worktrees\ngit worktree list\n\n# Remove worktree\ncd ../git-practice-lab\ngit worktree remove ../feature-payment\n</code></pre>"},{"location":"git_version_control/lab/#ulesanne-4-advanced-git-performance","title":"\u00dclesanne 4: Advanced Git Performance","text":""},{"location":"git_version_control/lab/#git-lfs-large-file-storage","title":"Git LFS - Large File Storage","text":"<pre><code># Installi Git LFS\ngit lfs install\n\n# Track suured failid\ngit lfs track \"*.png\"\ngit lfs track \"*.jpg\"\ngit lfs track \"*.pdf\"\ngit add .gitattributes\n\n# Test LFS\necho \"Large file content\" &gt; large-file.png\ngit add large-file.png\ngit commit -m \"Add large file with LFS\"\n</code></pre>"},{"location":"git_version_control/lab/#repository-optimization","title":"Repository Optimization","text":"<pre><code># Cleanup unreachable objects\ngit gc --aggressive --prune=now\n\n# Shallow clone performance'iks\ngit clone --depth 1 &lt;repo-url&gt; quick-clone\n\n# Partial clone (Git 2.19+)\ngit clone --filter=blob:none &lt;repo-url&gt; partial-clone\n</code></pre>"},{"location":"git_version_control/lab/#ulesanne-5-expert-level-debugging","title":"\u00dclesanne 5: Expert Level Debugging","text":""},{"location":"git_version_control/lab/#git-bisect-bug-hunt","title":"Git Bisect - Bug Hunt","text":"<pre><code># Simuleerige bug'i otsimist\n# Looge 10 commiti, millest \u00fcks on \"broken\"\nfor i in {1..10}; do\n  if [ $i -eq 7 ]; then\n    echo \"broken code\" &gt; app.js\n  else\n    echo \"good code $i\" &gt; app.js\n  fi\n  git add app.js\n  git commit -m \"Version $i\"\ndone\n\n# Kasuta bisect bug'i leidmiseks\ngit bisect start\ngit bisect bad HEAD\ngit bisect good HEAD~10\n\n# Test iga commit (Git pakub)\nwhile true; do\n  if grep -q \"broken\" app.js; then\n    git bisect bad\n  else\n    git bisect good\n  fi\n  # J\u00e4tka kuni Git leiab probleemse commiti\ndone\n\ngit bisect reset\n</code></pre>"},{"location":"git_version_control/lab/#custom-git-commands","title":"Custom Git Commands","text":"<pre><code># Looge custom Git command\nmkdir -p ~/.local/bin\ncat &gt; ~/.local/bin/git-summary &lt;&lt; 'EOF'\n#!/bin/bash\necho \"\ud83d\udcca Repository Summary:\"\necho \"=====================\"\necho \"\ud83d\udccd Current branch: $(git branch --show-current)\"\necho \"\ud83d\udcc8 Total commits: $(git rev-list --count HEAD)\"\necho \"\ud83d\udc65 Contributors: $(git log --format='%an' | sort -u | wc -l)\"\necho \" Last commit: $(git log -1 --format='%cr')\"\necho \"\ud83d\udcdd Lines of code:\"\ngit ls-files | xargs wc -l | tail -1\necho \"\ud83c\udf3f Branches:\"\ngit branch -a | head -5\nEOF\n\nchmod +x ~/.local/bin/git-summary\n\n# Kasutage: git summary\nexport PATH=\"$HOME/.local/bin:$PATH\"\ngit summary\n</code></pre>"},{"location":"git_version_control/lab/#advanced-conflict-resolution","title":"Advanced Conflict Resolution","text":"<pre><code># Seadista merge tool\ngit config --global merge.tool vimdiff\n# v\u00f5i\ngit config --global merge.tool code\n\n# 3-way merge conflicts\ngit config --global mergetool.keepBackup false\n\n# Resolve konflikti merge tool'iga\n# (simuleerige konflikti ja kasutage)\ngit mergetool\n</code></pre>"},{"location":"git_version_control/lab/#ulesanne-6-git-flow-ja-release-management","title":"\u00dclesanne 6: Git Flow ja Release Management","text":"<pre><code># Git Flow setup (kui installitud)\ngit flow init\n\n# Feature development\ngit flow feature start user-authentication\necho \"auth code\" &gt; auth.js\ngit add auth.js &amp;&amp; git commit -m \"Add authentication\"\ngit flow feature finish user-authentication\n\n# Release management\ngit flow release start v1.0.0\necho \"1.0.0\" &gt; VERSION\ngit add VERSION &amp;&amp; git commit -m \"Version bump to 1.0.0\"\ngit flow release finish v1.0.0\n\n# Hotfix\ngit flow hotfix start critical-security-fix\necho \"security fix\" &gt; security.patch\ngit add security.patch &amp;&amp; git commit -m \"Security fix\"\ngit flow hotfix finish critical-security-fix\n</code></pre>"},{"location":"git_version_control/lab/#ulesanne-7-git-best-practices-enforcement","title":"\u00dclesanne 7: Git Best Practices Enforcement","text":"<pre><code># Conventional commits hook\ncat &gt; .git/hooks/commit-msg &lt;&lt; 'EOF'\n#!/bin/bash\ncommit_regex='^(feat|fix|docs|style|refactor|test|chore)(\\(.+\\))?: .{1,50}'\n\nif ! grep -qE \"$commit_regex\" \"$1\"; then\n    echo \"\u274c Invalid commit message format!\"\n    echo \"Use: type(scope): description\"\n    echo \"Types: feat, fix, docs, style, refactor, test, chore\"\n    echo \"Example: feat(auth): add user login functionality\"\n    exit 1\nfi\nEOF\n\nchmod +x .git/hooks/commit-msg\n\n# Test conventional commits\ngit commit -m \"feat(auth): add user authentication\"\ngit commit -m \"fix: resolve login bug\"\n</code></pre>"},{"location":"git_version_control/lab/#labi-esitamine","title":"Lab'i esitamine","text":"<p>Esitage j\u00e4rgmine GitHub repository link: - Repository nimi: <code>git-practice-lab</code> - Peab sisaldama k\u00f5iki harjutuste faile - Clean Git history n\u00e4htav - V\u00e4hemalt \u00fcks Pull Request tehtud ja merge'itud</p> <p>Hindamiskriteeriumid: - Repository \u00f5igesti seadistatud (20%) - K\u00f5ik harjutused tehtud (50%) - Clean Git history (20%) - Pull Request workflow (10%)</p>"},{"location":"git_version_control/reading_materials/","title":"Git Reading Materials (Homework Task 2)","text":"<p>Estimated Reading Time: 2- Due: Before next class session</p>"},{"location":"git_version_control/reading_materials/#required-reading-1","title":"Required Reading (1.)","text":""},{"location":"git_version_control/reading_materials/#git-history-and-evolution","title":"Git History and Evolution","text":"<p>Source: Git Documentation &amp; History</p> <p>Key Topics: - Linus Torvalds and the creation of Git - Why Git was needed for Linux kernel development - Git vs other version control systems (SVN, Mercurial) - The distributed nature of Git</p> <p>Reading Questions: - What problem was Git created to solve? - How does Git's distributed nature differ from centralized VCS? - Why did Linus Torvalds choose the name \"Git\"?</p>"},{"location":"git_version_control/reading_materials/#git-internals-deep-dive","title":"Git Internals Deep Dive","text":"<p>Source: Git Internals Documentation</p> <p>Key Topics: - Git's object model (blobs, trees, commits, tags) - How Git stores data (content-addressable storage) - The .git directory structure - Git's three-stage architecture (working directory, staging area, repository)</p> <p>Reading Questions: - What are the four main object types in Git? - How does Git achieve content-addressable storage? - What happens when you run <code>git add</code> vs <code>git commit</code>?</p>"},{"location":"git_version_control/reading_materials/#advanced-branching-strategies","title":"Advanced Branching Strategies","text":"<p>Source: Git Flow, GitHub Flow Documentation</p> <p>Key Topics: - Git Flow vs GitHub Flow - Feature branch workflow - Release management strategies - Hotfix procedures</p> <p>Reading Questions: - What are the main differences between Git Flow and GitHub Flow? - When would you use a hotfix branch? - How do you decide which branching strategy to use?</p>"},{"location":"git_version_control/reading_materials/#optional-reading-1-hour","title":"Optional Reading (1 hour)","text":""},{"location":"git_version_control/reading_materials/#git-best-practices","title":"Git Best Practices","text":"<p>Source: Industry Standards &amp; Git Documentation</p> <p>Key Topics: - Commit message conventions - Branch naming conventions - When to commit vs when to stash - Code review best practices</p>"},{"location":"git_version_control/reading_materials/#git-tools-and-ecosystem","title":"Git Tools and Ecosystem","text":"<p>Source: Git Tools Documentation</p> <p>Key Topics: - Git GUI tools (GitKraken, SourceTree, GitHub Desktop) - Git hosting platforms (GitHub, GitLab, Bitbucket) - Git hooks and automation - Git aliases and productivity tips</p>"},{"location":"git_version_control/reading_materials/#reference-materials-keep-handy","title":"Reference Materials (Keep Handy)","text":""},{"location":"git_version_control/reading_materials/#git-command-quick-reference","title":"Git Command Quick Reference","text":"<pre><code># Basic workflow\ngit status                    # Check repository status\ngit add &lt;file&gt;               # Stage changes\ngit commit -m \"message\"      # Commit staged changes\ngit push origin &lt;branch&gt;     # Push to remote\n\n# Branching\ngit branch &lt;name&gt;            # Create new branch\ngit checkout &lt;branch&gt;        # Switch to branch\ngit merge &lt;branch&gt;           # Merge branch into current\ngit rebase &lt;branch&gt;          # Rebase current on branch\n\n# History and inspection\ngit log --oneline           # Compact commit history\ngit diff                    # Show unstaged changes\ngit diff --staged           # Show staged changes\ngit show &lt;commit&gt;           # Show commit details\n</code></pre>"},{"location":"git_version_control/reading_materials/#common-git-scenarios","title":"Common Git Scenarios","text":"<pre><code># Undo last commit (keep changes)\ngit reset --soft HEAD~1\n\n# Undo last commit (discard changes)\ngit reset --hard HEAD~1\n\n# Create and switch to new branch\ngit checkout -b feature/new-feature\n\n# Stash changes temporarily\ngit stash\ngit stash pop\n\n# View remote repositories\ngit remote -v\n</code></pre>"},{"location":"git_version_control/reading_materials/#reading-reflection-assignment","title":"Reading Reflection Assignment","text":"<p>After completing the reading, please submit a brief reflection (200-300 words) covering:</p> <ol> <li>Key Insights: What was the most surprising or important thing you learned?</li> <li>Questions: What concepts are still unclear or need more explanation?</li> <li>Application: How do you think this knowledge will help in your automation work?</li> <li>Further Learning: What Git topics would you like to explore more?</li> </ol> <p>Submission Format: Add to your GitHub repository as <code>git_reading_reflection.md</code></p>"},{"location":"git_version_control/reading_materials/#additional-resources","title":"\ud83d\udd17 Additional Resources","text":"<ul> <li>Git Documentation</li> <li>GitHub Guides</li> <li>Git Flow Model</li> <li>GitHub Flow</li> </ul>"},{"location":"git_version_control/reading_materials/#notes-for-next-class","title":"Notes for Next Class","text":"<p>Come prepared with: - Questions from your reading - Any Git scenarios you'd like to practice - Ideas for your final Git project</p>"},{"location":"git_version_control/examples/git_apply_changes/","title":"Git Apply - Lihtne Juhend","text":"<p>Kestus:**utit **Eesm\u00e4rk: \u00d5ppida rakendama lihtsaid muudatusi patch failidest</p>"},{"location":"git_version_control/examples/git_apply_changes/#mis-on-patch","title":"Mis on Patch?","text":"<p>Patch on fail, mis sisaldab muudatuste kirjeldust. Seda saab kasutada, et rakendada muudatusi olemasolevatele failidele.</p> <p>Lihtne n\u00e4ide: - Sul on fail <code>app.py</code> - Keegi teine teeb muudatusi ja saadab sulle patch faili - Sa rakendad patch'i ja sinu fail uueneb automaatselt</p>"},{"location":"git_version_control/examples/git_apply_changes/#patchid-ja-versioonihaldus","title":"Patch'id ja Versioonihaldus","text":""},{"location":"git_version_control/examples/git_apply_changes/#miks-kasutame-patche","title":"Miks kasutame patch'e?","text":"<p>Versioonihalduse kontekstis: - Bug fix'id - kiire paranduste rakendamine - Code review'de j\u00e4rel - muudatuste tegemine vastavalt tagasisidele - Meeskonnat\u00f6\u00f6 - teiste arendajate muudatuste lisamine - Backup - muudatuste salvestamine enne commit'i</p>"},{"location":"git_version_control/examples/git_apply_changes/#patch-vs-git","title":"Patch vs Git","text":"Meetod Eelised Puudused Patch fail Lihtne, ei vaja Git'i Ei salvesta ajalugu Git commit T\u00e4ielik ajalugu N\u00f5uab Git'i <p>Millal kasutada patch'e: - Kiire paranduste tegemine - Kui pole Git'i kasutuses - Muudatuste jagamine e-mailiga - Backup enne suuri muudatusi</p>"},{"location":"git_version_control/examples/git_apply_changes/#kuidas-rakendada-patchi","title":"Kuidas Rakendada Patch'i?","text":""},{"location":"git_version_control/examples/git_apply_changes/#kaks-lihtsat-viisi","title":"Kaks Lihtsat Viisi","text":""},{"location":"git_version_control/examples/git_apply_changes/#kasuta-patch-kasku-lihtsam","title":"Kasuta <code>patch</code> k\u00e4sku (lihtsam)","text":"<pre><code>patch failinimi.py &lt; muudatused.diff\n</code></pre>"},{"location":"git_version_control/examples/git_apply_changes/#kasuta-git-apply-kasku-git-projektides","title":"Kasuta <code>git apply</code> k\u00e4sku (Git projektides)","text":"<pre><code>git apply muudatused.patch\n</code></pre>"},{"location":"git_version_control/examples/git_apply_changes/#praktiline-naide","title":"Praktiline N\u00e4ide","text":""},{"location":"git_version_control/examples/git_apply_changes/#ulesanne-11-sul-on-fail-cpu_usagepy","title":"\u00dclesanne 1.1: Sul on fail <code>cpu_usage.py</code>","text":"<pre><code>#!/usr/bin/env python3\n\nimport psutil\n\ndef check_cpu_usage(percent):\n    usage = psutil.cpu_percent()\n    return usage &lt; percent\n\nif not check_cpu_usage(75):\n    print(\"ERROR! CPU is overloaded\")\nelse:\n    print(\"Everything ok\")\n</code></pre>"},{"location":"git_version_control/examples/git_apply_changes/#ulesanne-21-saad-patch-faili-cpu_usagediff","title":"\u00dclesanne 2.1: Saad patch faili <code>cpu_usage.diff</code>","text":"<pre><code>--- cpu_usage.py    2019-06-23 08:16:04.666457429 -0700\n+++ cpu_usage_fixed.py  2019-06-23 08:15:37.534370071 -0700\n@@ -2,7 +2,8 @@\n import psutil\n\n def check_cpu_usage(percent):\n-    usage = psutil.cpu_percent()\n+    usage = psutil.cpu_percent(1)\n+    print(\"DEBUG: usage: {}\".format(usage))\n     return usage &lt; percent\n\n if not check_cpu_usage(75):\n</code></pre>"},{"location":"git_version_control/examples/git_apply_changes/#ulesanne-31-rakenda-patch","title":"\u00dclesanne 3.1: Rakenda patch","text":"<pre><code>patch cpu_usage.py &lt; cpu_usage.diff\n</code></pre> <p>Vastus: <code>patching file cpu_usage.py</code></p>"},{"location":"git_version_control/examples/git_apply_changes/#ulesanne-41-kontrolli-tulemust","title":"\u00dclesanne 4.1: Kontrolli tulemust","text":"<pre><code>cat cpu_usage.py\n</code></pre> <p>Tulemus: <pre><code>#!/usr/bin/env python3\n\nimport psutil\n\ndef check_cpu_usage(percent):\n    usage = psutil.cpu_percent(1)\n    print(\"DEBUG: usage: {}\".format(usage))\n    return usage &lt; percent\n\nif not check_cpu_usage(75):\n    print(\"ERROR! CPU is overloaded\")\nelse:\n    print(\"Everything ok\")\n</code></pre></p> <p>Mida juhtus? - Lisati parameeter <code>1</code> funktsiooni sisse - Lisati debug v\u00e4ljund - Fail uuenes automaatselt!</p>"},{"location":"git_version_control/examples/git_apply_changes/#lihtne-harjutus","title":"Lihtne Harjutus","text":""},{"location":"git_version_control/examples/git_apply_changes/#proovi-ise","title":"Proovi Ise!","text":"<p>Samm 1: Loo fail <code>hello.py</code> <pre><code>def greet(name):\n    print(\"Hello, \" + name)\n</code></pre></p> <p>Samm 2: Loo patch fail <code>hello_fix.patch</code> <pre><code>--- hello.py    2023-12-01 10:00:00 +0000\n+++ hello_fixed.py  2023-12-01 10:01:00 +0000\n@@ -1,2 +1,3 @@\n def greet(name):\n-    print(\"Hello, \" + name)\n+    print(\"Hello, \" + name + \"!\")\n+    print(\"How are you?\")\n</code></pre></p> <p>Samm 3: Rakenda patch <pre><code>patch hello.py &lt; hello_fix.patch\n</code></pre></p> <p>Samm 4: Kontrolli tulemust <pre><code>cat hello.py\n</code></pre></p>"},{"location":"git_version_control/examples/git_apply_changes/#kasulikud-kasud","title":"Kasulikud K\u00e4sud","text":"<pre><code># Lihtne patch rakendamine\npatch fail.py &lt; muudatused.diff\n\n# Git projektides\ngit apply muudatused.patch\n\n# Kontrolli patch'i enne rakendamist\ngit apply --check muudatused.patch\n</code></pre>"},{"location":"git_version_control/examples/git_apply_changes/#kokkuvote","title":"Kokkuv\u00f5te","text":""},{"location":"git_version_control/examples/git_apply_changes/#mida-oppisid","title":"Mida \u00f5ppisid?","text":"<ul> <li>Mis on patch fail</li> <li>Kuidas rakendada lihtsaid muudatusi</li> <li>Kaks viisi patch'i rakendamiseks</li> <li>Praktiline n\u00e4ide CPU kasutuse kohta</li> </ul>"},{"location":"git_version_control/examples/git_apply_changes/#jargmised-sammud","title":"J\u00e4rgmised Sammud","text":"<p>Kui oled valmis keerukamate asjade jaoks: - Lugeda diff v\u00e4ljundit (vaata <code>git_diff_examples.md</code>) - Lahendada konflikte - Kasutada git am ja muid t\u00e4psemaid t\u00f6\u00f6riistu</p>"},{"location":"git_version_control/examples/git_apply_changes/#versioonihalduse-jargmised-sammud","title":"Versioonihalduse J\u00e4rgmised Sammud","text":"<p>P\u00e4rast patch'ide \u00f5ppimist: - Git commit'id - muudatuste salvestamine ajalukku - Git branch'id - paralleelsete arendusliinide haldamine - Git merge - harude \u00fchendamine - Pull Request'id - meeskonnat\u00f6\u00f6 GitHub'is</p> <p>Patch'i rakendamine on lihtne ja kasulik oskus versioonihalduses!</p> <p>Materjal p\u00f5hineb Git'i ametlikul dokumentatsioonil</p>"},{"location":"git_version_control/examples/git_diff_examples/","title":"Git Diff ja Diff V\u00e4ljundi Lugemine","text":"<p>Kestus:**utit **Eesm\u00e4rk: \u00d5ppida lugema diff v\u00e4ljundit ja m\u00f5istma, mida iga s\u00fcmbol t\u00e4hendab</p>"},{"location":"git_version_control/examples/git_diff_examples/#sissejuhatus-diffi-lugemisse","title":"Sissejuhatus Diff'i Lugemisse","text":"<p>Diff on t\u00f6\u00f6riist, mis n\u00e4itab failide vahelisi erinevusi. Git kasutab sama formaati, mis Unix/Linux <code>diff</code> k\u00e4sk.</p>"},{"location":"git_version_control/examples/git_diff_examples/#miks-on-oluline-diffi-lugeda","title":"Miks on oluline diff'i lugeda?","text":"<ul> <li>Code Review - m\u00f5ista, mida teised arendajad muutsid</li> <li>Debugging - leida, mis muutus ja tekitas vea</li> <li>Version Control - j\u00e4lgida koodi ajalugu</li> <li>Merge Conflicts - lahendada konflikte</li> </ul>"},{"location":"git_version_control/examples/git_diff_examples/#diff-valjundi-formaat","title":"Diff V\u00e4ljundi Formaat","text":""},{"location":"git_version_control/examples/git_diff_examples/#pohiline-struktuur","title":"P\u00f5hiline Struktuur","text":"<pre><code>@@ -algusrida,read +algusrida,read @@\n- eemaldatud rida\n+ lisatud rida\n  muutmata rida\n</code></pre>"},{"location":"git_version_control/examples/git_diff_examples/#sumbolite-tahendused","title":"S\u00fcmbolite T\u00e4hendused","text":"S\u00fcmbol T\u00e4hendus N\u00e4ide <code>-</code> Eemaldatud rida <code>- vana_kood = True</code> <code>+</code> Lisatud rida <code>+ uus_kood = False</code> <code></code> (t\u00fchi) Muutmata rida <code>print(\"tere\")</code> <code>@@</code> Kontekst marker <code>@@ -5,3 +5,4 @@</code>"},{"location":"git_version_control/examples/git_diff_examples/#praktilised-naited","title":"Praktilised N\u00e4ited","text":""},{"location":"git_version_control/examples/git_diff_examples/#naide-1-lihtne-rida-muutmine","title":"N\u00e4ide 1: Lihtne Rida Muutmine","text":"<p>Fail 1 (rearrange1.py): <pre><code>#!/usr/bin/env python3\nimport re\n\ndef rearrange_name(name):\n    result = re.search(r\"^([\\w .]*), ([\\w .]*)$\", name)\n    if result == None:\n        return name\n    return \"{} {}\".format(result[2], result[1])\n</code></pre></p> <p>Fail 2 (rearrange2.py): <pre><code>#!/usr/bin/env python3\nimport re\n\ndef rearrange_name(name):\n    result = re.search(r\"^([\\w .-]*), ([\\w .-]*)$\", name)\n    if result == None:\n        return name\n    return \"{} {}\".format(result[2], result[1])\n</code></pre></p> <p>Diff v\u00e4ljund: <pre><code>$ diff rearrange1.py rearrange2.py\n</code></pre></p> <pre><code>6c6\n&lt;     result = re.search(r\"^([\\w .]*), ([\\w .]*)$\", name)\n---\n&gt;     result = re.search(r\"^([\\w .-]*), ([\\w .-]*)$\", name)\n</code></pre> <p>Selgitus: - <code>6c6</code> = rida 6 esimeses failis muudeti rida 6 teises failis - <code>&lt;</code> = esimese faili sisu (eemaldatud) - <code>---</code> = eraldaja - <code>&gt;</code> = teise faili sisu (lisatud) - Muutus: lisati <code>-</code> s\u00fcmbol regex'i <code>[\\w .-]</code> sisse</p>"},{"location":"git_version_control/examples/git_diff_examples/#naide-2-mitme-rea-muutmine","title":"N\u00e4ide 2: Mitme Rea Muutmine","text":"<p>Fail 1 (validations1.py): <pre><code>def validate_user(username,len):\n    assert type(username) == str, \"username must be a string\"\n    iflen &lt; 1:\n        raise ValueError(\"minlen must be at least 1\")\n\n    if len(username) &lt;len:\n        return False\n    if not username.isalnum():\n        return False\n    return True\n</code></pre></p> <p>Fail 2 (validations2.py): <pre><code>def validate_user(username,len):\n    if type(username) != str:\n        raise TypeError(\"username must be a string\")\n    iflen &lt; 1:\n        raise ValueError(\"minlen must be at least 1\")\n\n    if len(username) &lt;len:\n        return False\n    if not username.isalnum():\n        return False\n    # Usernames can't begin with a number\n    if username[0].isnumeric():\n        return False\n    return True\n</code></pre></p> <p>Diff v\u00e4ljund: <pre><code>$ diff validations1.py validations2.py\n</code></pre></p> <pre><code>5c5,6\n&lt;   assert (type(username) == str), \"username must be a string\"\n--\n&gt;   if type(username != str: \n&gt;       raise TypeError(\"username must be a string\"\n\n11a13,15\n&gt;       return False\n&gt;   # Usernames can't begin with a number\n&gt;   if username[0].isnumeric():\n</code></pre> <p>Selgitus: - <code>5c5,6</code> = rida 5 muudeti ridadeks 5-6 - <code>11a13,15</code> = p\u00e4rast rida 11 lisati read 13-15 - <code>assert</code> asendati <code>if</code> kontrolliga - Lisati uus kontroll kasutajanime alguse kohta</p>"},{"location":"git_version_control/examples/git_diff_examples/#naide-3-unified-diff-formaat-u","title":"N\u00e4ide 3: Unified Diff Formaat (-u)","text":"<p>Sama diff unified formaadis: <pre><code>$ diff -u validations1.py validations2.py\n</code></pre></p> <pre><code>--- validations1.py 2019-06-06 14:28:49.639209499 +0200\n+++ validations2.py 2019-06-06 14:30:48.019360890 +0200\n@@ -2,7 +2,8 @@\n\n def validate_user(username,len):\n-    assert type(username) == str, \"username must be a string\"\n+    if type(username) != str:\n+        raise TypeError(\"username must be a string\")\n     iflen &lt; 1:\n         raise ValueError(\"minlen must be at least 1\")\n\n@@ -10,5 +11,8 @@\n         return False\n     if not username.isalnum():\n         return False\n+    # Usernames can't begin with a number\n+    if username[0].isnumeric():\n+        return False\n     return True\n</code></pre> <p>Selgitus: - <code>---</code> ja <code>+++</code> = failide nimed ja ajam\u00e4rgid - <code>@@ -2,7 +2,8 @@</code> = kontekst: 7 rida esimesest failist, 8 rida teisest - <code>-</code> ja <code>+</code> = eemaldatud ja lisatud read - T\u00fchjad read = kontekst (muutmata)</p>"},{"location":"git_version_control/examples/git_diff_examples/#git-diff-naited","title":"Git Diff N\u00e4ited","text":""},{"location":"git_version_control/examples/git_diff_examples/#git-diff-tookausta-vs-staging","title":"Git Diff T\u00f6\u00f6kausta vs Staging","text":"<pre><code>$ git diff\n</code></pre> <pre><code>diff --git a/app.py b/app.py\nindex a1b2c3d..e4f5g6h 100644\n--- a/app.py\n+++ b/app.py\n@@ -10,7 +10,7 @@ def main():\n     print(\"Tere maailm!\")\n\n     # Lisa uus funktsioon\n-    old_function()\n+    new_function()\n\n     return 0\n</code></pre> <p>Selgitus: - <code>diff --git</code> = Git'i diff formaat - <code>index a1b2c3d..e4f5g6h</code> = Git'i sisemised hash'id - <code>100644</code> = faili \u00f5igused - <code>a/app.py</code> ja <code>b/app.py</code> = v\u00f5rdlusfailid</p>"},{"location":"git_version_control/examples/git_diff_examples/#git-diff-staging-vs-commit","title":"Git Diff Staging vs Commit","text":"<pre><code>$ git diff --staged\n</code></pre> <pre><code>diff --git a/config.py b/config.py\nindex f7g8h9i..j1k2l3m 100644\n--- a/config.py\n+++ b/config.py\n@@ -5,6 +5,7 @@\n DATABASE_URL = \"postgresql://localhost/mydb\"\n DEBUG = True\n LOG_LEVEL = \"INFO\"\n+API_KEY = \"secret123\"\n\n # Server settings\n PORT = 8000\n</code></pre> <p>Selgitus: - <code>--staged</code> = v\u00f5rdleb staging area'ga viimase commit'iga - Lisati uus rida <code>API_KEY = \"secret123\"</code></p>"},{"location":"git_version_control/examples/git_diff_examples/#git-diff-kahe-commiti-vahel","title":"Git Diff Kahe Commit'i Vahel","text":"<pre><code>$ git diff HEAD~1 HEAD\n</code></pre> <pre><code>diff --git a/main.py b/main.py\nindex x1y2z3a..b4c5d6e 100644\n--- a/main.py\n+++ b/main.py\n@@ -15,8 +15,9 @@ def process_data(data):\n     for item in data:\n         if item.is_valid():\n             processed.append(item)\n-        else:\n-            print(f\"Invalid item: {item}\")\n+        elif item.has_warning():\n+            print(f\"Warning for item: {item}\")\n+            processed.append(item)\n     return processed\n</code></pre> <p>Selgitus: - <code>HEAD~1</code> = eelmine commit - <code>HEAD</code> = praegune commit - Muudeti <code>else</code> tingimus <code>elif</code> tingimuseks</p>"},{"location":"git_version_control/examples/git_diff_examples/#diffi-lugemise-sammud","title":"Diff'i Lugemise Sammud","text":""},{"location":"git_version_control/examples/git_diff_examples/#vaata-konteksti","title":"Vaata Konteksti","text":"<p><pre><code>@@ -5,3 +5,4 @@\n</code></pre> - Mitu rida on muudetud? - Millised read on kontekstis?</p>"},{"location":"git_version_control/examples/git_diff_examples/#tuvasta-muudatuste-tuubid","title":"Tuvasta Muudatuste T\u00fc\u00fcbid","text":"<ul> <li>Eemaldamine (<code>-</code>): vana kood</li> <li>Lisamine (<code>+</code>): uus kood</li> <li>Kontekst (t\u00fchi): muutmata read</li> </ul>"},{"location":"git_version_control/examples/git_diff_examples/#moista-loogikat","title":"M\u00f5ista Loogikat","text":"<ul> <li>Miks tehti muudatus?</li> <li>Kas on breaking change?</li> <li>Kas on bug fix v\u00f5i feature?</li> </ul>"},{"location":"git_version_control/examples/git_diff_examples/#kontrolli-jargnevust","title":"Kontrolli J\u00e4rgnevust","text":"<ul> <li>Kas k\u00f5ik muudatused on seotud?</li> <li>Kas on puuduvaid muudatusi?</li> </ul>"},{"location":"git_version_control/examples/git_diff_examples/#harjutused","title":"Harjutused","text":""},{"location":"git_version_control/examples/git_diff_examples/#harjutus-1-loe-diffi","title":"Harjutus 1: Loe Diff'i","text":"<pre><code>$ git diff\n</code></pre> <pre><code>diff --git a/utils.py b/utils.py\nindex a1b2c3d..e4f5g6h 100644\n--- a/utils.py\n+++ b/utils.py\n@@ -20,5 +20,6 @@ def format_name(first, last):\n     if not first or not last:\n         return \"Unknown\"\n-    return f\"{first} {last}\"\n+    return f\"{first.capitalize()} {last.capitalize()}\"\n</code></pre> <p>K\u00fcsimused: 1. Mida muudeti? 2. Miks tehti muudatus? 3. Kas on breaking change?</p>"},{"location":"git_version_control/examples/git_diff_examples/#harjutus-2-analuusi-suuremat-diffi","title":"Harjutus 2: Anal\u00fc\u00fcsi Suuremat Diff'i","text":"<pre><code>$ git diff HEAD~2\n</code></pre> <pre><code>diff --git a/app.py b/app.py\nindex x1y2z3a..b4c5d6e 100644\n--- a/app.py\n+++ b/app.py\n@@ -10,12 +10,15 @@ def main():\n     config = load_config()\n\n-    if config.debug:\n-        print(\"Debug mode enabled\")\n-    \n     try:\n         app = create_app(config)\n+        if config.debug:\n+            print(\"Debug mode enabled\")\n+            app.debug = True\n+        \n         app.run(host='0.0.0.0', port=config.port)\n+    except Exception as e:\n+        print(f\"Error starting app: {e}\")\n+        return 1\n\n     return 0\n</code></pre> <p>K\u00fcsimused: 1. Mitu muudatust tehti? 2. Millised on peamised muudatused? 3. Kas on lisatud error handling?</p>"},{"location":"git_version_control/examples/git_diff_examples/#kasulikud-diff-kasud","title":"Kasulikud Diff K\u00e4sud","text":""},{"location":"git_version_control/examples/git_diff_examples/#git-diff-variandid","title":"Git Diff Variandid","text":"<pre><code># T\u00f6\u00f6kausta vs staging\ngit diff\n\n# Staging vs viimane commit\ngit diff --staged\n\n# T\u00f6\u00f6kausta vs viimane commit\ngit diff HEAD\n\n# Kahe commit'i vahel\ngit diff commit1..commit2\n\n# Kahe branch'i vahel\ngit diff main..feature\n\n# Konkreetse faili muudatused\ngit diff -- app.py\n\n# Word-level diff (s\u00f5nade tasemel)\ngit diff --word-diff\n\n# Side-by-side diff\ngit diff --side-by-side\n</code></pre>"},{"location":"git_version_control/examples/git_diff_examples/#regulaar-diff-kasud","title":"Regulaar Diff K\u00e4sud","text":"<pre><code># Unified diff\ndiff -u fail1.txt fail2.txt\n\n# Context diff (3 rida konteksti)\ndiff -c fail1.txt fail2.txt\n\n# Ignore whitespace\ndiff -w fail1.txt fail2.txt\n\n# Ignore case\ndiff -i fail1.txt fail2.txt\n\n# Recursive diff kaustadele\ndiff -r kaust1/ kaust2/\n</code></pre>"},{"location":"git_version_control/examples/git_diff_examples/#kokkuvote","title":"Kokkuv\u00f5te","text":""},{"location":"git_version_control/examples/git_diff_examples/#olulised-punktid","title":"Olulised Punktid","text":"<ol> <li>Diff formaat on standardne Unix/Linux maailmas</li> <li>Git diff kasutab sama formaati</li> <li>S\u00fcmbolid <code>-</code>, <code>+</code>, <code></code> on v\u00f5tmed lugemiseks</li> <li>Kontekst aitab m\u00f5ista muudatuste t\u00e4hendust</li> <li>Unified diff (-u) on k\u00f5ige loetavam</li> </ol>"},{"location":"git_version_control/examples/git_diff_examples/#parimad-praktikad","title":"Parimad Praktikad","text":"<ul> <li>Alusta kontekstist - vaata @@ rida</li> <li>Tuvasta muudatuste t\u00fc\u00fcbid - lisamine/eemaldamine</li> <li>M\u00f5ista loogikat - miks tehti muudatus</li> <li>Kontrolli j\u00e4rgnevust - kas k\u00f5ik on seotud</li> <li>Kasuta graafilisi t\u00f6\u00f6riistu - vajaduse korral</li> </ul>"},{"location":"git_version_control/examples/git_diff_examples/#jargmised-sammud","title":"J\u00e4rgmised Sammud","text":"<p>P\u00e4rast seda materjali peaksite oskama: - Lugeda diff v\u00e4ljundit - M\u00f5ista muudatuste t\u00e4hendust - Anal\u00fc\u00fcsida koodi muudatusi - Kasutada erinevaid diff k\u00e4ske - Teha code review'e</p> <p>Harjutage diff'i lugemist iga p\u00e4ev - see on oluline oskus arendaja karj\u00e4\u00e4ris!</p> <p>Materjal p\u00f5hineb Unix diff standarditel ja Git'i dokumentatsioonil</p>"},{"location":"git_version_control/reference/git_commands_reference/","title":"Git K\u00e4sud - Viide","text":""},{"location":"git_version_control/reference/git_commands_reference/#pohilised-kasud","title":"P\u00f5hilised K\u00e4sud","text":""},{"location":"git_version_control/reference/git_commands_reference/#seadistamine","title":"Seadistamine","text":"<pre><code>git config --global user.name \"Teie Nimi\"\ngit config --global user.email \"teie.email@example.com\"\ngit config --list\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#repository-loomine","title":"Repository Loomine","text":"<pre><code>git init                    # Uue repo loomine\ngit clone URL               # Olemasoleva repo kopeerimine\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#pohiline-toovoog","title":"P\u00f5hiline T\u00f6\u00f6voog","text":"<pre><code>git status                  # Vaata olekut\ngit add .                   # Lisa k\u00f5ik muudatused\ngit commit -m \"S\u00f5num\"       # Salvesta muudatused\ngit push origin main        # Saada muudatused\ngit pull origin main        # V\u00f5ta uusimad muudatused\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#info-ja-ajalugu","title":"Info ja Ajalugu","text":""},{"location":"git_version_control/reference/git_commands_reference/#muudatuste-vaatamine","title":"Muudatuste Vaatamine","text":"<pre><code>git diff                    # T\u00f6\u00f6kausta vs staging\ngit diff --staged           # Staging vs viimane commit\ngit diff HEAD~1             # Viimase commit'iga v\u00f5rdlus\ngit show                    # Viimane commit\ngit show commit-hash        # Konkreetne commit\ngit show --stat             # Statistika koos\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#ajaloo-vaatamine","title":"Ajaloo Vaatamine","text":"<pre><code>git log --oneline          # Kompaktne vaade\ngit log --graph            # Visuaalne harudemudel  \ngit log --author=\"Nimi\"    # Konkreetse autori commit'id\ngit blame fail.txt         # Kes millise rea muutis\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#harude-branches-haldamine","title":"\ud83c\udf3f Harude (Branches) Haldamine","text":""},{"location":"git_version_control/reference/git_commands_reference/#harude-loomine-ja-vahetamine","title":"Harude Loomine ja Vahetamine","text":"<pre><code>git branch                  # Vaata harusid\ngit branch -v               # Koos viimase commit'iga\ngit branch -a               # K\u00f5ik harud (ka remote)\ngit branch funktsioon-login # Loo uus haru\ngit checkout -b funktsioon-login  # Loo ja vaheta haru\ngit checkout main          # Vaheta main harule\ngit switch -c funktsioon-login  # Uuem s\u00fcntaks\ngit switch main            # Uuem s\u00fcntaks\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#harude-uhendamine","title":"Harude \u00dchendamine","text":"<pre><code>git merge branch-nimi       # \u00dchenda haru\ngit merge --no-ff branch-nimi  # Merge ilma fast-forward'ta\ngit merge --abort          # Katkesta merge\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#rebase","title":"Rebase","text":"<pre><code>git rebase origin/main      # Rebase kohalikud commit'id\ngit rebase -i origin/main   # Interaktiivne rebase\ngit rebase -i HEAD~3        # Viimased 3 commit'i\ngit rebase --abort          # Katkesta rebase\ngit rebase --continue       # J\u00e4tka p\u00e4rast konfliktide lahendamist\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#kaugrepositooriumid-remote","title":"\ud83c\udf10 Kaugrepositooriumid (Remote)","text":""},{"location":"git_version_control/reference/git_commands_reference/#remoteide-haldamine","title":"Remote'ide Haldamine","text":"<pre><code>git remote -v              # Vaata remote'ide URL'e\ngit remote show origin     # Remote'i info\ngit remote add origin URL  # Lisa remote\ngit remote rename origin upstream  # Nimetage remote \u00fcmber\ngit remote remove old-remote      # Eemalda remote\ngit remote set-url origin uus-url # Muuda URL'i\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#fetch-ja-pull","title":"Fetch ja Pull","text":"<pre><code>git fetch origin           # Too info serverist\ngit fetch origin main      # Konkreetse haru info\ngit fetch --all            # K\u00f5igi remote'ide info\ngit pull origin main       # Fetch + merge\ngit pull --rebase origin main  # Rebase pull\ngit pull --ff-only origin main # Ainult fast-forward\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#push","title":"Push","text":"<pre><code>git push origin main       # Saada muudatused\ngit push -u origin main    # Esimene kord (tracking)\ngit push origin funktsioon-login  # Uue haru saatmine\ngit push origin --delete funktsioon-login  # Haru kustutamine\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#failide-haldamine","title":"Failide Haldamine","text":""},{"location":"git_version_control/reference/git_commands_reference/#failide-lisamine-ja-eemaldamine","title":"Failide Lisamine ja Eemaldamine","text":"<pre><code>git add failinimi.txt      # Lisa konkreetne fail\ngit add .                  # Lisa k\u00f5ik muudatused\ngit rm failinimi.txt       # Kustuta fail Git'ist ja s\u00fcsteemist\ngit rm --cached failinimi.txt  # Kustuta ainult Git'ist\ngit mv vana.txt uus.txt    # Nimetage fail \u00fcmber\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#muudatuste-tagasivotmine","title":"Muudatuste Tagasiv\u00f5tmine","text":"<pre><code>git checkout -- failinimi.txt  # Taasta fail viimase commit'i olekusse\ngit checkout -- .              # Taasta k\u00f5ik failid\ngit reset HEAD failinimi.txt   # Eemalda fail staging'ust\ngit reset HEAD                 # Eemalda k\u00f5ik failid staging'ust\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#commitide-haldamine","title":"Commit'ide Haldamine","text":""},{"location":"git_version_control/reference/git_commands_reference/#commitide-muutmine","title":"Commit'ide Muutmine","text":"<pre><code>git commit --amend -m \"Uus s\u00f5num\"  # Muuda viimast commit'i\ngit commit --amend --no-edit       # Lisa faile viimase commit'i\ngit commit -am \"S\u00f5num\"             # Lisa ja commit k\u00f5ik muudetud failid\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#commitide-tagasivotmine","title":"Commit'ide Tagasiv\u00f5tmine","text":"<pre><code>git revert commit-hash      # Turvaline tagasiv\u00f5tmine (loob uue commit'i)\ngit revert commit1..commit2 # Mitme commit'i tagasiv\u00f5tmine\ngit reset --soft HEAD~1     # J\u00e4tab muudatused staging'u\ngit reset --mixed HEAD~1    # J\u00e4tab muudatused t\u00f6\u00f6kausta\ngit reset --hard HEAD~1     # Kustutab muudatused t\u00e4ielikult\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#commitide-identifitseerimine","title":"Commit'ide Identifitseerimine","text":"<pre><code>git show HEAD               # Viimane commit\ngit show HEAD~1             # Eelmine commit\ngit show HEAD~2             # Kaks commit'i tagasi\ngit show branch-name^       # Eelmine commit\ngit show branch-name~3      # Kolm commit'i tagasi\ngit show a1b2c3d            # L\u00fchike hash\ngit show v1.0.0             # Tag\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#ajutine-salvestamine-stash","title":"\ud83d\udce6 Ajutine Salvestamine (Stash)","text":"<pre><code>git stash                   # Salvesta muudatused ajutiselt\ngit stash pop              # Taasta salvestatud muudatused\ngit stash list             # Vaata stash'e\ngit stash apply stash@{0}  # Taasta konkreetne stash\ngit stash drop stash@{0}   # Kustuta stash\ngit stash clear            # Kustuta k\u00f5ik stash'ed\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#otsimine-ja-filtreerimine","title":"Otsimine ja Filtreerimine","text":"<pre><code>git log --grep=\"s\u00f5na\"      # Otsi commit'ides\ngit log -S \"s\u00f5na\"          # Otsi muudatuste sisus\ngit log --since=\"2023-01-01\"  # Filtreeri kuup\u00e4eva j\u00e4rgi\ngit log --until=\"2023-12-31\"  # Filtreeri kuup\u00e4eva j\u00e4rgi\ngit log --author=\"Nimi\"    # Filtreeri autori j\u00e4rgi\ngit log --oneline -10      # Viimased 10 commit'i\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#tagid","title":"\ud83c\udff7 Tag'id","text":"<pre><code>git tag v1.0.0             # Loo tag\ngit tag -a v1.0.0 -m \"S\u00f5num\"  # Annotated tag\ngit tag -l                 # Vaata tag'e\ngit show v1.0.0            # Vaata tag'i info\ngit push origin v1.0.0     # Saada tag\ngit push origin --tags     # Saada k\u00f5ik tag'id\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#konfliktide-lahendamine","title":"Konfliktide Lahendamine","text":"<pre><code>git status                 # N\u00e4itab konfliktilisi faile\ngit diff                   # N\u00e4itab konfliktide detaile\ngit mergetool              # Avab graafilise lahendaja\ngit add konfliktne-fail.txt # P\u00e4rast konfliktide lahendamist\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#aliasid-ja-konfiguratsioon","title":"Alias'id ja Konfiguratsioon","text":""},{"location":"git_version_control/reference/git_commands_reference/#kasulikud-aliasid","title":"Kasulikud Alias'id","text":"<pre><code># Lisa need git config'u\ngit config --global alias.st status\ngit config --global alias.co checkout\ngit config --global alias.br branch\ngit config --global alias.ci commit\ngit config --global alias.unstage 'reset HEAD --'\ngit config --global alias.last 'log -1 HEAD'\ngit config --global alias.visual '!gitk'\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#kasutamine","title":"Kasutamine","text":"<pre><code>git st                     # git status\ngit co main               # git checkout main\ngit br                    # git branch\ngit ci -m \"s\u00f5num\"        # git commit -m \"s\u00f5num\"\ngit unstage fail.txt     # git reset HEAD -- fail.txt\n</code></pre>"},{"location":"git_version_control/reference/git_commands_reference/#hoiatused-ja-nouanded","title":"\ud83d\udea8 Hoiatused ja N\u00f5uanded","text":""},{"location":"git_version_control/reference/git_commands_reference/#ara-tee-kunagi","title":"\u00c4ra tee kunagi:","text":"<ul> <li><code>git push --force</code> shared branch'ides</li> <li><code>git reset --hard</code> salvestamata muudatustega</li> <li><code>git clean -fd</code> ilma kontrollimata</li> <li>Commit'i saladusi (API keys, paroolid)</li> </ul>"},{"location":"git_version_control/reference/git_commands_reference/#kasuta-alati","title":"Kasuta alati:","text":"<ul> <li><code>git push --force-with-lease</code> force push'i asemel</li> <li><code>git status</code> enne keerulisi operatsioone</li> <li>Selgeid commit s\u00f5numeid</li> <li><code>.gitignore</code> faili</li> </ul>"},{"location":"git_version_control/reference/git_commands_reference/#lisaressursid","title":"Lisaressursid","text":"<ul> <li>Git'i ametlik dokumentatsioon</li> <li>Git'i visuaalne \u00f5petus</li> <li>Git'i cheatsheet</li> <li>Git'i branching model</li> </ul> <p>See viide sisaldab k\u00f5ige populaarsemaid ja kasulikumaid Git k\u00e4ske. T\u00e4psem info leiad Git'i ametlikust dokumentatsioonist.</p>"},{"location":"git_version_control/reference/vscode/","title":"VS Code Seadistamise Juhend","text":""},{"location":"git_version_control/reference/vscode/#mis-on-ide-integrated-development-environment","title":"Mis on IDE (Integrated Development Environment)?","text":"<p>IDE on integreeritud arenduskeskkond - \u00fcks programm, mis sisaldab k\u00f5iki arendamiseks vajalikke t\u00f6\u00f6riistu:</p>"},{"location":"git_version_control/reference/vscode/#traditsiooniline-vs-ide-toovoog","title":"Traditsiooniline vs IDE T\u00f6\u00f6voog","text":"Traditsioooniline IDE (VS Code) Notepad koodi kirjutamiseks Code Editor - syntax highlighting Command line kompileerimiseks Integrated Terminal - k\u00e4sud sama aknas Eraldi FTP klient failide \u00fcleslaadimiseks Remote Extensions - otse\u00fchendus Git bash versioonihalduseks Source Control - Git integreeritud Veebilehtisja vigade otsimiseks Debugging - breakpointid, watches"},{"location":"git_version_control/reference/vscode/#ide-vs-code-editor-vs-text-editor","title":"IDE vs Code Editor vs Text Editor","text":"T\u00fc\u00fcp N\u00e4ited Eelised Puudused Text Editor Notepad, gedit Kiire, lihtne Pole programmeerimisfunktsioone Code Editor VS Code, Sublime Kerge, laiendatav Vajab seadistamist IDE IntelliJ, Eclipse K\u00f5ik kaasas Raske, aeglane <p>VS Code on h\u00fcbriid - Code Editor, mida saab laienduste abil IDE-ks muuta!</p>"},{"location":"git_version_control/reference/vscode/#miks-vs-code-devops-ile","title":"Miks VS Code DevOps-ile?","text":"<ul> <li>Kerge ja kiire - k\u00e4ivitub sekundiga</li> <li>Laiendatav - lisa ainult see, mida vajad</li> <li>Multi-language - Python, YAML, JSON, Bash, Dockerfile</li> <li>Remote-first - loodud serveritega t\u00f6\u00f6tamiseks</li> <li>Git-centered - versioonihaldus on s\u00fcvuti integreeritud</li> </ul>"},{"location":"git_version_control/reference/vscode/#vs-code-installimine","title":"VS Code Installimine","text":""},{"location":"git_version_control/reference/vscode/#windows","title":"Windows","text":"<p><pre><code>winget install Microsoft.VisualStudioCode\n</code></pre> V\u00f5i lae alla: https://code.visualstudio.com</p>"},{"location":"git_version_control/reference/vscode/#macos","title":"macOS","text":"<pre><code>brew install --cask visual-studio-code\n</code></pre>"},{"location":"git_version_control/reference/vscode/#linux-ubuntudebian","title":"Linux (Ubuntu/Debian)","text":"<pre><code>sudo snap install code --classic\n</code></pre>"},{"location":"git_version_control/reference/vscode/#vajalikud-laiendused","title":"Vajalikud Laiendused","text":""},{"location":"git_version_control/reference/vscode/#laienduste-allikad","title":"Laienduste Allikad","text":"<ul> <li>VS Code sisene: <code>Ctrl+Shift+X</code> - p\u00f5hiline viis</li> <li>VS Marketplace: https://marketplace.visualstudio.com/ - brauseris sirvimine</li> <li>Teemade galerii: https://vscodethemes.com/ - visuaalsete teemade sirvimine</li> <li>Command line: <code>code --install-extension publisher.name</code></li> </ul>"},{"location":"git_version_control/reference/vscode/#installimisvoimalused","title":"Installimisv\u00f5imalused","text":"Meetod Kuidas kasutada Millal kasutada N\u00e4ide VS Code GUI <code>Ctrl+Shift+X</code> \u2192 otsi \u2192 Install Tavakasutus Otsi \"Prettier\" Marketplace veeb Sirvi \u2192 Install \u2192 ava VS Code Laienduste uurimine marketplace.visualstudio.com Teemade galerii Vali teema \u2192 Install \u2192 ava VS Code Visuaalse disaini valik vscodethemes.com Command line <code>code --install-extension ms-vscode-remote.remote-ssh</code> Automiseering, skriptid Bulk install VSIX fail Download .vsix \u2192 Install from VSIX Erilaiendused, beta versioonid .vsix local install"},{"location":"git_version_control/reference/vscode/#teemade-installimine","title":"Teemade Installimine","text":"<ol> <li>Mine https://vscodethemes.com/</li> <li>Sirvi visuaalselt erinevaid teemasid (Dark, Light, High Contrast)</li> <li>Kliki Install \u2192 avaneb VS Code</li> <li>Teema aktiveeritakse automaatselt</li> </ol>"},{"location":"git_version_control/reference/vscode/#minu-lemmikud-laiendused","title":"Minu lemmikud laiendused","text":"<p>Ava VS Code \u2192 Vajuta <code>Ctrl+Shift+X</code> \u2192 Paigalda j\u00e4rgmised:</p> Laienduse nimi Autor Otsingus\u00f5na Marketplace ID Kasutus Remote - SSH Microsoft \"Remote - SSH\" <code>ms-vscode-remote.remote-ssh</code> Serveritega t\u00f6\u00f6tamiseks Remote Explorer Microsoft \"Remote Explorer\" <code>ms-vscode.remote-explorer</code> Remote \u00fchenduste haldamiseks Prettier - Code formatter Prettier \"Prettier\" <code>esbenp.prettier-vscode</code> Koodi automaatseks formateerimiseks GitHub Actions GitHub \"GitHub Actions\" <code>github.vscode-github-actions</code> CI/CD t\u00f6\u00f6voogluste jaoks GitHub Codespaces GitHub \"GitHub Codespaces\" <code>github.codespaces</code> Pilve arenduskeskkonnaks indent-rainbow oderwat \"indent-rainbow\" <code>oderwat.indent-rainbow</code> Taanduste visualiseerimiseks (YAML!)"},{"location":"git_version_control/reference/vscode/#marketplace-kasutamine","title":"Marketplace Kasutamine","text":"<ol> <li>Mine https://marketplace.visualstudio.com/</li> <li>Otsi laiendust (nt \"Docker\")</li> <li>Install \u2192 avaneb VS Code automaatselt</li> <li>V\u00f5i kopeeri Marketplace ID \u2192 k\u00e4surea install</li> </ol>"},{"location":"git_version_control/reference/vscode/#ssh-seadistamine","title":"SSH Seadistamine","text":""},{"location":"git_version_control/reference/vscode/#ssh-votme-loomine","title":"SSH v\u00f5tme loomine:","text":"<pre><code>ssh-keygen -t rsa -b 4096 -C \"sinu.email@example.com\"\n</code></pre>"},{"location":"git_version_control/reference/vscode/#vs-code-ssh-config","title":"VS Code SSH config:","text":"<p>Vajuta <code>F1</code> \u2192 <code>Remote-SSH: Open Configuration File</code></p> <p>Lisa: <pre><code>Host serverinimi\n    HostName IP.aadress.v\u00f5i.domeen\n    User kasutajanimi\n    Port 22\n    IdentityFile ~/.ssh/id_rsa\n</code></pre></p>"},{"location":"git_version_control/reference/vscode/#pohiseadistused","title":"P\u00f5hiseadistused","text":"<p>Ava Settings (<code>Ctrl+,</code>) ja lisa:</p> <pre><code>{\n    \"editor.formatOnSave\": true,\n    \"editor.defaultFormatter\": \"esbenp.prettier-vscode\",\n    \"files.autoSave\": \"afterDelay\",\n    \"editor.tabSize\": 2,\n    \"editor.insertSpaces\": true,\n    \"yaml.format.enable\": true\n}\n</code></pre>"},{"location":"git_version_control/reference/vscode/#virtuaalmasinad-ja-uhendused","title":"Virtuaalmasinad ja \u00dchendused","text":""},{"location":"git_version_control/reference/vscode/#voimalikud-keskkonnad","title":"V\u00f5imalikud Keskkonnad","text":"Keskkond Installimisviis IP aadressi leidmine WSL2 (Windows) <code>wsl --install Ubuntu</code> Automaatne (localhost) Multipass <code>multipass launch --name dev</code> <code>multipass list</code> VirtualBox GUI kaudu Ubuntu ISO VM seadetest Network Docker <code>docker run -it ubuntu bash</code> <code>docker inspect container_id</code>"},{"location":"git_version_control/reference/vscode/#wsl2-uhendus-koige-lihtsam","title":"WSL2 \u00dchendus (k\u00f5ige lihtsam)","text":"<pre><code># Windows PowerShell-is\nwsl --install Ubuntu\n# Taask\u00e4ivita arvuti\n# WSL2 k\u00e4ivitub automaatselt VS Code-s Remote Explorer-is\n</code></pre>"},{"location":"git_version_control/reference/vscode/#multipass-uhendus","title":"Multipass \u00dchendus","text":"<pre><code># Masina loomine\nmultipass launch --name devserver --cpus 2 --mem 2G --disk 10G\n\n# SSH info saamine\nmultipass info devserver\n\n# VS Code config\nHost multipass-dev\n    HostName [IP multipass info k\u00e4sust]\n    User ubuntu\n    IdentityFile ~/.ssh/id_rsa\n</code></pre>"},{"location":"git_version_control/reference/vscode/#virtualbox-uhendus","title":"VirtualBox \u00dchendus","text":"<ol> <li>Loo Ubuntu VM VirtualBox-is</li> <li>Network: Bridged Adapter v\u00f5i NAT + Port Forwarding</li> <li>Ubuntu-s: <code>sudo apt install openssh-server</code></li> <li>Lisa VS Code SSH config-i</li> </ol>"},{"location":"git_version_control/reference/vscode/#remote-explorer-kasutamine","title":"Remote Explorer Kasutamine","text":""},{"location":"git_version_control/reference/vscode/#uhenduste-vaatamine","title":"\u00dchenduste Vaatamine","text":"<ol> <li>K\u00fclgriba \u2192 Remote Explorer ikoon</li> <li>SSH Targets all n\u00e4ed k\u00f5iki seadistatud \u00fchendusi  </li> <li>Kliki masina nime \u2192 Connect in New Window</li> </ol>"},{"location":"git_version_control/reference/vscode/#remote-extensions","title":"Remote Extensions","text":"<p>Remote masinas on eraldi extension store: - \u00dchenda remote masinaga - Extensions paneel n\u00e4itab \"Install in SSH: serverinimi\" - Paigalda vajalikud extensions remote masinas</p> <p>Soovitatud remote extensions: - Python, Docker, YAML - kui vaja remote masinas</p>"},{"location":"git_version_control/reference/vscode/#mitme-terminali-kasutamine","title":"Mitme Terminali Kasutamine","text":""},{"location":"git_version_control/reference/vscode/#terminal-loomine","title":"Terminal Loomine","text":"<pre><code>Ctrl+Shift+` - Uus terminal\nCtrl+` - Terminali n\u00e4itamine/peitmine\n</code></pre>"},{"location":"git_version_control/reference/vscode/#terminal-tuubid","title":"Terminal T\u00fc\u00fcbid","text":"Kiirklahv Terminal t\u00fc\u00fcp <code>Ctrl+Shift+</code> Kohalik terminal Remote aknas: <code>Ctrl+Shift+</code> Remote terminal <code>+</code> nupp terminal paneelil Lisa uus"},{"location":"git_version_control/reference/vscode/#terminali-haldamine","title":"Terminali Haldamine","text":"<ul> <li>Split Terminal: Terminal paremkl\u00f5ps \u2192 \"Split Terminal\"  </li> <li>Rename: Terminal paremkl\u00f5ps \u2192 \"Rename\"</li> <li>Kill Terminal: Terminal paremkl\u00f5ps \u2192 \"Kill Terminal\"</li> <li>Switch: <code>Ctrl+PageUp/PageDown</code> v\u00f5i dropdown men\u00fc\u00fc</li> </ul>"},{"location":"git_version_control/reference/vscode/#kiire-test","title":"Kiire Test","text":"<ol> <li>Loo uus kaust ja ava VS Code-s</li> <li>Loo fail <code>test.yaml</code>: <pre><code>server:\n  host: localhost\n  port: 8080\n  settings:\n    debug: true\n    timeout: 30\n</code></pre></li> <li>Salvesta (<code>Ctrl+S</code>) - Prettier peaks formateerima</li> </ol>"},{"location":"git_version_control/reference/whatthecommit_guide/","title":"WhatTheCommit.com \u2013 Commit-s\u00f5numid, mis solvavad sind tagasi \ud83d\ude04","text":""},{"location":"git_version_control/reference/whatthecommit_guide/#mis-see-tegelikult-on","title":"Mis see tegelikult on?","text":"<p>WhatTheCommit.com on sait, mis viskab sulle suvalisi commit-s\u00f5numeid, sest sa oled ilmselt liiga laisk, et m\u00f5elda ise midagi paremat kui \u201cupdate\u201d v\u00f5i \u201casdfasdkjf\u201d.</p> <p>Kasuta seda ainult kohalikes projektides, muidu keegi vaatab su Git-ajalugu ja valandab kogemata.</p>"},{"location":"git_version_control/reference/whatthecommit_guide/#kiire-seadistus-sest-sul-on-kannatust-umbes-6-sekundiks","title":"Kiire Seadistus, sest sul on kannatust umbes 6 sekundiks","text":"<p>Lisa oma <code>~/.bashrc</code>-i:</p> <pre><code>alias gitcommit='git commit -m \"$(curl -s https://whatthecommit.com/index.txt)\"'\n</code></pre> <p>V\u00f5i kui sa tahad teha seda \"nagu proff\":</p> <pre><code>git config --global alias.commit-fun '!f() { git commit -m \"$(curl -s https://whatthecommit.com/index.txt)\"; }; f'\n</code></pre>"},{"location":"git_version_control/reference/whatthecommit_guide/#kuidas-see-tootab-ei-toota-see-toimib-umbes","title":"\ud83c\udfae Kuidas see t\u00f6\u00f6tab? Ei t\u00f6\u00f6ta, see toimib\u2026 umbes.","text":"<pre><code>$ git add .\n$ gitcommit\n[main a1b2c3d] i have no idea what i\u2019m doing\n 1 file changed, 1 panic attack triggered\n</code></pre>"},{"location":"git_version_control/reference/whatthecommit_guide/#moned-parlid-masinast-kes-moistab-su-hingevalu","title":"M\u00f5ned p\u00e4rlid masinast, kes m\u00f5istab su hingevalu","text":"<ul> <li>\u201ccommit before i break more shit\u201d \u2013 v\u00e4ga ennetav</li> <li>\u201coops, forgot to add that file\u201d \u2013 klassika</li> <li>\u201cthat last commit? oh, forget it\u201d \u2013 Git-zen</li> <li>\u201ctrust me, it\u2019s working\u201d \u2013 valede tippvorm</li> </ul>"},{"location":"git_version_control/reference/whatthecommit_guide/#mitte-kasutada-too-juures-kui-sa-tahad-tookohta-hoida","title":"\u26a0 Mitte kasutada t\u00f6\u00f6 juures\u2026 kui sa tahad t\u00f6\u00f6kohta hoida","text":"<p>See t\u00f6\u00f6riist sobib h\u00e4sti: \u2705 Protot\u00fc\u00fcpideks \u2705 Kodukoodiks \u2705 Identiteedikriisideks</p>"},{"location":"kubernetes_overview/homework/","title":"Kubernetes Overview Kodut\u00f6\u00f6: Kohalik Container Orchestration","text":""},{"location":"kubernetes_overview/homework/#task-1-ulesande-kirjeldus","title":"Task 1: \u00dclesande Kirjeldus","text":"<p>Projekt: \"TechShop\" E-commerce Kubernetes Deployment</p> <p>Eesm\u00e4rk: Deploy'ida lihtne e-commerce rakendus Kubernetes'i kasutades kohalikku Minikube keskkonda.</p> <p>Aeg: 2-</p>"},{"location":"kubernetes_overview/homework/#task-2-ulesande-nouded","title":"Task 2: \u00dclesande N\u00f5uded","text":""},{"location":"kubernetes_overview/homework/#rakenduse-arhitektuur","title":"Rakenduse Arhitektuur","text":"<p>TechShop koosneb kolmest komponendist:</p> <pre><code># Arhitektuur:\nFrontend (React) \u2192 Backend (Node.js) \u2192 Database (PostgreSQL)\n     \u2193                    \u2193                    \u2193\n  nginx:alpine      node:16-alpine      postgres:13\n</code></pre>"},{"location":"kubernetes_overview/homework/#vajalikud-ressursid","title":"Vajalikud Ressursid","text":"<p>Kubernetes ressursid: - 3 Deployment'i - frontend, backend, database - 3 Service'i - frontend, backend, database - 1 ConfigMap - rakenduse konfiguratsioon - 1 Secret - andmebaasi parool - 1 PersistentVolumeClaim - andmebaasi andmete salvestamine</p>"},{"location":"kubernetes_overview/homework/#task-3-projekti-struktuuri-loomine","title":"Task 3: Projekti Struktuuri Loomine","text":""},{"location":"kubernetes_overview/homework/#ulesanne-11-loo-projekt-struktuur","title":"\u00dclesanne 1.1: Loo projekt struktuur","text":"<pre><code># Loo projekt kaust\nmkdir techshop-kubernetes\ncd techshop-kubernetes\n\n# Loo faili struktuur\nmkdir -p {frontend,backend,database,config}\ntouch README.md\n</code></pre>"},{"location":"kubernetes_overview/homework/#ulesanne-12-loo-readmemd","title":"\u00dclesanne 1.2: Loo README.md","text":"<pre><code># TechShop Kubernetes Deployment\n\n## Task 4: Projekt kirjeldus\nLihtne e-commerce rakendus Kubernetes'i kasutades.\n\n## Task 5: Komponendid\n- Frontend: React (nginx:alpine)\n- Backend: Node.js API\n- Database: PostgreSQL\n\n## Task 6: Kuidas kasutada\n1. `kubectl apply -f config/`\n2. `kubectl get all`\n3. `minikube service frontend-service`\n</code></pre>"},{"location":"kubernetes_overview/homework/#task-7-database-setup","title":"Task 7: Database Setup","text":""},{"location":"kubernetes_overview/homework/#ulesanne-21-loo-postgresql-secret","title":"\u00dclesanne 2.1: Loo PostgreSQL Secret","text":"<p><code>database/postgres-secret.yaml</code>: <pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: postgres-secret\ntype: Opaque\ndata:\n  username: dGVjaHNob3A=  # techshop (base64)\n  password: cGFzc3dvcmQxMjM=  # password123 (base64)\n  database: dGVjaHNob3BkYg==  # techshopdb (base64)\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-22-loo-postgresql-configmap","title":"\u00dclesanne 2.2: Loo PostgreSQL ConfigMap","text":"<p><code>database/postgres-config.yaml</code>: <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: postgres-config\ndata:\n  POSTGRES_DB: techshopdb\n  POSTGRES_USER: techshop\n  POSTGRES_PASSWORD: password123\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-23-loo-postgresql-persistentvolumeclaim","title":"\u00dclesanne 2.3: Loo PostgreSQL PersistentVolumeClaim","text":"<p><code>database/postgres-pvc.yaml</code>: <pre><code>apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: postgres-pvc\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-24-loo-postgresql-deployment","title":"\u00dclesanne 2.4: Loo PostgreSQL Deployment","text":"<p><code>database/postgres-deployment.yaml</code>: <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: postgres-deployment\n  labels:\n    app: postgres\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: postgres\n  template:\n    metadata:\n      labels:\n        app: postgres\n    spec:\n      containers:\n      - name: postgres\n        image: postgres:13\n        ports:\n        - containerPort: 5432\n        env:\n        - name: POSTGRES_DB\n          valueFrom:\n            configMapKeyRef:\n              name: postgres-config\n              key: POSTGRES_DB\n        - name: POSTGRES_USER\n          valueFrom:\n            configMapKeyRef:\n              name: postgres-config\n              key: POSTGRES_USER\n        - name: POSTGRES_PASSWORD\n          valueFrom:\n            configMapKeyRef:\n              name: postgres-config\n              key: POSTGRES_PASSWORD\n        volumeMounts:\n        - name: postgres-storage\n          mountPath: /var/lib/postgresql/data\n      volumes:\n      - name: postgres-storage\n        persistentVolumeClaim:\n          claimName: postgres-pvc\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-25-loo-postgresql-service","title":"\u00dclesanne 2.5: Loo PostgreSQL Service","text":"<p><code>database/postgres-service.yaml</code>: <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: postgres-service\nspec:\n  selector:\n    app: postgres\n  ports:\n  - port: 5432\n    targetPort: 5432\n  type: ClusterIP\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#task-8-backend-setup","title":"Task 8: Backend Setup","text":""},{"location":"kubernetes_overview/homework/#ulesanne-31-loo-backend-configmap","title":"\u00dclesanne 3.1: Loo Backend ConfigMap","text":"<p><code>backend/backend-config.yaml</code>: <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: backend-config\ndata:\n  NODE_ENV: \"development\"\n  PORT: \"3000\"\n  DATABASE_URL: \"postgresql://techshop:password123@postgres-service:5432/techshopdb\"\n  JWT_SECRET: \"development-secret\"\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-32-loo-backend-deployment","title":"\u00dclesanne 3.2: Loo Backend Deployment","text":"<p><code>backend/backend-deployment.yaml</code>: <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: backend-deployment\n  labels:\n    app: backend\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: backend\n  template:\n    metadata:\n      labels:\n        app: backend\n    spec:\n      containers:\n      - name: backend\n        image: node:16-alpine\n        ports:\n        - containerPort: 3000\n        env:\n        - name: NODE_ENV\n          valueFrom:\n            configMapKeyRef:\n              name: backend-config\n              key: NODE_ENV\n        - name: PORT\n          valueFrom:\n            configMapKeyRef:\n              name: backend-config\n              key: PORT\n        - name: DATABASE_URL\n          valueFrom:\n            configMapKeyRef:\n              name: backend-config\n              key: DATABASE_URL\n        - name: JWT_SECRET\n          valueFrom:\n            configMapKeyRef:\n              name: backend-config\n              key: JWT_SECRET\n        command: [\"sh\", \"-c\"]\n        args:\n        - |\n          echo \"Starting backend server...\"\n          echo \"Database URL: $DATABASE_URL\"\n          echo \"Port: $PORT\"\n          echo \"Environment: $NODE_ENV\"\n          sleep 3600\n        resources:\n          requests:\n            memory: \"128Mi\"\n            cpu: \"100m\"\n          limits:\n            memory: \"256Mi\"\n            cpu: \"200m\"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 3000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 3000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-33-loo-backend-service","title":"\u00dclesanne 3.3: Loo Backend Service","text":"<p><code>backend/backend-service.yaml</code>: <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: backend-service\nspec:\n  selector:\n    app: backend\n  ports:\n  - port: 3000\n    targetPort: 3000\n  type: ClusterIP\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#task-9-samm-4-frontend-setup","title":"Task 9: \ud83c\udfa8 Samm 4: Frontend Setup","text":""},{"location":"kubernetes_overview/homework/#ulesanne-41-loo-frontend-configmap","title":"\u00dclesanne 4.1: Loo Frontend ConfigMap","text":"<p><code>frontend/frontend-config.yaml</code>: <pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: frontend-config\ndata:\n  REACT_APP_API_URL: \"http://backend-service:3000\"\n  REACT_APP_ENVIRONMENT: \"development\"\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-42-loo-frontend-deployment","title":"\u00dclesanne 4.2: Loo Frontend Deployment","text":"<p><code>frontend/frontend-deployment.yaml</code>: <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: frontend-deployment\n  labels:\n    app: frontend\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: frontend\n  template:\n    metadata:\n      labels:\n        app: frontend\n    spec:\n      containers:\n      - name: frontend\n        image: nginx:alpine\n        ports:\n        - containerPort: 80\n        env:\n        - name: REACT_APP_API_URL\n          valueFrom:\n            configMapKeyRef:\n              name: frontend-config\n              key: REACT_APP_API_URL\n        - name: REACT_APP_ENVIRONMENT\n          valueFrom:\n            configMapKeyRef:\n              name: frontend-config\n              key: REACT_APP_ENVIRONMENT\n        command: [\"sh\", \"-c\"]\n        args:\n        - |\n          echo \"Starting frontend server...\"\n          echo \"API URL: $REACT_APP_API_URL\"\n          echo \"Environment: $REACT_APP_ENVIRONMENT\"\n          echo \"&lt;html&gt;&lt;body&gt;&lt;h1&gt;TechShop Frontend&lt;/h1&gt;&lt;p&gt;API: $REACT_APP_API_URL&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\" &gt; /usr/share/nginx/html/index.html\n          nginx -g \"daemon off;\"\n        resources:\n          requests:\n            memory: \"64Mi\"\n            cpu: \"50m\"\n          limits:\n            memory: \"128Mi\"\n            cpu: \"100m\"\n        livenessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /\n            port: 80\n          initialDelaySeconds: 5\n          periodSeconds: 5\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-43-loo-frontend-service","title":"\u00dclesanne 4.3: Loo Frontend Service","text":"<p><code>frontend/frontend-service.yaml</code>: <pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: frontend-service\nspec:\n  selector:\n    app: frontend\n  ports:\n  - port: 80\n    targetPort: 80\n  type: NodePort\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#task-10-deployment-ja-testimine","title":"Task 10: Deployment ja Testimine","text":""},{"location":"kubernetes_overview/homework/#ulesanne-51-deployi-koik-ressursid","title":"\u00dclesanne 5.1: Deploy'i k\u00f5ik ressursid","text":"<pre><code># Deploy'i database\nkubectl apply -f database/\n\n# Deploy'i backend\nkubectl apply -f backend/\n\n# Deploy'i frontend\nkubectl apply -f frontend/\n\n# Vaata k\u00f5iki ressursse\nkubectl get all\n</code></pre>"},{"location":"kubernetes_overview/homework/#ulesanne-52-kontrolli-deploymenti","title":"\u00dclesanne 5.2: Kontrolli deployment'i","text":"<pre><code># Vaata Pod'ide staatust\nkubectl get pods\n\n# Vaata Service'e\nkubectl get services\n\n# Vaata ConfigMap'e\nkubectl get configmaps\n\n# Vaata Secret'e\nkubectl get secrets\n\n# Vaata PVC'e\nkubectl get pvc\n</code></pre>"},{"location":"kubernetes_overview/homework/#ulesanne-53-testi-rakendust","title":"\u00dclesanne 5.3: Testi rakendust","text":"<pre><code># Testi frontend'i\nminikube service frontend-service\n\n# Testi backend'i\nkubectl port-forward service/backend-service 3000:3000\n\n# Testi database'i\nkubectl exec -it $(kubectl get pods -l app=postgres -o jsonpath='{.items[0].metadata.name}') -- psql -U techshop -d techshopdb\n</code></pre>"},{"location":"kubernetes_overview/homework/#task-11-monitoring-ja-scaling","title":"Task 11: Monitoring ja Scaling","text":""},{"location":"kubernetes_overview/homework/#ulesanne-61-scaling","title":"\u00dclesanne 6.1: Scaling","text":"<pre><code># Skaleeri frontend'i \u00fcles\nkubectl scale deployment frontend-deployment --replicas=5\n\n# Skaleeri backend'i \u00fcles\nkubectl scale deployment backend-deployment --replicas=3\n\n# Vaata tulemust\nkubectl get pods\n</code></pre>"},{"location":"kubernetes_overview/homework/#ulesanne-62-monitoring","title":"\u00dclesanne 6.2: Monitoring","text":"<pre><code># Vaata Pod'ide log'e\nkubectl logs -l app=frontend\nkubectl logs -l app=backend\nkubectl logs -l app=postgres\n\n# Vaata ressursi kasutust\nkubectl top pods\n\n# Vaata event'e\nkubectl get events\n</code></pre>"},{"location":"kubernetes_overview/homework/#task-12-samm-7-cleanup","title":"Task 12: \ud83e\uddf9 Samm 7: Cleanup","text":"<pre><code># Kustuta k\u00f5ik ressursid\nkubectl delete -f frontend/\nkubectl delete -f backend/\nkubectl delete -f database/\n\n# Kontrolli, et k\u00f5ik on kustutatud\nkubectl get all\nkubectl get pvc\nkubectl get configmaps\nkubectl get secrets\n</code></pre>"},{"location":"kubernetes_overview/homework/#task-13-harjutus-8-bonus-ulesanded","title":"Task 13: HARJUTUS 8: Bonus \u00dclesanded","text":""},{"location":"kubernetes_overview/homework/#ulesanne-81-ingress-setup","title":"\u00dclesanne 8.1: Ingress Setup","text":"<p>Loo Ingress controller ja Ingress: <pre><code># ingress.yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: techshop-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\nspec:\n  rules:\n  - host: techshop.local\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: frontend-service\n            port:\n              number: 80\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-82-horizontal-pod-autoscaler","title":"\u00dclesanne 8.2: Horizontal Pod Autoscaler","text":"<p>Loo HPA backend'ile: <pre><code># hpa.yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: backend-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: backend-deployment\nReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#ulesanne-83-job-ja-cronjob","title":"\u00dclesanne 8.3: Job ja CronJob","text":"<p>Loo backup Job: <pre><code># backup-job.yaml\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: database-backup\nspec:\n  template:\n    spec:\n      containers:\n      - name: backup\n        image: postgres:13\n        command: [\"pg_dump\"]\n        args: [\"-h\", \"postgres-service\", \"-U\", \"techshop\", \"-d\", \"techshopdb\"]\n        env:\n        - name: PGPASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: postgres-secret\n              key: password\n      restartPolicy: Never\n  backoffLimit: 3\n</code></pre></p>"},{"location":"kubernetes_overview/homework/#task-14-kodutoo-kokkuvote","title":"Task 14: Kodut\u00f6\u00f6 Kokkuv\u00f5te","text":""},{"location":"kubernetes_overview/homework/#opitud-kontseptsioonid","title":"\u00d5pitud kontseptsioonid:","text":"<ol> <li>Multi-tier application - frontend, backend, database</li> <li>Service discovery - teenuste vahelised \u00fchendused</li> <li>Configuration management - ConfigMap ja Secret'id</li> <li>Persistent storage - PVC ja PV</li> <li>Scaling - horizontal scaling</li> <li>Health checks - liveness ja readiness probe'id</li> </ol>"},{"location":"kubernetes_overview/homework/#jargmised-sammud","title":"J\u00e4rgmised sammud:","text":"<ul> <li>Lisa Ingress controller</li> <li>Seadista monitoring (Prometheus/Grafana)</li> <li>Lisa CI/CD pipeline</li> <li>Optimeeri resource kasutust</li> <li>Lisa security policies</li> </ul> <p>** Palju \u00f5nne! Oled n\u00fc\u00fcd valmis keerukate rakenduste deploy'imiseks Kubernetes'i!**</p>"},{"location":"kubernetes_overview/lab/","title":"Kubernetes Overview Lab: Container Orchestration","text":"<p>ITS-24 DevOps Automatiseerimine |  praktiline t\u00f6\u00f6</p>"},{"location":"kubernetes_overview/lab/#task-1-labi-eesmargid","title":"Task 1: Lab'i eesm\u00e4rgid","text":"<p>P\u00e4rast laborit oskate: - Seadistada kohaliku Kubernetes keskkonna - Deploy'ida lihtsaid rakendusi - Kasutada kubectl k\u00e4sklusi - M\u00f5ista Kubernetes'i p\u00f5hikontseptsioone</p>"},{"location":"kubernetes_overview/lab/#task-2-samm-2-kohaliku-kubernetes-seadistamine","title":"Task 2: \ud83d\udee0 Samm 2: Kohaliku Kubernetes Seadistamine","text":""},{"location":"kubernetes_overview/lab/#ulesanne-21-minikube-install","title":"\u00dclesanne 2.1: Minikube Install","text":"<p>Kontrollige, et teil on: - Docker (juba installitud) - VirtualBox v\u00f5i Hyper-V (Windows) - V\u00e4hemalt 2GB vaba RAM</p> <p>Install Minikube: <pre><code># macOS\nbrew installikube\n\n# Linux\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo installikube-linux-amd64 /usr/local/bin/minikube\n\n# Windows (PowerShell)\nchoco installikube\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#ulesanne-22-kaivita-minikube","title":"\u00dclesanne 2.2: K\u00e4ivita Minikube","text":"<pre><code># K\u00e4ivita Minikube\nminikube start\n\n# Kontrolli staatust\nminikube status\n\n# Vaata cluster info\nkubectl cluster-info\n\n# Vaata node'id\nkubectl get nodes\n</code></pre>"},{"location":"kubernetes_overview/lab/#ulesanne-23-install-kubectl-kui-vajalik","title":"\u00dclesanne 2.3: Install kubectl (kui vajalik)","text":"<pre><code># macOS\nbrew install kubectl\n\n# Linux\ncurl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n\n# Kontrolli versiooni\nkubectl version --client\n</code></pre>"},{"location":"kubernetes_overview/lab/#task-3-esimene-kubernetes-rakendus","title":"Task 3: Esimene Kubernetes Rakendus","text":""},{"location":"kubernetes_overview/lab/#ulesanne-31-lihtne-nginx-pod","title":"\u00dclesanne 3.1: Lihtne Nginx Pod","text":"<p>Loo esimene Pod: <pre><code># Loo Pod\nkubectl run nginx-pod --image=nginx:latest --port=80\n\n# Vaata Pod'i staatust\nkubectl get pods\n\n# Vaata Pod'i detaile\nkubectl describe pod nginx-pod\n\n# Vaata Pod'i log'e\nkubectl logs nginx-pod\n</code></pre></p> <p>Testi Pod'i: <pre><code># Mine Pod'i sisse\nkubectl exec -it nginx-pod -- /bin/bash\n\n# Pod'i sees\ncurl localhost\nexit\n\n# V\u00f5i testi v\u00e4ljast\nkubectl port-forward nginx-pod 8080:80\n# Avage brauser: http://localhost:8080\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#ulesanne-32-nginx-deployment","title":"\u00dclesanne 3.2: Nginx Deployment","text":"<p>Loo Deployment fail: <pre><code># nginx-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  labels:\n    app: nginx\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.19\n        ports:\n        - containerPort: 80\n        resources:\n          requests:\n            memory: \"64Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"128Mi\"\n            cpu: \"500m\"\n</code></pre></p> <p>Deploy'i rakendus: <pre><code># Loo Deployment\nkubectl apply -f nginx-deployment.yaml\n\n# Vaata Deployment'i\nkubectl get deployments\n\n# Vaata Pod'e\nkubectl get pods\n\n# Vaata ReplicaSet'e\nkubectl get replicasets\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#ulesanne-33-nginx-service","title":"\u00dclesanne 3.3: Nginx Service","text":"<p>Loo Service fail: <pre><code># nginx-service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-service\nspec:\n  selector:\n    app: nginx\n  ports:\n  - port: 80\n    targetPort: 80\n  type: NodePort\n</code></pre></p> <p>Deploy'i Service: <pre><code># Loo Service\nkubectl apply -f nginx-service.yaml\n\n# Vaata Service'e\nkubectl get services\n\n# Testi Service'i\nkubectl run test-pod --image=busybox --rm -it --restart=Never -- wget -O- nginx-service\n\n# V\u00f5i kasuta Minikube\nminikube service nginx-service\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#task-4-scaling-ja-updates","title":"Task 4: Scaling ja Updates","text":""},{"location":"kubernetes_overview/lab/#ulesanne-41-scaling","title":"\u00dclesanne 4.1: Scaling","text":"<pre><code># Skaleeri \u00fcles\nkubectl scale deployment nginx-deployment --replicas=5\n\n# Vaata tulemust\nkubectl get pods\n\n# Skaleeri alla\nkubectl scale deployment nginx-deployment --replicas=2\n\n# Vaata tulemust\nkubectl get pods\n</code></pre>"},{"location":"kubernetes_overview/lab/#ulesanne-42-rolling-update","title":"\u00dclesanne 4.2: Rolling Update","text":"<pre><code># Uuenda image'i\nkubectl set image deployment/nginx-deployment nginx=nginx:1.20\n\n# Vaata update'i progressi\nkubectl rollout status deployment/nginx-deployment\n\n# Vaata rollback ajalugu\nkubectl rollout history deployment/nginx-deployment\n\n# Tee rollback\nkubectl rollout undo deployment/nginx-deployment\n\n# Vaata rollback'i progressi\nkubectl rollout status deployment/nginx-deployment\n</code></pre>"},{"location":"kubernetes_overview/lab/#ulesanne-43-podi-kustutamine-ja-taaskaivitumine","title":"\u00dclesanne 4.3: Pod'i kustutamine ja taask\u00e4ivitumine","text":"<pre><code># Vaata Pod'e\nkubectl get pods\n\n# Kustuta \u00fcks Pod\nkubectl delete pod &lt;pod-name&gt;\n\n# Vaata, kuidas uus Pod tekib automaatselt\nkubectl get pods -w\n</code></pre>"},{"location":"kubernetes_overview/lab/#task-5-monitoring-ja-debugging","title":"Task 5: Monitoring ja Debugging","text":""},{"location":"kubernetes_overview/lab/#ulesanne-51-pohilised-kubectl-kasud","title":"\u00dclesanne 5.1: P\u00f5hilised kubectl k\u00e4sud","text":"<pre><code># Vaata k\u00f5iki ressursse\nkubectl get all\n\n# Vaata Pod'e details\nkubectl get pods -o wide\n\n# Vaata Service'e details\nkubectl get services -o wide\n\n# Vaata Deployment'i details\nkubectl describe deployment nginx-deployment\n\n# Vaata Pod'i details\nkubectl describe pod &lt;pod-name&gt;\n\n# Vaata Service'i details\nkubectl describe service nginx-service\n</code></pre>"},{"location":"kubernetes_overview/lab/#ulesanne-52-logide-vaatamine","title":"\u00dclesanne 5.2: Log'ide vaatamine","text":"<pre><code># Vaata Pod'i log'e\nkubectl logs &lt;pod-name&gt;\n\n# J\u00e4rgi log'e reaalajas\nkubectl logs -f &lt;pod-name&gt;\n\n# Vaata k\u00f5igi Pod'ide log'e\nkubectl logs -l app=nginx\n\n# Vaata eelmisi log'e\nkubectl logs &lt;pod-name&gt; --previous\n</code></pre>"},{"location":"kubernetes_overview/lab/#ulesanne-53-containeri-sisseemine","title":"\u00dclesanne 5.3: Container'i sisseemine","text":"<pre><code># Mine Pod'i sisse\nkubectl exec -it &lt;pod-name&gt; -- /bin/bash\n\n# Pod'i sees\nls -la\nps aux\nenv\nexit\n\n# K\u00e4ivita \u00fchekordne k\u00e4sk\nkubectl exec &lt;pod-name&gt; -- ls -la\nkubectl exec &lt;pod-name&gt; -- env\n</code></pre>"},{"location":"kubernetes_overview/lab/#ulesanne-54-eventide-vaatamine","title":"\u00dclesanne 5.4: Event'ide vaatamine","text":"<pre><code># Vaata k\u00f5iki event'e\nkubectl get events\n\n# Vaata event'e cronoloogilises j\u00e4rjekorras\nkubectl get events --sort-by='.lastTimestamp'\n\n# Vaata ainult viimaseid event'e\nkubectl get events --field-selector involvedObject.name=nginx-deployment\n</code></pre>"},{"location":"kubernetes_overview/lab/#task-6-konfiguratsioon-ja-secretid","title":"Task 6: Konfiguratsioon ja Secret'id","text":""},{"location":"kubernetes_overview/lab/#ulesanne-61-configmap","title":"\u00dclesanne 6.1: ConfigMap","text":"<p>Loo ConfigMap: <pre><code># app-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\ndata:\n  database_url: \"localhost:5432\"\n  api_key: \"development-key\"\n  log_level: \"INFO\"\n  environment: \"development\"\n</code></pre></p> <p>Loo Pod ConfigMap'iga: <pre><code># app-pod.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: config-pod\nspec:\n  containers:\n  - name: app\n    image: busybox\n    command: [\"sh\", \"-c\", \"echo $DATABASE_URL &amp;&amp; echo $LOG_LEVEL &amp;&amp; sleep 3600\"]\n    env:\n    - name: DATABASE_URL\n      valueFrom:\n        configMapKeyRef:\n          name: app-config\n          key: database_url\n    - name: LOG_LEVEL\n      valueFrom:\n        configMapKeyRef:\n          name: app-config\n          key: log_level\n</code></pre></p> <p>Deploy'i: <pre><code>kubectl apply -f app-config.yaml\nkubectl apply -f app-pod.yaml\n\n# Vaata Pod'i log'e\nkubectl logs config-pod\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#ulesanne-62-secret","title":"\u00dclesanne 6.2: Secret","text":"<p>Loo Secret: <pre><code># Loo Secret k\u00e4surealt\nkubectl create secret generic app-secret \\\n  --from-literal=username=admin \\\n  --from-literal=password=secret123\n\n# Vaata Secret'i\nkubectl get secrets\nkubectl describe secret app-secret\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#task-7-samm-7-cleanup","title":"Task 7: \ud83e\uddf9 Samm 7: Cleanup","text":"<p>Kustuta k\u00f5ik ressursid: <pre><code># Kustuta Deployment ja Service\nkubectl delete -f nginx-deployment.yaml\nkubectl delete -f nginx-service.yaml\n\n# Kustuta ConfigMap ja Pod\nkubectl delete -f app-config.yaml\nkubectl delete -f app-pod.yaml\n\n# Kustuta Secret\nkubectl delete secret app-secret\n\n# Kustuta test Pod\nkubectl delete pod nginx-pod\n\n# Vaata, et k\u00f5ik on kustutatud\nkubectl get all\n\n# Peata Minikube\nminikube stop\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#task-8-harjutus-8-bonus-ulesanded","title":"Task 8: HARJUTUS 8: Bonus \u00dclesanded","text":""},{"location":"kubernetes_overview/lab/#ulesanne-81-multi-container-pod","title":"\u00dclesanne 8.1: Multi-container Pod","text":"<p>Loo Pod kahe container'iga: <pre><code># multi-container-pod.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: multi-container-pod\nspec:\n  containers:\n  - name: nginx\n    image: nginx:latest\n    ports:\n    - containerPort: 80\n  - name: sidecar\n    image: busybox\n    command: [\"sh\", \"-c\", \"while true; do echo 'Sidecar running'; sleep 30; done\"]\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#ulesanne-82-resource-limits","title":"\u00dclesanne 8.2: Resource Limits","text":"<p>Lisa resource piirangud: <pre><code># resource-pod.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: resource-pod\nspec:\n  containers:\n  - name: app\n    image: nginx:latest\n    resources:\n      requests:\n        memory: \"64Mi\"\n        cpu: \"250m\"\n      limits:\n        memory: \"128Mi\"\n        cpu: \"500m\"\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#ulesanne-83-health-checks","title":"\u00dclesanne 8.3: Health Checks","text":"<p>Lisa health check: <pre><code># health-check-pod.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: health-check-pod\nspec:\n  containers:\n  - name: app\n    image: nginx:latest\n    livenessProbe:\n      httpGet:\n        path: /\n        port: 80\n      initialDelaySeconds: 30\n      periodSeconds: 10\n    readinessProbe:\n      httpGet:\n        path: /\n        port: 80\n      initialDelaySeconds: 5\n      periodSeconds: 5\n</code></pre></p>"},{"location":"kubernetes_overview/lab/#lab-kokkuvote","title":"Lab Kokkuv\u00f5te","text":""},{"location":"kubernetes_overview/lab/#opitud-kontseptsioonid","title":"\u00d5pitud kontseptsioonid:","text":"<ol> <li>Pod - v\u00e4ikseim Kubernetes \u00fcksus</li> <li>Deployment - rakenduse juhtimine ja scaling</li> <li>Service - networking ja load balancing</li> <li>ConfigMap - konfiguratsiooni haldamine</li> <li>Secret - kr\u00fcpteeritud andmete haldamine</li> </ol>"},{"location":"kubernetes_overview/lab/#opitud-kubectl-kasud","title":"\u00d5pitud kubectl k\u00e4sud:","text":"<ul> <li><code>kubectl get</code> - ressurside vaatamine</li> <li><code>kubectl describe</code> - detailide vaatamine</li> <li><code>kubectl logs</code> - log'ide vaatamine</li> <li><code>kubectl exec</code> - container'i sisseemine</li> <li><code>kubectl scale</code> - scaling</li> <li><code>kubectl rollout</code> - update'id ja rollback'id</li> </ul>"},{"location":"kubernetes_overview/lab/#jargmised-sammud","title":"J\u00e4rgmised sammud:","text":"<ul> <li>\u00d5ppige Helm (package manager)</li> <li>Uurige Ingress (v\u00e4line ligip\u00e4\u00e4s)</li> <li>\u00d5ppige Persistent Volumes</li> <li>Uurige Kubernetes Dashboard</li> <li>\u00d5ppige monitoring (Prometheus/Grafana)</li> </ul> <p>** Palju \u00f5nne! Oled n\u00fc\u00fcd valmis Kubernetes'i kasutamiseks!**</p>"},{"location":"kubernetes_overview/lecture/","title":"Kubernetes Overview: Container Orchestration","text":"<p>ITS-24 DevOps Automatiseerimine |  (\u00fclevaade)</p>"},{"location":"kubernetes_overview/lecture/#task-1-opivaljundid","title":"Task 1: \u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast loengut oskate: - M\u00f5ista Kubernetes'i p\u00f5hilisi kontseptsioone - Kasutada kubectl k\u00e4sklusi - Deploy'ida lihtsaid rakendusi - M\u00f5ista Kubernetes'i arhitektuuri</p>"},{"location":"kubernetes_overview/lecture/#mis-on-kubernetes","title":"Mis on Kubernetes?","text":""},{"location":"kubernetes_overview/lecture/#miks-vajame-container-orchestration","title":"Miks vajame Container Orchestration?","text":"<p>Docker probleemid suurel skaalal: <pre><code>## K\u00e4sitsi container management\ndocker run -d --name web1 nginx:latest\ndocker run -d --name web2 nginx:latest\ndocker run -d --name web3 nginx:latest\n\n## K\u00e4sitsi networking\ndocker network create web-network\ndocker network connect web-network web1\ndocker network connect web-network web2\n\n## K\u00e4sitsi scaling\ndocker stop web1  # Kui \u00fcks container kukub\ndocker run -d --name web1-new nginx:latest\n\n## K\u00e4sitsi load balancing\n# Peate ise seadistama reverse proxy\n</code></pre></p> <p>Kubernetes lahendab: - Automaatne scaling - lisab/eemaldab container'eid vastavalt koormusele - Automaatne failover - kui container kukub, taask\u00e4ivitub automaatselt - Load balancing - jaotab liiklust container'ite vahel - Service discovery - container'id leiavad \u00fcksteist automaatselt - Configuration management - keskkonnamuutujad, secret'id, config map'id</p>"},{"location":"kubernetes_overview/lecture/#task-2-kubernetes-arhitektuur","title":"Task 2: \ud83c\udfd7 Kubernetes Arhitektuur","text":""},{"location":"kubernetes_overview/lecture/#control-plane-master-node","title":"Control Plane (Master Node)","text":"<p>Kubernetes'i \"aju\" - teeb otsused:</p> <pre><code># Control Plane komponendid:\n- kube-apiserver      # API server - k\u00f5ik k\u00e4sud l\u00e4hevad siia\n- etcd                # Andmebaas - salvestab k\u00f5ik andmed\n- kube-scheduler      # Planeerija - otsustab, kuhu container'id panna\n- kube-controller-manager  # Kontroller - j\u00e4lgib ja parandab olukordi\n</code></pre>"},{"location":"kubernetes_overview/lecture/#worker-nodes","title":"Worker Nodes","text":"<p>Kus teie rakendused jooksevad:</p> <pre><code># Worker Node komponendid:\n- kubelet             # Agent - kommunikeerib Control Plane'iga\n- kube-proxy          # Networking - teenuste vahelised \u00fchendused\n- Container Runtime   # Docker/containerd - container'ite k\u00e4ivitamine\n</code></pre>"},{"location":"kubernetes_overview/lecture/#task-3-kubernetes-pohikontseptsioonid","title":"Task 3: Kubernetes P\u00f5hikontseptsioonid","text":""},{"location":"kubernetes_overview/lecture/#pod-vaikseim-uksus","title":"Pod - V\u00e4ikseim \u00fcksus","text":"<p>Pod on nagu \"logistiline \u00fcksus\" - v\u00f5ib sisaldada \u00fchte v\u00f5i mitut container'it:</p> <pre><code># Lihtne Pod\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx-pod\nspec:\n  containers:\n  - name: nginx\n    image: nginx:latest\n    ports:\n    - containerPort: 80\n</code></pre> <p>Praktiline n\u00e4ide: <pre><code># Loo Pod\nkubectl run nginx-pod --image=nginx:latest --port=80\n\n# Vaata Pod'i staatust\nkubectl get pods\n\n# Vaata Pod'i detaile\nkubectl describe pod nginx-pod\n\n# Kustuta Pod\nkubectl delete pod nginx-pod\n</code></pre></p>"},{"location":"kubernetes_overview/lecture/#deployment-rakenduse-juhtimine","title":"Deployment - Rakenduse juhtimine","text":"<p>Deployment haldab Pod'e - scaling, updates, rollbacks:</p> <pre><code># Nginx Deployment\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  replicas: 3  # Kolm koopiat\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.19\n        ports:\n        - containerPort: 80\n</code></pre> <p>Praktiline n\u00e4ide: <pre><code># Loo Deployment\nkubectl create deployment nginx --image=nginx:latest --replicas=3\n\n# Vaata Deployment'i\nkubectl get deployments\n\n# Skaleeri \u00fcles\nkubectl scale deployment nginx --replicas=5\n\n# Uuenda image'i\nkubectl set image deployment/nginx nginx=nginx:1.20\n\n# Vaata rollback ajalugu\nkubectl rollout history deployment/nginx\n\n# Tee rollback\nkubectl rollout undo deployment/nginx\n</code></pre></p>"},{"location":"kubernetes_overview/lecture/#service-networking","title":"Service - Networking","text":"<p>Service pakub stabiilset IP ja DNS nime Pod'idele:</p> <pre><code># ClusterIP Service (vaikimisi)\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginx-service\nspec:\n  selector:\n    app: nginx\n  ports:\n  - port: 80\n    targetPort: 80\n  type: ClusterIP\n</code></pre> <p>Service t\u00fc\u00fcbid: - ClusterIP - sisemine ligip\u00e4\u00e4s (vaikimisi) - NodePort - ligip\u00e4\u00e4s node'ide kaudu - LoadBalancer - v\u00e4line ligip\u00e4\u00e4s (cloud provider'id) - ExternalName - DNS alias</p> <p>Praktiline n\u00e4ide: <pre><code># Loo Service\nkubectl expose deployment nginx --port=80 --target-port=80\n\n# Vaata Service'e\nkubectl get services\n\n# Testi Service'i\nkubectl run test-pod --image=busybox --rm -it --restart=Never -- wget -O- nginx-service\n</code></pre></p>"},{"location":"kubernetes_overview/lecture/#configmap-ja-secret-konfiguratsioon","title":"ConfigMap ja Secret - Konfiguratsioon","text":"<p>ConfigMap - mittekr\u00fcpteeritud konfiguratsioon:</p> <pre><code># ConfigMap\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\ndata:\n  database_url: \"localhost:5432\"\n  api_key: \"development-key\"\n  log_level: \"INFO\"\n</code></pre> <p>Secret - kr\u00fcpteeritud andmed:</p> <pre><code># Secret\napiVersion: v1\nkind: Secret\nmetadata:\n  name: app-secret\ntype: Opaque\ndata:\n  username: YWRtaW4=  # base64 encoded\n  password: cGFzc3dvcmQ=  # base64 encoded\n</code></pre> <p>Kasutamine Pod'is: <pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-pod\nspec:\n  containers:\n  - name: app\n    image: myapp:latest\n    env:\n    - name: DB_URL\n      valueFrom:\n        configMapKeyRef:\n          name: app-config\n          key: database_url\n    - name: DB_PASSWORD\n      valueFrom:\n        secretKeyRef:\n          name: app-secret\n          key: password\n</code></pre></p>"},{"location":"kubernetes_overview/lecture/#praktiline-kubernetes","title":"Praktiline Kubernetes","text":""},{"location":"kubernetes_overview/lecture/#kohalik-kubernetes-setup","title":"Kohalik Kubernetes Setup","text":"<p>Minikube - kohalik Kubernetes keskkond:</p> <pre><code># Install Minikube\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo installikube-linux-amd64 /usr/local/bin/minikube\n\n# K\u00e4ivita Minikube\nminikube start\n\n# Kontrolli staatust\nkubectl cluster-info\nkubectl get nodes\n</code></pre>"},{"location":"kubernetes_overview/lecture/#lihtne-web-application","title":"Lihtne Web Application","text":"<p>1. Loo Deployment: <pre><code># web-app.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: web-app\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: web-app\n  template:\n    metadata:\n      labels:\n        app: web-app\n    spec:\n      containers:\n      - name: web-app\n        image: nginx:latest\n        ports:\n        - containerPort: 80\n        env:\n        - name: ENVIRONMENT\n          value: \"development\"\n</code></pre></p> <p>2. Loo Service: <pre><code># web-service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: web-service\nspec:\n  selector:\n    app: web-app\n  ports:\n  - port: 80\n    targetPort: 80\n  type: NodePort\n</code></pre></p> <p>3. Deploy'i rakendus: <pre><code># Loo ressursid\nkubectl apply -f web-app.yaml\nkubectl apply -f web-service.yaml\n\n# Vaata staatust\nkubectl get pods\nkubectl get services\n\n# Testi rakendust\nminikube service web-service\n</code></pre></p>"},{"location":"kubernetes_overview/lecture/#monitoring-ja-debugging","title":"Monitoring ja Debugging","text":"<p>P\u00f5hilised kubectl k\u00e4sud: <pre><code># Pod'ide vaatamine\nkubectl get pods\nkubectl get pods -o wide\nkubectl describe pod &lt;pod-name&gt;\n\n# Log'ide vaatamine\nkubectl logs &lt;pod-name&gt;\nkubectl logs -f &lt;pod-name&gt;  # j\u00e4rgi reaalajas\n\n# Container'i sisseemine\nkubectl exec -it &lt;pod-name&gt; -- /bin/bash\n\n# Ressursside kasutamine\nkubectl top pods\nkubectl top nodes\n\n# Event'ide vaatamine\nkubectl get events\n</code></pre></p>"},{"location":"kubernetes_overview/lecture/#task-4-kubernetes-vs-docker","title":"Task 4: Kubernetes vs Docker","text":""},{"location":"kubernetes_overview/lecture/#vordlus","title":"V\u00f5rdlus","text":"Aspekt Docker Kubernetes Skope \u00dcksik container Container orchestration Scaling K\u00e4sitsi Automaatne Failover K\u00e4sitsi Automaatne Load Balancing K\u00e4sitsi Sisseehitatud Service Discovery K\u00e4sitsi Automaatne Configuration Environment variables ConfigMap/Secret Updates K\u00e4sitsi Rolling updates Monitoring Basic Comprehensive"},{"location":"kubernetes_overview/lecture/#millal-kasutada-mida","title":"Millal kasutada mida?","text":"<p>Docker sobib: - Arenduskeskkond - Lihtsad rakendused - Protot\u00fc\u00fcbid - \u00dcksikud serverid</p> <p>Kubernetes sobib: - Production keskkonnad - Suured rakendused - Microservices - High availability</p>"},{"location":"kubernetes_overview/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":""},{"location":"kubernetes_overview/lecture/#kubernetesi-eelised","title":"Kubernetes'i eelised:","text":"<p>\u2705 Automaatne scaling - vastavalt koormusele \u2705 High availability - automaatne failover \u2705 Service discovery - container'id leiavad \u00fcksteist \u2705 Configuration management - keskkonnamuutujad ja secret'id \u2705 Rolling updates - null downtime deployment'id \u2705 Resource management - CPU ja m\u00e4lu piirangud  </p>"},{"location":"kubernetes_overview/lecture/#jargmised-sammud","title":"J\u00e4rgmised sammud:","text":"<ul> <li>\u00d5ppige Helm (package manager)</li> <li>Uurige Ingress (v\u00e4line ligip\u00e4\u00e4s)</li> <li>\u00d5ppige Persistent Volumes</li> <li>Uurige Kubernetes Dashboard</li> <li>\u00d5ppige monitoring (Prometheus/Grafana)</li> </ul>"},{"location":"kubernetes_overview/lecture/#praktiline-soovitus","title":"Praktiline soovitus:","text":"<p>Alustage Docker'iga, siis liikuge Kubernetes'i juurde!</p> <p>J\u00e4rgmises osas: Praktiline lab - deploy'ime tervikliku rakenduse Kubernetes'i!</p>"},{"location":"terraform_basics/homework/","title":"Terraform Basics Kodut\u00f6\u00f6: Kohalik Infrastruktuur","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Terraform'i praktiline kasutamine ja Infrastructure as Code m\u00f5istmine praktilist t\u00f6\u00f6d</p> <p>Fookus on Terraform'i ja Infrastructure as Code'i \u00f5ppimisel kohalikus keskkonnas!</p>"},{"location":"terraform_basics/homework/#task-1-projekt-kohalik-infrastruktuur-terraformiga","title":"Task 1: Projekt: Kohalik Infrastruktuur Terraform'iga**","text":""},{"location":"terraform_basics/homework/#mis-on-see-projekt","title":"Mis on see projekt?","text":"<p>Looge kohalik infrastruktuur Terraform'i abil. See on nagu \"digitaalse maja ehitamine\" kohalikus arvutis - kirjutate \u00fcles, mida soovite, ja Terraform teeb selle teie eest.</p>"},{"location":"terraform_basics/homework/#mida-te-ehitate","title":"Mida te ehitate?","text":"<p>\ud83d\udcbb Kohalik Infrastruktuur - Failid ja kaustad - projektifailide struktuur - Konfiguratsioonid - JSON ja YAML failid - Skriptid - automatiseerimise skriptid</p>"},{"location":"terraform_basics/homework/#miks-see-on-kasulik","title":"Miks see on kasulik?","text":"<ul> <li>\u00d5pite Terraform'i - praktiline kogemus</li> <li>Lihtne alustada - t\u00f6\u00f6tab kohalikus arvutis</li> <li>Reaalne projekt - failide ja konfiguratsiooni haldamine</li> <li>Taaskasutatav - sama kood t\u00f6\u00f6tab erinevates arvutites</li> </ul>"},{"location":"terraform_basics/homework/#task-2-ulesanne-1-projekti-struktuuri-loomine","title":"Task 2: \u00dclesanne 1: Projekti struktuuri loomine ()","text":""},{"location":"terraform_basics/homework/#ulesanne-11-pohifailid","title":"\u00dclesanne 1.1: P\u00f5hifailid","text":"<p>Looge j\u00e4rgmine failide struktuur:</p> <pre><code>terraform-basics-homework/\n\u251c\u2500\u2500 main.tf          # P\u00f5hiline Terraform fail\n\u251c\u2500\u2500 variables.tf     # Muutujad\n\u251c\u2500\u2500 outputs.tf       # V\u00e4ljundid\n\u251c\u2500\u2500 terraform.tfvars # Muutujate v\u00e4\u00e4rtused\n\u2514\u2500\u2500 README.md        # Projekti kirjeldus\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-21-maintf-fail","title":"\u00dclesanne 2.1: main.tf fail","text":"<pre><code>terraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n\n# Loo projekti p\u00f5hikaust\nresource \"local_directory\" \"project_root\" {\n  path = \"${path.module}/${var.project_name}\"\n}\n\n# Loo alamkaustad\nresource \"local_directory\" \"config\" {\n  path = \"${local_directory.project_root.path}/config\"\n}\n\nresource \"local_directory\" \"scripts\" {\n  path = \"${local_directory.project_root.path}/scripts\"\n}\n\nresource \"local_directory\" \"docs\" {\n  path = \"${local_directory.project_root.path}/docs\"\n}\n\n# Projekti konfiguratsioon\nresource \"local_file\" \"project_config\" {\n  content = jsonencode({\n    project_name = var.project_name\n    environment  = var.environment\n    version      = \"1.0.0\"\n    created_at   = timestamp()\n    author       = \"Terraform Student\"\n    features = [\n      \"local_file_management\",\n      \"configuration_generation\",\n      \"script_automation\"\n    ]\n  })\n  filename = \"${local_directory.config.path}/project.json\"\n}\n\n# YAML konfiguratsioon\nresource \"local_file\" \"app_config\" {\n  content = yamlencode({\n    app = {\n      name        = var.project_name\n      environment = var.environment\n      port        = 8080\n      debug       = var.environment == \"development\" ? true : false\n    }\n    database = {\n      type = \"sqlite\"\n      file = \"app.db\"\n    }\n    logging = {\n      level = var.environment == \"production\" ? \"warn\" : \"debug\"\n      file  = \"app.log\"\n    }\n  })\n  filename = \"${local_directory.config.path}/app.yaml\"\n}\n\n# K\u00e4ivitamise skript\nresource \"local_file\" \"startup_script\" {\n  content = &lt;&lt;-EOF\n    #!/bin/bash\n    echo \"======================================\"\n    echo \"Tere tulemast ${var.project_name} projekti!\"\n    echo \"======================================\"\n    echo \"Keskkond: ${var.environment}\"\n    echo \"Versioon: 1.0.0\"\n    echo \"Kuup\u00e4ev: $(date)\"\n    echo \"Kaust: $(pwd)\"\n    echo \"\"\n    echo \"Saadaolevad konfiguratsioonid:\"\n    ls -la config/\n    echo \"\"\n    echo \"Saadaolevad skriptid:\"\n    ls -la scripts/\n    echo \"======================================\"\n  EOF\n  filename        = \"${local_directory.scripts.path}/startup.sh\"\n  file_permission = \"0755\"\n}\n\n# Puhastamise skript\nresource \"local_file\" \"cleanup_script\" {\n  content = &lt;&lt;-EOF\n              #!/bin/bash\n    echo \"Puhastan ${var.project_name} projekti...\"\n    echo \"Kustutan ajutised failid...\"\n    rm -f *.tmp *.log\n    echo \"Puhastamine l\u00f5petatud!\"\n  EOF\n  filename        = \"${local_directory.scripts.path}/cleanup.sh\"\n  file_permission = \"0755\"\n}\n\n# Juhuslik ID failide jaoks\nresource \"random_id\" \"file_suffix\" {\n  byte_length = 4\n}\n\n# Loo mitu n\u00e4idisfaili\nresource \"local_file\" \"example_files\" {\n  count = var.file_count\n\n  content = &lt;&lt;-EOF\n    # N\u00e4idisfail ${count.index + 1}\n\n    Projekti nimi: ${var.project_name}\n    Keskkond: ${var.environment}\n    Faili number: ${count.index + 1}\n    Loodud: ${timestamp()}\n    Unikaalne ID: ${random_id.file_suffix.hex}\n\n    See on n\u00e4idisfail, mis demonstreerib Terraform'i v\u00f5imalusi.\n    Saate seda faili kasutada oma projektides.\n  EOF\n\n  filename = \"${local_directory.docs.path}/example_${count.index + 1}_${random_id.file_suffix.hex}.txt\"\n}\n\n# README fail\nresource \"local_file\" \"readme\" {\n  content = &lt;&lt;-EOF\n    # ${var.project_name}\n\n    ## Kirjeldus\n\n    See projekt on loodud Terraform'i abil demonstreerima Infrastructure as Code p\u00f5him\u00f5tteid.\n\n    ## Struktuuri\n\n    ```\n    ${var.project_name}/\n    \u251c\u2500\u2500 config/          # Konfiguratsioonifailid\n    \u251c\u2500\u2500 scripts/         # Skriptid\n    \u251c\u2500\u2500 docs/           # Dokumentatsioon ja n\u00e4ited\n    \u2514\u2500\u2500 README.md       # See fail\n    ```\n\n    ## Kasutamine\n\n    1. K\u00e4ivita projekt: `./scripts/startup.sh`\n    2. Vaata konfiguratsioone: `cat config/project.json`\n    3. Puhasta projekt: `./scripts/cleanup.sh`\n\n    ## Keskkond\n\n    - Keskkond: ${var.environment}\n    - Versioon: 1.0.0\n    - Loodud: ${timestamp()}\n\n    ## Terraform info\n\n    See projekt loodi kasutades:\n    - Local provider\n    - Random provider\n    - File resources\n    - Directory resources\n  EOF\n  filename = \"${local_directory.project_root.path}/README.md\"\n}\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-31-variablestf-fail","title":"\u00dclesanne 3.1: variables.tf fail","text":"<pre><code>variable \"project_name\" {\n  description = \"Projekti nimi\"\n  type        = string\n  default     = \"terraform-basics-homework\"\n\n  validation {\n    condition     = length(var.project_name) &gt; 3\n    error_message = \"Projekti nimi peab olema v\u00e4hemalt 4 t\u00e4hem\u00e4rki pikk.\"\n  }\n}\n\nvariable \"environment\" {\n  description = \"Keskkonna nimi\"\n  type        = string\n  default     = \"development\"\n\n  validation {\n    condition     = contains([\"development\", \"staging\", \"production\"], var.environment)\n    error_message = \"Keskkond peab olema: development, staging v\u00f5i production.\"\n  }\n}\n\nvariable \"file_count\" {\n  description = \"Loodavate n\u00e4idisfailide arv\"\n  type        = number\n  default     = 5\n\n  validation {\n    condition     = var.file_count &gt; 0 &amp;&amp; var.file_count &lt;= 20\n    error_message = \"Failide arv peab olema vahemikus 1-20.\"\n  }\n}\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-41-outputstf-fail","title":"\u00dclesanne 4.1: outputs.tf fail","text":"<pre><code>output \"project_directory\" {\n  description = \"Projekti kausta tee\"\n  value       = local_directory.project_root.path\n}\n\noutput \"project_structure\" {\n  description = \"Projekti struktuur\"\n  value = {\n    root_dir    = local_directory.project_root.path\n    config_dir  = local_directory.config.path\n    scripts_dir = local_directory.scripts.path\n    docs_dir    = local_directory.docs.path\n  }\n}\n\noutput \"created_files\" {\n  description = \"K\u00f5ik loodud failid\"\n  value = {\n    config_files = [\n      local_file.project_config.filename,\n      local_file.app_config.filename\n    ]\n    script_files = [\n      local_file.startup_script.filename,\n      local_file.cleanup_script.filename\n    ]\n    doc_files = local_file.example_files[*].filename\n    readme_file = local_file.readme.filename\n  }\n}\n\noutput \"project_summary\" {\n  description = \"Projekti kokkuv\u00f5te\"\n  value = &lt;&lt;-EOF\n    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    Terraform Projekt: ${var.project_name}\n    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    Keskkond: ${var.environment}\n    Failide arv: ${length(local_file.example_files) + 4}\n    Loodud: ${timestamp()}\n    Kaust: ${local_directory.project_root.path}\n    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  EOF\n}\n\noutput \"next_steps\" {\n  description = \"J\u00e4rgmised sammud\"\n  value = [\n    \"1. K\u00e4ivitage: cd ${local_directory.project_root.path}\",\n    \"2. Vaadake struktuuri: tree . (v\u00f5i ls -la)\",\n    \"3. K\u00e4ivitage startup skript: ./scripts/startup.sh\",\n    \"4. Vaadake konfiguratsioonifaile: cat config/*.json\",\n    \"5. Muutke terraform.tfvars ja rakendage uuesti\"\n  ]\n}\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-51-terraformtfvars-fail","title":"\u00dclesanne 5.1: terraform.tfvars fail","text":"<pre><code>project_name = \"minu-terraform-projekt\"\nenvironment  = \"development\"\nfile_count   = 3\n</code></pre>"},{"location":"terraform_basics/homework/#task-3-ulesanne-2-projekti-kaivitamine","title":"Task 3: \u00dclesanne 2: Projekti k\u00e4ivitamine ()","text":""},{"location":"terraform_basics/homework/#ulesanne-11-terraformi-initsialiseerimine","title":"\u00dclesanne 1.1: Terraform'i initsialiseerimine","text":"<pre><code># Navigate to project directory\ncd terraform-basics-homework\n\n# Initialize Terraform\nterraform init\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-21-planeerimine","title":"\u00dclesanne 2.1: Planeerimine","text":"<pre><code># See what will be created\nterraform plan\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-31-projekti-loomine","title":"\u00dclesanne 3.1: Projekti loomine","text":"<pre><code># Create the infrastructure\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-41-tulemuste-vaatamine","title":"\u00dclesanne 4.1: Tulemuste vaatamine","text":"<pre><code># Check outputs\nterraform output\n\n# Check created files\nls -lau-terraform-projekt/\ntreeu-terraform-projekt/  # kui tree on installitud\n</code></pre>"},{"location":"terraform_basics/homework/#task-4-ulesanne-3-eksperimenteerimine","title":"Task 4: \u00dclesanne 3: Eksperimenteerimine ()","text":""},{"location":"terraform_basics/homework/#ulesanne-11-muutujate-muutmine","title":"\u00dclesanne 1.1: Muutujate muutmine","text":"<p>Muutke <code>terraform.tfvars</code> faili:</p> <pre><code>project_name = \"minu-uus-projekt\"\nenvironment  = \"production\"\nfile_count   = 10\n</code></pre> <p>Rakendage muudatused:</p> <pre><code>terraform plan\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-21-uue-ressursi-lisamine","title":"\u00dclesanne 2.1: Uue ressursi lisamine","text":"<p>Lisage <code>main.tf</code> faili:</p> <pre><code># Loo konfiguratsioonifail iga keskkonna jaoks\nresource \"local_file\" \"env_config\" {\n  content = jsonencode({\n    environment = var.environment\n    settings = {\n      debug_mode    = var.environment != \"production\"\n      log_level     = var.environment == \"production\" ? \"error\" : \"debug\"\n      feature_flags = {\n        new_ui      = var.environment == \"development\"\n        analytics   = var.environment != \"development\"\n        monitoring  = var.environment == \"production\"\n      }\n    }\n  })\n  filename = \"${local_directory.config.path}/environment.json\"\n}\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-31-outputide-uuendamine","title":"\u00dclesanne 3.1: Output'ide uuendamine","text":"<p>Lisage <code>outputs.tf</code> faili:</p> <pre><code>output \"environment_config\" {\n  description = \"Keskkonna konfiguratsioon\"\n  value       = local_file.env_config.filename\n}\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-41-testimine","title":"\u00dclesanne 4.1: Testimine","text":"<pre><code>terraform apply\n./minu-uus-projekt/scripts/startup.sh\ncatu-uus-projekt/config/environment.json\n</code></pre>"},{"location":"terraform_basics/homework/#task-5-ulesanne-4-puhastamine-ja-dokumenteerimine","title":"Task 5: \u00dclesanne 4: Puhastamine ja dokumenteerimine ()","text":""},{"location":"terraform_basics/homework/#ulesanne-11-infrastruktuuri-kustutamine","title":"\u00dclesanne 1.1: Infrastruktuuri kustutamine","text":"<pre><code>terraform destroy\n</code></pre>"},{"location":"terraform_basics/homework/#ulesanne-21-kokkuvotte-kirjutamine","title":"\u00dclesanne 2.1: Kokkuv\u00f5tte kirjutamine","text":"<p>Vastake k\u00fcsimustele:</p> <ol> <li>Mis oli k\u00f5ige lihtsam Terraform'i juures?</li> <li>Mis oli k\u00f5ige keerulisem?</li> <li>Kuidas saaks seda projekti parandada?</li> <li>Mida \u00f5ppisite Infrastructure as Code kohta?</li> </ol>"},{"location":"terraform_basics/homework/#task-6-boonusulesanded-valikuline","title":"Task 6: Boonus\u00fclesanded (valikuline)","text":""},{"location":"terraform_basics/homework/#tingimused-ja-tsuklid","title":"Tingimused ja ts\u00fcklid","text":"<pre><code># Loo backup failid ainult production keskkonnas\nresource \"local_file\" \"backup_script\" {\n  count = var.environment == \"production\" ? 1 : 0\n\n  content = \"#!/bin/bash\\necho 'Backup started...\\n'\"\n  filename = \"${local_directory.scripts.path}/backup.sh\"\n  file_permission = \"0755\"\n}\n\n# Loo erinevad konfiguratsioonie failure iga faili jaoks\nresource \"local_file\" \"app_configs\" {\n  for_each = toset([\"api\", \"web\", \"worker\"])\n\n  content = jsonencode({\n    service = each.key\n    port    = each.key == \"api\" ? 3000 : each.key == \"web\" ? 8080 : 9000\n    env     = var.environment\n  })\n  filename = \"${local_directory.config.path}/${each.key}.json\"\n}\n</code></pre>"},{"location":"terraform_basics/homework/#locals-ja-funktsioonid","title":"Locals ja funktsioonid","text":"<pre><code>locals {\n  project_prefix = \"${var.project_name}-${var.environment}\"\n  timestamp_formatted = formatdate(\"YYYY-MM-DD-hhmm\", timestamp())\n\n  common_tags = {\n    Project     = var.project_name\n    Environment = var.environment\n    ManagedBy   = \"Terraform\"\n    CreatedAt   = local.timestamp_formatted\n  }\n}\n\nresource \"local_file\" \"metadata\" {\n  content = jsonencode(local.common_tags)\n  filename = \"${local_directory.config.path}/metadata.json\"\n}\n</code></pre>"},{"location":"terraform_basics/homework/#moodulite-struktuuri-ettevalmistamine","title":"Moodulite struktuuri ettevalmistamine","text":"<pre><code>mkdir -p modules/file-generator\n# Liigutage osa koodist moodulitesse\n</code></pre>"},{"location":"terraform_basics/homework/#task-7-kokkuvote","title":"Task 7: Kokkuv\u00f5te","text":"<p>T\u00e4na \u00f5ppisite: - Terraform'i p\u00f5hit\u00f5desid - kuidas kirjutada HCL koodi - Local provider'i - kuidas hallata kohalikke faile - Variables ja outputs - kuidas teha koodi paindlikuks - Infrastructure as Code - kuidas kood saab infrastruktuuri kirjeldada</p> <p>J\u00e4rgmised sammud: - \u00d5ppige rohkem provider'ite kohta - Proovige kohalikke provider'eid (local, null, random) - Uurige Terraform module'eid - Rakendage real-world projektides</p> <p>K\u00fcsimused? \ud83e\udd14</p>"},{"location":"terraform_basics/homework/#task-8-failide-naited","title":"Task 8: Failide n\u00e4ited","text":""},{"location":"terraform_basics/homework/#oodatav-terraform-output","title":"Oodatav terraform output:","text":"<pre><code>project_directory = \"./minu-terraform-projekt\"\nproject_structure = {\n  \"config_dir\" = \"./minu-terraform-projekt/config\"\n  \"docs_dir\" = \"./minu-terraform-projekt/docs\"\n  \"root_dir\" = \"./minu-terraform-projekt\"\n  \"scripts_dir\" = \"./minu-terraform-projekt/scripts\"\n}\nproject_summary = &lt;&lt;EOT\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nTerraform Projekt:u-terraform-projekt\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nKeskkond: development\nFailide arv: 7\nLoodud: 2024-01-15T10:30:45Z\nKaust: ./minu-terraform-projekt\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nEOT\n</code></pre>"},{"location":"terraform_basics/homework/#oodatav-failide-struktuur","title":"Oodatav failide struktuur:","text":"<pre><code>minu-terraform-projekt/\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 project.json\n\u2502   \u2514\u2500\u2500 app.yaml\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 startup.sh\n\u2502   \u2514\u2500\u2500 cleanup.sh\n\u2514\u2500\u2500 docs/\n    \u251c\u2500\u2500 example_1_abc123.txt\n    \u251c\u2500\u2500 example_2_abc123.txt\n    \u2514\u2500\u2500 example_3_abc123.txt\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/","title":"Terraform Basics Kodut\u00f6\u00f6: Kohalik Infrastruktuur","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Terraform'i praktiline kasutamine ja Infrastructure as Code m\u00f5istmine praktilist t\u00f6\u00f6d</p> <p>Fookus on Terraform'i ja Infrastructure as Code'i \u00f5ppimisel kohalikus keskkonnas!</p>"},{"location":"terraform_basics/homework_aws_backup/#projekt-kohalik-infrastruktuur-terraformiga","title":"Projekt: Kohalik Infrastruktuur Terraform'iga**","text":""},{"location":"terraform_basics/homework_aws_backup/#mis-on-see-projekt","title":"Mis on see projekt?","text":"<p>Looge kohalik infrastruktuur Terraform'i abil. See on nagu \"digitaalse maja ehitamine\" kohalikus arvutis - kirjutate \u00fcles, mida soovite, ja Terraform teeb selle teie eest.</p>"},{"location":"terraform_basics/homework_aws_backup/#mida-te-ehitate","title":"Mida te ehitate?","text":"<p>\ud83d\udcbb Kohalik Infrastruktuur - Failid ja kaustad - projektifailide struktuur - Konfiguratsioonid - JSON ja YAML failid - Skriptid - automatiseerimise skriptid</p>"},{"location":"terraform_basics/homework_aws_backup/#miks-see-on-kasulik","title":"Miks see on kasulik?","text":"<ul> <li>\u00d5pite Terraform'i - praktiline kogemus</li> <li>Lihtne alustada - t\u00f6\u00f6tab kohalikus arvutis</li> <li>Reaalne projekt - failide ja konfiguratsiooni haldamine</li> <li>Taaskasutatav - sama kood t\u00f6\u00f6tab erinevates arvutites</li> </ul>"},{"location":"terraform_basics/homework_aws_backup/#miks-see-arhitektuur-on-hea-oppimiseks","title":"Miks see arhitektuur on hea \u00f5ppimiseks?","text":"<p>\ud83c\udfaf Lihtne ja selge: - Kohalik - ei vaja internetti ega pilve - Praktiline - \u00f5pite Terraform'i p\u00f5hit\u00f5desid - Skaleeritav - saate hiljem liikuda pilve</p> <p>\ud83d\udd17 Infrastruktuuri komponendid: <pre><code>Kohalik Infrastruktuur:\n\u251c\u2500\u2500 Projektifailid\n\u251c\u2500\u2500 Konfiguratsioonid (JSON/YAML)\n\u2514\u2500\u2500 Skriptid ja dokumentatsioon\n</code></pre></p> <p>** Mida \u00f5pite:** - Kuidas kirjutada Terraform koodi - Kuidas kasutada variable'id ja outputs - Kuidas seadistada kohalikke ressursse - Kuidas debugida probleeme</p>"},{"location":"terraform_basics/homework_aws_backup/#arhitektuuri-diagramm","title":"Arhitektuuri diagramm","text":"<pre><code>graph TB\n    subgraph \"\ud83d\udcbb Kohalik Infrastruktuur\"\n        User[\ud83d\udc64 Kasutaja]\n        Files[\ud83d\udcc1 Failid&lt;br/&gt;Local Files]\n        Config[\u2699 Konfiguratsioonid&lt;br/&gt;JSON/YAML]\n        Scripts[\ud83d\udcdc Skriptid&lt;br/&gt;Bash/Python]\n    end\n\n    User --&gt; Files\n    User --&gt; Config\n    User --&gt; Scripts\n\n    subgraph \"\ud83d\udd27 Terraform\"\n        Code[\ud83d\udcdd Terraform Kood]\n        State[\ud83d\uddc4 State Fail]\n    end\n\n    Code --&gt; Files\n    Code --&gt; Config\n    Code --&gt; Scripts</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-1-projekti-struktuuri-loomine","title":"\u00dclesanne 1: Projekti struktuuri loomine ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-projekti-kataloogi-struktuur","title":"\u00dclesanne 1.1: Projekti kataloogi struktuur","text":"<p>Looge lihtne kataloogi struktuur:</p> <pre><code>terraform-basics-homework/\n\u251c\u2500\u2500 main.tf          # P\u00f5hiline Terraform fail\n\u251c\u2500\u2500 variables.tf     # Muutujad\n\u251c\u2500\u2500 outputs.tf       # V\u00e4ljundid\n\u251c\u2500\u2500 terraform.tfvars # Muutujate v\u00e4\u00e4rtused\n\u2514\u2500\u2500 README.md        # Projekti kirjeldus\n</code></pre> <p>V\u00f5i kasutage valmis n\u00e4idet:</p> <pre><code># Kopeerige valmis struktuur\ncp -r teacher_repo/terraform-basics-starter/templates/* .\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-providers-konfiguratsioon","title":"\u00dclesanne 2.1: Providers konfiguratsioon","text":"<p>Looge <code>providers.tf</code>:</p> <pre><code># Configure Terraform\nterraform {\n  required_version = \"&gt;= 1.0\"\n\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n\n# Local provider - t\u00f6\u00f6tab kohalikus failis\u00fcsteemis\n# Ei vajageid lisaseadeid\n</code></pre> <p>M\u00e4rkus state haldamise kohta:</p> <p>Kohalikus keskkonnas kasutame <code>terraform.tfstate</code> faili, mis luuakse automaatselt. See on OK \u00f5ppimiseks, aga real-world projektides kasutage remote state'd.</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-2-lihtne-terraform-projekt","title":"\u00dclesanne 2: Lihtne Terraform projekt ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-provider-konfiguratsioon","title":"\u00dclesanne 1.1: Provider konfiguratsioon","text":"<p>Alustame <code>main.tf</code> faili loomisega. See fail \u00fctleb Terraform'ile, milliseid teenuseid kasutame:</p> <pre><code>terraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n\n# Local provider - t\u00f6\u00f6tab kohalikus failis\u00fcsteemis\n# Random provider - genereerib juhuslikke v\u00e4\u00e4rtusi\n</code></pre> <p>Miks see vajalik on? - <code>terraform</code> blokk \u00fctleb Terraform'ile: \"Hei, ma tahan kasutada kohalikke teenuseid\" - <code>local</code> provider t\u00f6\u00f6tab failis\u00fcsteemiga - <code>random</code> provider aitab luua unikaalseid nimesid</p> <p>Mida see teeb? - Terraform teab n\u00fc\u00fcd, et peab kasutama kohalikke ressursse - K\u00f5ik failid luuakse kohalikus arvutis - Ei vaja internetti ega pilve</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-kataloogi-loomine","title":"\u00dclesanne 2.1: Kataloogi loomine","text":"<p>N\u00fc\u00fcd loome projekti kataloogi. M\u00f5tle seda nagu \"maja\" failis\u00fcsteemis:</p> <pre><code># Projekti kaust\nresource \"local_directory\" \"project_root\" {\n  path = \"${path.module}/${var.project_name}\"\n}\n\n# Alamkaustad\nresource \"local_directory\" \"config\" {\n  path = \"${local_directory.project_root.path}/config\"\n}\n\nresource \"local_directory\" \"scripts\" {\n  path = \"${local_directory.project_root.path}/scripts\"\n}\n</code></pre> <p>Miks see vajalik on? - Ilma kaustateta ei saa organiseerida faile - Kaustad on nagu \"toad majas\" - iga t\u00fc\u00fcp faile elab omas kohas - <code>path.module</code> n\u00e4itab, kus praegune Terraform fail asub</p> <p>Mida see teeb? - Loob projekti p\u00f5hikausta - Loob alamkaustad konfiguratsioonide ja skriptide jaoks - K\u00f5ik j\u00e4rgmised failid saab organiseeritult paigutada</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-konfiguratsioonifailide-loomine","title":"\u00dclesanne 3.1: Konfiguratsioonifailide loomine","text":"<p>N\u00fc\u00fcd loome konfiguratsioonifaile. M\u00f5tle seda nagu seadete failid:</p> <pre><code># Projekti konfiguratsioon JSON vormingus\nresource \"local_file\" \"project_config\" {\n  content = jsonencode({\n    project_name = var.project_name\n    environment  = var.environment\n    version      = \"1.0.0\"\n    created_at   = timestamp()\n    author       = \"Terraform Student\"\n  })\n  filename = \"${local_directory.config.path}/project.json\"\n}\n</code></pre> <p>Miks see vajalik on? - Konfiguratsioonifailid hoiavad projekti seadeid - JSON formaat on masinloetav ja inimloetav - <code>jsonencode()</code> muudab Terraform objekti JSON stringiks</p> <p>Mida see teeb? - Loob JSON faili projekti konfiguratsiooniga - Sisaldab projekti nime, versiooni ja loomise aega - Fail salvestatakse config/ kausta</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-41-skriptifailide-loomine","title":"\u00dclesanne 4.1: Skriptifailide loomine","text":"<p>N\u00fc\u00fcd loome skriptifaile. M\u00f5tle seda nagu automatiseerimise t\u00f6\u00f6riistad:</p> <pre><code># K\u00e4ivitamise skript\nresource \"local_file\" \"startup_script\" {\n  content = &lt;&lt;-EOF\n    #!/bin/bash\n    echo \"Tere tulemast ${var.project_name} projekti!\"\n    echo \"Keskkond: ${var.environment}\"\n    echo \"Versioon: 1.0.0\"\n    echo \"Kuup\u00e4ev: $(date)\"\n    echo \"Kaust: $(pwd)\"\n  EOF\n  filename = \"${local_directory.scripts.path}/startup.sh\"\n  file_permission = \"0755\"  # T\u00e4itmis\u00f5igus\n}\n</code></pre> <p>Miks see vajalik on? - Skriptid automatiseerivad korduvaid \u00fclesandeid - <code>file_permission = \"0755\"</code> annab t\u00e4itmis\u00f5iguse - <code>&lt;&lt;-EOF</code> v\u00f5imaldab kirjutada mitmerealine tekst</p> <p>Mida see teeb? - Loob Bash skripti, mis kuvab projekti infot - Annab skriptile t\u00e4itmis\u00f5igused - Kasutab muutujaid projekti nime ja keskkonna jaoks</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-51-route-table","title":"\u00dclesanne 5.1: Route Table","text":"<p>N\u00fc\u00fcd loome marsruutimistabeli. See \u00fctleb, kuidas liiklus liigub:</p> <pre><code># Route Table - marsruutimistabel\nresource \"aws_route_table\" \"public\" {\n  vpc_id = aws_vpc.main.id\n\n  route {\n    cidr_block = \"0.0.0.0/0\"  # K\u00f5ik liiklus\n    gateway_id = aws_internet_gateway.main.id  # L\u00e4heb internetti\n  }\n\n  tags = {\n    Name = \"${var.project_name}-public-rt\"\n  }\n}\n\n# Route Table Association - seob marsruutimistabeli subnet'iga\nresource \"aws_route_table_association\" \"public\" {\n  subnet_id      = aws_subnet.public.id\n  route_table_id = aws_route_table.public.id\n}\n</code></pre> <p>Miks see vajalik on? - Ilma marsruutimistabelita ei tea serverid, kuhu liiklus saata - <code>0.0.0.0/0</code> t\u00e4hendab \"k\u00f5ik liiklus\" - <code>association</code> seob selle reegli subnet'iga</p> <p>Mida see teeb? - <code>route</code> \u00fctleb: \"K\u00f5ik liiklus (0.0.0.0/0) l\u00e4heb internetti\" - <code>association</code> \u00fctleb: \"See reegel kehtib k\u00f5igile serveritele selles subnet'is\" - N\u00fc\u00fcd saavad serverid internetti p\u00e4\u00e4seda</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-61-security-group","title":"\u00dclesanne 6.1: Security Group","text":"<p>N\u00fc\u00fcd loome Security Group. M\u00f5tle seda nagu tulem\u00fc\u00fcr:</p> <pre><code># Security Group - tulem\u00fc\u00fcr reeglid\nresource \"aws_security_group\" \"web\" {\n  name        = \"${var.project_name}-web-sg\"\n  description = \"Security group for web server\"\n  vpc_id      = aws_vpc.main.id\n\n  # Lubame HTTP liiklust (port 80)\n  ingress {\n    description = \"HTTP\"\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]  # K\u00f5ikidele\n  }\n\n  # Lubame SSH liiklust (port 22)\n  ingress {\n    description = \"SSH\"\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]  # K\u00f5ikidele\n  }\n\n  # Lubame k\u00f5iki v\u00e4ljuvat liiklust\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = {\n    Name = \"${var.project_name}-web-sg\"\n  }\n}\n</code></pre> <p>Miks see vajalik on? - Ilma Security Group'ita on serverid avatud k\u00f5igile - See on nagu \"tulem\u00fc\u00fcr\" - kontrollib, kes p\u00e4\u00e4seb serverisse - Port 80 = veebilehed (HTTP) - Port 22 = serveri haldamine (SSH)</p> <p>Mida see teeb? - <code>ingress</code> = sissetulev liiklus (kellele lubame p\u00e4\u00e4seda) - <code>egress</code> = v\u00e4ljuv liiklus (kuhu lubamena) - Port 80 = lubame k\u00f5igile vaadata veebilehte - Port 22 = lubame k\u00f5igile \u00fchenduda serveriga (SSH)</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-71-ec2-instance","title":"\u00dclesanne 7.1: EC2 Instance","text":"<p>N\u00fc\u00fcd loome web serveri. See on nagu arvuti pilves:</p> <pre><code># EC2 Instance - web server\nresource \"aws_instance\" \"web\" {\n  ami           = data.aws_ami.ubuntu.id\n  instance_type = var.instance_type\n\n  subnet_id                   = aws_subnet.public.id\n  vpc_security_group_ids      = [aws_security_group.web.id]\n  associate_public_ip_address = true\n\n  # Skript, mis k\u00e4ivitub serveri k\u00e4ivitamisel\n  user_data = &lt;&lt;-EOF\n              #!/bin/bash\n              apt-get update\n              apt-get install -y nginx\n              systemctl start nginx\n              systemctl enable nginx\n              EOF\n\n  tags = {\n    Name = \"${var.project_name}-web-server\"\n  }\n}\n</code></pre> <p>Miks see vajalik on? - See on meie web server - siin jookseb veebileht - <code>user_data</code> installib automaatselt nginx'i - <code>associate_public_ip_address = true</code> annab avaliku IP</p> <p>Mida see teeb? - <code>ami</code> = operatsioonis\u00fcsteemi pilt (Ubuntu) - <code>instance_type</code> = serveri t\u00fc\u00fcp (t3.micro = v\u00e4ike ja odav) - <code>user_data</code> = skript, mis installib nginx'i serveri k\u00e4ivitamisel - <code>associate_public_ip_address = true</code> = annab avaliku IP, et saaksime serverile p\u00e4\u00e4seda</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-81-data-source","title":"\u00dclesanne 8.1: Data Source","text":"<p>Viimane samm - leiame Ubuntu AMI:</p> <pre><code># Data source - leiab uusima Ubuntu AMI\ndata \"aws_ami\" \"ubuntu\" {\n  most_recent = true\n  owners      = [\"099720109477\"]  # Canonical (Ubuntu looja)\n\n  filter {\n    name   = \"name\"\n    values = [\"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*\"]\n  }\n}\n</code></pre> <p>Miks see vajalik on? - <code>data</code> blokk ei loo uut ressurssi, vaid otsib olemasolevat - Meil on vaja Ubuntu AMI't serveri jaoks - <code>most_recent = true</code> v\u00f5tab uusima versiooni</p> <p>Mida see teeb? - <code>data</code> blokk otsib olemasolevat ressurssi (ei loo uut) - <code>most_recent = true</code> = v\u00f5tab uusima versiooni - <code>filter</code> = otsib ainult Ubuntu 20.04 AMI'sid - <code>owners</code> = ainult Canonical (Ubuntu looja) AMI'd</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-vpc-loomine","title":"\u00dclesanne 2.1: VPC loomine","text":"<p>Lisa VPC (Virtual Private Cloud) - see on nagu privaatne v\u00f5rk AWS's:</p> <pre><code># VPC - privaatne v\u00f5rk AWS's\nresource \"aws_vpc\" \"main\" {\n  cidr_block = \"10.0.0.0/16\"\n\n  tags = {\n    Name = \"${var.project_name}-vpc\"\n  }\n}\n</code></pre> <p>Mida see teeb? - Loob privaatse v\u00f5rgu AWS's - <code>cidr_block</code> m\u00e4\u00e4rab v\u00f5rgu suuruse (10.0.0.0/16 = 65,536 IP aadressi) - <code>tags</code> aitab identifitseerida ressurssi</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-subnet-loomine","title":"\u00dclesanne 3.1: Subnet loomine","text":"<p>Lisa subnet - see on nagu alamv\u00f5rk VPC sees:</p> <pre><code># Public Subnet - alamv\u00f5rk, mis on avalik internetile\nresource \"aws_subnet\" \"public\" {\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = \"10.0.1.0/24\"\n  availability_zone       = \"${var.aws_region}a\"\n  map_public_ip_on_launch = true\n\n  tags = {\n    Name = \"${var.project_name}-public-subnet\"\n  }\n}\n</code></pre> <p>Mida see teeb? - Loob alamv\u00f5rgu VPC sees - <code>map_public_ip_on_launch = true</code> annab serveritele avaliku IP - <code>availability_zone</code> m\u00e4\u00e4rab, millises AWS tsoonis asub</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-41-internet-gateway","title":"\u00dclesanne 4.1: Internet Gateway","text":"<p>Lisa Internet Gateway - see \u00fchendab v\u00f5rgu internetti:</p> <pre><code># Internet Gateway - \u00fchendab v\u00f5rgu internetti\nresource \"aws_internet_gateway\" \"main\" {\n  vpc_id = aws_vpc.main.id\n\n  tags = {\n    Name = \"${var.project_name}-igw\"\n  }\n}\n</code></pre> <p>Mida see teeb? - Loob \"v\u00e4rava\" internetti - Ilma selleta ei saa serverid internetti p\u00e4\u00e4seda</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-51-route-table_1","title":"\u00dclesanne 5.1: Route Table","text":"<p>Lisa marsruutimistabel - see \u00fctleb, kuidas liiklus liigub:</p> <pre><code># Route Table - marsruutimistabel\nresource \"aws_route_table\" \"public\" {\n  vpc_id = aws_vpc.main.id\n\n  route {\n    cidr_block = \"0.0.0.0/0\"  # K\u00f5ik liiklus\n    gateway_id = aws_internet_gateway.main.id  # L\u00e4heb internetti\n  }\n\n  tags = {\n    Name = \"${var.project_name}-public-rt\"\n  }\n}\n\n# Route Table Association - seob marsruutimistabeli subnet'iga\nresource \"aws_route_table_association\" \"public\" {\n  subnet_id      = aws_subnet.public.id\n  route_table_id = aws_route_table.public.id\n}\n</code></pre> <p>Mida see teeb? - <code>route</code> \u00fctleb: \"k\u00f5ik liiklus (0.0.0.0/0) l\u00e4heb internetti\" - <code>association</code> seob selle reegli subnet'iga</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-61-security-group_1","title":"\u00dclesanne 6.1: Security Group","text":"<p>Lisa Security Group - see on nagu tulem\u00fc\u00fcr:</p> <pre><code># Security Group - tulem\u00fc\u00fcr reeglid\nresource \"aws_security_group\" \"web\" {\n  name        = \"${var.project_name}-web-sg\"\n  description = \"Security group for web server\"\n  vpc_id      = aws_vpc.main.id\n\n  # Lubame HTTP liiklust (port 80)\n  ingress {\n    description = \"HTTP\"\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]  # K\u00f5ikidele\n  }\n\n  # Lubame SSH liiklust (port 22)\n  ingress {\n    description = \"SSH\"\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]  # K\u00f5ikidele\n  }\n\n  # Lubame k\u00f5iki v\u00e4ljuvat liiklust\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = {\n    Name = \"${var.project_name}-web-sg\"\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>ingress</code> = sissetulev liiklus (kellele lubame p\u00e4\u00e4seda) - <code>egress</code> = v\u00e4ljuv liiklus (kuhu lubamena) - Port 80 = HTTP (veebilehed) - Port 22 = SSH (serveri haldamine)</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-71-ec2-instance_1","title":"\u00dclesanne 7.1: EC2 Instance","text":"<p>Lisa web server:</p> <pre><code># EC2 Instance - web server\nresource \"aws_instance\" \"web\" {\n  ami           = data.aws_ami.ubuntu.id\n  instance_type = var.instance_type\n\n  subnet_id                   = aws_subnet.public.id\n  vpc_security_group_ids      = [aws_security_group.web.id]\n  associate_public_ip_address = true\n\n  # Skript, mis k\u00e4ivitub serveri k\u00e4ivitamisel\n  user_data = &lt;&lt;-EOF\n              #!/bin/bash\n              apt-get update\n              apt-get install -y nginx\n              systemctl start nginx\n              systemctl enable nginx\n              EOF\n\n  tags = {\n    Name = \"${var.project_name}-web-server\"\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>ami</code> = operatsioonis\u00fcsteemi pilt (Ubuntu) - <code>instance_type</code> = serveri t\u00fc\u00fcp (t3.micro = v\u00e4ike ja odav) - <code>user_data</code> = skript, mis installib nginx'i - <code>associate_public_ip_address = true</code> = annab avaliku IP</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-81-data-source_1","title":"\u00dclesanne 8.1: Data Source","text":"<p>Lisa data source Ubuntu AMI jaoks:</p> <pre><code># Data source - leiab uusima Ubuntu AMI\ndata \"aws_ami\" \"ubuntu\" {\n  most_recent = true\n  owners      = [\"099720109477\"]  # Canonical (Ubuntu looja)\n\n  filter {\n    name   = \"name\"\n    values = [\"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*\"]\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>data</code> blokk otsib olemasolevat ressurssi (ei loo uut) - <code>most_recent = true</code> = v\u00f5tab uusima versiooni - <code>filter</code> = otsib ainult Ubuntu 20.04 AMI'sid</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-3-variables-ja-outputs-failid","title":"\u00dclesanne 3: Variables ja outputs failid ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-variables-fail","title":"\u00dclesanne 1.1: Variables fail","text":"<p>N\u00fc\u00fcd loome <code>variables.tf</code> faili. See fail m\u00e4\u00e4rab muutujad, mida saame muuta:</p> <pre><code>variable \"project_name\" {\n  description = \"Projekti nimi\"\n  type        = string\n  default     = \"terraform-basics-homework\"\n}\n\nvariable \"environment\" {\n  description = \"Keskkonna nimi\"\n  type        = string\n  default     = \"development\"\n\n  validation {\n    condition     = contains([\"development\", \"staging\", \"production\"], var.environment)\n    error_message = \"Keskkond peab olema: development, staging v\u00f5i production.\"\n  }\n}\n\nvariable \"file_count\" {\n  description = \"Loodavate n\u00e4idisfailide arv\"\n  type        = number\n  default     = 5\n\n  validation {\n    condition     = var.file_count &gt; 0 &amp;&amp; var.file_count &lt;= 20\n    error_message = \"Failide arv peab olema vahemikus 1-20.\"\n  }\n}\n</code></pre> <p>Miks see vajalik on? - <code>variables</code> v\u00f5imaldavad meil muuta v\u00e4\u00e4rtusi ilma koodi muutmata - <code>default</code> v\u00e4\u00e4rtused t\u00e4hendavad, et kui me ei m\u00e4\u00e4ra midagi, kasutatakse neid - <code>validation</code> kontrollib, et v\u00e4\u00e4rtused oleksid korrektsed</p> <p>Mida see teeb? - <code>project_name</code> = projekti nimi, mida kasutatakse failide nimetamisel - <code>environment</code> = keskkonna nimi (development, staging, production) - <code>file_count</code> = kui palju n\u00e4idisfaile luua (1-20 vahel)</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-outputs-fail","title":"\u00dclesanne 2.1: Outputs fail","text":"<p>N\u00fc\u00fcd loome <code>outputs.tf</code> faili. See fail n\u00e4itab meile olulisi infosid p\u00e4rast k\u00e4ivitamist:</p> <pre><code>output \"project_directory\" {\n  description = \"Projekti kausta tee\"\n  value       = local_directory.project_root.path\n}\n\noutput \"config_files\" {\n  description = \"Loodud konfiguratsioonifailide nimekiri\"\n  value = [\n    local_file.project_config.filename,\n  ]\n}\n\noutput \"script_files\" {\n  description = \"Loodud skriptifailide nimekiri\"\n  value = [\n    local_file.startup_script.filename,\n  ]\n}\n\noutput \"project_summary\" {\n  description = \"Projekti kokkuv\u00f5te\"\n  value = \"Projekt '${var.project_name}' keskkond '${var.environment}' loodud ${timestamp()}\"\n}\n</code></pre> <p>Miks see vajalik on? - <code>outputs</code> n\u00e4itavad meile olulisi infosid p\u00e4rast <code>terraform apply</code> - Ilma nendeta peaksime k\u00e4sitsi failis\u00fcsteemist otsima - <code>project_summary</code> annab meile kohe \u00fclevaate projektist</p> <p>Mida see teeb? - <code>project_directory</code> = Projekti kausta asukoht - <code>config_files</code> = K\u00f5ik loodud konfiguratsioonifailid - <code>script_files</code> = K\u00f5ik loodud skriptifailid - <code>project_summary</code> = Projekti kokkuv\u00f5tte string</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-terraformtfvars-fail","title":"\u00dclesanne 3.1: Terraform.tfvars fail","text":"<p>N\u00fc\u00fcd loome <code>terraform.tfvars</code> faili. See fail m\u00e4\u00e4rab muutujate v\u00e4\u00e4rtused:</p> <pre><code>aws_region   = \"us-east-1\"\nproject_name = \"terraform-basics-homework\"\ninstance_type = \"t3.micro\"\n</code></pre> <p>Miks see vajalik on? - <code>terraform.tfvars</code> fail m\u00e4\u00e4rab muutujate v\u00e4\u00e4rtused - Saame muuta v\u00e4\u00e4rtusi ilma koodi muutmata - Kui tahame muuta regiooni, muudame ainult <code>aws_region</code> v\u00e4\u00e4rtust</p> <p>Mida see teeb? - <code>aws_region = \"us-east-1\"</code> = t\u00f6\u00f6tame US East regioonis - <code>project_name = \"terraform-basics-homework\"</code> = projekti nimi - <code>instance_type = \"t3.micro\"</code> = kasutame v\u00e4ikest ja odavat serverit</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-41-projekti-kaivitamine","title":"\u00dclesanne 4.1: Projekti k\u00e4ivitamine","text":"<p>N\u00fc\u00fcd k\u00e4ivitame projekti. J\u00e4rgige samme t\u00e4pselt:</p> <pre><code># Samm 1: Initsialiseerige Terraform\nterraform init\n</code></pre> <p>Mida see teeb? - Allalaadib AWS provider'i - Seadistab Terraform'i t\u00f6\u00f6tama</p> <pre><code># Samm 2: Vaadake, mida luuakse\nterraform plan\n</code></pre> <p>Mida see teeb? - N\u00e4itab, mida Terraform kavatseb luua - Kontrollige, et k\u00f5ik \u00f5ige on - Kui midagi valesti, parandage ja k\u00e4ivitage uuesti</p> <pre><code># Samm 3: Looge infrastruktuur\nterraform apply\n</code></pre> <p>Mida see teeb? - Loob k\u00f5ik ressursid AWS's - V\u00f5tab umbes 2-utit - Kui k\u00fcsib kinnitust, kirjutage \"yes\"</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-51-testige-web-serverit","title":"\u00dclesanne 5.1: Testige web serverit","text":"<p>P\u00e4rast <code>terraform apply</code> l\u00f5ppemist n\u00e4ete outputs:</p> <pre><code>web_server_public_ip = \"3.123.45.67\"\nweb_server_url = \"http://3.123.45.67\"\n</code></pre> <p>Avage brauser jage aadressile: <pre><code>http://[web_server_public_ip]\n</code></pre></p> <p>Mida peaksite n\u00e4gema? - Nginx tervitusleht: \"Welcome to nginx!\" - See t\u00e4hendab, et k\u00f5ik t\u00f6\u00f6tab \u00f5igesti!</p> <p>Miks see t\u00f6\u00f6tab? - Server on k\u00e4ivitatud Ubuntu'ga - Nginx on automaatselt installitud (<code>user_data</code> skript) - Security Group lubab HTTP liiklust (port 80) - Avalik IP v\u00f5imaldab meil serverile p\u00e4\u00e4seda   password = var.db_password</p> <p>vpc_security_group_ids = var.security_group_ids   db_subnet_group_name   = aws_db_subnet_group.main.name</p> <p>skip_final_snapshot = true   deletion_protection = var.environment == \"production\" ? true : false</p> <p>tags = {     Name = \"\\({var.project_name}-\\)-db\"   } } <pre><code>### \u00dclesanne 3.1: Database module outputs\n\n**Looge `modules/database/outputs.tf`:**\n\n```hcl\noutput \"db_instance_id\" {\n  description = \"ID of the RDS instance\"\n  value       = aws_db_instance.main.id\n}\n\noutput \"db_endpoint\" {\n  description = \"Endpoint of the RDS instance\"\n  value       = aws_db_instance.main.endpoint\n}\n\noutput \"db_port\" {\n  description = \"Port of the RDS instance\"\n  value       = aws_db_instance.main.port\n}\n</code></pre></p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-4-aws-konsooli-uurimine","title":"\u00dclesanne 4: AWS konsooli uurimine ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-aws-konsooli-avamine","title":"\u00dclesanne 1.1: AWS konsooli avamine","text":"<p>Avage AWS konsool ja vaadake, mida Terraform on loonud:</p> <ol> <li>Minge AWS konsooli: https://console.aws.amazon.com</li> <li>Valige regioon: Vaadake, kas on valitud \u00f5ige regioon (us-east-1)</li> <li>Vaadake EC2 teenust: Minge EC2 \u2192 Instances</li> </ol> <p>Mida peaksite n\u00e4gema? - \u00dcks EC2 instance nimega \"terraform-basics-homework-web-server\" - Instance state peaks olema \"running\" - Public IP peaks olema sama, mis Terraform outputs'is</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-vpc-uurimine","title":"\u00dclesanne 2.1: VPC uurimine","text":"<p>Minge VPC teenusse ja vaadake v\u00f5rku:</p> <ol> <li>Minge VPC teenusse: VPC \u2192 Your VPCs</li> <li>Vaadake VPC't: Peaksite n\u00e4gema VPC't nimega \"terraform-basics-homework-vpc\"</li> <li>Vaadake subnets: Minge Subnets ja vaadake subnet'i</li> </ol> <p>Mida peaksite n\u00e4gema? - VPC CIDR: 10.0.0.0/16 - Subnet CIDR: 10.0.1.0/24 - Subnet on \"public\" (map public IP = yes)</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-security-groups-uurimine","title":"\u00dclesanne 3.1: Security Groups uurimine","text":"<p>Minge Security Groups ja vaadake tulem\u00fc\u00fcri reegleid:</p> <ol> <li>Minge Security Groups: VPC \u2192 Security Groups</li> <li>Vaadake web security group'i: Nimi peaks olema \"terraform-basics-homework-web-sg\"</li> </ol> <p>Mida peaksite n\u00e4gema? - Inbound rules: Port 80 (HTTP) ja Port 22 (SSH) - Outbound rules: All traffic (0.0.0.0/0)</p> <p>Miks see oluline on? - Security Groups on nagu tulem\u00fc\u00fcr - Need kontrollivad, kes p\u00e4\u00e4seb serverisse - Ilma nendeta ei saaks veebilehte vaadata</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-5-eksperimenteerimine-ja-muutmine","title":"\u00dclesanne 5: Eksperimenteerimine ja muutmine ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-regiooni-muutmine","title":"\u00dclesanne 1.1: Regiooni muutmine","text":"<p>Muutke AWS regiooni ja vaadake, mis juhtub:</p> <ol> <li> <p>Muutke <code>terraform.tfvars</code> faili: <pre><code>aws_region   = \"eu-west-1\"  # Muutke us-east-1 asemel\nproject_name = \"terraform-basics-homework\"\ninstance_type = \"t3.micro\"\n</code></pre></p> </li> <li> <p>K\u00e4ivitage uuesti: <pre><code>terraform plan\nterraform apply\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Terraform \u00fctleb: \"aws_vpc.main: Destroying\" ja \"aws_vpc.main: Creating\" - K\u00f5ik ressursid luuakse uues regioonis - Uus IP aadress</p> <p>Miks see juhtub? - AWS regioonid on erinevad andmekeskused - Ressursid ei saa liikuda regioonide vahel - Terraform kustutab vanad ja loob uued</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-instance-tuubi-muutmine","title":"\u00dclesanne 2.1: Instance t\u00fc\u00fcbi muutmine","text":"<p>Muutke serveri t\u00fc\u00fcpi ja vaadake erinevust:</p> <ol> <li> <p>Muutke <code>terraform.tfvars</code> faili: <pre><code>aws_region   = \"eu-west-1\"\nproject_name = \"terraform-basics-homework\"\ninstance_type = \"t3.small\"  # Muutke t3.micro asemel\n</code></pre></p> </li> <li> <p>K\u00e4ivitage: <pre><code>terraform plan\nterraform apply\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Terraform \u00fctleb: \"aws_instance.web: Modifying\" - Server taask\u00e4ivitatakse - Veebileht j\u00e4\u00e4b samaks</p> <p>Miks see juhtub? - Instance t\u00fc\u00fcp m\u00e4\u00e4rab serveri v\u00f5imsuse - <code>t3.small</code> on v\u00f5imsam kui <code>t3.micro</code> - Server peab taask\u00e4ivituma, et muutused j\u00f5uaksid kohale</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-https-lisamine","title":"\u00dclesanne 3.1: HTTPS lisamine","text":"<p>Lisage HTTPS tugi (port 443):</p> <ol> <li> <p>Muutke <code>main.tf</code> faili security group'i: <pre><code># Lisa see ingress reegel olemasoleva HTTP reegli juurde\ningress {\n  description = \"HTTPS\"\n  from_port   = 443\n  to_port     = 443\n  protocol    = \"tcp\"\n  cidr_blocks = [\"0.0.0.0/0\"]\n}\n</code></pre></p> </li> <li> <p>K\u00e4ivitage: <pre><code>terraform plan\nterraform apply\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Terraform \u00fctleb: \"aws_security_group.web: Modifying\" - Security group muudetakse ilma serveri taask\u00e4ivitamata</p> <p>Miks see juhtub? - Security Groups on v\u00f5rgu tasemel - Server ei pea taask\u00e4ivituma - Muutused on kohe aktiivsed</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-41-custom-veebileht","title":"\u00dclesanne 4.1: Custom veebileht","text":"<p>Lisage oma veebileht serverile:</p> <ol> <li> <p>Muutke <code>main.tf</code> faili user_data skripti: <pre><code>user_data = &lt;&lt;-EOF\n#!/bin/bash\napt-get update\napt-get install -y nginx\nsystemctl start nginx\nsystemctl enable nginx\n\n# Lisa custom veebileht\ncat &gt; /var/www/html/index.html &lt;&lt; 'HTML'\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Minu Terraform Projekt&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Tere! See onu Terraform projekt&lt;/h1&gt;\n    &lt;p&gt;Server: $(hostname)&lt;/p&gt;\n    &lt;p&gt;Kuup\u00e4ev: $(date)&lt;/p&gt;\n    &lt;p&gt;Regioon: eu-west-1&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nHTML\nEOF\n</code></pre></p> </li> <li> <p>K\u00e4ivitage: <pre><code>terraform plan\nterraform apply\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Terraform \u00fctleb: \"aws_instance.web: Modifying\" - Server taask\u00e4ivitatakse - Brauseris n\u00e4ete oma custom veebilehte</p> <p>Miks server taask\u00e4ivitatakse? - <code>user_data</code> muutub ainult serveri taask\u00e4ivitamisel - Terraform kustutab vana serveri ja loob uue</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-6-probleemide-lahendamine","title":"\u00dclesanne 6: Probleemide lahendamine ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-vale-regioon","title":"\u00dclesanne 1.1: Vale regioon","text":"<p>Proovige kasutada vale regiooni ja vaadake, mis juhtub:</p> <ol> <li> <p>Muutke <code>terraform.tfvars</code> faili: <pre><code>aws_region   = \"invalid-region\"  # Vale regioon\nproject_name = \"terraform-basics-homework\"\ninstance_type = \"t3.micro\"\n</code></pre></p> </li> <li> <p>K\u00e4ivitage: <pre><code>terraform plan\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Error: \"Invalid region\" - Terraform ei saa t\u00f6\u00f6tada</p> <p>Kuidas parandada? - Muutke regioon tagasi \u00f5igeks (nt eu-west-1) - K\u00e4ivitage <code>terraform plan</code> uuesti</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-vale-instance-tuup","title":"\u00dclesanne 2.1: Vale instance t\u00fc\u00fcp","text":"<p>Proovige kasutada vale instance t\u00fc\u00fcpi:</p> <ol> <li> <p>Muutke <code>terraform.tfvars</code> faili: <pre><code>aws_region   = \"eu-west-1\"\nproject_name = \"terraform-basics-homework\"\ninstance_type = \"invalid-type\"  # Vale t\u00fc\u00fcp\n</code></pre></p> </li> <li> <p>K\u00e4ivitage: <pre><code>terraform plan\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Error: \"Invalid instance type\" - Terraform ei saa luua serverit</p> <p>Kuidas parandada? - Muutke t\u00fc\u00fcp tagasi \u00f5igeks (nt t3.micro) - K\u00e4ivitage <code>terraform plan</code> uuesti</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-vale-cidr-blokk","title":"\u00dclesanne 3.1: Vale CIDR blokk","text":"<p>Proovige kasutada vale VPC CIDR blokki:</p> <ol> <li> <p>Muutke <code>main.tf</code> faili VPC CIDR: <pre><code>cidr_block = \"256.256.256.256/16\"  # Vale CIDR\n</code></pre></p> </li> <li> <p>K\u00e4ivitage: <pre><code>terraform plan\n</code></pre></p> </li> </ol> <p>Mida peaksite n\u00e4gema? - Error: \"Invalid CIDR block\" - Terraform ei saa luua VPC't</p> <p>Kuidas parandada? - Muutke CIDR tagasi \u00f5igeks (10.0.0.0/16) - K\u00e4ivitage <code>terraform plan</code> uuesti</p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-7-projekti-testimine-ja-puhastamine","title":"\u00dclesanne 7: Projekti testimine ja puhastamine ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-testige-koiki-muudatusi","title":"\u00dclesanne 1.1: Testige k\u00f5iki muudatusi","text":"<p>Testige, et k\u00f5ik t\u00f6\u00f6tab:</p> <ol> <li> <p>Avage brauser jage aadressile: <pre><code>http://[web_server_public_ip]\n</code></pre></p> </li> <li> <p>Vaadake, et n\u00e4ete oma custom veebilehte</p> </li> <li> <p>Kontrollige AWS konsoolis, et k\u00f5ik ressursid on olemas</p> </li> </ol>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-puhastage-ressursid","title":"\u00dclesanne 2.1: Puhastage ressursid","text":"<p>Kustutage k\u00f5ik ressursid:</p> <pre><code>terraform destroy\n</code></pre> <p>Miks see oluline on? - AWS v\u00f5tab raha iga tunni eest - <code>t3.small</code> maksab umbes $0.02/tund - Kustutades s\u00e4\u00e4stame raha</p> <p>Mida peaksite n\u00e4gema? - \"Destroy complete!\" - k\u00f5ik ressursid on kustutatud - AWS konsoolis ei peaks olema \u00fchtegi ressurssi</p> <pre><code>transition {\n  days          = 30\n  storage_class = \"STANDARD_IA\"\n}\n\ntransition {\n  days          = 90\n  storage_class = \"GLACIER\"\n}\n\nexpiration {\n  days = 365\n}\n</code></pre> <p>} } ``` </p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-storage-module-outputs","title":"\u00dclesanne 3.1: Storage module outputs","text":"<p>Looge <code>modules/storage/outputs.tf</code>: <code>hcl output \"bucket_id\" {   description = \"ID of the S3 bucket\"   value       = aws_s3_bucket.main.id }  output \"bucket_arn\" {   description = \"ARN of the S3 bucket\"   value       = aws_s3_bucket.main.arn }  output \"bucket_name\" {   description = \"Name of the S3 bucket\"   value       = aws_s3_bucket.main.bucket }</code></p>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-6-environment-konfiguratsioonid","title":"\u00dclesanne 6: Environment konfiguratsioonid ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-development-environment","title":"\u00dclesanne 1.1: Development environment","text":"<p>Looge <code>environments/dev/main.tf</code>:</p> <pre><code># Import shared configuration\nterraform {\n  source = \"../../shared\"\n}\n\n# Import modules\nmodule \"networking\" {\n  source = \"../../modules/networking\"\n\n  environment         = \"dev\"\n  project_name        = \"terraform-basics-homework\"\n  vpc_cidr           = \"10.0.0.0/16\"\n  public_subnet_cidr = \"10.0.1.0/24\"\n  private_subnet_cidr = \"10.0.2.0/24\"\n  availability_zone  = \"us-west-2a\"\n}\n\nmodule \"compute\" {\n  source = \"../../modules/compute\"\n\n  environment        = \"dev\"\n  project_name       = \"terraform-basics-homework\"\n  subnet_id          = module.networking.public_subnet_id\n  security_group_ids = [module.networking.web_security_group_id]\n  instance_type      = \"t2.micro\"\n  instance_count     = 1\n  enable_autoscaling = false\n}\n\nmodule \"database\" {\n  source = \"../../modules/database\"\n\n  environment         = \"dev\"\n  project_name        = \"terraform-basics-homework\"\n  subnet_id           = module.networking.private_subnet_id\n  security_group_ids  = [module.networking.database_security_group_id]\n  instance_class      = \"db.t3.micro\"\n  allocated_storage   = 20\n  db_name             = \"webapp_dev\"\n  db_username         = \"admin\"\n  db_password         = var.db_password\n}\n\nmodule \"storage\" {\n  source = \"../../modules/storage\"\n\n  environment        = \"dev\"\n  project_name       = \"terraform-basics-homework\"\n  bucket_name        = \"terraform-basics-homework-dev-logs-${random_id.bucket_suffix.hex}\"\n  enable_versioning  = false\n  enable_logging     = true\n}\n\n# Random ID for unique bucket names\nresource \"random_id\" \"bucket_suffix\" {\n  byte_length = 4\n}\n</code></pre> <p>Looge <code>environments/dev/variables.tf</code>:</p> <pre><code>variable \"aws_region\" {\n  description = \"AWS region\"\n  type        = string\n  default     = \"us-west-2\"\n}\n\nvariable \"environment\" {\n  description = \"Environment name\"\n  type        = string\n  default     = \"dev\"\n}\n\nvariable \"project_name\" {\n  description = \"Project name\"\n  type        = string\n  default     = \"terraform-basics-homework\"\n}\n\nvariable \"db_password\" {\n  description = \"Database password\"\n  type        = string\n  sensitive   = true\n}\n</code></pre> <p>Looge <code>environments/dev/terraform.tfvars</code>:</p> <pre><code>aws_region   = \"us-west-2\"\nenvironment  = \"dev\"\nproject_name = \"terraform-basics-homework\"\ndb_password  = \"dev_password_123\"\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-staging-environment","title":"\u00dclesanne 2.1: Staging environment","text":"<p>Looge <code>environments/staging/main.tf</code>:</p> <pre><code># Import shared configuration\nterraform {\n  source = \"../../shared\"\n}\n\n# Import modules\nmodule \"networking\" {\n  source = \"../../modules/networking\"\n\n  environment         = \"staging\"\n  project_name        = \"terraform-basics-homework\"\n  vpc_cidr           = \"10.1.0.0/16\"\n  public_subnet_cidr = \"10.1.1.0/24\"\n  private_subnet_cidr = \"10.1.2.0/24\"\n  availability_zone  = \"us-west-2a\"\n}\n\nmodule \"compute\" {\n  source = \"../../modules/compute\"\n\n  environment        = \"staging\"\n  project_name       = \"terraform-basics-homework\"\n  subnet_id          = module.networking.public_subnet_id\n  security_group_ids = [module.networking.web_security_group_id]\n  instance_type      = \"t2.small\"\n  instance_count     = 1\n  enable_autoscaling = false\n}\n\nmodule \"database\" {\n  source = \"../../modules/database\"\n\n  environment         = \"staging\"\n  project_name        = \"terraform-basics-homework\"\n  subnet_id           = module.networking.private_subnet_id\n  security_group_ids  = [module.networking.database_security_group_id]\n  instance_class      = \"db.t3.small\"\n  allocated_storage   = 50\n  db_name             = \"webapp_staging\"\n  db_username         = \"admin\"\n  db_password         = var.db_password\n}\n\nmodule \"storage\" {\n  source = \"../../modules/storage\"\n\n  environment        = \"staging\"\n  project_name       = \"terraform-basics-homework\"\n  bucket_name        = \"terraform-basics-homework-staging-logs-${random_id.bucket_suffix.hex}\"\n  enable_versioning  = true\n  enable_logging     = true\n}\n\n# Random ID for unique bucket names\nresource \"random_id\" \"bucket_suffix\" {\n  byte_length = 4\n}\n</code></pre> <p>Looge <code>environments/staging/terraform.tfvars</code>:</p> <pre><code>aws_region   = \"us-west-2\"\nenvironment  = \"staging\"\nproject_name = \"terraform-basics-homework\"\ndb_password  = \"staging_password_456\"\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-production-environment","title":"\u00dclesanne 3.1: Production environment","text":"<p>Looge <code>environments/prod/main.tf</code>:</p> <pre><code># Import shared configuration\nterraform {\n  source = \"../../shared\"\n}\n\n# Import modules\nmodule \"networking\" {\n  source = \"../../modules/networking\"\n\n  environment         = \"prod\"\n  project_name        = \"terraform-basics-homework\"\n  vpc_cidr           = \"10.2.0.0/16\"\n  public_subnet_cidr = \"10.2.1.0/24\"\n  private_subnet_cidr = \"10.2.2.0/24\"\n  availability_zone  = \"us-west-2a\"\n}\n\nmodule \"compute\" {\n  source = \"../../modules/compute\"\n\n  environment        = \"prod\"\n  project_name       = \"terraform-basics-homework\"\n  subnet_id          = module.networking.public_subnet_id\n  security_group_ids = [module.networking.web_security_group_id]\n  instance_type      = \"t2.medium\"\n  instance_count     = 2\n  enable_autoscaling = true\n_size           = 2\n  max_size           = 5\n  desired_capacity   = 2\n}\n\nmodule \"database\" {\n  source = \"../../modules/database\"\n\n  environment         = \"prod\"\n  project_name        = \"terraform-basics-homework\"\n  subnet_id           = module.networking.private_subnet_id\n  security_group_ids  = [module.networking.database_security_group_id]\n  instance_class      = \"db.t3.medium\"\n  allocated_storage   = 100\n  db_name             = \"webapp_prod\"\n  db_username         = \"admin\"\n  db_password         = var.db_password\n}\n\nmodule \"storage\" {\n  source = \"../../modules/storage\"\n\n  environment        = \"prod\"\n  project_name       = \"terraform-basics-homework\"\n  bucket_name        = \"terraform-basics-homework-prod-logs-${random_id.bucket_suffix.hex}\"\n  enable_versioning  = true\n  enable_logging     = true\n}\n\n# Random ID for unique bucket names\nresource \"random_id\" \"bucket_suffix\" {\n  byte_length = 4\n}\n</code></pre> <p>Looge <code>environments/prod/terraform.tfvars</code>:</p> <pre><code>aws_region   = \"us-west-2\"\nenvironment  = \"prod\"\nproject_name = \"terraform-basics-homework\"\ndb_password  = \"prod_password_789\"\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-7-juurutamine-ja-testimine","title":"\u00dclesanne 7: Juurutamine ja testimine ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-development-keskkonna-juurutamine","title":"\u00dclesanne 1.1: Development keskkonna juurutamine","text":"<pre><code># Navigate to development environment\ncd environments/dev\n\n# Initialize Terraform\nterraform init\n\n# Plan the deployment\nterraform plan\n\n# Apply the configuration\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-21-staging-keskkonna-juurutamine","title":"\u00dclesanne 2.1: Staging keskkonna juurutamine","text":"<pre><code># Navigate to staging environment\ncd ../staging\n\n# Initialize Terraform\nterraform init\n\n# Plan the deployment\nterraform plan\n\n# Apply the configuration\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-31-production-keskkonna-juurutamine","title":"\u00dclesanne 3.1: Production keskkonna juurutamine","text":"<pre><code># Navigate to production environment\ncd ../prod\n\n# Initialize Terraform\nterraform init\n\n# Plan the deployment\nterraform plan\n\n# Apply the configuration\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-41-tulemuste-kontrollimine","title":"\u00dclesanne 4.1: Tulemuste kontrollimine","text":"<p>Kontrollige loodud ressursse:</p> <pre><code># Check development environment\ncd ../dev\nterraform output\n\n# Check staging environment\ncd ../staging\nterraform output\n\n# Check production environment\ncd ../prod\nterraform output\n</code></pre> <p>Testige web rakendusi:</p> <pre><code># Get public IPs\nterraform output instance_public_ips\n\n# Test web application\ncurl http://&lt;public-ip&gt;\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#ulesanne-8-dokumentatsioon-ja-cleanup","title":"\u00dclesanne 8: Dokumentatsioon ja cleanup ()","text":""},{"location":"terraform_basics/homework_aws_backup/#ulesanne-11-readme-faili-loomine","title":"\u00dclesanne 1.1: README faili loomine","text":"<p>Looge <code>README.md</code>:</p> <pre><code># Kodut\u00f6\u00f6: Multi-Environment Terraform Infrastructure\n\n## \u00dclevaade\n\nSee projekt demonstreerib, kuidas kasutada Terraform'i multi-environment infrastruktuuri haldamiseks web rakenduse jaoks.\n\n## Arhitektuur\n\nInfrastruktuur sisaldab:\n- **V\u00f5rk**: VPC, subnets, security groups\n- **Arvutus**: EC2 instances v\u00f5i Auto Scaling Groups\n- **Andmebaas**: RDS PostgreSQL instances\n- **Salvestamine**: S3 buckets logide jaoks\n\n## Keskkonnad\n\n- **Development**: \u00dcks instance,imaalsed ressursid\n- **Staging**: \u00dcks instance, keskmised ressursid\n- **Production**: Auto Scaling Group, k\u00f5rge k\u00e4ttesaadavus\n\n## Kasutamine\n\n### Eeltingimused\n\n- Terraform &gt;= 1.0\n- AWS CLI seadistatud\n- Sobivad AWS \u00f5igused\n\n### Juurutamine\n\n1. **Development keskkond:**\n   ```bash\n   cd environments/dev\n   terraform init\n   terraform plan\n   terraform apply\n   ```\n\n2. **Staging keskkond:**\n   ```bash\n   cd environments/staging\n   terraform init\n   terraform plan\n   terraform apply\n   ```\n\n3. **Production keskkond:**\n   ```bash\n   cd environments/prod\n   terraform init\n   terraform plan\n   terraform apply\n   ```\n\n### Puhastamine\n\nK\u00f5ikide ressursside kustutamiseks:\n```bash\nterraform destroy\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#projekti-struktuur","title":"Projekti struktuur","text":"<pre><code>terraform-basics-homework/\n\u251c\u2500\u2500 environments/          # Keskkonna-spetsiifilised konfiguratsioonid\n\u251c\u2500\u2500 modules/              # Taaskasutatavad Terraform moodulid\n\u251c\u2500\u2500 shared/               # Jagatud provider konfiguratsioon\n\u2514\u2500\u2500 README.md            # See fail\n</code></pre>"},{"location":"terraform_basics/homework_aws_backup/#turvalisuse-markused","title":"Turvalisuse m\u00e4rkused","text":"<ul> <li>Andmebaasi paroolid on salvestatud muutujatena (kasutage AWS Secrets Manager production'is)</li> <li>Security groups on seadistatud p\u00f5hiliseks web juurdep\u00e4\u00e4suks</li> <li>S3 buckets on avalik juurdep\u00e4\u00e4s blokeeritud</li> <li>Production keskkonnal on kustutamise kaitse lubatud</li> </ul>"},{"location":"terraform_basics/homework_aws_backup/#kulude-optimeerimine","title":"Kulude optimeerimine","text":"<ul> <li>Development ja staging kasutavad v\u00e4iksemaid instance t\u00fc\u00fcpe</li> <li>Auto scaling on lubatud ainult production'is</li> <li>S3 lifecycle policies on seadistatud kulude optimeerimiseks <pre><code>### \u00dclesanne 2.1: Ressursside kustutamine\n\n```bash\n# Destroy production environment\ncd environments/prod\nterraform destroy\n\n# Destroy staging environment\ncd ../staging\nterraform destroy\n\n# Destroy development environment\ncd ../dev\nterraform destroy\n</code></pre></li> </ul>"},{"location":"terraform_basics/homework_aws_backup/#lisaressursid","title":"Lisaressursid","text":"<ul> <li>Terraform AWS Provider: https://registry.terraform.io/providers/hashicorp/aws/latest/docs</li> <li>Terraform Modules: https://www.terraform.io/docs/language/modules</li> <li>AWS Best Practices: https://docs.aws.amazon.com/wellarchitected/latest/framework/</li> <li>Terraform State Management: https://www.terraform.io/docs/language/state</li> </ul>"},{"location":"terraform_basics/homework_aws_backup/#kusimused-ja-abi","title":"\ud83e\udd14 K\u00fcsimused ja abi","text":"<p>Kui teil on k\u00fcsimusi v\u00f5i probleeme:</p> <ol> <li>Kontrollige dokumentatsiooni - Terraform ja AWS dokumentatsioon</li> <li>Vaadake n\u00e4iteid - Terraform registry ja GitHub</li> <li>Debugige sammud - kasutage <code>terraform plan</code> ja <code>terraform validate</code></li> <li>K\u00fcsige abi - \u00f5petajalt v\u00f5i klassikaaslastelt</li> </ol> <p>Edu kodut\u00f6\u00f6ga! \ud83d\ude80</p>"},{"location":"terraform_basics/homework_simple/","title":"Terraform Basics Kodut\u00f6\u00f6: Kohalik Infrastruktuur","text":"<p>T\u00e4htaeg: J\u00e4rgmise n\u00e4dala alguseks Eesm\u00e4rk: Terraform'i praktiline kasutamine ja Infrastructure as Code m\u00f5istmine praktilist t\u00f6\u00f6d</p> <p>Fookus on Terraform'i ja Infrastructure as Code'i \u00f5ppimisel kohalikus keskkonnas!</p>"},{"location":"terraform_basics/homework_simple/#projekt-kohalik-infrastruktuur-terraformiga","title":"Projekt: Kohalik Infrastruktuur Terraform'iga**","text":""},{"location":"terraform_basics/homework_simple/#mis-on-see-projekt","title":"Mis on see projekt?","text":"<p>Looge kohalik infrastruktuur Terraform'i abil. See on nagu \"digitaalse maja ehitamine\" kohalikus arvutis - kirjutate \u00fcles, mida soovite, ja Terraform teeb selle teie eest.</p>"},{"location":"terraform_basics/homework_simple/#mida-te-ehitate","title":"Mida te ehitate?","text":"<p>\ud83d\udcbb Kohalik Infrastruktuur - Failid ja kaustad - projektifailide struktuur - Konfiguratsioonid - JSON ja YAML failid - Skriptid - automatiseerimise skriptid</p>"},{"location":"terraform_basics/homework_simple/#miks-see-on-kasulik","title":"Miks see on kasulik?","text":"<ul> <li>\u00d5pite Terraform'i - praktiline kogemus</li> <li>Lihtne alustada - t\u00f6\u00f6tab kohalikus arvutis</li> <li>Reaalne projekt - failide ja konfiguratsiooni haldamine</li> <li>Taaskasutatav - sama kood t\u00f6\u00f6tab erinevates arvutites</li> </ul>"},{"location":"terraform_basics/homework_simple/#ulesanne-1-projekti-struktuuri-loomine","title":"\u00dclesanne 1: Projekti struktuuri loomine ()","text":""},{"location":"terraform_basics/homework_simple/#ulesanne-11-pohifailid","title":"\u00dclesanne 1.1: P\u00f5hifailid","text":"<p>Looge j\u00e4rgmine failide struktuur:</p> <pre><code>terraform-basics-homework/\n\u251c\u2500\u2500 main.tf          # P\u00f5hiline Terraform fail\n\u251c\u2500\u2500 variables.tf     # Muutujad\n\u251c\u2500\u2500 outputs.tf       # V\u00e4ljundid\n\u251c\u2500\u2500 terraform.tfvars # Muutujate v\u00e4\u00e4rtused\n\u2514\u2500\u2500 README.md        # Projekti kirjeldus\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-21-maintf-fail","title":"\u00dclesanne 2.1: main.tf fail","text":"<pre><code>terraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n\n# Loo projekti p\u00f5hikaust\nresource \"local_directory\" \"project_root\" {\n  path = \"${path.module}/${var.project_name}\"\n}\n\n# Loo alamkaustad\nresource \"local_directory\" \"config\" {\n  path = \"${local_directory.project_root.path}/config\"\n}\n\nresource \"local_directory\" \"scripts\" {\n  path = \"${local_directory.project_root.path}/scripts\"\n}\n\nresource \"local_directory\" \"docs\" {\n  path = \"${local_directory.project_root.path}/docs\"\n}\n\n# Projekti konfiguratsioon\nresource \"local_file\" \"project_config\" {\n  content = jsonencode({\n    project_name = var.project_name\n    environment  = var.environment\n    version      = \"1.0.0\"\n    created_at   = timestamp()\n    author       = \"Terraform Student\"\n    features = [\n      \"local_file_management\",\n      \"configuration_generation\",\n      \"script_automation\"\n    ]\n  })\n  filename = \"${local_directory.config.path}/project.json\"\n}\n\n# YAML konfiguratsioon\nresource \"local_file\" \"app_config\" {\n  content = yamlencode({\n    app = {\n      name        = var.project_name\n      environment = var.environment\n      port        = 8080\n      debug       = var.environment == \"development\" ? true : false\n    }\n    database = {\n      type = \"sqlite\"\n      file = \"app.db\"\n    }\n    logging = {\n      level = var.environment == \"production\" ? \"warn\" : \"debug\"\n      file  = \"app.log\"\n    }\n  })\n  filename = \"${local_directory.config.path}/app.yaml\"\n}\n\n# K\u00e4ivitamise skript\nresource \"local_file\" \"startup_script\" {\n  content = &lt;&lt;-EOF\n    #!/bin/bash\n    echo \"======================================\"\n    echo \"Tere tulemast ${var.project_name} projekti!\"\n    echo \"======================================\"\n    echo \"Keskkond: ${var.environment}\"\n    echo \"Versioon: 1.0.0\"\n    echo \"Kuup\u00e4ev: $(date)\"\n    echo \"Kaust: $(pwd)\"\n    echo \"\"\n    echo \"Saadaolevad konfiguratsioonid:\"\n    ls -la config/\n    echo \"\"\n    echo \"Saadaolevad skriptid:\"\n    ls -la scripts/\n    echo \"======================================\"\n  EOF\n  filename        = \"${local_directory.scripts.path}/startup.sh\"\n  file_permission = \"0755\"\n}\n\n# Puhastamise skript\nresource \"local_file\" \"cleanup_script\" {\n  content = &lt;&lt;-EOF\n    #!/bin/bash\n    echo \"Puhastan ${var.project_name} projekti...\"\n    echo \"Kustutan ajutised failid...\"\n    rm -f *.tmp *.log\n    echo \"Puhastamine l\u00f5petatud!\"\n  EOF\n  filename        = \"${local_directory.scripts.path}/cleanup.sh\"\n  file_permission = \"0755\"\n}\n\n# Juhuslik ID failide jaoks\nresource \"random_id\" \"file_suffix\" {\n  byte_length = 4\n}\n\n# Loo mitu n\u00e4idisfaili\nresource \"local_file\" \"example_files\" {\n  count = var.file_count\n\n  content = &lt;&lt;-EOF\n    # N\u00e4idisfail ${count.index + 1}\n\n    Projekti nimi: ${var.project_name}\n    Keskkond: ${var.environment}\n    Faili number: ${count.index + 1}\n    Loodud: ${timestamp()}\n    Unikaalne ID: ${random_id.file_suffix.hex}\n\n    See on n\u00e4idisfail, mis demonstreerib Terraform'i v\u00f5imalusi.\n    Saate seda faili kasutada oma projektides.\n  EOF\n\n  filename = \"${local_directory.docs.path}/example_${count.index + 1}_${random_id.file_suffix.hex}.txt\"\n}\n\n# README fail\nresource \"local_file\" \"readme\" {\n  content = &lt;&lt;-EOF\n    # ${var.project_name}\n\n    ## Kirjeldus\n\n    See projekt on loodud Terraform'i abil demonstreerima Infrastructure as Code p\u00f5him\u00f5tteid.\n\n    ## Struktuuri\n\n    ```\n    ${var.project_name}/\n    \u251c\u2500\u2500 config/          # Konfiguratsioonifailid\n    \u251c\u2500\u2500 scripts/         # Skriptid\n    \u251c\u2500\u2500 docs/           # Dokumentatsioon ja n\u00e4ited\n    \u2514\u2500\u2500 README.md       # See fail\n    ```\n\n    ## Kasutamine\n\n    1. K\u00e4ivita projekt: `./scripts/startup.sh`\n    2. Vaata konfiguratsioone: `cat config/project.json`\n    3. Puhasta projekt: `./scripts/cleanup.sh`\n\n    ## Keskkond\n\n    - Keskkond: ${var.environment}\n    - Versioon: 1.0.0\n    - Loodud: ${timestamp()}\n\n    ## Terraform info\n\n    See projekt loodi kasutades:\n    - Local provider\n    - Random provider\n    - File resources\n    - Directory resources\n  EOF\n  filename = \"${local_directory.project_root.path}/README.md\"\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-31-variablestf-fail","title":"\u00dclesanne 3.1: variables.tf fail","text":"<pre><code>variable \"project_name\" {\n  description = \"Projekti nimi\"\n  type        = string\n  default     = \"terraform-basics-homework\"\n\n  validation {\n    condition     = length(var.project_name) &gt; 3\n    error_message = \"Projekti nimi peab olema v\u00e4hemalt 4 t\u00e4hem\u00e4rki pikk.\"\n  }\n}\n\nvariable \"environment\" {\n  description = \"Keskkonna nimi\"\n  type        = string\n  default     = \"development\"\n\n  validation {\n    condition     = contains([\"development\", \"staging\", \"production\"], var.environment)\n    error_message = \"Keskkond peab olema: development, staging v\u00f5i production.\"\n  }\n}\n\nvariable \"file_count\" {\n  description = \"Loodavate n\u00e4idisfailide arv\"\n  type        = number\n  default     = 5\n\n  validation {\n    condition     = var.file_count &gt; 0 &amp;&amp; var.file_count &lt;= 20\n    error_message = \"Failide arv peab olema vahemikus 1-20.\"\n  }\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-41-outputstf-fail","title":"\u00dclesanne 4.1: outputs.tf fail","text":"<pre><code>output \"project_directory\" {\n  description = \"Projekti kausta tee\"\n  value       = local_directory.project_root.path\n}\n\noutput \"project_structure\" {\n  description = \"Projekti struktuur\"\n  value = {\n    root_dir    = local_directory.project_root.path\n    config_dir  = local_directory.config.path\n    scripts_dir = local_directory.scripts.path\n    docs_dir    = local_directory.docs.path\n  }\n}\n\noutput \"created_files\" {\n  description = \"K\u00f5ik loodud failid\"\n  value = {\n    config_files = [\n      local_file.project_config.filename,\n      local_file.app_config.filename\n    ]\n    script_files = [\n      local_file.startup_script.filename,\n      local_file.cleanup_script.filename\n    ]\n    doc_files = local_file.example_files[*].filename\n    readme_file = local_file.readme.filename\n  }\n}\n\noutput \"project_summary\" {\n  description = \"Projekti kokkuv\u00f5te\"\n  value = &lt;&lt;-EOF\n    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    Terraform Projekt: ${var.project_name}\n    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n    Keskkond: ${var.environment}\n    Failide arv: ${length(local_file.example_files) + 4}\n    Loodud: ${timestamp()}\n    Kaust: ${local_directory.project_root.path}\n    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  EOF\n}\n\noutput \"next_steps\" {\n  description = \"J\u00e4rgmised sammud\"\n  value = [\n    \"1. K\u00e4ivitage: cd ${local_directory.project_root.path}\",\n    \"2. Vaadake struktuuri: tree . (v\u00f5i ls -la)\",\n    \"3. K\u00e4ivitage startup skript: ./scripts/startup.sh\",\n    \"4. Vaadake konfiguratsioonifaile: cat config/*.json\",\n    \"5. Muutke terraform.tfvars ja rakendage uuesti\"\n  ]\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-51-terraformtfvars-fail","title":"\u00dclesanne 5.1: terraform.tfvars fail","text":"<pre><code>project_name = \"minu-terraform-projekt\"\nenvironment  = \"development\"\nfile_count   = 3\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-2-projekti-kaivitamine","title":"\u00dclesanne 2: Projekti k\u00e4ivitamine ()","text":""},{"location":"terraform_basics/homework_simple/#ulesanne-11-terraformi-initsialiseerimine","title":"\u00dclesanne 1.1: Terraform'i initsialiseerimine","text":"<pre><code># Navigate to project directory\ncd terraform-basics-homework\n\n# Initialize Terraform\nterraform init\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-21-planeerimine","title":"\u00dclesanne 2.1: Planeerimine","text":"<pre><code># See what will be created\nterraform plan\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-31-projekti-loomine","title":"\u00dclesanne 3.1: Projekti loomine","text":"<pre><code># Create the infrastructure\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-41-tulemuste-vaatamine","title":"\u00dclesanne 4.1: Tulemuste vaatamine","text":"<pre><code># Check outputs\nterraform output\n\n# Check created files\nls -lau-terraform-projekt/\ntreeu-terraform-projekt/  # kui tree on installitud\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-3-eksperimenteerimine","title":"\u00dclesanne 3: Eksperimenteerimine ()","text":""},{"location":"terraform_basics/homework_simple/#ulesanne-11-muutujate-muutmine","title":"\u00dclesanne 1.1: Muutujate muutmine","text":"<p>Muutke <code>terraform.tfvars</code> faili:</p> <pre><code>project_name = \"minu-uus-projekt\"\nenvironment  = \"production\"\nfile_count   = 10\n</code></pre> <p>Rakendage muudatused:</p> <pre><code>terraform plan\nterraform apply\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-21-uue-ressursi-lisamine","title":"\u00dclesanne 2.1: Uue ressursi lisamine","text":"<p>Lisage <code>main.tf</code> faili:</p> <pre><code># Loo konfiguratsioonifail iga keskkonna jaoks\nresource \"local_file\" \"env_config\" {\n  content = jsonencode({\n    environment = var.environment\n    settings = {\n      debug_mode    = var.environment != \"production\"\n      log_level     = var.environment == \"production\" ? \"error\" : \"debug\"\n      feature_flags = {\n        new_ui      = var.environment == \"development\"\n        analytics   = var.environment != \"development\"\n        monitoring  = var.environment == \"production\"\n      }\n    }\n  })\n  filename = \"${local_directory.config.path}/environment.json\"\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-31-outputide-uuendamine","title":"\u00dclesanne 3.1: Output'ide uuendamine","text":"<p>Lisage <code>outputs.tf</code> faili:</p> <pre><code>output \"environment_config\" {\n  description = \"Keskkonna konfiguratsioon\"\n  value       = local_file.env_config.filename\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-41-testimine","title":"\u00dclesanne 4.1: Testimine","text":"<pre><code>terraform apply\n./minu-uus-projekt/scripts/startup.sh\ncatu-uus-projekt/config/environment.json\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-4-puhastamine-ja-dokumenteerimine","title":"\u00dclesanne 4: Puhastamine ja dokumenteerimine ()","text":""},{"location":"terraform_basics/homework_simple/#ulesanne-11-infrastruktuuri-kustutamine","title":"\u00dclesanne 1.1: Infrastruktuuri kustutamine","text":"<pre><code>terraform destroy\n</code></pre>"},{"location":"terraform_basics/homework_simple/#ulesanne-21-kokkuvotte-kirjutamine","title":"\u00dclesanne 2.1: Kokkuv\u00f5tte kirjutamine","text":"<p>Vastake k\u00fcsimustele:</p> <ol> <li>Mis oli k\u00f5ige lihtsam Terraform'i juures?</li> <li>Mis oli k\u00f5ige keerulisem?</li> <li>Kuidas saaks seda projekti parandada?</li> <li>Mida \u00f5ppisite Infrastructure as Code kohta?</li> </ol>"},{"location":"terraform_basics/homework_simple/#boonusulesanded-valikuline","title":"Boonus\u00fclesanded (valikuline)","text":""},{"location":"terraform_basics/homework_simple/#tingimused-ja-tsuklid","title":"Tingimused ja ts\u00fcklid","text":"<pre><code># Loo backup failid ainult production keskkonnas\nresource \"local_file\" \"backup_script\" {\n  count = var.environment == \"production\" ? 1 : 0\n\n  content = \"#!/bin/bash\\necho 'Backup started...\\n'\"\n  filename = \"${local_directory.scripts.path}/backup.sh\"\n  file_permission = \"0755\"\n}\n\n# Loo erinevad konfiguratsioonie failure iga faili jaoks\nresource \"local_file\" \"app_configs\" {\n  for_each = toset([\"api\", \"web\", \"worker\"])\n\n  content = jsonencode({\n    service = each.key\n    port    = each.key == \"api\" ? 3000 : each.key == \"web\" ? 8080 : 9000\n    env     = var.environment\n  })\n  filename = \"${local_directory.config.path}/${each.key}.json\"\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#locals-ja-funktsioonid","title":"Locals ja funktsioonid","text":"<pre><code>locals {\n  project_prefix = \"${var.project_name}-${var.environment}\"\n  timestamp_formatted = formatdate(\"YYYY-MM-DD-hhmm\", timestamp())\n\n  common_tags = {\n    Project     = var.project_name\n    Environment = var.environment\n    ManagedBy   = \"Terraform\"\n    CreatedAt   = local.timestamp_formatted\n  }\n}\n\nresource \"local_file\" \"metadata\" {\n  content = jsonencode(local.common_tags)\n  filename = \"${local_directory.config.path}/metadata.json\"\n}\n</code></pre>"},{"location":"terraform_basics/homework_simple/#moodulite-struktuuri-ettevalmistamine","title":"Moodulite struktuuri ettevalmistamine","text":"<pre><code>mkdir -p modules/file-generator\n# Liigutage osa koodist moodulitesse\n</code></pre>"},{"location":"terraform_basics/homework_simple/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>T\u00e4na \u00f5ppisite: - Terraform'i p\u00f5hit\u00f5desid - kuidas kirjutada HCL koodi - Local provider'i - kuidas hallata kohalikke faile - Variables ja outputs - kuidas teha koodi paindlikuks - Infrastructure as Code - kuidas kood saab infrastruktuuri kirjeldada</p> <p>J\u00e4rgmised sammud: - \u00d5ppige rohkem provider'ite kohta - Proovige kohalikke provider'eid (local, null, random) - Uurige Terraform module'eid - Rakendage real-world projektides</p> <p>K\u00fcsimused? \ud83e\udd14</p>"},{"location":"terraform_basics/homework_simple/#failide-naited","title":"Failide n\u00e4ited","text":""},{"location":"terraform_basics/homework_simple/#oodatav-terraform-output","title":"Oodatav terraform output:","text":"<pre><code>project_directory = \"./minu-terraform-projekt\"\nproject_structure = {\n  \"config_dir\" = \"./minu-terraform-projekt/config\"\n  \"docs_dir\" = \"./minu-terraform-projekt/docs\"\n  \"root_dir\" = \"./minu-terraform-projekt\"\n  \"scripts_dir\" = \"./minu-terraform-projekt/scripts\"\n}\nproject_summary = &lt;&lt;EOT\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nTerraform Projekt:u-terraform-projekt\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nKeskkond: development\nFailide arv: 7\nLoodud: 2024-01-15T10:30:45Z\nKaust: ./minu-terraform-projekt\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nEOT\n</code></pre>"},{"location":"terraform_basics/homework_simple/#oodatav-failide-struktuur","title":"Oodatav failide struktuur:","text":"<pre><code>minu-terraform-projekt/\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 project.json\n\u2502   \u2514\u2500\u2500 app.yaml\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 startup.sh\n\u2502   \u2514\u2500\u2500 cleanup.sh\n\u2514\u2500\u2500 docs/\n    \u251c\u2500\u2500 example_1_abc123.txt\n    \u251c\u2500\u2500 example_2_abc123.txt\n    \u2514\u2500\u2500 example_3_abc123.txt\n</code></pre>"},{"location":"terraform_basics/lab/","title":"Terraform Basics Lab: Infrastructure Automation","text":"<p>Kestus: Eesm\u00e4rk: \u00d5ppida Terraform'i praktilist kasutamist ja luua lihtsa infrastruktuuri</p>"},{"location":"terraform_basics/lab/#task-1-opivaljundid","title":"Task 1: \u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast laborit oskate: - Kirjutada lihtsaid Terraform faile - HCL s\u00fcntaks ja p\u00f5hilised ressursid - Kasutada local provider'it - failide ja kataloogide loomine - M\u00f5ista Terraform workflow - init, plan, apply, destroy - Debugida probleeme - logide vaatamine ja veateadete m\u00f5istmine - Kasutada dokumentatsiooni - abi leidmine ja n\u00e4idete kasutamine</p>"},{"location":"terraform_basics/lab/#task-2-terraformi-installimine-ja-seadistamine","title":"Task 2: Terraform'i installimine ja seadistamine","text":""},{"location":"terraform_basics/lab/#ulesanne-11-terraformi-installimine","title":"\u00dclesanne 1.1: Terraform'i installimine","text":"<p>Valige oma operatsioonis\u00fcsteem ja j\u00e4rgige juhiseid:</p> <p>macOS: <pre><code>brew install terraform\nterraform --version\n</code></pre></p> <p>Linux (Ubuntu/Debian): <pre><code>wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\nsudo apt update &amp;&amp; sudo apt install terraform\nterraform --version\n</code></pre></p> <p>Windows: <pre><code>choco install terraform\nterraform --version\n</code></pre></p>"},{"location":"terraform_basics/lab/#ulesanne-12-projekti-struktuuri-loomine","title":"\u00dclesanne 1.2: Projekti struktuuri loomine","text":"<pre><code># Projekti kataloogi loomine\nmkdir ~/terraform-basics-lab\ncd ~/terraform-basics-lab\n\n# Lihtne struktuur\nmkdir -p configs scripts\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-13-terraformi-seadistamine","title":"\u00dclesanne 1.3: Terraform'i seadistamine","text":"<p>Kontrollige, et Terraform t\u00f6\u00f6tab: <pre><code># Check Terraform version\nterraform version\n\n# Check available commands\nterraform --help\n</code></pre></p>"},{"location":"terraform_basics/lab/#task-3-lihtsa-terraform-projekti-loomine","title":"Task 3: Lihtsa Terraform projekti loomine","text":""},{"location":"terraform_basics/lab/#ulesanne-21-pohilise-terraform-faili-loomine","title":"\u00dclesanne 2.1: P\u00f5hilise Terraform faili loomine","text":"<p>Kasutage valmis n\u00e4idet teacher_repo'st:</p> <pre><code># Kopeerige lihtne n\u00e4ide\ncp teacher_repo/terraform-basics-starter/examples/simple-local/main.tf main.tf\n</code></pre> <p>V\u00f5i looge oma fail:</p> <pre><code>terraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n  }\n}\n\n# Looge lihtne tekstifail\nresource \"local_file\" \"hello\" {\n  content  = \"Tere! See fail on loodud Terraform'i abil.\"\n  filename = \"hello.txt\"\n}\n\n# Looge kataloog\nresource \"local_directory\" \"example\" {\n  path = \"example_dir\"\n}\n</code></pre> <p>Mida see teeb? - <code>local_file</code> - loob faili - <code>local_directory</code> - loob kataloogi - <code>content</code> - faili sisu - <code>filename</code> - faili nimi - <code>path</code> - kataloogi tee</p>"},{"location":"terraform_basics/lab/#ulesanne-22-terraformi-kaivitamine","title":"\u00dclesanne 2.2: Terraform'i k\u00e4ivitamine","text":"<p>Terraform'i kasutamine koosneb kolmest p\u00f5hilises sammust: init, plan, ja apply. Kujutage ette neid kui \"valmistamine\", \"kontrollimine\" ja \"tegemine\".</p> <p>1. Initialize Terraform (init) - valmistamine: <pre><code># Initialize the project - valmista ette t\u00f6\u00f6keskkond\nterraform init\n</code></pre></p> <p>Mida see teeb? - Allalaadib vajalikud provider'id - nagu \"t\u00f5lgi\" installimine - Seadistab backend'i - kus state fail salvestatakse (praegu kohalik) - Valmistab ette t\u00f6\u00f6keskkonna - kontrollib, et k\u00f5ik vajalik on olemas - Loob .terraform kausta - sisaldab allalaaditud faile</p> <p>Miks see vajalik? - Esimest korda, kui kasutad uut provider'it - Kui muudad provider'i versiooni - Kui muudad backend'i konfiguratsiooni</p> <p>2. Plan the changes (plan) - kontrollimine: <pre><code># See what Terraform will do - vaata, mida Terraform teeb\nterraform plan\n</code></pre></p> <p>Mida see teeb? - Anal\u00fc\u00fcsib koodi - kontrollib s\u00fcntaksit ja loogikat - V\u00f5rdleb praeguse olekuga - mis on juba olemas vs mida soovid - N\u00e4itab muudatusi - mida luuakse, muudetakse v\u00f5i kustutatakse - Ei tee midagi - ainult n\u00e4itab, mida teeks</p> <p>Miks see oluline? - Turvalisus - n\u00e4ed, mida tehakse enne tegemist - Debugging - leiad probleemid enne rakendamist - Dokumentatsioon - n\u00e4ed, mis muudatused toimuvad</p> <p>3. Apply the changes (apply) - tegemine: <pre><code># Apply the configuration - rakenda konfiguratsioon\nterraform apply\n</code></pre></p> <p>Mida see teeb? - Loob ressursid - teeb tegelikud muudatused - Salvestab state faili - m\u00e4rgib, mis on loodud - N\u00e4itab v\u00e4ljundit - tagastab loodud ressursside infot - K\u00fcsib kinnitust - \"Do you want to perform these actions?\"</p> <p>Miks see kriitiline? - Tegelikud muudatused - see teeb p\u00e4ris asju - State management - j\u00e4lgib, mis on olemas - Idempotent - sama k\u00e4sk teeb sama tulemuse <pre><code>### \u00dclesanne 2.3: Tulemuste kontrollimine\n\n**Kontrollige loodud faile:**\n```bash\n# List created files\nls -la\n\n# Check the content of hello.txt\ncat hello.txt\n\n# Check the JSON config\ncat config.json\n\n# Check the directory\nls -la example_dir/\n</code></pre></p> <p>Kontrollige state faili: <pre><code># Show state\nterraform show\n\n# List resources in state\nterraform state list\n</code></pre></p>"},{"location":"terraform_basics/lab/#task-4-muudatuste-tegemine-ja-haldamine","title":"Task 4: Muudatuste tegemine ja haldamine","text":""},{"location":"terraform_basics/lab/#ulesanne-31-konfiguratsiooni-muutmine","title":"\u00dclesanne 3.1: Konfiguratsiooni muutmine","text":"<p>Muutke <code>main.tf</code> faili:</p> <pre><code># Configure Terraform\nterraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n  }\n}\n\n# Create a simple text file\nresource \"local_file\" \"hello\" {\n  content  = \"Hello, Terraform! This file was created by Terraform. Updated content!\"\n  filename = \"${path.module}/hello.txt\"\n}\n\n# Create a directory\nresource \"local_directory\" \"example\" {\n  path = \"${path.module}/example_dir\"\n}\n\n# Create a configuration file\nresource \"local_file\" \"config\" {\n  content = jsonencode({\n    project_name = \"Week 23 Lab\"\n    environment  = \"development\"\n    created_by   = \"Terraform\"\n    timestamp    = timestamp()\n    version      = \"2.0\"\n  })\n  filename = \"${path.module}/config.json\"\n}\n\n# Add a new resource - a script file\nresource \"local_file\" \"script\" {\n  content = &lt;&lt;-EOF\n    #!/bin/bash\n    echo \"This is a script created by Terraform\"\n    echo \"Current time: $(date)\"\n    echo \"Projekt: Terraform Alused\"\n  EOF\n  filename = \"${path.module}/scripts/startup.sh\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-21-muudatuste-rakendamine","title":"\u00dclesanne 2.1: Muudatuste rakendamine","text":"<pre><code># Plan the changes\nterraform plan\n\n# Apply the changes\nterraform apply\n</code></pre> <p>Mida m\u00e4rkate? - Terraform n\u00e4itab, mis muudetakse - Ainult muudetud ressursid uuendatakse - Uus ressurss lisatakse</p>"},{"location":"terraform_basics/lab/#ulesanne-31-ressursside-kustutamine","title":"\u00dclesanne 3.1: Ressursside kustutamine","text":"<pre><code># Destroy all resources\nterraform destroy\n</code></pre> <p>Mida see teeb? - Kustutab k\u00f5ik loodud ressursid - S\u00e4ilitab state faili (kui soovite)</p>"},{"location":"terraform_basics/lab/#task-5-variables-ja-outputs","title":"Task 5: Variables ja Outputs","text":""},{"location":"terraform_basics/lab/#ulesanne-41-variables-faili-loomine","title":"\u00dclesanne 4.1: Variables faili loomine","text":"<p>Looge fail <code>variables.tf</code>:</p> <p>Variables (muutujad) v\u00f5imaldavad teha koodi d\u00fcnaamiliseks ja taaskasutatavaks. Kujutage ette neid kui \"seadistusi\", mida saab muuta ilma koodi muutmata.</p>"},{"location":"terraform_basics/lab/#projekti-nimi-muutuja","title":"Projekti nimi muutuja","text":"<pre><code>variable \"project_name\" {\n  description = \"Name of the project\"\n  type        = string\n  default     = \"Terraform Alused\"\n}\n</code></pre> <p>Mida see teeb? - <code>description</code> - kirjeldus, mida muutuja teeb - <code>type</code> - andmet\u00fc\u00fcp (string, number, bool, list, map) - <code>default</code> - vaikev\u00e4\u00e4rtus, kui midagi pole m\u00e4\u00e4ratud</p>"},{"location":"terraform_basics/lab/#keskkond-muutuja","title":"Keskkond muutuja","text":"<pre><code>variable \"environment\" {\n  description = \"Keskkond (arendus, test, toodang)\"\n  type        = string\n  default     = \"arendus\"\n\n  validation {\n    condition     = contains([\"arendus\", \"test\", \"toodang\"], var.environment)\n    error_message = \"Keskkond peab olema arendus, test v\u00f5i toodang.\"\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>validation</code> - kontrollib, et v\u00e4\u00e4rtus oleks korrektne - <code>contains()</code> - funktsioon, mis kontrollib, kas v\u00e4\u00e4rtus on nimekirjas - Lubatud v\u00e4\u00e4rtused: \"development\", \"staging\", \"production\"</p>"},{"location":"terraform_basics/lab/#failide-arv-muutuja","title":"Failide arv muutuja","text":"<pre><code>variable \"file_count\" {\n  description = \"Loodavate failide arv\"\n  type        = number\n  default     = 3\n\n  validation {\n    condition     = var.file_count &gt; 0 &amp;&amp; var.file_count &lt;= 10\n    error_message = \"Failide arv peab olema vahemikus 1-10.\"\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>type = number</code> - andmet\u00fc\u00fcp on arv - <code>validation</code> - kontrollib, et arv oleks vahemikus 1-10 - Lubatud v\u00e4\u00e4rtused: 1, 2, 3, ..., 10</p>"},{"location":"terraform_basics/lab/#taiendavad-muutujad","title":"T\u00e4iendavad muutujad","text":"<p>V\u00f5ite lisada rohkem muutujaid vastavalt vajadusele:</p> <pre><code>variable \"file_prefix\" {\n  description = \"Failide nimede prefiks\"\n  type        = string\n  default     = \"fail\"\n}\n\nvariable \"enable_backup\" {\n  description = \"Luba varukoopia failid\"\n  type        = bool\n  default     = false\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-42-outputs-faili-loomine","title":"\u00dclesanne 4.2: Outputs faili loomine","text":"<p>Looge fail <code>outputs.tf</code>:</p> <p>Outputs (v\u00e4ljundid) v\u00f5imaldavad n\u00e4ha loodud ressursside infot ja tagastada v\u00e4\u00e4rtusi. Kujutage ette neid kui \"vastuseid\" - mida Terraform tagastab p\u00e4rast t\u00f6\u00f6 l\u00f5petamist.</p> <pre><code># ==========================================\n# OUTPUTS - v\u00e4ljundid\n# ==========================================\n# Outputs v\u00f5imaldavad n\u00e4ha loodud ressursside infot\n# See on nagu \"vastus\" - mida Terraform tagastab p\u00e4rast t\u00f6\u00f6 l\u00f5petamist\n\n# ==========================================\n# PROJECT INFO OUTPUT - projekti info\n# ==========================================\n# Tagastab projekti kohta \u00fcldist infot\noutput \"project_info\" {\n  description = \"Projekti kohta info\"  # Kirjeldus\n\n  # value m\u00e4\u00e4rab, mida tagastada\n  value = {\n    name        = var.project_name    # Projekti nimi\n    environment = var.environment     # Keskkond\n    file_count  = var.file_count      # Failide arv\n    created_at  = timestamp()         # Loomise aeg\n  }\n\n  # Kasutamine: terraform output project_info\n  # Tulemus: JSON objekt projekti infoga\n}\n\n# ==========================================\n# FILES CREATED OUTPUT - loodud failid\n# ==========================================\n# Tagastab k\u00f5ikide loodud failide nimed\noutput \"files_created\" {\n  description = \"Loodud failide nimekiri\"  # Kirjeldus\n\n  # [*] t\u00e4hendab \"k\u00f5ik\" - v\u00f5ta k\u00f5ik local_file.example ressursid\n  # .filename t\u00e4hendab \"v\u00f5ta filename atribuut\"\n  value = local_file.example[*].filename\n\n  # Kasutamine: terraform output files_created\n  # Tulemus: nimekiri failide nimedest\n}\n\n# ==========================================\n# ADDITIONAL OUTPUTS - t\u00e4iendavad v\u00e4ljundid\n# ==========================================\n# V\u00f5ite lisada rohkem v\u00e4ljundeid vastavalt vajadusele\n\n# Tagasta kataloogi tee\noutput \"directory_path\" {\n  description = \"Loodud kataloogi tee\"\n  value       = local_directory.example.path\n}\n\n# Tagasta konfiguratsioonifaili tee\noutput \"config_file_path\" {\n  description = \"Konfiguratsioonifaili tee\"\n  value       = local_file.config.filename\n}\n\n# Tagasta projekti kokkuv\u00f5te\noutput \"project_summary\" {\n  description = \"Projekti kokkuv\u00f5te\"\n  value = \"Projekt '${var.project_name}' ${var.environment} keskkonnas ${var.file_count} failiga loodud ${timestamp()}\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-43-main-faili-uuendamine","title":"\u00dclesanne 4.3: Main faili uuendamine","text":"<p>Uuendage <code>main.tf</code> faili:</p> <pre><code># Configure Terraform\nterraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n  }\n}\n\n# Loo mitu faili kasutades count\nresource \"local_file\" \"example\" {\n  count    = var.file_count\n  content  = \"See on fail number ${count.index + 1} projektile ${var.project_name} ${var.environment} keskkonnas.\"\n  filename = \"${path.module}/fail_${count.index + 1}.txt\"\n}\n\n# Loo konfiguratsioonifail\nresource \"local_file\" \"config\" {\n  content = jsonencode({\n    projekt_nimi = var.project_name\n    keskkond     = var.environment\n    failide_arv  = var.file_count\n    loodud_poolt = \"Terraform\"\n    ajatempel    = timestamp()\n  })\n  filename = \"${path.module}/konfiguratsioon.json\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-44-muudatuste-rakendamine","title":"\u00dclesanne 4.4: Muudatuste rakendamine","text":"<pre><code># Plan the changes\nterraform plan\n\n# Apply the changes\nterraform apply\n\n# Check outputs\nterraform output\n</code></pre>"},{"location":"terraform_basics/lab/#task-6-advanced-features","title":"Task 6: Advanced Features","text":""},{"location":"terraform_basics/lab/#ulesanne-51-data-sources-kasutamine","title":"\u00dclesanne 5.1: Data sources kasutamine","text":"<p>Lisage <code>main.tf</code> faili:</p> <pre><code># Loe olemasoleva faili sisu\ndata \"local_file\" \"existing_config\" {\n  filename = \"${path.module}/konfiguratsioon.json\"\n}\n\n# Loo kokkuv\u00f5ttefail kasutades data source\nresource \"local_file\" \"summary\" {\n  content = &lt;&lt;-EOF\n    Projekti Kokkuv\u00f5te:\n    - Projekt: ${var.project_name}\n    - Keskkond: ${var.environment}  \n    - Loodud failid: ${var.file_count}\n    - Konfiguratsioonifail olemas: ${data.local_file.existing_config.content != \"\" ? \"Jah\" : \"Ei\"}\n    - Loodud: ${timestamp()}\n  EOF\n  filename = \"${path.module}/kokkuvote.txt\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-52-local-values-kasutamine","title":"\u00dclesanne 5.2: Local values kasutamine","text":"<p>Lisage <code>locals.tf</code> faili:</p> <pre><code># Define local values\nlocals {\n  common_tags = {\n    Project     = var.project_name\n    Environment = var.environment\n    CreatedBy   = \"Terraform\"\n    CreatedAt   = timestamp()\n  }\n\n  file_prefix = \"${var.project_name}-${var.environment}\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-53-conditional-logic","title":"\u00dclesanne 5.3: Conditional logic","text":"<p>Uuendage <code>main.tf</code> faili:</p> <pre><code># Create environment-specific file\nresource \"local_file\" \"env_specific\" {\n  content = var.environment == \"production\" ? \"PRODUCTION ENVIRONMENT - BE CAREFUL!\" : \"Development environment - safe to test\"\n  filename = \"${path.module}/${local.file_prefix}-env.txt\"\n\n  tags = local.common_tags\n}\n\n# Create backup file only in production\nresource \"local_file\" \"backup\" {\n  count    = var.environment == \"production\" ? 1 : 0\n  content  = \"This is a backup file for production environment.\"\n  filename = \"${path.module}/backup.txt\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-54-final-test","title":"\u00dclesanne 5.4: Final test","text":"<pre><code># Plan and apply\nterraform plan\nterraform apply\n\n# Check all outputs\nterraform output\n\n# List all files\nls -la\n\n# Check summary\ncat summary.txt\n</code></pre>"},{"location":"terraform_basics/lab/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>T\u00e4na \u00f5ppisime:</p> <p>Terraform'i installimist ja seadistamist - t\u00f6\u00f6keskkonna valmistamine P\u00f5hilise Terraform workflow - init, plan, apply, destroy HCL s\u00fcntaksit - ressursid, muutujad, v\u00e4ljundid Local provider'i kasutamist - failide ja kataloogide haldamine Advanced features - data sources, locals, conditional logic  </p> <p>J\u00e4rgmise n\u00e4dala teemad: - Multi-environment Terraform - Kohalikud provider'id (local, null, random) - State management best practices</p>"},{"location":"terraform_basics/lab/#task-8-boonusulesanded-terraformi-oskajatele","title":"Task 8: BOONUS\u00dcLESANDED (Terraform'i oskajatele)","text":""},{"location":"terraform_basics/lab/#ulesanne-advanced-local-infrastructure","title":"\u00dclesanne Advanced Local Infrastructure","text":"<pre><code># locals.tf - Advanced local values\nlocals {\n  timestamp = formatdate(\"YYYY-MM-DD-hhmm\", timestamp())\n  project_prefix = \"${var.project_name}-${var.environment}\"\n\n  # Complex data structures\n  service_configs = {\n    web = {\n      port = 8080\n      replicas = var.environment == \"production\" ? 3 : 1\n      memory = \"512M\"\n    }\n    api = {\n      port = 3000\n      replicas = 2\n      memory = \"256M\"\n    }\n    worker = {\n      port = null\n      replicas = 1\n      memory = \"1G\"\n    }\n  }\n\n  # Conditional resources\n  monitoring_enabled = var.environment != \"development\"\n  backup_enabled = var.environment == \"production\"\n}\n\n# Service configuration files\nresource \"local_file\" \"service_configs\" {\n  for_each = local.service_configs\n\n  content = templatefile(\"${path.module}/templates/service.tpl\", {\n    service_name = each.key\n    port         = each.value.port\n    replicas     = each.value.replicas\n    memory       = each.value.memory\n    environment  = var.environment\n  })\n\n  filename = \"${local_directory.config.path}/${each.key}-service.yaml\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-template-files-ja-functions","title":"\u00dclesanne Template Files ja Functions","text":"<pre><code># templates/nginx.conf.tpl\nupstream ${service_name} {\n%{ for i in range(replicas) ~}\n    server ${service_name}-${i}:${port};\n%{ endfor ~}\n}\n\nserver {\n    listen 80;\n    server_name ${domain};\n\n    location / {\n        proxy_pass http://${service_name};\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n\n%{ if ssl_enabled ~}\n    listen 443 ssl;\n    ssl_certificate /etc/ssl/certs/${domain}.crt;\n    ssl_certificate_key /etc/ssl/private/${domain}.key;\n%{ endif ~}\n}\n\n# Use template\nresource \"local_file\" \"nginx_config\" {\n  content = templatefile(\"${path.module}/templates/nginx.conf.tpl\", {\n    service_name = \"webapp\"\n    replicas     = 3\n    port         = 8080\n    domain       = \"myapp.local\"\n    ssl_enabled  = var.environment == \"production\"\n  })\n\n  filename = \"${local_directory.config.path}/nginx.conf\"\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-modules-ja-code-organization","title":"\u00dclesanne Modules ja Code Organization","text":"<pre><code># modules/webapp/main.tf\nresource \"local_directory\" \"app_dir\" {\n  path = \"${var.base_path}/${var.app_name}\"\n}\n\nresource \"local_file\" \"app_config\" {\n  content = jsonencode({\n    app_name    = var.app_name\n    environment = var.environment\n    database_url = var.database_url\n    api_key     = var.api_key\n    features    = var.features\n  })\n  filename = \"${local_directory.app_dir.path}/config.json\"\n}\n\nresource \"local_file\" \"docker_compose\" {\n  content = templatefile(\"${path.module}/docker-compose.tpl\", {\n    app_name     = var.app_name\n    image_tag    = var.image_tag\n    environment  = var.environment\n    replicas     = var.replicas\n  })\n  filename = \"${local_directory.app_dir.path}/docker-compose.yml\"\n}\n\n# modules/webapp/variables.tf\nvariable \"app_name\" {\n  description = \"Application name\"\n  type        = string\n}\n\nvariable \"environment\" {\n  description = \"Environment\"\n  type        = string\n  validation {\n    condition     = contains([\"dev\", \"staging\", \"prod\"], var.environment)\n    error_message = \"Environment must be dev, staging, or prod.\"\n  }\n}\n\nvariable \"replicas\" {\n  description = \"Number of replicas\"\n  type        = number\n  default     = 1\n  validation {\n    condition     = var.replicas &gt; 0 &amp;&amp; var.replicas &lt;= 10\n    error_message = \"Replicas must be between 1 and 10.\"\n  }\n}\n\n# Use module\nmodule \"frontend\" {\n  source = \"./modules/webapp\"\n\n  app_name    = \"frontend\"\n  environment = var.environment\n  replicas    = var.environment == \"prod\" ? 3 : 1\n  base_path   = local_directory.project_root.path\n\n  database_url = \"postgres://user:pass@db:5432/frontend\"\n  api_key      = var.frontend_api_key\n  features = {\n    analytics = var.environment == \"prod\"\n    debug     = var.environment != \"prod\"\n  }\n}\n\nmodule \"backend\" {\n  source = \"./modules/webapp\"\n\n  app_name    = \"backend\"\n  environment = var.environment\n  replicas    = 2\n  base_path   = local_directory.project_root.path\n\n  database_url = \"postgres://user:pass@db:5432/backend\"\n  api_key      = var.backend_api_key\n  features = {\n    worker_mode = true\n    cache       = var.environment == \"prod\"\n  }\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-terraform-workspaces-ja-state-management","title":"\u00dclesanne Terraform Workspaces ja State Management","text":"<pre><code># Create workspaces for different environments\nterraform workspace new development\nterraform workspace new staging\nterraform workspace new production\n\n# Switch between workspaces\nterraform workspace select development\nterraform plan -var-file=\"environments/dev.tfvars\"\nterraform apply\n\nterraform workspace select production\nterraform plan -var-file=\"environments/prod.tfvars\"\nterraform apply\n\n# List workspaces\nterraform workspace list\n\n# Workspace-specific variables\nvariable \"workspace_configs\" {\n  description = \"Workspace-specific configurations\"\n  type = map(object({\n    replicas     = number\n    memory_limit = string\n    disk_size    = number\n  }))\n\n  default = {\n    development = {\n      replicas     = 1\n      memory_limit = \"256M\"\n      disk_size    = 10\n    }\n    staging = {\n      replicas     = 2\n      memory_limit = \"512M\"\n      disk_size    = 20\n    }\n    production = {\n      replicas     = 5\n      memory_limit = \"1G\"\n      disk_size    = 100\n    }\n  }\n}\n\nlocals {\n  workspace_config = var.workspace_configs[terraform.workspace]\n}\n</code></pre>"},{"location":"terraform_basics/lab/#ulesanne-advanced-data-sources-ja-external-integration","title":"\u00dclesanne Advanced Data Sources ja External Integration","text":"<pre><code># External data source\ndata \"external\" \"git_info\" {\n  program = [\"bash\", \"-c\", &lt;&lt;-EOT\n    echo '{\"branch\":\"'$(git branch --show-current)'\",\"commit\":\"'$(git rev-parse --short HEAD)'\",\"timestamp\":\"'$(date -u +%Y-%m-%dT%H:%M:%SZ)'\"}'\n  EOT\n  ]\n}\n\n# HTTP data source (for external APIs)\ndata \"http\" \"service_discovery\" {\n  url = \"https://api.internal.com/services\"\n  request_headers = {\n    Accept = \"application/json\"\n    Authorization = \"Bearer ${var.api_token}\"\n  }\n}\n\nlocals {\n  services = jsondecode(data.http.service_discovery.body)\n  git_info = data.external.git_info.result\n}\n\n# Generate deployment metadata\nresource \"local_file\" \"deployment_info\" {\n  content = jsonencode({\n    deployment_id   = random_uuid.deployment.result\n    git_branch     = local.git_info.branch\n    git_commit     = local.git_info.commit\n    deployed_at    = local.git_info.timestamp\n    environment    = var.environment\n    terraform_version = \"v${terraform.version}\"\n    services       = local.services\n  })\n\n  filename = \"${local_directory.project_root.path}/deployment-info.json\"\n}\n\nresource \"random_uuid\" \"deployment\" {}\n\n# Integration with external systems\nresource \"local_file\" \"monitoring_config\" {\n  content = templatefile(\"${path.module}/templates/monitoring.yml.tpl\", {\n    services    = local.services\n    environment = var.environment\n    alerts = {\n      cpu_threshold    = var.environment == \"production\" ? 80 : 90\n      memory_threshold = var.environment == \"production\" ? 85 : 95\n      disk_threshold   = 90\n    }\n  })\n\n  filename = \"${local_directory.config.path}/monitoring.yml\"\n}\n</code></pre> <p>Kas teil on k\u00fcsimusi? \ud83e\udd14</p>"},{"location":"terraform_basics/lab/#lisaressursid","title":"Lisaressursid","text":"<ul> <li>Terraform CLI Commands: https://www.terraform.io/docs/cli</li> <li>Local Provider: https://registry.terraform.io/providers/hashicorp/local/latest/docs</li> <li>HCL Language: https://www.terraform.io/docs/language</li> <li>Terraform Best Practices: https://www.terraform.io/docs/cloud/guides/recommended-practices</li> </ul>"},{"location":"terraform_basics/lab/#troubleshooting","title":"Troubleshooting","text":""},{"location":"terraform_basics/lab/#levinumad-probleemid-ja-lahendused","title":"Levinumad probleemid ja lahendused:","text":"<p>1. Provider not found: <pre><code># Solution: Run terraform init\nterraform init\n</code></pre></p> <p>2. State file issues: <pre><code># Check state\nterraform state list\n\n# Refresh state\nterraform refresh\n</code></pre></p> <p>3. Permission issues: <pre><code># Check file permissions\nls -la\n\n# Fix permissions if needed\nchmod 644 *.txt\n</code></pre></p> <p>4. Variable validation errors: <pre><code># Check variable values\nterraform plan -var=\"environment=development\"\n</code></pre></p>"},{"location":"terraform_basics/lecture/","title":"Terraform Basics: Infrastructure as Code","text":"<p>Kestus:  (\u00fclevaade) Teemad: Terraform fundamentals, HCL language, Local providers, State management</p>"},{"location":"terraform_basics/lecture/#task-1-opivaljundid","title":"Task 1: \u00d5piv\u00e4ljundid","text":"<p>P\u00e4rast seda oskate: - M\u00f5ista Infrastructure as Code m\u00f5istet - miks ja kuidas kasutada - Kirjutada lihtsaid Terraform faile - HCL s\u00fcntaks ja p\u00f5hilised ressursid - Kasutada local provider'eid - failis\u00fcsteemi ja kohalike ressursside haldamine - Hallata Terraform state - miks oluline ja kuidas kasutada - Rakendada p\u00f5hilisi parimaid praktikaid - turvaline ja korrektne kasutamine</p>"},{"location":"terraform_basics/lecture/#task-2-infrastructure-as-code-concepts","title":"Task 2: Infrastructure as Code Concepts","text":""},{"location":"terraform_basics/lecture/#tere-tulemast-infrastructure-as-code-maailma","title":"Tere tulemast Infrastructure as Code maailma!","text":"<p>Tere tagasi! Eelmisel n\u00e4dalal \u00f5ppisime Docker Compose'i ja orkestreerimist. T\u00e4na astume j\u00e4rgmisele tasemele - \u00f5pime infrastruktuuri kui koodi haldamist.</p>"},{"location":"terraform_basics/lecture/#mis-on-infrastructure-as-code-iac","title":"Mis on Infrastructure as Code (IaC)?","text":"<p>Infrastructure as Code t\u00e4hendab, et infrastruktuuri (serverid, v\u00f5rgud, andmebaasid) kirjeldatakse ja hallatakse koodi abil, mitte k\u00e4sitsi konfiguratsioonide abil.</p> <p>Kujutage ette seda nii: - Traditsiooniline l\u00e4henemine: K\u00e4sitsi serverite loomine ja konfiguratsioon - IaC l\u00e4henemine: Kood kirjeldab, mida soovid, ja t\u00f6\u00f6riist teeb selle sinu eest</p>"},{"location":"terraform_basics/lecture/#miks-iac-on-oluline","title":"Miks IaC on oluline?","text":"<ul> <li>Konsistentsus - sama infrastruktuur igal kord</li> <li>Kiirus - automatiseeritud juurutamine</li> <li>Turvalisus - v\u00e4hem inimeste vigu</li> <li>Skaleerimine - lihtne kopeerida ja muuta</li> </ul> <pre><code>graph TB\n    subgraph \"\ud83c\udfd7 Traditsiooniline l\u00e4henemine\"\n        Manual[\ud83d\udc64 K\u00e4sitsi konfiguratsioon]\n        Error[\u274c Inimeste vead]\n        Slow[\ud83d\udc0c Aeglane]\n        Inconsistent[ Ebakindel]\n    end\n\n    subgraph \"\ud83d\udcbb Infrastructure as Code\"\n        Code[\ud83d\udcdd Kood]\n        Version[ Versioneerimine]\n        Test[\ud83e\uddea Testimine]\n        Automate[\u26a1 Automatiseerimine]\n    end\n\n    Manual --&gt; Error\n    Manual --&gt; Slow\n    Manual --&gt; Inconsistent\n\n    Code --&gt; Version\n    Code --&gt; Test\n    Code --&gt; Automate\n\n    style Manual fill:#ff9999\n    style Code fill:#99ff99</code></pre> <p>Miks IaC on oluline? - Konsistentsus - sama infrastruktuur igal kord - Kiirus - automatiseeritud juurutamine - Turvalisus - v\u00e4hem inimeste vigu - Skaleerimine - lihtne kopeerida ja muuta - Dokumentatsioon - kood on dokumentatsioon</p>"},{"location":"terraform_basics/lecture/#reaalne-probleem-lihtne-web-rakendus","title":"Reaalne probleem: Lihtne web rakendus","text":"<p>Kujutage ette, et teil on lihtne web rakendus:</p> <pre><code>graph TB\n    subgraph \"\ud83c\udf10 Lihtne Web Rakendus\"\n        User[\ud83d\udc64 Kasutaja]\n        Web[ Web Server&lt;br/&gt;HTML, CSS, JavaScript]\n        DB[\ud83d\uddc4 Andmebaas&lt;br/&gt;PostgreSQL]\n    end\n\n    User --&gt; Web\n    Web --&gt; DB</code></pre> <p>Traditsiooniline l\u00e4henemine: 1. K\u00e4sitsi serveri loomine 2. K\u00e4sitsi andmebaasi seadistamine 3. K\u00e4sitsi \u00fchenduste konfigureerimine</p> <p>IaC l\u00e4henemine: 1. Kood kirjeldab, mida soovid 2. Terraform teeb selle sinu eest 3. Sama kood t\u00f6\u00f6tab igal kord</p>"},{"location":"terraform_basics/lecture/#terraform-vs-teised-iac-tooriistad","title":"Terraform vs teised IaC t\u00f6\u00f6riistad","text":"<p>Terraform on populaarne valik, aga pole ainus:</p> T\u00f6\u00f6riist Tugevused N\u00f5rkused Parim kasutamine Terraform Multi-cloud, declarative, state management K\u00f5rge \u00f5ppimisk\u00f5ver, HCL s\u00fcntaks Cloud infrastruktuur Ansible Agentless, YAML, idempotent Limited infrastructure Configuration management CloudFormation AWS native, JSON/YAML AWS only, complex syntax AWS environments (not covered) Pulumi General programming languages Newer, smaller community Complex logic <p>Miks Terraform? - Multi-cloud - t\u00f6\u00f6tab kohalikult, VirtualBox, Docker jne (meie kursusel kohalik) - Declarative - kirjeldad mida tahad, mitte kuidas - State management - teab, mis on juba olemas - Large community - palju dokumentatsiooni ja n\u00e4iteid</p>"},{"location":"terraform_basics/lecture/#task-3-hcl-syntax-ja-providers","title":"Task 3: HCL Syntax ja Providers","text":""},{"location":"terraform_basics/lecture/#hashicorp-configuration-language-hcl","title":"HashiCorp Configuration Language (HCL)","text":"<p>HCL on Terraform'i konfiguratsioonikeel. See on lihtne, loetav ja v\u00f5imas. Kujutage ette HCL-i kui \"infrastruktuuri kirjeldamise keelt\" - nagu HTML kirjeldab veebilehte, kirjeldab HCL teie infrastruktuuri.</p> <p>Miks HCL? - Loetav - sarnane JSON-iga, aga lihtsam - V\u00f5imas - toetab funktsioone ja loogikat - Turvaline - t\u00fc\u00fcbi kontroll ja valideerimine - Dokumenteeritud - kood ise on dokumentatsioon</p>"},{"location":"terraform_basics/lecture/#pohiline-hcl-suntaks","title":"P\u00f5hiline HCL s\u00fcntaks","text":"<p>HCL koosneb neljast p\u00f5hilistest ploki t\u00fc\u00fcbist, mis on nagu laused looduses. Iga plokk kirjeldab midagi konkreetset ja on oma s\u00fcntaksiga.</p>"},{"location":"terraform_basics/lecture/#resource-block-ressursi-loomine","title":"Resource Block - ressursi loomine","text":"<p>Resource on Terraform'i p\u00f5hiline \u00fcksus - see kirjeldab, mida soovid luua. Kujutage ette seda kui \"tellimust\" - sa \u00fctled Terraform'ile: \"loo mulle see ja see\".</p> <p>Resource'i s\u00fcntaks on: <code>resource \"provider_type\" \"local_name\" { konfiguratsioon }</code></p> <p>N\u00e4ide - Kohaliku faili loomine:</p> <pre><code>resource \"local_file\" \"web_config\" {\n  content  = \"Server configuration for web application\"\n  filename = \"web_config.txt\"\n\n  tags = {\n    Name = \"Web Config\"\n    Environment = \"Local\"\n    Project = \"Terraform Basics Lab\"\n    CreatedBy = \"Terraform\"\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>local_file</code> - kohaliku faili t\u00fc\u00fcp - <code>web_config</code> - kohalik nimi (saad seda kasutada viitamiseks) - <code>content</code> - faili sisu - <code>filename</code> - faili nimi ja asukoht - <code>tags</code> - siltid, mis aitavad identifitseerida ja organiseerida</p>"},{"location":"terraform_basics/lecture/#data-source-olemasoleva-info-lugemine","title":"Data Source - olemasoleva info lugemine","text":"<p>Data source ei loo midagi uut, vaid loeb olemasolevat infot. See on nagu \"k\u00fcsimus\" - sa k\u00fcsid: \"anna mulle see ja see info\".</p> <p>N\u00e4ide - Kohaliku faili lugemine:</p> <pre><code>data \"local_file\" \"config\" {\n  filename = \"config.txt\"\n}\n</code></pre> <p>Mida see teeb? - Loeb olemasoleva kohaliku faili sisu - <code>filename</code> - faili asukoht - Saad kasutada <code>data.local_file.config.content</code> muutujana</p>"},{"location":"terraform_basics/lecture/#variable-dunaamiline-vaartus","title":"Variable - d\u00fcnaamiline v\u00e4\u00e4rtus","text":"<p>Variable v\u00f5imaldab muuta v\u00e4\u00e4rtusi ilma koodi muutmata. See on nagu \"seadistus\" - sama kood, aga erinevad v\u00e4\u00e4rtused.</p> <p>N\u00e4ide - instance type muutuja:</p> <pre><code>variable \"file_name\" {\n  description = \"Local file name\"\n  type        = string\n  default     = \"config.txt\"\n\n  validation {\n    condition     = contains([\"t2.micro\", \"t2.small\", \"t2.medium\"], var.instance_type)\n    error_message = \"Instance type must be t2.micro, t2.small, or t2.medium.\"\n  }\n}\n</code></pre> <p>Mida see teeb? - <code>description</code> - kirjeldus, mida muutuja teeb - <code>type</code> - andmet\u00fc\u00fcp (string, number, bool, list, map) - <code>default</code> - vaikev\u00e4\u00e4rtus - <code>validation</code> - kontrollib, et v\u00e4\u00e4rtus oleks korrektne</p>"},{"location":"terraform_basics/lecture/#output-tagastatav-vaartus","title":"Output - tagastatav v\u00e4\u00e4rtus","text":"<p>Output v\u00f5imaldab n\u00e4ha loodud ressursside infot. See on nagu \"vastus\" - mida Terraform tagastab p\u00e4rast t\u00f6\u00f6 l\u00f5petamist.</p> <p>N\u00e4ide - serveri IP aadress:</p> <pre><code>output \"public_ip\" {\n  description = \"Public IP of the web server\"\n  value       = local_file.web_config.filename\n}\n</code></pre> <p>Mida see teeb? - <code>description</code> - kirjeldus, mida v\u00e4ljund tagastab - <code>value</code> - v\u00e4\u00e4rtus, mida tagastada (serveri avalik IP)</p>"},{"location":"terraform_basics/lecture/#data-types-andmetuubid","title":"Data types - andmet\u00fc\u00fcbid","text":"<p>Terraform toetab erinevaid andmet\u00fc\u00fcpe, nagu ka teised programmeerimiskeeled. Iga t\u00fc\u00fcp on m\u00f5eldud teatud kindlatele andmetele ja kasutamise juhtumitele.</p> <p>String - tekst String on tavaline tekst, mis on jutum\u00e4rkides. Kasutatakse nimede, kirjelduste ja tekstiliste v\u00e4\u00e4rtuste jaoks.</p> <pre><code>variable \"name\" {\n  type    = string\n  default = \"my-server\"\n}\n</code></pre> <p>Number - arv Number on arv ilma jutum\u00e4rkideta. Kasutatakse pordide, m\u00e4lu, ketta suuruse jaoks.</p> <pre><code>variable \"port\" {\n  type    = number\n  default = 80\n}\n</code></pre> <p>Boolean - t\u00f5ev\u00e4\u00e4rtus Boolean on kas <code>true</code> (t\u00f5ene) v\u00f5i <code>false</code> (v\u00e4\u00e4r). Kasutatakse s\u00e4tete sisse/v\u00e4lja l\u00fclitamiseks.</p> <pre><code>variable \"enable_monitoring\" {\n  type    = bool\n  default = true\n}\n</code></pre> <p>List - nimekiri List on j\u00e4rjestatud kogum v\u00e4\u00e4rtusi. Kasutatakse, kui sul on mitu sarnast v\u00e4\u00e4rtust.</p> <pre><code>variable \"subnets\" {\n  type    = list(string)\n  default = [\"subnet-123\", \"subnet-456\", \"subnet-789\"]\n}\n</code></pre> <p>Map - kaart (v\u00f5ti-v\u00e4\u00e4rtus paarid) Map on v\u00f5tmete ja v\u00e4\u00e4rtuste kogum. Kasutatakse, kui sul on struktureeritud andmeid.</p> <pre><code>variable \"tags\" {\n  type = map(string)\n  default = {\n    Environment = \"Production\"\n    Project     = \"WebApp\"\n    Owner       = \"DevOps Team\"\n  }\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#functions-ja-expressions-funktsioonid-ja-avaldised","title":"Functions ja expressions - funktsioonid ja avaldised","text":"<p>Terraform toetab funktsioone ja avaldisi, mis v\u00f5imaldavad teha loogilisi operatsioone ja andmete t\u00f6\u00f6tlemist. Need on nagu valemid Excelis - v\u00f5imaldavad teha arvutusi ja loogilisi otsuseid.</p> <p>String concatenation - stringide \u00fchendamine</p> <p>Locals v\u00f5imaldab defineerida v\u00e4\u00e4rtusi, mida saab korduvalt kasutada. See on nagu muutuja, mis on ainult selle faili sees.</p> <pre><code>locals {\n  full_name = \"${var.project_name}-${var.environment}\"\n  domain_name = \"${var.subdomain}.${var.domain}\"\n}\n</code></pre> <p>Conditional logic - tingimuslik loogika</p> <p>Ternary operator v\u00f5imaldab teha tingimuslikke otsuseid: <code>tingimus ? t\u00f5ene_v\u00e4\u00e4rtus : v\u00e4\u00e4r_v\u00e4\u00e4rtus</code></p> <pre><code>resource \"local_file\" \"config\" {\n  content = var.environment == \"production\" ? var.prod_config : var.dev_config\n  filename = var.config_filename\n  count = var.enable_config ? 1 : 0\n}\n</code></pre> <p>File reading - faili lugemine</p> <p><code>file()</code> funktsioon loeb faili sisu ja tagastab selle stringina. Kasutatakse skriptide ja konfiguratsioonide jaoks.</p> <pre><code>resource \"local_file\" \"config\" {\n  content = file(\"${path.module}/config_template.txt\")\n  filename = \"generated_config.txt\"\n}\n</code></pre> <p>Loops ja iteration - ts\u00fcklid ja kordused</p> <p><code>for_each</code> v\u00f5imaldab luua mitu ressurssi nimekirja p\u00f5hjal.</p> <pre><code>resource \"local_file\" \"configs\" {\n  for_each = toset(var.config_names)\n\n  content  = \"Configuration for ${each.key}\"\n  filename = \"${each.key}_config.txt\"\n\n  tags = {\n    Name = each.key\n    Index = each.value\n  }\n}\n</code></pre> <p>Mathematical operations - matemaatilised operatsioonid</p> <p>Terraform toetab matemaatilisi operatsioone ja funktsioone.</p> <pre><code>locals {\n  subnet_size = pow(2, 32 - var.cidr_block_size)\n  average_load = (var.min_instances + var.max_instances) / 2\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#terraform-providers","title":"Terraform Providers","text":"<p>Provider on plugin, mis v\u00f5imaldab Terraform'il suhelda erinevate teenustega. Kujutage ette provider'it kui \"t\u00f5lki\" - see t\u00f5lgib Terraform'i k\u00e4sud konkreetse teenuse (local, VirtualBox, Docker) keelde.</p> <p>Miks provider'id on olulised? - \u00dchtne s\u00fcntaks - sama HCL kood t\u00f6\u00f6tab erinevate teenustega - Spetsialiseeritud funktsioonid - iga provider toetab oma teenuse v\u00f5imalusi - Versioonihaldus - saad m\u00e4\u00e4rata, millist provider'i versiooni kasutada - Turvalisus - provider haldab autentimist ja autoriseerimist</p> <p>Local Provider n\u00e4ide:</p> <pre><code># ==========================================\n# TERRAFORM CONFIGURATION - Terraform'i seaded\n# ==========================================\n# See plokk m\u00e4\u00e4rab, milliseid provider'eid ja versioone kasutada\nterraform {\n  # M\u00e4\u00e4ra Terraform'i versioon (valikuline, aga soovituslik)\n  required_version = \"&gt;= 1.0\"\n\n  # M\u00e4\u00e4ra vajalikud provider'id ja nende versioonid\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"  # Provider'i allikas (HashiCorp'i registry)\n      version = \"~&gt; 2.0\"           # Versioon: 2.x.x\n    }\n  }\n}\n\n# ==========================================\n# LOCAL PROVIDER CONFIGURATION - kohalikud seaded\n# ==========================================\n# Kohalik provider ei vaja erilisi seadeid\n# T\u00f6\u00f6tab kohe kohalikus failis\u00fcsteemis\n\n# ==========================================\n# LOCAL RESOURCE - kohalik ressurss\n# ==========================================\n# N\u00fc\u00fcd saame luua kohalikke ressursse\nresource \"local_file\" \"web_config\" {\n  content  = \"Web server configuration for local development\"\n  filename = \"web_config.txt\"\n\n  tags = {\n    Name = \"Web Config\"           # Resurssi nimi\n    Purpose = \"Learning Terraform\" # Lisainfo\n  }\n}\n</code></pre> <p>Local Provider n\u00e4ide (lab jaoks):</p> <p>Local provider v\u00f5imaldab luua faile ja katalooge kohalikus failis\u00fcsteemis. See on suurep\u00e4rane \u00f5ppimiseks, kuna ei vaja cloud'i ega makse.</p> <pre><code># ==========================================\n# LOCAL PROVIDER - kohalik failis\u00fcsteem\n# ==========================================\n# Local provider t\u00f6\u00f6tab ainult kohalikus failis\u00fcsteemis\n# Ei vaja interneti \u00fchendust ega cloud'i teenuseid\nterraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"  # HashiCorp'i local provider\n      version = \"~&gt; 2.0\"           # Versioon 2.x.x\n    }\n  }\n}\n\n# ==========================================\n# CREATE A LOCAL FILE - kohaliku faili loomine\n# ==========================================\n# local_file loob v\u00f5i uuendab faili kohalikus failis\u00fcsteemis\nresource \"local_file\" \"hello\" {\n  content  = \"Hello, Terraform!\"  # Faili sisu\n  filename = \"${path.module}/hello.txt\"  # Faili nimi ja asukoht\n  # path.module on kaust, kus praegune .tf fail asub\n}\n\n# ==========================================\n# CREATE A DIRECTORY - kataloogi loomine\n# ==========================================\n# local_directory loob kataloogi, kui seda pole olemas\nresource \"local_directory\" \"example\" {\n  path = \"${path.module}/example_dir\"  # Kataloogi tee\n}\n\n# ==========================================\n# CREATE A CONFIGURATION FILE - konfiguratsioonifaili loomine\n# ==========================================\n# Looge JSON konfiguratsioonifail\nresource \"local_file\" \"config\" {\n  content = jsonencode({\n    project_name = \"Week 23 Lab\"\n    environment  = \"development\"\n    created_by   = \"Terraform\"\n    timestamp    = timestamp()\n    version      = \"1.0.0\"\n  })\n  filename = \"${path.module}/config.json\"\n}\n\n# ==========================================\n# CREATE A SCRIPT FILE - skriptifaili loomine\n# ==========================================\n# Looge Bash skript\nresource \"local_file\" \"script\" {\n  content = &lt;&lt;-EOF\n    #!/bin/bash\n    echo \"This script was created by Terraform\"\n    echo \"Project: Week 23 Lab\"\n    echo \"Timestamp: $(date)\"\n    echo \"Current directory: $(pwd)\"\n  EOF\n  filename = \"${path.module}/scripts/startup.sh\"\n}\n</code></pre> <p>Docker Provider n\u00e4ide:</p> <p>Docker provider v\u00f5imaldab hallata Docker container'eid ja image'e Terraform'i abil. See on kasulik, kui soovid hallata container'eid kui infrastruktuuri osa.</p> <pre><code># ==========================================\n# DOCKER PROVIDER - Docker container'ite haldamine\n# ==========================================\n# Docker provider v\u00f5imaldab hallata Docker container'eid Terraform'i abil\n# See on kasulik, kui soovid hallata container'eid kui infrastruktuuri osa\nterraform {\n  required_providers {\n    docker = {\n      source  = \"kreuzwerker/docker\"  # Kolmanda osapoole Docker provider\n      version = \"~&gt; 3.0\"              # Versioon 3.x.x\n    }\n  }\n}\n\n# ==========================================\n# DOCKER PROVIDER CONFIGURATION - Docker seaded\n# ==========================================\n# M\u00e4\u00e4rab, kuidas \u00fchenduda Docker daemon'iga\nprovider \"docker\" {\n  host = \"unix:///var/run/docker.sock\"  # Docker socket'i asukoht Linuxis\n  # Windows: \"npipe:////./pipe/docker_engine\"\n  # Remote: \"tcp://docker-host:2376\"\n}\n\n# ==========================================\n# PULL DOCKER IMAGE - Docker image'i allalaadimine\n# ==========================================\n# docker_image allalaadib image'i Docker Hub'ist v\u00f5i muust registry'st\nresource \"docker_image\" \"nginx\" {\n  name = \"nginx:latest\"  # Image'i nimi ja tag\n  # Alternatiivid:\n  # name = \"nginx:1.21\"     # Konkreetne versioon\n  # name = \"my-registry.com/nginx:latest\"  # Privaatne registry\n}\n\n# ==========================================\n# CREATE DOCKER CONTAINER - Docker container'i loomine\n# ==========================================\n# docker_container loob ja haldab Docker container'eid\nresource \"docker_container\" \"web\" {\n  name  = \"web-server\"                    # Container'i nimi\n  image = docker_image.nginx.image_id     # Kasuta allalaaditud image'i\n\n  # Port mapping - \u00fchenda container'i port 80 host'i portiga 8080\n  ports {\n    internal = 80    # Container'i sees olev port\n    external = 8080  # Host'i port (http://localhost:8080)\n  }\n\n  # Keskkonnamuutujad\n  env = [\n    \"NGINX_HOST=localhost\",\n    \"NGINX_PORT=80\"\n  ]\n\n  # Volume mounting - \u00fchenda host'i kaust container'i kausta\n  volumes {\n    container_path = \"/usr/share/nginx/html\"  # Container'i kaust\n    host_path      = \"${path.module}/web\"     # Host'i kaust\n    read_only      = false                    # Lugemine ja kirjutamine\n  }\n\n  # Container'i k\u00e4ivitamise k\u00e4sud\n  command = [\"nginx\", \"-g\", \"daemon off;\"]\n\n  # Restart policy\n  restart = \"unless-stopped\"  # Taask\u00e4ivita, kui pole k\u00e4sitsi peatatud\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#provider-konfiguratsiooni-best-practices","title":"Provider konfiguratsiooni best practices","text":"<p>Provider'ite konfiguratsioon on kriitiline Terraform'i stabiilsuse ja turvalisuse jaoks. J\u00e4rgige neid best practices, et v\u00e4ltida probleeme.</p> <p>1. Versioonide fikseerimine - oluline stabiilsuse jaoks:</p> <pre><code># ==========================================\n# VERSION PINNING - versioonide fikseerimine\n# ==========================================\n# ALATI fikseeri provider'ite versioonid, et v\u00e4ltida ootamatuid muudatusi\nterraform {\n  required_providers {\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"  # 2.x.x, aga mitte 3.0.0\n      # ~&gt; t\u00e4hendab \"v\u00e4hemalt 2.0, aga v\u00e4hem kui 3.0\"\n      # See v\u00f5imaldab saada bug fix'e, aga mitte breaking change'e\n    }\n\n    # Mitu provider'it\n    local = {\n      source  = \"hashicorp/local\"\n      version = \"~&gt; 2.0\"\n    }\n\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~&gt; 3.0\"\n    }\n  }\n}\n</code></pre> <p>2. Keskkonnamuutujad - turvaline autentimine:</p> <pre><code># ==========================================\n# ENVIRONMENT VARIABLES - keskkonnamuutujad\n# ==========================================\n# \u00c4RA kunagi kirjuta access key'e otse koodi!\n# Kasuta keskkonnamuutujaid v\u00f5i kohalikke seadeid\n\n# Local provider credentials (ei vaja)\n# Kohalik provider t\u00f6\u00f6tab kohe, ei vaja erilisi seadeid\n\n# V\u00f5i kasuta keskkonnamuutujaid\nexport TF_VAR_project_name=\"my-project\"\nexport TF_VAR_environment=\"development\"\n</code></pre> <p>3. Multiple providers - erinevate keskkondade haldamine:</p> <pre><code># ==========================================\n# MULTIPLE PROVIDERS - mitu provider'it\n# ==========================================\n# Kasutage alias'e, kui teil on mitu sama t\u00fc\u00fcpi provider'it\n# N\u00e4iteks: erinevad kohalikud keskkonnad v\u00f5i projektid\n\n# Production environment\nprovider \"local\" {\n  alias = \"prod\"         # Unikaalne nimi\n}\n\n# Development environment  \nprovider \"local\" {\n  alias = \"dev\"          # Unikaalne nimi\n}\n\n# Kasuta konkreetset provider'it\nresource \"local_file\" \"prod_config\" {\n  provider = local.prod  # M\u00e4\u00e4ra, millist provider'it kasutada\n  content  = \"Production configuration\"\n  filename = \"prod_config.txt\"\n\n  tags = {\n    Environment = \"Production\"\n    ManagedBy   = \"Terraform\"\n  }\n}\n\nresource \"local_file\" \"dev_config\" {\n  provider = local.dev   # M\u00e4\u00e4ra, millist provider'it kasutada\n  content  = \"Development configuration\"\n  filename = \"dev_config.txt\"\n\n  tags = {\n    Environment = \"Development\"\n    ManagedBy   = \"Terraform\"\n  }\n}\n</code></pre> <p>4. Provider konfiguratsiooni valideerimine:</p> <pre><code># ==========================================\n# PROVIDER VALIDATION - provider'i kontroll\n# ==========================================\n# Lisage valideerimine, et kontrollida provider'i seadeid\n\nprovider \"local\" {\n  # Kohalik provider ei vaja valideerimist\n  # T\u00f6\u00f6tab k\u00f5ikides keskkondades\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#resources-ja-data-sources","title":"Resources ja Data Sources","text":""},{"location":"terraform_basics/lecture/#terraform-resources","title":"Terraform Resources","text":"<p>Resource on Terraform'i p\u00f5hiline \u00fcksus - see kirjeldab, mida soovid luua, muuta v\u00f5i kustutada.</p>"},{"location":"terraform_basics/lecture/#pohilised-resource-tuubid","title":"P\u00f5hilised resource t\u00fc\u00fcbid","text":"<p>1. Local resources:</p> <pre><code># Local File\nresource \"local_file\" \"web_config\" {\n  content  = \"Web server configuration\"\n  filename = var.config_filename\n\n  # Local configuration dependencies\ncontent = data.local_file.template.content\n\n  user_data = &lt;&lt;-EOF\n              #!/bin/bash\n              apt-get update\n              apt-get install -y nginx\n              systemctl start nginx\n              EOF\n\n  tags = {\n    Name = \"Web Server\"\n  }\n}\n\n# Auto Scaling Group (Local equivalent)\nresource \"local_file\" \"web_config\" {\n  content  = \"Web application configuration with scaling settings\"\n  filename = \"web_config.txt\"\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n</code></pre> <p>2. Local configuration resources:</p> <pre><code># Main configuration directory\nresource \"local_directory\" \"main\" {\n  path = \"./config\"\n}\n\n# Configuration file\nresource \"local_file\" \"config\" {\n  content  = \"Main configuration file\"\n  filename = \"${local_directory.main.path}/main.conf\"\n\n  tags = {\n    Name = \"Main Config\"\n  }\n}\n\n# Template file\nresource \"local_file\" \"template\" {\n  content  = \"Configuration template\"\n  filename = \"${local_directory.main.path}/template.conf\"\n\n  tags = {\n    Name = \"Config Template\"\n  }\n}\n\n# Settings file\nresource \"local_file\" \"settings\" {\n  content  = \"Application settings\"\n  filename = \"${local_directory.main.path}/settings.conf\"\n\n  tags = {\n    Name = \"Settings\"\n  }\n}\n</code></pre> <p>3. Local storage resources:</p> <pre><code># Data directory\nresource \"local_directory\" \"data\" {\n  path = \"./data\"\n}\n\n# Random ID for unique names\nresource \"random_id\" \"file_suffix\" {\n  byte_length = 4\n}\n\n# Database configuration file\nresource \"local_file\" \"db_config\" {\n  content  = \"Database configuration for local development\"\n  filename = \"${local_directory.data.path}/database.conf\"\n\n  tags = {\n    Name = \"Database Config\"\n  }\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#data-sources","title":"Data Sources","text":"<p>Data source v\u00f5imaldab lugeda olemasolevat infot, mida saab kasutada resource'ide konfiguratsioonis.</p> <p>1. Local data sources:</p> <pre><code># File lookup\ndata \"local_file\" \"template\" {\n  filename = \"template.txt\"\n}\n\n  filter {\n    name   = \"virtualization-type\"\n    values = [\"hvm\"]\n  }\n}\n\n# Availability zones\ndata \"local_file\" \"available_config\" {\n  filename = \"available_config.txt\"\n}\n\n# Local configuration data\ndata \"local_file\" \"default_config\" {\n  filename = \"default_config.txt\"\n}\n\n# Configuration files\ndata \"local_file\" \"configs\" {\n  filename = \"configs.txt\"\n}\n</code></pre> <p>2. Local data sources:</p> <pre><code># File content\ndata \"local_file\" \"config\" {\n  filename = \"${path.module}/config.json\"\n}\n\n# Directory listing\ndata \"local_file\" \"script\" {\n  filename = \"${path.module}/scripts/startup.sh\"\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#resource-dependencies","title":"Resource dependencies","text":"<p>Terraform automaatselt tuvastab s\u00f5ltuvused, aga m\u00f5nikord pead neid selges\u00f5naliselt m\u00e4\u00e4rama:</p> <pre><code># Implicit dependency (recommended)\nresource \"local_file\" \"web_config\" {\n  content  = data.local_file.template.content\n  filename = \"web_config.txt\"\n}\n\n# Explicit dependency\nresource \"local_file\" \"web_config\" {\n  content  = data.local_file.template.content\n  filename = \"web_config.txt\"\n\n  depends_on = [local_directory.config, local_file.template]\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#resource-lifecycle","title":"Resource lifecycle","text":"<p>Lifecycle rules v\u00f5imaldavad kontrollida, kuidas Terraform hallab ressurssi:</p> <pre><code>resource \"local_file\" \"web_config\" {\n  content  = data.local_file.template.content\n  filename = \"web_config.txt\"\n\n  lifecycle {\n    # Prevent recreation when content changes\n    ignore_changes = [content]\n\n    # Create new resource before destroying old\n    create_before_destroy = true\n\n    # Prevent accidental deletion\n    prevent_destroy = false\n  }\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#task-4-state-management","title":"Task 4: State Management","text":""},{"location":"terraform_basics/lecture/#mis-on-terraform-state","title":"Mis on Terraform State?","text":"<p>Terraform state on fail, mis sisaldab teavet teie infrastruktuuri kohta - mis ressursid on olemas, nende ID-d, atribuudid ja s\u00f5ltuvused.</p>"},{"location":"terraform_basics/lecture/#state-faili-roll","title":"State faili roll","text":"<pre><code>graph TB\n    subgraph \"Terraform Workflow\"\n        Code[\ud83d\udcdd Terraform Code]\n        State[\ud83d\uddc4 State File]\n        Cloud[\u2601 Cloud Infrastructure]\n    end\n\n    Code --&gt;|terraform plan| State\n    State --&gt;|terraform apply| Cloud\n    Cloud --&gt;|terraform refresh| State\n\n    style State fill:#ffcc99\n    style Cloud fill:#99ccff</code></pre> <p>State fail sisaldab: - Resource metadata - ID-d, atribuudid, s\u00f5ltuvused - Current state - mis on praegu olemas - Desired state - mis peaks olema - Dependencies - milline j\u00e4rjekord</p>"},{"location":"terraform_basics/lecture/#state-faili-naide","title":"State faili n\u00e4ide","text":"<pre><code>{\n  \"version\": 4,\n  \"terraform_version\": \"1.5.0\",\n  \"serial\": 1,\n  \"lineage\": \"abc123\",\n  \"outputs\": {\n    \"public_ip\": {\n      \"value\": \"52.23.45.67\",\n      \"type\": \"string\"\n    }\n  },\n  \"resources\": [\n    {\n      \"mode\": \"managed\",\n      \"type\": \"local_file\",\n      \"name\": \"web_server\",\n      \"provider\": \"provider[\\\"registry.terraform.io/hashicorp/local\\\"]\",\n      \"instances\": [\n        {\n          \"schema_version\": 1,\n          \"attributes\": {\n            \"id\": \"i-1234567890abcdef0\",\n            \"instance_type\": \"t2.micro\",\n            \"public_ip\": \"52.23.45.67\",\n            \"tags\": {\n              \"Name\": \"Web Server\"\n            }\n          }\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#state-management-probleemid","title":"State management probleemid","text":"<p>1. Local state faili probleemid:</p> <pre><code># State fail on kohalikus failis\u00fcsteemis\nterraform.tfstate\n\n# Probleemid:\n# - Ei t\u00f6\u00f6ta meeskonnaga\n# - Ei ole backup'i\n# - Ei ole concurrent access\n# - Ei ole versioning\n</code></pre> <p>2. Remote state lahendused:</p> <pre><code># Terraform Cloud\nterraform {\n  cloud {\n    organization = \"my-org\"\n    workspaces {\n      name = \"web-app\"\n    }\n  }\n}\n\n# Local backend\nterraform {\n  backend \"local\" {\n    path = \"terraform.tfstate\"\n  }\n}\n\n# Azure Storage backend\nterraform {\n  backend \"azurerm\" {\n    resource_group_name  = \"terraform-rg\"\n    storage_account_name = \"tfstate12345\"\n    container_name       = \"tfstate\"\n    key                  = \"web-app.terraform.tfstate\"\n  }\n}\n</code></pre>"},{"location":"terraform_basics/lecture/#state-management-best-practices","title":"State management best practices","text":"<p>1. Remote state kasutamine:</p> <pre><code># Local backend konfiguratsioon\nterraform {\n  backend \"local\" {\n    path = \"terraform.tfstate\"\n  }\n}\n</code></pre> <p>2. State locking:</p> <pre><code># Local file for state locking\nresource \"local_file\" \"terraform_locks\" {\n  content  = \"State lock file\"\n  filename = \"terraform.lock\"\n}\n</code></pre> <p>3. State separation:</p> <pre><code># Erinevad keskkonnad erinevates state failides\nenvironments/\n\u251c\u2500\u2500 dev/\n\u2502   \u2514\u2500\u2500 terraform.tfstate\n\u251c\u2500\u2500 staging/\n\u2502   \u2514\u2500\u2500 terraform.tfstate\n\u2514\u2500\u2500 prod/\n    \u2514\u2500\u2500 terraform.tfstate\n</code></pre> <p>4. State import:</p> <pre><code># Import existing resources\nterraform import local_file.web_config web_config.txt\n\n# Import with configuration\nterraform import 'local_file.web_config[0]' web_config.txt\n</code></pre>"},{"location":"terraform_basics/lecture/#state-security","title":"State security","text":"<p>1. Encryption:</p> <pre><code>terraform {\n  backend \"local\" {\n    path = \"terraform.tfstate\"\n  }\n}\n</code></pre> <p>2. Access control:</p> <pre><code># Local file access policy\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"read\",\n\"write\",\n\"delete\"\n      ],\n      \"Resource\": \"local://terraform.tfstate\"\n    }\n  ]\n}\n</code></pre> <p>3. State backup:</p> <pre><code># Regular backups\ncp terraform.tfstate backups/$(date +%Y%m%d)/terraform.tfstate\n</code></pre>"},{"location":"terraform_basics/lecture/#state-troubleshooting","title":"State troubleshooting","text":"<p>1. State inconsistencies:</p> <pre><code># Refresh state from cloud\nterraform refresh\n\n# Plan to see differences\nterraform plan\n\n# Force update if needed\nterraform apply -refresh=false\n</code></pre> <p>2. State corruption:</p> <pre><code># Backup current state\ncp terraform.tfstate terraform.tfstate.backup\n\n# Remove from state (careful!)\nterraform state rm local_file.web_config\n\n# Re-import if needed\nterraform import local_file.web_config web_config.txt\n</code></pre> <p>3. State inspection:</p> <pre><code># List all resources in state\nterraform state list\n\n# Show specific resource\nterraform state show local_file.web_config\n\n# Move resource in state\nterraform state mv local_file.old_name local_file.new_name\n</code></pre>"},{"location":"terraform_basics/lecture/#kokkuvote","title":"Kokkuv\u00f5te","text":"<p>T\u00e4na \u00f5ppisime:</p> <p>Infrastructure as Code m\u00f5istet - miks ja kuidas kasutada HCL s\u00fcntaksit - Terraform'i konfiguratsioonikeel Providers ja resources - erinevate teenuste kasutamine State management - infrastruktuuri oleku haldamine  </p> <p>J\u00e4rgmise n\u00e4dala teemad: - Terraform praktika lab'is - Multi-environment infrastruktuur - Advanced Terraform features</p> <p>Kas teil on k\u00fcsimusi? \ud83e\udd14</p>"},{"location":"terraform_basics/lecture/#lisaressursid","title":"Lisaressursid","text":"<ul> <li>Terraform Documentation: https://www.terraform.io/docs</li> <li>HCL Language: https://www.terraform.io/docs/language</li> <li>Local Provider: https://registry.terraform.io/providers/hashicorp/local/latest/docs</li> <li>Terraform Best Practices: https://www.terraform.io/docs/cloud/guides/recommended-practices</li> </ul>"}]}